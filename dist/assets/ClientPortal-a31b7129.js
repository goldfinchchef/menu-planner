import{r as w,b as Q,j as e}from"./index-4baa199c.js";import{c as G,C as H,A as U,a as A,T as X,P as $,M as Z}from"./truck-139681aa.js";import{C as R,P as ee}from"./pen-line-1aa29ab1.js";import{E as T,U as B,C as V,R as se}from"./utensils-0f69ef6f.js";import{a as M,C as te}from"./clock-291e28e6.js";import{U as ae}from"./user-33c7d36d.js";const re=G("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),le=G("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),Y="goldfinchChefData";function ne(){const[s,l]=w.useState([]),[g,r]=w.useState([]),[o,u]=w.useState([]),[h,y]=w.useState([]),[a,p]=w.useState([]),[f,x]=w.useState({}),[E,I]=w.useState({}),[z,b]=w.useState([]),[P,C]=w.useState(!1);w.useEffect(()=>{const c=()=>{const m=localStorage.getItem(Y);if(m)try{const i=JSON.parse(m);i.clients&&l(i.clients),i.menuItems&&r(i.menuItems),i.readyForDelivery&&u(i.readyForDelivery),i.deliveryLog&&y(i.deliveryLog),i.orderHistory&&p(i.orderHistory),i.recipes&&x(i.recipes),i.clientPortalData&&I(i.clientPortalData),i.blockedDates&&b(i.blockedDates)}catch(i){console.error("Error loading saved data:",i)}C(!0)};c();const t=m=>{m.key===Y&&c()};return window.addEventListener("storage",t),()=>window.removeEventListener("storage",t)},[]);const k=w.useCallback(c=>{const t=localStorage.getItem(Y);let m={};if(t)try{m=JSON.parse(t)}catch(_){console.error("Error parsing saved data:",_)}const i={...m,...c,lastSaved:new Date().toISOString()};localStorage.setItem(Y,JSON.stringify(i))},[]),L=w.useCallback((c,t)=>{const m={...E,[c]:{...E[c],...t}};I(m),k({clientPortalData:m})},[E,k]),O=c=>c?c.toLowerCase().replace(/\s+/g,"-"):"",n=w.useCallback(c=>{const t=(c==null?void 0:c.toLowerCase())||"";return s.find(m=>!!(m.id===c||m.displayName&&O(m.displayName)===t||O(m.name)===t))},[s]),D=w.useCallback((c,t)=>g.filter(m=>m.clientName===c&&m.approved===!0&&(!t||m.date===t)),[g]),j=w.useCallback((c,t)=>o.filter(m=>m.clientName===c&&(!t||m.date===t)),[o]),N=w.useCallback((c,t)=>h.find(m=>m.clientName===c&&m.date===t),[h]),d=w.useCallback(c=>a.filter(m=>m.clientName===c).map(m=>{const i=h.find(_=>_.clientName===c&&_.date===m.date);return{...m,completedAt:(i==null?void 0:i.completedAt)||m.completedAt,handoffType:(i==null?void 0:i.handoffType)||m.handoffType,photoData:(i==null?void 0:i.photoData)||m.photoData}}).sort((m,i)=>new Date(i.date)-new Date(m.date)),[a,h]),v=w.useCallback(c=>{var t;for(const m of Object.keys(f)){const i=(t=f[m])==null?void 0:t.find(_=>_.name===c);if(i)return i}return null},[f]);return{clients:s,menuItems:g,readyForDelivery:o,deliveryLog:h,orderHistory:a,recipes:f,clientPortalData:E,blockedDates:z,isLoaded:P,getClientById:n,getClientMenuItems:D,getClientReadyOrders:j,getClientDeliveryStatus:N,getClientHistory:d,getRecipeName:v,updateClientPortalData:L}}const S={PICK_DATES:"pick_dates",PICK_DISHES:"pick_dishes",NEEDS_PAYMENT:"needs_payment",MENU_READY:"menu_ready",DELIVERY_DAY:"delivery_day",DELIVERED:"delivered",OVERDUE:"overdue",PAUSED:"paused",NO_UPCOMING:"no_upcoming"};function W(){const s=new Date,g=(6-s.getDay()+7)%7,r=new Date(s);return r.setDate(s.getDate()+g),r.setHours(23,59,59,999),r}function q(s){if(!s)return!1;const l=new Date,g=new Date(s+"T12:00:00"),r=g.getDay(),o=r===0?1:r===6?0:r+1,u=new Date(g);return u.setDate(g.getDate()-o),u.setHours(23,59,59,999),l<u}function Oe(){var O;const{id:s}=Q(),{isLoaded:l,getClientById:g,getClientMenuItems:r,getClientReadyOrders:o,getClientDeliveryStatus:u,getClientHistory:h,clientPortalData:y,blockedDates:a,recipes:p,updateClientPortalData:f}=ne(),[x,E]=w.useState([]),[I,z]=w.useState(!1),b=w.useMemo(()=>g(s),[s,g]),P=new Date().toISOString().split("T")[0],k=(()=>{var v,c;if(!b)return null;if(b.status==="paused")return S.PAUSED;const n=y[b.name]||{};if(n.paymentOverdue)return S.OVERDUE;if(n.pendingPayment&&b.honeyBookLink)return S.NEEDS_PAYMENT;if(u(b.name,P))return S.DELIVERED;if(o(b.name,P).length>0)return S.DELIVERY_DAY;const N=r(b.name).filter(t=>t.date>=P),d=o(b.name).filter(t=>t.date>=P);return N.length>0||d.length>0?S.MENU_READY:n.needsDateSelection?S.PICK_DATES:(b.chefChoice===!1||b.chefChoice==="false")&&(((v=b.deliveryDates)==null?void 0:v.length)>0||((c=n.selectedDates)==null?void 0:c.length)>0)?S.MENU_READY:S.NO_UPCOMING})();if(!l)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#f9f9ed"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(H,{size:48,className:"mx-auto mb-4 animate-pulse",style:{color:"#ffd700"}}),e.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(!b)return e.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:"#f9f9ed"},children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center max-w-md",children:[e.jsx(U,{size:48,className:"mx-auto mb-4 text-amber-500"}),e.jsx("h1",{className:"text-xl font-bold mb-2",style:{color:"#3d59ab"},children:"Page Not Found"}),e.jsx("p",{className:"text-gray-600",children:"We couldn't find your client portal. Please check the link and try again."})]})});const L=b.displayName||b.name;return e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#f9f9ed"},children:[e.jsx("header",{className:"text-white p-4",style:{backgroundColor:"#3d59ab"},children:e.jsxs("div",{className:"max-w-lg mx-auto flex items-center gap-3",children:[e.jsx(H,{size:32,style:{color:"#ffd700"}}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:"Goldfinch Chef"}),e.jsx("p",{className:"text-sm opacity-80",children:"Client Portal"})]})]})}),e.jsxs("div",{className:"max-w-lg mx-auto p-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-4",children:[e.jsxs("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:["Hello, ",L.split(" ")[0],"!"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:oe(k,b)}),b.honeyBookLink&&!((O=y[b.name])!=null&&O.invoicePaid)&&e.jsxs("a",{href:b.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 mt-4 px-5 py-2 rounded-lg text-white font-medium text-sm",style:{backgroundColor:"#d9a87a"},children:[e.jsx(R,{size:18}),"View & Pay Invoice",e.jsx(T,{size:14})]})]}),k===S.DELIVERY_DAY&&e.jsx(De,{client:b,getClientReadyOrders:o,getClientDeliveryStatus:u,today:P}),k===S.OVERDUE&&e.jsx(he,{client:b}),k===S.NEEDS_PAYMENT&&e.jsx(fe,{client:b}),k===S.PICK_DATES&&e.jsx(ge,{client:b,selectedDates:x,setSelectedDates:E,blockedDates:a,onSubmit:n=>{f(b.name,{selectedDates:x,dateSelectionNotes:n,needsDateSelection:!1,dateSelectionSubmittedAt:new Date().toISOString()})}}),k===S.PICK_DISHES&&e.jsx(be,{client:b,recipes:p,clientPortalData:y,onSubmit:n=>{f(b.name,{ingredientPicks:{...n,submittedAt:new Date().toISOString()}})}}),k===S.PAUSED&&e.jsx(xe,{client:b}),(k===S.MENU_READY||k===S.DELIVERED||k===S.NO_UPCOMING)&&e.jsxs(e.Fragment,{children:[e.jsx(de,{client:b,clientPortalData:y,onEditDates:()=>z(!0),recipes:p,updateClientPortalData:f}),I&&e.jsx(ue,{client:b,blockedDates:a,clientPortalData:y,onSave:n=>{f(b.name,{selectedDates:n,dateSelectionSubmittedAt:new Date().toISOString()}),z(!1)},onClose:()=>z(!1)})]}),k===S.MENU_READY&&e.jsx(pe,{client:b,getClientMenuItems:r,getClientReadyOrders:o,today:P,clientPortalData:y,updateClientPortalData:f}),k===S.DELIVERED&&e.jsx(we,{client:b,getClientDeliveryStatus:u,getClientReadyOrders:o,getClientHistory:h,today:P}),k===S.NO_UPCOMING&&e.jsx(ke,{client:b,getClientHistory:h}),(k===S.MENU_READY||k===S.DELIVERED||k===S.NO_UPCOMING)&&e.jsx("div",{className:"mt-6",children:e.jsx(me,{client:b,getClientHistory:h})})]}),e.jsx("footer",{className:"text-center p-4 text-gray-500 text-sm",children:e.jsx("p",{children:"Questions? Contact us at hello@goldfinchchef.com"})})]})}function oe(s,l){switch(s){case S.PAUSED:return"Your account is currently paused.";case S.OVERDUE:return"Your account needs attention.";case S.NEEDS_PAYMENT:return"Please complete your payment to continue.";case S.PICK_DATES:return"Let's schedule your upcoming deliveries.";case S.PICK_DISHES:return"Pick your protein, veggie, and starch dishes for this week!";case S.MENU_READY:return(l==null?void 0:l.chefChoice)===!1||(l==null?void 0:l.chefChoice)==="false"?"Pick your dishes for each delivery below!":"Your menu is ready! Here's what's coming.";case S.DELIVERY_DAY:return"Your delivery is on the way!";case S.DELIVERED:return"Your delivery has arrived!";default:return"Welcome to your client portal."}}function ie({client:s}){const r=(()=>{if(s.status==="paused")return{status:"paused",label:"Account Paused",color:"#dc2626",bgColor:"#fef2f2",borderColor:"#fecaca"};if(s.invoicePaid)return{status:"paid",label:"Paid",color:"#22c55e",bgColor:"#dcfce7",borderColor:"#bbf7d0"};if(!s.billDueDate)return{status:"none",label:"No invoice",color:"#6b7280",bgColor:"#f9fafb",borderColor:"#e5e7eb"};const u=new Date;u.setHours(0,0,0,0);const y=new Date(s.billDueDate+"T12:00:00")-u,a=Math.ceil(y/(1e3*60*60*24));if(a>7)return{status:"not_yet_due",label:"Not Yet Due",color:"#3d59ab",bgColor:"#eff6ff",borderColor:"#bfdbfe",daysUntilDue:a};if(a>0)return{status:"due_soon",label:`Due in ${a} day${a!==1?"s":""}`,color:"#f59e0b",bgColor:"#fffbeb",borderColor:"#fde68a",daysUntilDue:a};if(a===0)return{status:"due_today",label:"Due Today",color:"#f59e0b",bgColor:"#fffbeb",borderColor:"#fde68a"};{const p=Math.abs(a),f=7-p;return f>0?{status:"grace_period",label:"Overdue",color:"#dc2626",bgColor:"#fef2f2",borderColor:"#fecaca",daysOverdue:p,daysRemaining:f}:{status:"overdue",label:"Overdue",color:"#dc2626",bgColor:"#fef2f2",borderColor:"#fecaca",daysOverdue:p}}})(),o=u=>u?new Date(u+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"";return r.status==="none"&&!s.honeyBookLink?null:e.jsxs("div",{className:"mb-4 p-4 rounded-lg border-2",style:{backgroundColor:r.bgColor,borderColor:r.borderColor},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(R,{size:18,style:{color:r.color}}),e.jsx("h4",{className:"font-bold",style:{color:r.color},children:"Billing"})]}),r.status==="paused"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{size:18,className:"text-red-600"}),e.jsx("p",{className:"text-red-700 font-medium",children:"Your account is paused"})]}),e.jsx("p",{className:"text-sm text-red-600",children:"Please pay your outstanding invoice to reactivate your subscription and resume deliveries."}),s.honeyBookLink&&e.jsxs("a",{href:s.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:"#dc2626"},children:[e.jsx(R,{size:16}),"Pay to Reactivate",e.jsx(T,{size:14})]})]}),r.status==="grace_period"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 rounded-lg bg-red-100 border border-red-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(U,{size:18,className:"text-red-600"}),e.jsx("p",{className:"text-red-700 font-medium",children:"Payment Overdue - Grace Period"})]}),e.jsxs("p",{className:"text-sm text-red-600",children:["Your invoice is ",r.daysOverdue," day",r.daysOverdue!==1?"s":""," overdue. You have ",e.jsxs("strong",{children:[r.daysRemaining," day",r.daysRemaining!==1?"s":""]})," remaining before your account is paused."]})]}),s.billDueDate&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Due date: ",e.jsx("span",{className:"font-medium",children:o(s.billDueDate)})]}),s.honeyBookLink&&e.jsxs("a",{href:s.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:"#dc2626"},children:[e.jsx(R,{size:16}),"Pay Now",e.jsx(T,{size:14})]})]}),r.status==="overdue"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{size:18,className:"text-red-600"}),e.jsxs("p",{className:"text-red-700 font-medium",children:["Invoice overdue (",r.daysOverdue," day",r.daysOverdue!==1?"s":"",")"]})]}),s.billDueDate&&e.jsxs("p",{className:"text-sm text-gray-600",children:["Due date: ",e.jsx("span",{className:"font-medium",children:o(s.billDueDate)})]}),s.honeyBookLink&&e.jsxs("a",{href:s.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:"#dc2626"},children:[e.jsx(R,{size:16}),"Pay Now",e.jsx(T,{size:14})]})]}),(r.status==="due_today"||r.status==="due_soon")&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Invoice Status"}),e.jsx("p",{className:"font-medium",style:{color:r.color},children:r.label})]}),s.billDueDate&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Due Date"}),e.jsx("p",{className:"font-medium",children:o(s.billDueDate)})]})]}),s.honeyBookLink&&e.jsxs("a",{href:s.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:"#f59e0b"},children:[e.jsx(R,{size:16}),"View & Pay Invoice",e.jsx(T,{size:14})]})]}),r.status==="not_yet_due"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Invoice Status"}),e.jsx("p",{className:"font-medium",style:{color:r.color},children:r.label})]}),s.billDueDate&&e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Due Date"}),e.jsx("p",{className:"font-medium",children:o(s.billDueDate)})]})]}),s.honeyBookLink&&e.jsxs("a",{href:s.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg border-2 font-medium",style:{borderColor:"#3d59ab",color:"#3d59ab"},children:[e.jsx(R,{size:16}),"View & Pay Invoice",e.jsx(T,{size:14})]})]}),r.status==="paid"&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{size:18,className:"text-green-600"}),e.jsx("p",{className:"text-green-700 font-medium",children:"Invoice Paid - Thank you!"})]})]})}function de({client:s,onEditDates:l,clientPortalData:g={},recipes:r,updateClientPortalData:o}){var O;const[u,h]=w.useState(null),y=s.portions||s.persons||1,a=s.mealsPerWeek||0,p=s.frequency||"weekly",f=((O=g[s.name])==null?void 0:O.selectedDates)||[],x=f.length>0?f:s.deliveryDates||[],E=n=>n?new Date(n+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",I=W(),z=x.some(n=>q(n)),b=s.chefChoice===!1||s.chefChoice==="false",P=n=>{var D,j;return(j=(D=g[s.name])==null?void 0:D.dateIngredientPicks)==null?void 0:j[n]},C=n=>{const D=new Date(n+"T12:00:00"),j=D.getDay(),N=j===0?1:j===6?0:j+1,d=new Date(D);return d.setDate(D.getDate()-N),d.setHours(23,59,59,999),d},k=n=>new Date>C(n),L=(n,D)=>{var N;const j=((N=g[s.name])==null?void 0:N.dateIngredientPicks)||{};o(s.name,{dateIngredientPicks:{...j,[n]:{...D,submittedAt:new Date().toISOString()}}}),h(null)};return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-bold flex items-center gap-2",style:{color:"#3d59ab"},children:[e.jsx(B,{size:20}),"Your Subscription"]}),z&&l&&e.jsxs("button",{onClick:l,className:"flex items-center gap-1 px-3 py-1 text-sm rounded-lg bg-blue-50 text-blue-700 hover:bg-blue-100",children:[e.jsx(ee,{size:14}),"Edit Dates"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[e.jsx("p",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:y}),e.jsx("p",{className:"text-xs text-gray-500",children:"Portions"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[e.jsx("p",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:a}),e.jsx("p",{className:"text-xs text-gray-500",children:"Meals/Week"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[e.jsx("p",{className:"text-lg font-bold capitalize",style:{color:"#3d59ab"},children:p}),e.jsx("p",{className:"text-xs text-gray-500",children:"Frequency"})]})]}),e.jsx(ie,{client:s}),x.length>0?e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-gray-600 mb-2 flex items-center gap-2",children:[e.jsx(V,{size:14}),"Upcoming Deliveries"]}),e.jsx("div",{className:"space-y-2",children:x.slice(0,4).map((n,D)=>{const j=q(n),N=new Date(n+"T12:00:00")<new Date,d=P(n),v=d==null?void 0:d.submittedAt,c=k(n),t=C(n);return e.jsxs("div",{className:`p-3 rounded-lg ${N?"opacity-50":""}`,style:{backgroundColor:"#fff",border:"1px solid #ebb582"},children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-400",children:["#",D+1]}),e.jsx("span",{className:N?"text-gray-400":"",children:E(n)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!j&&!N&&!b&&e.jsxs("span",{className:"text-xs text-amber-600 flex items-center gap-1",children:[e.jsx(M,{size:12}),"Locked"]}),N&&e.jsx(A,{size:16,className:"text-green-500"})]})]}),b&&!N&&e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:v?e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(A,{size:14}),"Picks submitted"]}),!c&&e.jsx("button",{onClick:()=>h(n),className:"text-xs text-blue-600 hover:text-blue-800",children:"Edit"})]}):c?e.jsxs("span",{className:"text-xs text-amber-600 flex items-center gap-1",children:[e.jsx(M,{size:12}),"Deadline passed - Chef will pick"]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("button",{onClick:()=>h(n),className:"text-xs px-3 py-1 rounded-lg text-white font-medium",style:{backgroundColor:"#3d59ab"},children:"Pick Dishes"}),e.jsxs("span",{className:"text-xs text-gray-500",children:["by ",t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})]})]})})]},n)})}),z&&!b&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-center gap-1",children:[e.jsx(M,{size:12}),"Edit dates by Saturday ",I.toLocaleDateString("en-US",{month:"short",day:"numeric"})," at 11:59 PM"]})]}):b?e.jsx("div",{className:"p-4 rounded-lg bg-amber-50 border border-amber-200",children:e.jsx("p",{className:"text-sm text-amber-700",children:"No delivery dates scheduled yet. Contact us to set up your deliveries, then you can pick your dishes!"})}):null,u&&e.jsx(ce,{client:s,dateStr:u,recipes:r,existingPicks:P(u),onSave:n=>L(u,n),onClose:()=>h(null)})]})}function ce({client:s,dateStr:l,recipes:g,existingPicks:r,onSave:o,onClose:u}){var D,j,N;const h=s.mealsPerWeek||3,[y,a]=w.useState((r==null?void 0:r.proteins)||Array(h).fill("")),[p,f]=w.useState((r==null?void 0:r.veggies)||Array(h).fill("")),[x,E]=w.useState((r==null?void 0:r.starches)||Array(h).fill("")),[I,z]=w.useState((r==null?void 0:r.notes)||""),b=((D=g==null?void 0:g.protein)==null?void 0:D.map(d=>d.name))||[],P=((j=g==null?void 0:g.veg)==null?void 0:j.map(d=>d.name))||[],C=((N=g==null?void 0:g.starch)==null?void 0:N.map(d=>d.name))||[],k=d=>new Date(d+"T12:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),L=(d,v,c)=>{const t=v.filter((m,i)=>i!==c);return d.filter(m=>!t.includes(m))},O=()=>y.every(d=>d!=="")&&p.every(d=>d!=="")&&x.every(d=>d!==""),n=()=>{if(!O()){alert(`Please select ${h} of each: proteins, veggies, and starches.`);return}o({proteins:y,veggies:p,starches:x,notes:I,mealsPerWeek:h})};return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",style:{backgroundColor:"#f9f9ed"},children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold",style:{color:"#3d59ab"},children:"Pick Your Dishes"}),e.jsx("p",{className:"text-sm text-gray-600",children:k(l)})]}),e.jsx("button",{onClick:u,className:"p-1 hover:bg-gray-200 rounded",children:e.jsx("span",{className:"text-2xl",children:"×"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("p",{className:"text-gray-600 mb-4",children:["Select ",h," proteins, veggies, and starches. Chef Paula will pair them into delicious meals!"]}),b.length===0&&P.length===0&&C.length===0&&e.jsx("div",{className:"p-4 rounded-lg bg-amber-50 border border-amber-200 mb-4",children:e.jsx("p",{className:"text-sm text-amber-700",children:"Dish options are not available yet. Please contact us or check back later."})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"font-bold mb-2 flex items-center gap-2 text-sm",style:{color:"#3d59ab"},children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-red-100 flex items-center justify-center text-red-600 text-xs",children:"P"}),"Proteins (",y.filter(d=>d).length,"/",h,")"]}),e.jsx("div",{className:"space-y-2",children:y.map((d,v)=>e.jsxs("select",{value:d,onChange:c=>{const t=[...y];t[v]=c.target.value,a(t)},className:"w-full p-2 border-2 rounded-lg text-sm",style:{borderColor:d?"#22c55e":"#ebb582"},children:[e.jsxs("option",{value:"",children:["Select protein #",v+1]}),L(b,y,v).map(c=>e.jsx("option",{value:c,children:c},c))]},v))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"font-bold mb-2 flex items-center gap-2 text-sm",style:{color:"#3d59ab"},children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center text-green-600 text-xs",children:"V"}),"Veggies (",p.filter(d=>d).length,"/",h,")"]}),e.jsx("div",{className:"space-y-2",children:p.map((d,v)=>e.jsxs("select",{value:d,onChange:c=>{const t=[...p];t[v]=c.target.value,f(t)},className:"w-full p-2 border-2 rounded-lg text-sm",style:{borderColor:d?"#22c55e":"#ebb582"},children:[e.jsxs("option",{value:"",children:["Select veggie #",v+1]}),L(P,p,v).map(c=>e.jsx("option",{value:c,children:c},c))]},v))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"font-bold mb-2 flex items-center gap-2 text-sm",style:{color:"#3d59ab"},children:[e.jsx("span",{className:"w-5 h-5 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 text-xs",children:"S"}),"Starches (",x.filter(d=>d).length,"/",h,")"]}),e.jsx("div",{className:"space-y-2",children:x.map((d,v)=>e.jsxs("select",{value:d,onChange:c=>{const t=[...x];t[v]=c.target.value,E(t)},className:"w-full p-2 border-2 rounded-lg text-sm",style:{borderColor:d?"#22c55e":"#ebb582"},children:[e.jsxs("option",{value:"",children:["Select starch #",v+1]}),L(C,x,v).map(c=>e.jsx("option",{value:c,children:c},c))]},v))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Special requests (optional)"}),e.jsx("textarea",{value:I,onChange:d=>z(d.target.value),placeholder:"E.g., 'Keep chicken mild' or 'Extra sauce'",className:"w-full p-2 border-2 rounded-lg text-sm",style:{borderColor:"#ebb582"},rows:2})]}),e.jsx("div",{className:"mb-4 p-2 rounded-lg text-sm",style:{backgroundColor:"#f9f9ed"},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-600",children:O()?"All selections complete!":"Complete all to submit"}),e.jsxs("span",{className:"font-bold",style:{color:O()?"#22c55e":"#3d59ab"},children:[y.filter(d=>d).length+p.filter(d=>d).length+x.filter(d=>d).length," / ",h*3]})]})})]}),e.jsxs("div",{className:"p-4 border-t flex justify-end gap-3",children:[e.jsx("button",{onClick:u,className:"px-4 py-2 rounded-lg border-2 hover:bg-gray-50",style:{borderColor:"#ebb582"},children:"Cancel"}),e.jsx("button",{onClick:n,disabled:!O(),className:"px-4 py-2 rounded-lg text-white disabled:opacity-50",style:{backgroundColor:"#3d59ab"},children:"Save Picks"})]})]})})}function me({client:s,getClientHistory:l}){const[g,r]=w.useState(!1),o=l(s.name),u=g?o:o.slice(0,3),h=a=>a?new Date(a+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",y=a=>a?new Date(a).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"";return o.length===0?null:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(re,{size:24,style:{color:"#3d59ab"}}),e.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Delivery History"})]}),e.jsx("div",{className:"space-y-4",children:u.map((a,p)=>{var f;return e.jsxs("div",{className:"border rounded-lg overflow-hidden",style:{borderColor:"#ebb582"},children:[e.jsxs("div",{className:"p-3 flex items-center justify-between",style:{backgroundColor:"#f9f9ed"},children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:h(a.date)}),a.completedAt&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Delivered at ",y(a.completedAt),a.handoffType==="porch"&&" (Porch drop)",a.handoffType==="hand"&&" (Hand delivery)"]})]}),e.jsx(A,{size:20,className:"text-green-500"})]}),e.jsx("div",{className:"p-3",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:(f=a.dishes)==null?void 0:f.map((x,E)=>e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm",style:{backgroundColor:"#fff4e0"},children:[e.jsx(B,{size:12,style:{color:"#3d59ab"}}),x]},E))})}),a.handoffType==="porch"&&a.photoData&&e.jsxs("div",{className:"p-3 border-t",style:{borderColor:"#ebb582"},children:[e.jsxs("p",{className:"text-xs text-gray-500 mb-2 flex items-center gap-1",children:[e.jsx(te,{size:12}),"Delivery Photo"]}),e.jsx("img",{src:a.photoData,alt:"Delivery confirmation",className:"w-full max-h-48 object-cover rounded-lg"})]})]},p)})}),o.length>3&&e.jsx("button",{onClick:()=>r(!g),className:"mt-4 w-full py-2 text-sm font-medium rounded-lg border-2 hover:bg-gray-50",style:{borderColor:"#ebb582",color:"#3d59ab"},children:g?"Show Less":`Show All (${o.length})`})]})}function ue({client:s,blockedDates:l=[],onSave:g,onClose:r,clientPortalData:o={}}){var D;const u=((D=o[s.name])==null?void 0:D.selectedDates)||[],h=u.length>0?u:s.deliveryDates||[],[y,a]=w.useState(h),[p,f]=w.useState(""),x=new Date,E=s.frequency==="biweekly",I=4,b={Monday:1,Tuesday:2,Thursday:4}[s.deliveryDay],C=(()=>{const j=[];let N=0;const d=120;for(;j.length<8&&N<d;){N++;const v=new Date(x);v.setDate(v.getDate()+N);const c=v.toISOString().split("T")[0];v.getDay()===b&&(l.includes(c)||j.push({date:c,display:v.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),canEdit:q(c)}))}return j})(),k=j=>{if(!E||j.length<2)return!0;const N=[...j].sort();for(let d=1;d<N.length;d++){const v=new Date(N[d-1]+"T12:00:00");if((new Date(N[d]+"T12:00:00")-v)/(1e3*60*60*24)<14)return!1}return!0},L=j=>{if(f(""),y.includes(j))a(y.filter(N=>N!==j));else{if(y.length>=I){f(`Maximum ${I} delivery dates allowed`);return}const N=[...y,j];if(E&&!k(N)){f("Biweekly deliveries must be at least 2 weeks apart");return}a(N)}},O=()=>{if(y.length===0){f("Please select at least one delivery date");return}if(E&&!k(y)){f("Biweekly deliveries must be at least 2 weeks apart");return}g(y.sort())},n=W();return e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b flex items-center justify-between",style:{backgroundColor:"#f9f9ed"},children:[e.jsx("h3",{className:"text-lg font-bold",style:{color:"#3d59ab"},children:"Edit Delivery Dates"}),e.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-200 rounded",children:e.jsx("span",{className:"text-2xl",children:"×"})})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Your deliveries are on ",e.jsxs("strong",{children:[s.deliveryDay,"s"]}),". Select up to ",I," dates."]}),e.jsx("div",{className:"p-3 rounded-lg bg-amber-50 border border-amber-200 mb-4",children:e.jsxs("div",{className:"flex items-center gap-2 text-amber-700",children:[e.jsx(M,{size:16}),e.jsxs("span",{className:"text-sm",children:["Changes must be made by Saturday ",n.toLocaleDateString("en-US",{month:"short",day:"numeric"})," at 11:59 PM"]})]})}),p&&e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm",children:p}),e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Selected: ",y.length," / ",I]}),e.jsx("div",{className:"space-y-2 mb-4",children:C.map(({date:j,display:N,canEdit:d})=>{const v=y.includes(j),c=!d&&!v;return e.jsx("button",{onClick:()=>d&&L(j),disabled:c,className:`w-full p-3 rounded-lg border-2 text-left transition-all ${v?"border-blue-500 bg-blue-50":c?"border-gray-100 bg-gray-50 text-gray-300 cursor-not-allowed":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:v?"text-blue-700 font-medium":"",children:N}),c&&e.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[e.jsx(M,{size:12}),"Locked"]}),v&&e.jsx(A,{size:16,className:"text-blue-600"})]})},j)})})]}),e.jsxs("div",{className:"p-4 border-t flex justify-end gap-3",children:[e.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg border-2 hover:bg-gray-50",style:{borderColor:"#ebb582"},children:"Cancel"}),e.jsx("button",{onClick:O,className:"px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:"Save Changes"})]})]})})}function xe({client:s}){return e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center bg-gray-100",children:e.jsx(le,{size:32,className:"text-gray-400 ml-1"})}),e.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"#3d59ab"},children:"Account Paused"}),e.jsx("p",{className:"text-gray-600 mb-4",children:s.pausedDate?`Paused since ${new Date(s.pausedDate).toLocaleDateString()}`:"Your meal deliveries are currently on hold."}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Ready to start enjoying delicious meals again? Contact us to reactivate your account."}),e.jsx("a",{href:"mailto:hello@goldfinchchef.com?subject=Reactivate%20My%20Account",className:"inline-block px-6 py-3 rounded-lg text-white font-medium",style:{backgroundColor:"#3d59ab"},children:"Request Reactivation"})]})})}function he({client:s}){return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx(U,{size:32,className:"text-red-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-red-700 mb-2",children:"Payment Overdue"}),e.jsx("p",{className:"text-red-600 mb-4",children:"Your account has an outstanding balance. Please make a payment to continue receiving deliveries."}),s.honeyBookLink&&e.jsxs("a",{href:s.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg text-white font-medium",style:{backgroundColor:"#dc2626"},children:[e.jsx(R,{size:20}),"Pay Now",e.jsx(T,{size:16})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4 text-center text-gray-600",children:e.jsxs("p",{children:["Questions about your invoice?"," ",e.jsx("a",{href:"mailto:hello@goldfinchchef.com",className:"text-blue-600 underline",children:"Contact us"})]})})]})}function fe({client:s}){return e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"#fef3c7"},children:e.jsx(R,{size:32,style:{color:"#f59e0b"}})}),e.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"#3d59ab"},children:"Payment Required"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Please complete your payment to confirm your upcoming deliveries."}),s.honeyBookLink&&e.jsxs("a",{href:s.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg text-white font-medium",style:{backgroundColor:"#3d59ab"},children:[e.jsx(R,{size:20}),"View Invoice",e.jsx(T,{size:16})]})]})})}function ge({client:s,selectedDates:l,setSelectedDates:g,blockedDates:r=[],onSubmit:o}){const[u,h]=w.useState(""),[y,a]=w.useState(""),p=new Date,f=s.frequency==="biweekly",x=4,I={Monday:1,Tuesday:2,Thursday:4}[s.deliveryDay],z=[];let b=0;const P=120;for(;z.length<x&&b<P;){b++;const n=new Date(p);n.setDate(n.getDate()+b);const D=n.toISOString().split("T")[0];n.getDay()===I&&(r.includes(D)||z.push({date:D,display:n.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}))}const C=n=>{if(!f||n.length<2)return!0;const D=[...n].sort();for(let j=1;j<D.length;j++){const N=new Date(D[j-1]+"T12:00:00");if((new Date(D[j]+"T12:00:00")-N)/(1e3*60*60*24)<14)return!1}return!0},k=n=>{if(a(""),l.includes(n))g(l.filter(D=>D!==n));else{if(l.length>=x){a(`You can only select ${x} delivery dates`);return}const D=[...l,n];if(f&&!C(D)){a("Biweekly deliveries must be at least 2 weeks apart");return}g(D)}},L=()=>{if(l.length===0){a("Please select at least one delivery date");return}if(l.length>x){a(`Please select no more than ${x} dates`);return}if(f&&!C(l)){a("Biweekly deliveries must be at least 2 weeks apart");return}o(u)},O=n=>{if(l.includes(n))return!1;if(l.length>=x)return!0;if(f&&l.length>0){const D=[...l,n];return!C(D)}return!1};return s.deliveryDay?e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(V,{size:24,style:{color:"#3d59ab"}}),e.jsxs("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:["Select Your Next ",x," Delivery Dates"]})]}),e.jsxs("p",{className:"text-gray-600 mb-2",children:["Your deliveries are on ",e.jsxs("strong",{children:[s.deliveryDay,"s"]}),". Choose ",x," upcoming dates."]}),f&&e.jsxs("p",{className:"text-sm text-amber-600 mb-4 flex items-center gap-2",children:[e.jsx(U,{size:16}),"Biweekly schedule: dates must be at least 2 weeks apart"]}),y&&e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm",children:y}),e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Selected: ",l.length," / ",x]}),e.jsx("div",{className:"space-y-2 mb-6",children:z.map(({date:n,display:D})=>{const j=l.includes(n),N=O(n);return e.jsx("button",{onClick:()=>k(n),disabled:N&&!j,className:`w-full p-3 rounded-lg border-2 text-left transition-all ${j?"border-blue-500 bg-blue-50":N?"border-gray-100 bg-gray-50 text-gray-300 cursor-not-allowed":"border-gray-200 hover:border-gray-300"}`,children:e.jsx("p",{className:`font-medium ${j?"text-blue-700":""}`,children:D})},n)})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Special requests or notes (optional)"}),e.jsx("textarea",{value:u,onChange:n=>h(n.target.value),placeholder:"E.g., 'No deliveries the week of the 15th' or 'Prefer morning deliveries'",className:"w-full p-3 border-2 rounded-lg",style:{borderColor:"#ebb582"},rows:3})]}),e.jsxs("button",{onClick:L,disabled:l.length===0,className:"w-full py-3 rounded-lg text-white font-medium disabled:opacity-50",style:{backgroundColor:"#3d59ab"},children:["Confirm ",l.length," Date",l.length!==1?"s":""]})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[e.jsx(V,{size:32,className:"mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-bold mb-2",style:{color:"#3d59ab"},children:"Delivery Day Not Set"}),e.jsx("p",{className:"text-gray-600",children:"Please contact us to set your preferred delivery day before selecting dates."})]})}function be({client:s,recipes:l,clientPortalData:g,onSubmit:r}){var d,v,c;const u=s.mealsPerWeek||3,[h,y]=w.useState(Array(u).fill("")),[a,p]=w.useState(Array(u).fill("")),[f,x]=w.useState(Array(u).fill("")),[E,I]=w.useState(""),z=((d=l==null?void 0:l.protein)==null?void 0:d.map(t=>t.name))||[],b=((v=l==null?void 0:l.veg)==null?void 0:v.map(t=>t.name))||[],P=((c=l==null?void 0:l.starch)==null?void 0:c.map(t=>t.name))||[],C=W(),k=(t,m)=>{const i=[...h];i[t]=m,y(i)},L=(t,m)=>{const i=[...a];i[t]=m,p(i)},O=(t,m)=>{const i=[...f];i[t]=m,x(i)},n=()=>h.every(t=>t!=="")&&a.every(t=>t!=="")&&f.every(t=>t!==""),D=()=>{if(!n()){alert(`Please select ${u} of each: proteins, veggies, and starches.`);return}r({proteins:h,veggies:a,starches:f,notes:E,mealsPerWeek:u})},j=t=>t.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})+" at 11:59 PM",N=(t,m,i)=>{const _=m.filter((F,J)=>J!==i);return t.filter(F=>!_.includes(F))};return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(B,{size:24,style:{color:"#3d59ab"}}),e.jsx("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:"Pick Your Dishes"})]}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Select ",u," proteins, ",u," veggies, and ",u," starches for your meals this week. Chef Paula will pair them into delicious meals!"]}),e.jsx("div",{className:"mb-6 p-3 rounded-lg bg-amber-50 border border-amber-200",children:e.jsxs("div",{className:"flex items-start gap-2 text-amber-700",children:[e.jsx(U,{size:18,className:"flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium",children:["Deadline: ",j(C)]}),e.jsx("p",{className:"text-xs mt-1",children:"If not submitted by Saturday, Chef Paula will choose your dishes."})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",style:{color:"#3d59ab"},children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-red-100 flex items-center justify-center text-red-600 text-sm",children:"P"}),"Proteins (",h.filter(t=>t).length,"/",u,")"]}),e.jsx("div",{className:"space-y-2",children:h.map((t,m)=>e.jsxs("select",{value:t,onChange:i=>k(m,i.target.value),className:"w-full p-3 border-2 rounded-lg",style:{borderColor:t?"#22c55e":"#ebb582"},children:[e.jsxs("option",{value:"",children:["Select protein #",m+1]}),N(z,h,m).map(i=>e.jsx("option",{value:i,children:i},i))]},m))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",style:{color:"#3d59ab"},children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-green-100 flex items-center justify-center text-green-600 text-sm",children:"V"}),"Veggies (",a.filter(t=>t).length,"/",u,")"]}),e.jsx("div",{className:"space-y-2",children:a.map((t,m)=>e.jsxs("select",{value:t,onChange:i=>L(m,i.target.value),className:"w-full p-3 border-2 rounded-lg",style:{borderColor:t?"#22c55e":"#ebb582"},children:[e.jsxs("option",{value:"",children:["Select veggie #",m+1]}),N(b,a,m).map(i=>e.jsx("option",{value:i,children:i},i))]},m))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",style:{color:"#3d59ab"},children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 text-sm",children:"S"}),"Starches (",f.filter(t=>t).length,"/",u,")"]}),e.jsx("div",{className:"space-y-2",children:f.map((t,m)=>e.jsxs("select",{value:t,onChange:i=>O(m,i.target.value),className:"w-full p-3 border-2 rounded-lg",style:{borderColor:t?"#22c55e":"#ebb582"},children:[e.jsxs("option",{value:"",children:["Select starch #",m+1]}),N(P,f,m).map(i=>e.jsx("option",{value:i,children:i},i))]},m))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Special requests (optional)"}),e.jsx("textarea",{value:E,onChange:t=>I(t.target.value),placeholder:"E.g., 'Keep chicken mild' or 'Extra sauce on the side'",className:"w-full p-3 border-2 rounded-lg",style:{borderColor:"#ebb582"},rows:2})]}),e.jsx("div",{className:"mb-4 p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600",children:n()?"All selections complete!":"Complete all selections to submit"}),e.jsxs("span",{className:"font-bold",style:{color:n()?"#22c55e":"#3d59ab"},children:[h.filter(t=>t).length+a.filter(t=>t).length+f.filter(t=>t).length," / ",u*3]})]})}),e.jsx("button",{onClick:D,disabled:!n(),className:"w-full py-3 rounded-lg text-white font-medium disabled:opacity-50",style:{backgroundColor:"#3d59ab"},children:"Submit My Picks"})]})}function ye({client:s,date:l,menuItems:g,readyOrders:r}){const o=new Date(l+"T12:00:00").toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}).toUpperCase(),h=(()=>{const a=[];return g.forEach(p=>{const f={protein:p.protein,sides:[p.veg,p.starch].filter(Boolean)};(f.protein||f.sides.length>0)&&a.push(f),p.extras&&p.extras.forEach(x=>{a.push({protein:x,sides:[],isExtra:!0})})}),r.forEach(p=>{p.dishes&&p.dishes.forEach((f,x)=>{(x===0||p.dishes.length===1)&&a.push({protein:f,sides:p.dishes.slice(1),isExtra:!1})})}),a})(),y=s.displayName||s.name;return e.jsxs("div",{className:"overflow-hidden shadow-lg",style:{backgroundColor:"#fff"},children:[e.jsxs("div",{className:"relative px-4 pt-6 pb-8",style:{backgroundColor:"#f9f9ed",backgroundImage:"url(/pattern4.png)",backgroundSize:"cover",backgroundPosition:"center"},children:[e.jsx("p",{className:"text-center mb-2",style:{fontFamily:'"Glacial Indifference", sans-serif',fontSize:"12px",letterSpacing:"0.3em",color:"#5a5a5a"},children:"GOLDFINCH CHEF SERVICES"}),e.jsxs("h2",{className:"text-center mb-3",style:{color:"#3d59ab",fontFamily:'"Poller One", cursive',fontSize:"18px",textTransform:"uppercase",letterSpacing:"0.05em",textDecoration:"underline",textDecorationColor:"#3d59ab",textUnderlineOffset:"4px"},children:[y,"'s Menu"]}),e.jsx("p",{className:"text-center mb-4",style:{color:"#5a5a5a",fontFamily:'"Beth Ellen", cursive',fontSize:"12px"},children:"here's what to expect on your plate!"}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("img",{src:"/goldfinch5.png",alt:"Goldfinch",className:"w-12 h-12 object-contain"}),e.jsx("p",{style:{fontFamily:'"Glacial Indifference", sans-serif',fontSize:"14px",letterSpacing:"0.2em",color:"#5a5a5a"},children:o})]})]}),e.jsx("div",{className:"px-6 py-8",style:{backgroundColor:"#d9a87a"},children:e.jsx("div",{className:"space-y-8",children:h.map((a,p)=>e.jsxs("div",{className:"text-center",children:[a.protein&&e.jsx("h3",{style:{color:"#ffffff",fontFamily:'"Glacial Indifference", sans-serif',fontSize:"1.1rem",fontWeight:"bold",letterSpacing:"0.15em",textTransform:"uppercase",marginBottom:a.sides.length>0?"0.5rem":0},children:a.protein}),a.sides.length>0&&e.jsx("p",{style:{color:"#f5e6d3",fontFamily:'"Glacial Indifference", sans-serif',fontSize:"0.85rem",letterSpacing:"0.1em",textTransform:"uppercase"},children:a.sides.join(", ")})]},p))})}),e.jsxs("div",{className:"relative px-6 py-6",style:{backgroundColor:"#f9f9ed",fontFamily:'"Glacial Indifference", sans-serif'},children:[e.jsx("h4",{className:"mb-3",style:{color:"#3d59ab",fontFamily:'"Poller One", cursive',fontSize:"1.1rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Get Ready!"}),e.jsx("p",{className:"mb-4 pr-20",style:{color:"#5a5a5a",fontSize:"0.9rem",lineHeight:"1.5"},children:"Remember to put out bags, containers, and ice packs. And get excited – great food is on the way!"}),e.jsx("img",{src:"/stemflower.png",alt:"",className:"absolute right-4 bottom-4 h-20 object-contain"})]})]})}function pe({client:s,getClientMenuItems:l,getClientReadyOrders:g,today:r,clientPortalData:o,updateClientPortalData:u}){const h=l(s.name).filter(x=>x.date>=r),y=g(s.name).filter(x=>x.date>=r),a={};h.forEach(x=>{a[x.date]||(a[x.date]={menuItems:[],readyOrders:[]}),a[x.date].menuItems.push(x)}),y.forEach(x=>{a[x.date]||(a[x.date]={menuItems:[],readyOrders:[]}),a[x.date].readyOrders.push(x)});const p=Object.keys(a).sort(),f=p.length>0;return e.jsxs("div",{className:"space-y-6",children:[p.map(x=>{const{menuItems:E,readyOrders:I}=a[x];return e.jsx(ye,{client:s,date:x,menuItems:E,readyOrders:I},x)}),f&&e.jsx(ve,{clientName:s.name,clientPortalData:o,updateClientPortalData:u,deliveryDate:p[0]}),s.honeyBookLink&&e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(R,{size:24,style:{color:"#d9a87a"}}),e.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Billing"})]}),e.jsx("p",{className:"text-gray-600 mb-4",children:"View your invoice and manage payments through our secure billing portal."}),e.jsxs("a",{href:s.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg text-white font-medium",style:{backgroundColor:"#d9a87a"},children:[e.jsx(R,{size:20}),"View & Pay Invoice",e.jsx(T,{size:16})]})]})]})}function je({order:s}){return e.jsxs("div",{className:"mb-3 last:mb-0",children:[e.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[s.portions," portion",s.portions!==1?"s":""]}),e.jsx("div",{className:"space-y-2",children:s.dishes.map((l,g)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[e.jsx(B,{size:16,style:{color:"#3d59ab"}}),e.jsx("span",{className:"font-medium",children:l})]},g))})]})}function K(s){if(!s){const u=new Date,y=(6-u.getDay()+7)%7||7,a=new Date(u);return a.setDate(u.getDate()+y),a.setHours(23,59,59,999),a}const l=new Date(s+"T12:00:00"),g=l.getDay(),r=g===0?1:g===6?0:g+1,o=new Date(l);return o.setDate(l.getDate()-r),o.setHours(23,59,59,999),o}function Ne(s){return new Date<K(s)}function ve({clientName:s,clientPortalData:l,updateClientPortalData:g,deliveryDate:r}){var b,P;const[o,u]=w.useState(""),[h,y]=w.useState(!1),a=K(r),p=Ne(r),f=((b=l[s])==null?void 0:b.substitutionRequests)||[],x=(P=l[s])==null?void 0:P.substitutionRequest,E=x?[...f,x]:f,I=C=>C.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})+" at 11:59 PM",z=C=>{if(C.preventDefault(),!o.trim()){alert("Please enter your substitution request");return}const k={clientId:s,date:r||new Date().toISOString().split("T")[0],requestText:o.trim(),submittedAt:new Date().toISOString()},L=[...f,k];g(s,{substitutionRequests:L,substitutionRequest:k}),y(!0),u("")};return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx(se,{size:24,style:{color:"#3d59ab"}}),e.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Request a Substitution"})]}),E.length>0&&e.jsxs("div",{className:"mb-6 space-y-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Your submitted requests:"}),E.map((C,k)=>e.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#dcfce7"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(A,{size:16,className:"text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Request received"})]}),e.jsx("p",{className:"text-sm text-gray-700",children:C.requestText||(C.originalDish?`Instead of ${C.originalDish}: ${C.requestedSubstitution}`:C.requestedSubstitution)})]},k))]}),h&&e.jsxs("div",{className:"mb-6 p-4 rounded-lg border-2 border-green-200",style:{backgroundColor:"#f0fdf4"},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(A,{size:20,className:"text-green-600"}),e.jsx("span",{className:"font-bold text-green-700",children:"Request submitted!"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:"We'll review it before your next delivery."})]}),p?e.jsxs("form",{onSubmit:z,children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"What would you like to change or substitute?"}),e.jsx("textarea",{value:o,onChange:C=>u(C.target.value),placeholder:"E.g., 'Chicken instead of beef for Tuesday' or 'No onions in any dishes please' or 'Can I have extra vegetables instead of the starch?'",className:"w-full p-3 border-2 rounded-lg",style:{borderColor:"#ebb582"},rows:4})]}),e.jsx("div",{className:"mb-4 p-3 rounded-lg bg-amber-50 border border-amber-200",children:e.jsxs("div",{className:"flex items-center gap-2 text-amber-700",children:[e.jsx(M,{size:16}),e.jsxs("span",{className:"text-sm font-medium",children:["Deadline: ",I(a)]})]})}),e.jsx("button",{type:"submit",disabled:!o.trim(),className:"w-full py-3 rounded-lg text-white font-medium disabled:opacity-50",style:{backgroundColor:"#3d59ab"},children:"Submit Request"})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(U,{size:32,className:"mx-auto mb-2 text-amber-500"}),e.jsx("p",{className:"text-gray-600",children:"The substitution deadline has passed for this delivery."}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Requests must be submitted by Saturday at 11:59 PM."})]})]})}function De({client:s,getClientReadyOrders:l,today:g}){const r=l(s.name,g);return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center animate-pulse",style:{backgroundColor:"#dbeafe"},children:e.jsx(X,{size:40,style:{color:"#3d59ab"}})}),e.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"#3d59ab"},children:"Out for Delivery"}),e.jsx("p",{className:"text-gray-600",children:"Your meals are on their way to you today!"})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(M,{size:24,style:{color:"#3d59ab"}}),e.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Estimated Arrival"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-800",children:s.deliveryWindow||"2:00 PM - 6:00 PM"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"We'll leave your meals at the door if you're not home."})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx($,{size:24,style:{color:"#3d59ab"}}),e.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Today's Order"})]}),r.map((o,u)=>e.jsx(je,{order:o},u))]}),s.address&&e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Z,{size:24,style:{color:"#3d59ab"}}),e.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Delivery Address"})]}),e.jsx("p",{className:"text-gray-700",children:s.address}),e.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Wrong address?"," ",e.jsx("a",{href:"mailto:hello@goldfinchchef.com",className:"text-blue-600 underline",children:"Let us know ASAP"})]})]})]})}function we({client:s,getClientDeliveryStatus:l,getClientHistory:g,today:r}){var a;const o=l(s.name,r),h=g(s.name).slice(0,3),y=p=>new Date(p).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"#dcfce7"},children:e.jsx(A,{size:40,className:"text-green-600"})}),e.jsx("h3",{className:"text-xl font-bold mb-2 text-green-700",children:"Delivered!"}),o&&e.jsxs("p",{className:"text-gray-600",children:[o.handoffType==="porch"?"Left at your door":"Handed off"," at ",y(o.completedAt)]})]}),(o==null?void 0:o.handoffType)==="porch"&&(o==null?void 0:o.photoData)&&e.jsxs("div",{className:"mt-6",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Delivery Photo:"}),e.jsx("img",{src:o.photoData,alt:"Delivery confirmation",className:"w-full rounded-lg shadow"})]}),(o==null?void 0:o.handoffType)==="hand"&&e.jsx("div",{className:"mt-6 p-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ae,{size:24,style:{color:"#3d59ab"}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Hand Delivery"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Received at ",y(o.completedAt)]})]})]})})]}),h.length>0&&h[0].date===r&&e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx($,{size:24,style:{color:"#3d59ab"}}),e.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"What's in Your Delivery"})]}),(a=h[0].dishes)==null?void 0:a.map((p,f)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg mb-2",style:{backgroundColor:"#f9f9ed"},children:[e.jsx(B,{size:16,style:{color:"#3d59ab"}}),e.jsx("span",{className:"font-medium",children:p})]},f))]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(H,{size:24,style:{color:"#ffd700"}}),e.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Heating Instructions"})]}),e.jsxs("div",{className:"text-gray-600 space-y-2 text-sm",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Refrigerate"})," meals within 2 hours of delivery."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"To reheat:"})," Remove lid, cover with damp paper towel, microwave 2-3 minutes or until heated through."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Best enjoyed"})," within 4 days."]})]})]})]})}function ke({client:s,getClientHistory:l}){const r=l(s.name).slice(0,5);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"#f9f9ed"},children:e.jsx(V,{size:32,className:"text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"#3d59ab"},children:"No Upcoming Deliveries"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have any meals scheduled yet."}),e.jsx("a",{href:"mailto:hello@goldfinchchef.com?subject=Schedule%20Deliveries",className:"inline-block px-6 py-3 rounded-lg text-white font-medium",style:{backgroundColor:"#3d59ab"},children:"Schedule Deliveries"})]}),r.length>0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h4",{className:"font-bold mb-4",style:{color:"#3d59ab"},children:"Recent Deliveries"}),e.jsx("div",{className:"space-y-3",children:r.map((o,u)=>{var h,y;return e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:new Date(o.date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(h=o.dishes)==null?void 0:h.slice(0,2).join(", "),((y=o.dishes)==null?void 0:y.length)>2&&` +${o.dishes.length-2} more`]})]}),e.jsx(A,{size:20,className:"text-green-600"})]},u)})})]})]})}export{Oe as default};
