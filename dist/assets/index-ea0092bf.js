(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}})();var pf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var sm={exports:{}},fo={},nm={exports:{}},Ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yl=Symbol.for("react.element"),hf=Symbol.for("react.portal"),ff=Symbol.for("react.fragment"),xf=Symbol.for("react.strict_mode"),gf=Symbol.for("react.profiler"),yf=Symbol.for("react.provider"),vf=Symbol.for("react.context"),bf=Symbol.for("react.forward_ref"),jf=Symbol.for("react.suspense"),Nf=Symbol.for("react.memo"),kf=Symbol.for("react.lazy"),Nd=Symbol.iterator;function wf(e){return e===null||typeof e!="object"?null:(e=Nd&&e[Nd]||e["@@iterator"],typeof e=="function"?e:null)}var rm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lm=Object.assign,am={};function Gr(e,t,n){this.props=e,this.context=t,this.refs=am,this.updater=n||rm}Gr.prototype.isReactComponent={};Gr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Gr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function om(){}om.prototype=Gr.prototype;function yc(e,t,n){this.props=e,this.context=t,this.refs=am,this.updater=n||rm}var vc=yc.prototype=new om;vc.constructor=yc;lm(vc,Gr.prototype);vc.isPureReactComponent=!0;var kd=Array.isArray,im=Object.prototype.hasOwnProperty,bc={current:null},cm={key:!0,ref:!0,__self:!0,__source:!0};function dm(e,t,n){var r,l={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)im.call(t,r)&&!cm.hasOwnProperty(r)&&(l[r]=t[r]);var c=arguments.length-2;if(c===1)l.children=n;else if(1<c){for(var i=Array(c),d=0;d<c;d++)i[d]=arguments[d+2];l.children=i}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)l[r]===void 0&&(l[r]=c[r]);return{$$typeof:Yl,type:e,key:a,ref:o,props:l,_owner:bc.current}}function Cf(e,t){return{$$typeof:Yl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function jc(e){return typeof e=="object"&&e!==null&&e.$$typeof===Yl}function Sf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var wd=/\/+/g;function $o(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Sf(""+e.key):t.toString(36)}function Sa(e,t,n,r,l){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Yl:case hf:o=!0}}if(o)return o=e,l=l(o),e=r===""?"."+$o(o,0):r,kd(l)?(n="",e!=null&&(n=e.replace(wd,"$&/")+"/"),Sa(l,t,n,"",function(d){return d})):l!=null&&(jc(l)&&(l=Cf(l,n+(!l.key||o&&o.key===l.key?"":(""+l.key).replace(wd,"$&/")+"/")+e)),t.push(l)),1;if(o=0,r=r===""?".":r+":",kd(e))for(var c=0;c<e.length;c++){a=e[c];var i=r+$o(a,c);o+=Sa(a,t,n,i,l)}else if(i=wf(e),typeof i=="function")for(e=i.call(e),c=0;!(a=e.next()).done;)a=a.value,i=r+$o(a,c++),o+=Sa(a,t,n,i,l);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function ra(e,t,n){if(e==null)return e;var r=[],l=0;return Sa(e,r,"","",function(a){return t.call(n,a,l++)}),r}function Df(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Xt={current:null},Da={transition:null},Ef={ReactCurrentDispatcher:Xt,ReactCurrentBatchConfig:Da,ReactCurrentOwner:bc};function um(){throw Error("act(...) is not supported in production builds of React.")}Ve.Children={map:ra,forEach:function(e,t,n){ra(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return ra(e,function(){t++}),t},toArray:function(e){return ra(e,function(t){return t})||[]},only:function(e){if(!jc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ve.Component=Gr;Ve.Fragment=ff;Ve.Profiler=gf;Ve.PureComponent=yc;Ve.StrictMode=xf;Ve.Suspense=jf;Ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ef;Ve.act=um;Ve.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=lm({},e.props),l=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=bc.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(i in t)im.call(t,i)&&!cm.hasOwnProperty(i)&&(r[i]=t[i]===void 0&&c!==void 0?c[i]:t[i])}var i=arguments.length-2;if(i===1)r.children=n;else if(1<i){c=Array(i);for(var d=0;d<i;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Yl,type:e.type,key:l,ref:a,props:r,_owner:o}};Ve.createContext=function(e){return e={$$typeof:vf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:yf,_context:e},e.Consumer=e};Ve.createElement=dm;Ve.createFactory=function(e){var t=dm.bind(null,e);return t.type=e,t};Ve.createRef=function(){return{current:null}};Ve.forwardRef=function(e){return{$$typeof:bf,render:e}};Ve.isValidElement=jc;Ve.lazy=function(e){return{$$typeof:kf,_payload:{_status:-1,_result:e},_init:Df}};Ve.memo=function(e,t){return{$$typeof:Nf,type:e,compare:t===void 0?null:t}};Ve.startTransition=function(e){var t=Da.transition;Da.transition={};try{e()}finally{Da.transition=t}};Ve.unstable_act=um;Ve.useCallback=function(e,t){return Xt.current.useCallback(e,t)};Ve.useContext=function(e){return Xt.current.useContext(e)};Ve.useDebugValue=function(){};Ve.useDeferredValue=function(e){return Xt.current.useDeferredValue(e)};Ve.useEffect=function(e,t){return Xt.current.useEffect(e,t)};Ve.useId=function(){return Xt.current.useId()};Ve.useImperativeHandle=function(e,t,n){return Xt.current.useImperativeHandle(e,t,n)};Ve.useInsertionEffect=function(e,t){return Xt.current.useInsertionEffect(e,t)};Ve.useLayoutEffect=function(e,t){return Xt.current.useLayoutEffect(e,t)};Ve.useMemo=function(e,t){return Xt.current.useMemo(e,t)};Ve.useReducer=function(e,t,n){return Xt.current.useReducer(e,t,n)};Ve.useRef=function(e){return Xt.current.useRef(e)};Ve.useState=function(e){return Xt.current.useState(e)};Ve.useSyncExternalStore=function(e,t,n){return Xt.current.useSyncExternalStore(e,t,n)};Ve.useTransition=function(){return Xt.current.useTransition()};Ve.version="18.3.1";nm.exports=Ve;var g=nm.exports;const yl=tm(g);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pf=g,Rf=Symbol.for("react.element"),zf=Symbol.for("react.fragment"),Tf=Object.prototype.hasOwnProperty,_f=Pf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Of={key:!0,ref:!0,__self:!0,__source:!0};function mm(e,t,n){var r,l={},a=null,o=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Tf.call(t,r)&&!Of.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:Rf,type:e,key:a,ref:o,props:l,_owner:_f.current}}fo.Fragment=zf;fo.jsx=mm;fo.jsxs=mm;sm.exports=fo;var s=sm.exports,gi={},pm={exports:{}},vs={},hm={exports:{}},fm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(P,A){var B=P.length;P.push(A);e:for(;0<B;){var ne=B-1>>>1,oe=P[ne];if(0<l(oe,A))P[ne]=A,P[B]=oe,B=ne;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var A=P[0],B=P.pop();if(B!==A){P[0]=B;e:for(var ne=0,oe=P.length,G=oe>>>1;ne<G;){var K=2*(ne+1)-1,ce=P[K],ee=K+1,le=P[ee];if(0>l(ce,B))ee<oe&&0>l(le,ce)?(P[ne]=le,P[ee]=B,ne=ee):(P[ne]=ce,P[K]=B,ne=K);else if(ee<oe&&0>l(le,B))P[ne]=le,P[ee]=B,ne=ee;else break e}}return A}function l(P,A){var B=P.sortIndex-A.sortIndex;return B!==0?B:P.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var i=[],d=[],m=1,y=null,x=3,C=!1,U=!1,N=!1,z=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(P){for(var A=n(d);A!==null;){if(A.callback===null)r(d);else if(A.startTime<=P)r(d),A.sortIndex=A.expirationTime,t(i,A);else break;A=n(d)}}function M(P){if(N=!1,h(P),!U)if(n(i)!==null)U=!0,E(T);else{var A=n(d);A!==null&&L(M,A.startTime-P)}}function T(P,A){U=!1,N&&(N=!1,f(u),u=-1),C=!0;var B=x;try{for(h(A),y=n(i);y!==null&&(!(y.expirationTime>A)||P&&!j());){var ne=y.callback;if(typeof ne=="function"){y.callback=null,x=y.priorityLevel;var oe=ne(y.expirationTime<=A);A=e.unstable_now(),typeof oe=="function"?y.callback=oe:y===n(i)&&r(i),h(A)}else r(i);y=n(i)}if(y!==null)var G=!0;else{var K=n(d);K!==null&&L(M,K.startTime-A),G=!1}return G}finally{y=null,x=B,C=!1}}var F=!1,R=null,u=-1,b=5,S=-1;function j(){return!(e.unstable_now()-S<b)}function k(){if(R!==null){var P=e.unstable_now();S=P;var A=!0;try{A=R(!0,P)}finally{A?H():(F=!1,R=null)}}else F=!1}var H;if(typeof p=="function")H=function(){p(k)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,ue=I.port2;I.port1.onmessage=k,H=function(){ue.postMessage(null)}}else H=function(){z(k,0)};function E(P){R=P,F||(F=!0,H())}function L(P,A){u=z(function(){P(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(P){P.callback=null},e.unstable_continueExecution=function(){U||C||(U=!0,E(T))},e.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<P?Math.floor(1e3/P):5},e.unstable_getCurrentPriorityLevel=function(){return x},e.unstable_getFirstCallbackNode=function(){return n(i)},e.unstable_next=function(P){switch(x){case 1:case 2:case 3:var A=3;break;default:A=x}var B=x;x=A;try{return P()}finally{x=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(P,A){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var B=x;x=P;try{return A()}finally{x=B}},e.unstable_scheduleCallback=function(P,A,B){var ne=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?ne+B:ne):B=ne,P){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=B+oe,P={id:m++,callback:A,priorityLevel:P,startTime:B,expirationTime:oe,sortIndex:-1},B>ne?(P.sortIndex=B,t(d,P),n(i)===null&&P===n(d)&&(N?(f(u),u=-1):N=!0,L(M,B-ne))):(P.sortIndex=oe,t(i,P),U||C||(U=!0,E(T))),P},e.unstable_shouldYield=j,e.unstable_wrapCallback=function(P){var A=x;return function(){var B=x;x=A;try{return P.apply(this,arguments)}finally{x=B}}}})(fm);hm.exports=fm;var If=hm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lf=g,ys=If;function fe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xm=new Set,El={};function pr(e,t){Fr(e,t),Fr(e+"Capture",t)}function Fr(e,t){for(El[e]=t,e=0;e<t.length;e++)xm.add(t[e])}var fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yi=Object.prototype.hasOwnProperty,Mf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cd={},Sd={};function Ff(e){return yi.call(Sd,e)?!0:yi.call(Cd,e)?!1:Mf.test(e)?Sd[e]=!0:(Cd[e]=!0,!1)}function Af(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function $f(e,t,n,r){if(t===null||typeof t>"u"||Af(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function es(e,t,n,r,l,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ut[e]=new es(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ut[t]=new es(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ut[e]=new es(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ut[e]=new es(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ut[e]=new es(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ut[e]=new es(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ut[e]=new es(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ut[e]=new es(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ut[e]=new es(e,5,!1,e.toLowerCase(),null,!1,!1)});var Nc=/[\-:]([a-z])/g;function kc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Nc,kc);Ut[t]=new es(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Nc,kc);Ut[t]=new es(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Nc,kc);Ut[t]=new es(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ut[e]=new es(e,1,!1,e.toLowerCase(),null,!1,!1)});Ut.xlinkHref=new es("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ut[e]=new es(e,1,!1,e.toLowerCase(),null,!0,!0)});function wc(e,t,n,r){var l=Ut.hasOwnProperty(t)?Ut[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&($f(t,n,l,r)&&(n=null),r||l===null?Ff(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,r=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var bn=Lf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,la=Symbol.for("react.element"),yr=Symbol.for("react.portal"),vr=Symbol.for("react.fragment"),Cc=Symbol.for("react.strict_mode"),vi=Symbol.for("react.profiler"),gm=Symbol.for("react.provider"),ym=Symbol.for("react.context"),Sc=Symbol.for("react.forward_ref"),bi=Symbol.for("react.suspense"),ji=Symbol.for("react.suspense_list"),Dc=Symbol.for("react.memo"),Pn=Symbol.for("react.lazy"),vm=Symbol.for("react.offscreen"),Dd=Symbol.iterator;function sl(e){return e===null||typeof e!="object"?null:(e=Dd&&e[Dd]||e["@@iterator"],typeof e=="function"?e:null)}var yt=Object.assign,Uo;function ml(e){if(Uo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Uo=t&&t[1]||""}return`
`+Uo+e}var Bo=!1;function Wo(e,t){if(!e||Bo)return"";Bo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var l=d.stack.split(`
`),a=r.stack.split(`
`),o=l.length-1,c=a.length-1;1<=o&&0<=c&&l[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(l[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||l[o]!==a[c]){var i=`
`+l[o].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}while(1<=o&&0<=c);break}}}finally{Bo=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ml(e):""}function Uf(e){switch(e.tag){case 5:return ml(e.type);case 16:return ml("Lazy");case 13:return ml("Suspense");case 19:return ml("SuspenseList");case 0:case 2:case 15:return e=Wo(e.type,!1),e;case 11:return e=Wo(e.type.render,!1),e;case 1:return e=Wo(e.type,!0),e;default:return""}}function Ni(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case vr:return"Fragment";case yr:return"Portal";case vi:return"Profiler";case Cc:return"StrictMode";case bi:return"Suspense";case ji:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ym:return(e.displayName||"Context")+".Consumer";case gm:return(e._context.displayName||"Context")+".Provider";case Sc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Dc:return t=e.displayName||null,t!==null?t:Ni(e.type)||"Memo";case Pn:t=e._payload,e=e._init;try{return Ni(e(t))}catch{}}return null}function Bf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ni(t);case 8:return t===Cc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Vn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function bm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Wf(e){var t=bm(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function aa(e){e._valueTracker||(e._valueTracker=Wf(e))}function jm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=bm(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function $a(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ki(e,t){var n=t.checked;return yt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ed(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Vn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nm(e,t){t=t.checked,t!=null&&wc(e,"checked",t,!1)}function wi(e,t){Nm(e,t);var n=Vn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ci(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ci(e,t.type,Vn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Pd(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Ci(e,t,n){(t!=="number"||$a(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var pl=Array.isArray;function Rr(e,t,n,r){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Vn(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Si(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(fe(91));return yt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Rd(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(fe(92));if(pl(n)){if(1<n.length)throw Error(fe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Vn(n)}}function km(e,t){var n=Vn(t.value),r=Vn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function zd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function wm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Di(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?wm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var oa,Cm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(oa=oa||document.createElement("div"),oa.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=oa.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Pl(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var vl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hf=["Webkit","ms","Moz","O"];Object.keys(vl).forEach(function(e){Hf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),vl[t]=vl[e]})});function Sm(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||vl.hasOwnProperty(e)&&vl[e]?(""+t).trim():t+"px"}function Dm(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,l=Sm(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,l):e[n]=l}}var Vf=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ei(e,t){if(t){if(Vf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(fe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(fe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(fe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(fe(62))}}function Pi(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ri=null;function Ec(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zi=null,zr=null,Tr=null;function Td(e){if(e=Jl(e)){if(typeof zi!="function")throw Error(fe(280));var t=e.stateNode;t&&(t=bo(t),zi(e.stateNode,e.type,t))}}function Em(e){zr?Tr?Tr.push(e):Tr=[e]:zr=e}function Pm(){if(zr){var e=zr,t=Tr;if(Tr=zr=null,Td(e),t)for(e=0;e<t.length;e++)Td(t[e])}}function Rm(e,t){return e(t)}function zm(){}var Ho=!1;function Tm(e,t,n){if(Ho)return e(t,n);Ho=!0;try{return Rm(e,t,n)}finally{Ho=!1,(zr!==null||Tr!==null)&&(zm(),Pm())}}function Rl(e,t){var n=e.stateNode;if(n===null)return null;var r=bo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(fe(231,t,typeof n));return n}var Ti=!1;if(fn)try{var nl={};Object.defineProperty(nl,"passive",{get:function(){Ti=!0}}),window.addEventListener("test",nl,nl),window.removeEventListener("test",nl,nl)}catch{Ti=!1}function qf(e,t,n,r,l,a,o,c,i){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(m){this.onError(m)}}var bl=!1,Ua=null,Ba=!1,_i=null,Gf={onError:function(e){bl=!0,Ua=e}};function Kf(e,t,n,r,l,a,o,c,i){bl=!1,Ua=null,qf.apply(Gf,arguments)}function Yf(e,t,n,r,l,a,o,c,i){if(Kf.apply(this,arguments),bl){if(bl){var d=Ua;bl=!1,Ua=null}else throw Error(fe(198));Ba||(Ba=!0,_i=d)}}function hr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function _m(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _d(e){if(hr(e)!==e)throw Error(fe(188))}function Qf(e){var t=e.alternate;if(!t){if(t=hr(e),t===null)throw Error(fe(188));return t!==e?null:e}for(var n=e,r=t;;){var l=n.return;if(l===null)break;var a=l.alternate;if(a===null){if(r=l.return,r!==null){n=r;continue}break}if(l.child===a.child){for(a=l.child;a;){if(a===n)return _d(l),e;if(a===r)return _d(l),t;a=a.sibling}throw Error(fe(188))}if(n.return!==r.return)n=l,r=a;else{for(var o=!1,c=l.child;c;){if(c===n){o=!0,n=l,r=a;break}if(c===r){o=!0,r=l,n=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===n){o=!0,n=a,r=l;break}if(c===r){o=!0,r=a,n=l;break}c=c.sibling}if(!o)throw Error(fe(189))}}if(n.alternate!==r)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?e:t}function Om(e){return e=Qf(e),e!==null?Im(e):null}function Im(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Im(e);if(t!==null)return t;e=e.sibling}return null}var Lm=ys.unstable_scheduleCallback,Od=ys.unstable_cancelCallback,Zf=ys.unstable_shouldYield,Jf=ys.unstable_requestPaint,kt=ys.unstable_now,Xf=ys.unstable_getCurrentPriorityLevel,Pc=ys.unstable_ImmediatePriority,Mm=ys.unstable_UserBlockingPriority,Wa=ys.unstable_NormalPriority,ex=ys.unstable_LowPriority,Fm=ys.unstable_IdlePriority,xo=null,Zs=null;function tx(e){if(Zs&&typeof Zs.onCommitFiberRoot=="function")try{Zs.onCommitFiberRoot(xo,e,void 0,(e.current.flags&128)===128)}catch{}}var Fs=Math.clz32?Math.clz32:rx,sx=Math.log,nx=Math.LN2;function rx(e){return e>>>=0,e===0?32:31-(sx(e)/nx|0)|0}var ia=64,ca=4194304;function hl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ha(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,l=e.suspendedLanes,a=e.pingedLanes,o=n&268435455;if(o!==0){var c=o&~l;c!==0?r=hl(c):(a&=o,a!==0&&(r=hl(a)))}else o=n&~l,o!==0?r=hl(o):a!==0&&(r=hl(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&l)&&(l=r&-r,a=t&-t,l>=a||l===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Fs(t),l=1<<n,r|=e[n],t&=~l;return r}function lx(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ax(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-Fs(a),c=1<<o,i=l[o];i===-1?(!(c&n)||c&r)&&(l[o]=lx(c,t)):i<=t&&(e.expiredLanes|=c),a&=~c}}function Oi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Am(){var e=ia;return ia<<=1,!(ia&4194240)&&(ia=64),e}function Vo(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ql(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Fs(t),e[t]=n}function ox(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-Fs(n),a=1<<l;t[l]=0,r[l]=-1,e[l]=-1,n&=~a}}function Rc(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Fs(n),l=1<<r;l&t|e[r]&t&&(e[r]|=t),n&=~l}}var ot=0;function $m(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Um,zc,Bm,Wm,Hm,Ii=!1,da=[],Ln=null,Mn=null,Fn=null,zl=new Map,Tl=new Map,zn=[],ix="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Id(e,t){switch(e){case"focusin":case"focusout":Ln=null;break;case"dragenter":case"dragleave":Mn=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":zl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tl.delete(t.pointerId)}}function rl(e,t,n,r,l,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[l]},t!==null&&(t=Jl(t),t!==null&&zc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function cx(e,t,n,r,l){switch(t){case"focusin":return Ln=rl(Ln,e,t,n,r,l),!0;case"dragenter":return Mn=rl(Mn,e,t,n,r,l),!0;case"mouseover":return Fn=rl(Fn,e,t,n,r,l),!0;case"pointerover":var a=l.pointerId;return zl.set(a,rl(zl.get(a)||null,e,t,n,r,l)),!0;case"gotpointercapture":return a=l.pointerId,Tl.set(a,rl(Tl.get(a)||null,e,t,n,r,l)),!0}return!1}function Vm(e){var t=er(e.target);if(t!==null){var n=hr(t);if(n!==null){if(t=n.tag,t===13){if(t=_m(n),t!==null){e.blockedOn=t,Hm(e.priority,function(){Bm(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Ea(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Li(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ri=r,n.target.dispatchEvent(r),Ri=null}else return t=Jl(n),t!==null&&zc(t),e.blockedOn=n,!1;t.shift()}return!0}function Ld(e,t,n){Ea(e)&&n.delete(t)}function dx(){Ii=!1,Ln!==null&&Ea(Ln)&&(Ln=null),Mn!==null&&Ea(Mn)&&(Mn=null),Fn!==null&&Ea(Fn)&&(Fn=null),zl.forEach(Ld),Tl.forEach(Ld)}function ll(e,t){e.blockedOn===t&&(e.blockedOn=null,Ii||(Ii=!0,ys.unstable_scheduleCallback(ys.unstable_NormalPriority,dx)))}function _l(e){function t(l){return ll(l,e)}if(0<da.length){ll(da[0],e);for(var n=1;n<da.length;n++){var r=da[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Ln!==null&&ll(Ln,e),Mn!==null&&ll(Mn,e),Fn!==null&&ll(Fn,e),zl.forEach(t),Tl.forEach(t),n=0;n<zn.length;n++)r=zn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<zn.length&&(n=zn[0],n.blockedOn===null);)Vm(n),n.blockedOn===null&&zn.shift()}var _r=bn.ReactCurrentBatchConfig,Va=!0;function ux(e,t,n,r){var l=ot,a=_r.transition;_r.transition=null;try{ot=1,Tc(e,t,n,r)}finally{ot=l,_r.transition=a}}function mx(e,t,n,r){var l=ot,a=_r.transition;_r.transition=null;try{ot=4,Tc(e,t,n,r)}finally{ot=l,_r.transition=a}}function Tc(e,t,n,r){if(Va){var l=Li(e,t,n,r);if(l===null)ti(e,t,r,qa,n),Id(e,r);else if(cx(l,e,t,n,r))r.stopPropagation();else if(Id(e,r),t&4&&-1<ix.indexOf(e)){for(;l!==null;){var a=Jl(l);if(a!==null&&Um(a),a=Li(e,t,n,r),a===null&&ti(e,t,r,qa,n),a===l)break;l=a}l!==null&&r.stopPropagation()}else ti(e,t,r,null,n)}}var qa=null;function Li(e,t,n,r){if(qa=null,e=Ec(r),e=er(e),e!==null)if(t=hr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=_m(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qa=e,null}function qm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xf()){case Pc:return 1;case Mm:return 4;case Wa:case ex:return 16;case Fm:return 536870912;default:return 16}default:return 16}}var _n=null,_c=null,Pa=null;function Gm(){if(Pa)return Pa;var e,t=_c,n=t.length,r,l="value"in _n?_n.value:_n.textContent,a=l.length;for(e=0;e<n&&t[e]===l[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===l[a-r];r++);return Pa=l.slice(e,1<r?1-r:void 0)}function Ra(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ua(){return!0}function Md(){return!1}function bs(e){function t(n,r,l,a,o){this._reactName=n,this._targetInst=l,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(n=e[c],this[c]=n?n(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ua:Md,this.isPropagationStopped=Md,this}return yt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ua)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ua)},persist:function(){},isPersistent:ua}),t}var Kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Oc=bs(Kr),Zl=yt({},Kr,{view:0,detail:0}),px=bs(Zl),qo,Go,al,go=yt({},Zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ic,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==al&&(al&&e.type==="mousemove"?(qo=e.screenX-al.screenX,Go=e.screenY-al.screenY):Go=qo=0,al=e),qo)},movementY:function(e){return"movementY"in e?e.movementY:Go}}),Fd=bs(go),hx=yt({},go,{dataTransfer:0}),fx=bs(hx),xx=yt({},Zl,{relatedTarget:0}),Ko=bs(xx),gx=yt({},Kr,{animationName:0,elapsedTime:0,pseudoElement:0}),yx=bs(gx),vx=yt({},Kr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bx=bs(vx),jx=yt({},Kr,{data:0}),Ad=bs(jx),Nx={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kx={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cx(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wx[e])?!!t[e]:!1}function Ic(){return Cx}var Sx=yt({},Zl,{key:function(e){if(e.key){var t=Nx[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ra(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?kx[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ic,charCode:function(e){return e.type==="keypress"?Ra(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ra(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Dx=bs(Sx),Ex=yt({},go,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$d=bs(Ex),Px=yt({},Zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ic}),Rx=bs(Px),zx=yt({},Kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tx=bs(zx),_x=yt({},go,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ox=bs(_x),Ix=[9,13,27,32],Lc=fn&&"CompositionEvent"in window,jl=null;fn&&"documentMode"in document&&(jl=document.documentMode);var Lx=fn&&"TextEvent"in window&&!jl,Km=fn&&(!Lc||jl&&8<jl&&11>=jl),Ud=String.fromCharCode(32),Bd=!1;function Ym(e,t){switch(e){case"keyup":return Ix.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Qm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var br=!1;function Mx(e,t){switch(e){case"compositionend":return Qm(t);case"keypress":return t.which!==32?null:(Bd=!0,Ud);case"textInput":return e=t.data,e===Ud&&Bd?null:e;default:return null}}function Fx(e,t){if(br)return e==="compositionend"||!Lc&&Ym(e,t)?(e=Gm(),Pa=_c=_n=null,br=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Km&&t.locale!=="ko"?null:t.data;default:return null}}var Ax={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wd(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ax[e.type]:t==="textarea"}function Zm(e,t,n,r){Em(r),t=Ga(t,"onChange"),0<t.length&&(n=new Oc("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Nl=null,Ol=null;function $x(e){ip(e,0)}function yo(e){var t=kr(e);if(jm(t))return e}function Ux(e,t){if(e==="change")return t}var Jm=!1;if(fn){var Yo;if(fn){var Qo="oninput"in document;if(!Qo){var Hd=document.createElement("div");Hd.setAttribute("oninput","return;"),Qo=typeof Hd.oninput=="function"}Yo=Qo}else Yo=!1;Jm=Yo&&(!document.documentMode||9<document.documentMode)}function Vd(){Nl&&(Nl.detachEvent("onpropertychange",Xm),Ol=Nl=null)}function Xm(e){if(e.propertyName==="value"&&yo(Ol)){var t=[];Zm(t,Ol,e,Ec(e)),Tm($x,t)}}function Bx(e,t,n){e==="focusin"?(Vd(),Nl=t,Ol=n,Nl.attachEvent("onpropertychange",Xm)):e==="focusout"&&Vd()}function Wx(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return yo(Ol)}function Hx(e,t){if(e==="click")return yo(t)}function Vx(e,t){if(e==="input"||e==="change")return yo(t)}function qx(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Us=typeof Object.is=="function"?Object.is:qx;function Il(e,t){if(Us(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var l=n[r];if(!yi.call(t,l)||!Us(e[l],t[l]))return!1}return!0}function qd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Gd(e,t){var n=qd(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=qd(n)}}function ep(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ep(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function tp(){for(var e=window,t=$a();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=$a(e.document)}return t}function Mc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Gx(e){var t=tp(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ep(n.ownerDocument.documentElement,n)){if(r!==null&&Mc(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,a=Math.min(r.start,l);r=r.end===void 0?a:Math.min(r.end,l),!e.extend&&a>r&&(l=r,r=a,a=l),l=Gd(n,a);var o=Gd(n,r);l&&o&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Kx=fn&&"documentMode"in document&&11>=document.documentMode,jr=null,Mi=null,kl=null,Fi=!1;function Kd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fi||jr==null||jr!==$a(r)||(r=jr,"selectionStart"in r&&Mc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),kl&&Il(kl,r)||(kl=r,r=Ga(Mi,"onSelect"),0<r.length&&(t=new Oc("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=jr)))}function ma(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Nr={animationend:ma("Animation","AnimationEnd"),animationiteration:ma("Animation","AnimationIteration"),animationstart:ma("Animation","AnimationStart"),transitionend:ma("Transition","TransitionEnd")},Zo={},sp={};fn&&(sp=document.createElement("div").style,"AnimationEvent"in window||(delete Nr.animationend.animation,delete Nr.animationiteration.animation,delete Nr.animationstart.animation),"TransitionEvent"in window||delete Nr.transitionend.transition);function vo(e){if(Zo[e])return Zo[e];if(!Nr[e])return e;var t=Nr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in sp)return Zo[e]=t[n];return e}var np=vo("animationend"),rp=vo("animationiteration"),lp=vo("animationstart"),ap=vo("transitionend"),op=new Map,Yd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gn(e,t){op.set(e,t),pr(t,[e])}for(var Jo=0;Jo<Yd.length;Jo++){var Xo=Yd[Jo],Yx=Xo.toLowerCase(),Qx=Xo[0].toUpperCase()+Xo.slice(1);Gn(Yx,"on"+Qx)}Gn(np,"onAnimationEnd");Gn(rp,"onAnimationIteration");Gn(lp,"onAnimationStart");Gn("dblclick","onDoubleClick");Gn("focusin","onFocus");Gn("focusout","onBlur");Gn(ap,"onTransitionEnd");Fr("onMouseEnter",["mouseout","mouseover"]);Fr("onMouseLeave",["mouseout","mouseover"]);Fr("onPointerEnter",["pointerout","pointerover"]);Fr("onPointerLeave",["pointerout","pointerover"]);pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));pr("onBeforeInput",["compositionend","keypress","textInput","paste"]);pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zx=new Set("cancel close invalid load scroll toggle".split(" ").concat(fl));function Qd(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Yf(r,t,void 0,e),e.currentTarget=null}function ip(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],l=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var c=r[o],i=c.instance,d=c.currentTarget;if(c=c.listener,i!==a&&l.isPropagationStopped())break e;Qd(l,c,d),a=i}else for(o=0;o<r.length;o++){if(c=r[o],i=c.instance,d=c.currentTarget,c=c.listener,i!==a&&l.isPropagationStopped())break e;Qd(l,c,d),a=i}}}if(Ba)throw e=_i,Ba=!1,_i=null,e}function ct(e,t){var n=t[Wi];n===void 0&&(n=t[Wi]=new Set);var r=e+"__bubble";n.has(r)||(cp(t,e,2,!1),n.add(r))}function ei(e,t,n){var r=0;t&&(r|=4),cp(n,e,r,t)}var pa="_reactListening"+Math.random().toString(36).slice(2);function Ll(e){if(!e[pa]){e[pa]=!0,xm.forEach(function(n){n!=="selectionchange"&&(Zx.has(n)||ei(n,!1,e),ei(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[pa]||(t[pa]=!0,ei("selectionchange",!1,t))}}function cp(e,t,n,r){switch(qm(t)){case 1:var l=ux;break;case 4:l=mx;break;default:l=Tc}n=l.bind(null,t,n,e),l=void 0,!Ti||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function ti(e,t,n,r,l){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===l||c.nodeType===8&&c.parentNode===l)break;if(o===4)for(o=r.return;o!==null;){var i=o.tag;if((i===3||i===4)&&(i=o.stateNode.containerInfo,i===l||i.nodeType===8&&i.parentNode===l))return;o=o.return}for(;c!==null;){if(o=er(c),o===null)return;if(i=o.tag,i===5||i===6){r=a=o;continue e}c=c.parentNode}}r=r.return}Tm(function(){var d=a,m=Ec(n),y=[];e:{var x=op.get(e);if(x!==void 0){var C=Oc,U=e;switch(e){case"keypress":if(Ra(n)===0)break e;case"keydown":case"keyup":C=Dx;break;case"focusin":U="focus",C=Ko;break;case"focusout":U="blur",C=Ko;break;case"beforeblur":case"afterblur":C=Ko;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=Fd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=fx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=Rx;break;case np:case rp:case lp:C=yx;break;case ap:C=Tx;break;case"scroll":C=px;break;case"wheel":C=Ox;break;case"copy":case"cut":case"paste":C=bx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=$d}var N=(t&4)!==0,z=!N&&e==="scroll",f=N?x!==null?x+"Capture":null:x;N=[];for(var p=d,h;p!==null;){h=p;var M=h.stateNode;if(h.tag===5&&M!==null&&(h=M,f!==null&&(M=Rl(p,f),M!=null&&N.push(Ml(p,M,h)))),z)break;p=p.return}0<N.length&&(x=new C(x,U,null,n,m),y.push({event:x,listeners:N}))}}if(!(t&7)){e:{if(x=e==="mouseover"||e==="pointerover",C=e==="mouseout"||e==="pointerout",x&&n!==Ri&&(U=n.relatedTarget||n.fromElement)&&(er(U)||U[xn]))break e;if((C||x)&&(x=m.window===m?m:(x=m.ownerDocument)?x.defaultView||x.parentWindow:window,C?(U=n.relatedTarget||n.toElement,C=d,U=U?er(U):null,U!==null&&(z=hr(U),U!==z||U.tag!==5&&U.tag!==6)&&(U=null)):(C=null,U=d),C!==U)){if(N=Fd,M="onMouseLeave",f="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(N=$d,M="onPointerLeave",f="onPointerEnter",p="pointer"),z=C==null?x:kr(C),h=U==null?x:kr(U),x=new N(M,p+"leave",C,n,m),x.target=z,x.relatedTarget=h,M=null,er(m)===d&&(N=new N(f,p+"enter",U,n,m),N.target=h,N.relatedTarget=z,M=N),z=M,C&&U)t:{for(N=C,f=U,p=0,h=N;h;h=fr(h))p++;for(h=0,M=f;M;M=fr(M))h++;for(;0<p-h;)N=fr(N),p--;for(;0<h-p;)f=fr(f),h--;for(;p--;){if(N===f||f!==null&&N===f.alternate)break t;N=fr(N),f=fr(f)}N=null}else N=null;C!==null&&Zd(y,x,C,N,!1),U!==null&&z!==null&&Zd(y,z,U,N,!0)}}e:{if(x=d?kr(d):window,C=x.nodeName&&x.nodeName.toLowerCase(),C==="select"||C==="input"&&x.type==="file")var T=Ux;else if(Wd(x))if(Jm)T=Vx;else{T=Wx;var F=Bx}else(C=x.nodeName)&&C.toLowerCase()==="input"&&(x.type==="checkbox"||x.type==="radio")&&(T=Hx);if(T&&(T=T(e,d))){Zm(y,T,n,m);break e}F&&F(e,x,d),e==="focusout"&&(F=x._wrapperState)&&F.controlled&&x.type==="number"&&Ci(x,"number",x.value)}switch(F=d?kr(d):window,e){case"focusin":(Wd(F)||F.contentEditable==="true")&&(jr=F,Mi=d,kl=null);break;case"focusout":kl=Mi=jr=null;break;case"mousedown":Fi=!0;break;case"contextmenu":case"mouseup":case"dragend":Fi=!1,Kd(y,n,m);break;case"selectionchange":if(Kx)break;case"keydown":case"keyup":Kd(y,n,m)}var R;if(Lc)e:{switch(e){case"compositionstart":var u="onCompositionStart";break e;case"compositionend":u="onCompositionEnd";break e;case"compositionupdate":u="onCompositionUpdate";break e}u=void 0}else br?Ym(e,n)&&(u="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(u="onCompositionStart");u&&(Km&&n.locale!=="ko"&&(br||u!=="onCompositionStart"?u==="onCompositionEnd"&&br&&(R=Gm()):(_n=m,_c="value"in _n?_n.value:_n.textContent,br=!0)),F=Ga(d,u),0<F.length&&(u=new Ad(u,e,null,n,m),y.push({event:u,listeners:F}),R?u.data=R:(R=Qm(n),R!==null&&(u.data=R)))),(R=Lx?Mx(e,n):Fx(e,n))&&(d=Ga(d,"onBeforeInput"),0<d.length&&(m=new Ad("onBeforeInput","beforeinput",null,n,m),y.push({event:m,listeners:d}),m.data=R))}ip(y,t)})}function Ml(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ga(e,t){for(var n=t+"Capture",r=[];e!==null;){var l=e,a=l.stateNode;l.tag===5&&a!==null&&(l=a,a=Rl(e,n),a!=null&&r.unshift(Ml(e,a,l)),a=Rl(e,t),a!=null&&r.push(Ml(e,a,l))),e=e.return}return r}function fr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Zd(e,t,n,r,l){for(var a=t._reactName,o=[];n!==null&&n!==r;){var c=n,i=c.alternate,d=c.stateNode;if(i!==null&&i===r)break;c.tag===5&&d!==null&&(c=d,l?(i=Rl(n,a),i!=null&&o.unshift(Ml(n,i,c))):l||(i=Rl(n,a),i!=null&&o.push(Ml(n,i,c)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Jx=/\r\n?/g,Xx=/\u0000|\uFFFD/g;function Jd(e){return(typeof e=="string"?e:""+e).replace(Jx,`
`).replace(Xx,"")}function ha(e,t,n){if(t=Jd(t),Jd(e)!==t&&n)throw Error(fe(425))}function Ka(){}var Ai=null,$i=null;function Ui(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Bi=typeof setTimeout=="function"?setTimeout:void 0,eg=typeof clearTimeout=="function"?clearTimeout:void 0,Xd=typeof Promise=="function"?Promise:void 0,tg=typeof queueMicrotask=="function"?queueMicrotask:typeof Xd<"u"?function(e){return Xd.resolve(null).then(e).catch(sg)}:Bi;function sg(e){setTimeout(function(){throw e})}function si(e,t){var n=t,r=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(r===0){e.removeChild(l),_l(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=l}while(n);_l(t)}function An(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function eu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Yr=Math.random().toString(36).slice(2),Ks="__reactFiber$"+Yr,Fl="__reactProps$"+Yr,xn="__reactContainer$"+Yr,Wi="__reactEvents$"+Yr,ng="__reactListeners$"+Yr,rg="__reactHandles$"+Yr;function er(e){var t=e[Ks];if(t)return t;for(var n=e.parentNode;n;){if(t=n[xn]||n[Ks]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=eu(e);e!==null;){if(n=e[Ks])return n;e=eu(e)}return t}e=n,n=e.parentNode}return null}function Jl(e){return e=e[Ks]||e[xn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function kr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(fe(33))}function bo(e){return e[Fl]||null}var Hi=[],wr=-1;function Kn(e){return{current:e}}function dt(e){0>wr||(e.current=Hi[wr],Hi[wr]=null,wr--)}function it(e,t){wr++,Hi[wr]=e.current,e.current=t}var qn={},Yt=Kn(qn),os=Kn(!1),ar=qn;function Ar(e,t){var n=e.type.contextTypes;if(!n)return qn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},a;for(a in n)l[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function is(e){return e=e.childContextTypes,e!=null}function Ya(){dt(os),dt(Yt)}function tu(e,t,n){if(Yt.current!==qn)throw Error(fe(168));it(Yt,t),it(os,n)}function dp(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(fe(108,Bf(e)||"Unknown",l));return yt({},n,r)}function Qa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||qn,ar=Yt.current,it(Yt,e),it(os,os.current),!0}function su(e,t,n){var r=e.stateNode;if(!r)throw Error(fe(169));n?(e=dp(e,t,ar),r.__reactInternalMemoizedMergedChildContext=e,dt(os),dt(Yt),it(Yt,e)):dt(os),it(os,n)}var on=null,jo=!1,ni=!1;function up(e){on===null?on=[e]:on.push(e)}function lg(e){jo=!0,up(e)}function Yn(){if(!ni&&on!==null){ni=!0;var e=0,t=ot;try{var n=on;for(ot=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}on=null,jo=!1}catch(l){throw on!==null&&(on=on.slice(e+1)),Lm(Pc,Yn),l}finally{ot=t,ni=!1}}return null}var Cr=[],Sr=0,Za=null,Ja=0,Cs=[],Ss=0,or=null,cn=1,dn="";function Jn(e,t){Cr[Sr++]=Ja,Cr[Sr++]=Za,Za=e,Ja=t}function mp(e,t,n){Cs[Ss++]=cn,Cs[Ss++]=dn,Cs[Ss++]=or,or=e;var r=cn;e=dn;var l=32-Fs(r)-1;r&=~(1<<l),n+=1;var a=32-Fs(t)+l;if(30<a){var o=l-l%5;a=(r&(1<<o)-1).toString(32),r>>=o,l-=o,cn=1<<32-Fs(t)+l|n<<l|r,dn=a+e}else cn=1<<a|n<<l|r,dn=e}function Fc(e){e.return!==null&&(Jn(e,1),mp(e,1,0))}function Ac(e){for(;e===Za;)Za=Cr[--Sr],Cr[Sr]=null,Ja=Cr[--Sr],Cr[Sr]=null;for(;e===or;)or=Cs[--Ss],Cs[Ss]=null,dn=Cs[--Ss],Cs[Ss]=null,cn=Cs[--Ss],Cs[Ss]=null}var fs=null,hs=null,mt=!1,Ms=null;function pp(e,t){var n=Ds(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function nu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,fs=e,hs=An(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,fs=e,hs=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=or!==null?{id:cn,overflow:dn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ds(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,fs=e,hs=null,!0):!1;default:return!1}}function Vi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function qi(e){if(mt){var t=hs;if(t){var n=t;if(!nu(e,t)){if(Vi(e))throw Error(fe(418));t=An(n.nextSibling);var r=fs;t&&nu(e,t)?pp(r,n):(e.flags=e.flags&-4097|2,mt=!1,fs=e)}}else{if(Vi(e))throw Error(fe(418));e.flags=e.flags&-4097|2,mt=!1,fs=e}}}function ru(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;fs=e}function fa(e){if(e!==fs)return!1;if(!mt)return ru(e),mt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ui(e.type,e.memoizedProps)),t&&(t=hs)){if(Vi(e))throw hp(),Error(fe(418));for(;t;)pp(e,t),t=An(t.nextSibling)}if(ru(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(fe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){hs=An(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}hs=null}}else hs=fs?An(e.stateNode.nextSibling):null;return!0}function hp(){for(var e=hs;e;)e=An(e.nextSibling)}function $r(){hs=fs=null,mt=!1}function $c(e){Ms===null?Ms=[e]:Ms.push(e)}var ag=bn.ReactCurrentBatchConfig;function ol(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var r=n.stateNode}if(!r)throw Error(fe(147,e));var l=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var c=l.refs;o===null?delete c[a]:c[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,e))}return e}function xa(e,t){throw e=Object.prototype.toString.call(t),Error(fe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function lu(e){var t=e._init;return t(e._payload)}function fp(e){function t(f,p){if(e){var h=f.deletions;h===null?(f.deletions=[p],f.flags|=16):h.push(p)}}function n(f,p){if(!e)return null;for(;p!==null;)t(f,p),p=p.sibling;return null}function r(f,p){for(f=new Map;p!==null;)p.key!==null?f.set(p.key,p):f.set(p.index,p),p=p.sibling;return f}function l(f,p){return f=Wn(f,p),f.index=0,f.sibling=null,f}function a(f,p,h){return f.index=h,e?(h=f.alternate,h!==null?(h=h.index,h<p?(f.flags|=2,p):h):(f.flags|=2,p)):(f.flags|=1048576,p)}function o(f){return e&&f.alternate===null&&(f.flags|=2),f}function c(f,p,h,M){return p===null||p.tag!==6?(p=di(h,f.mode,M),p.return=f,p):(p=l(p,h),p.return=f,p)}function i(f,p,h,M){var T=h.type;return T===vr?m(f,p,h.props.children,M,h.key):p!==null&&(p.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Pn&&lu(T)===p.type)?(M=l(p,h.props),M.ref=ol(f,p,h),M.return=f,M):(M=Ma(h.type,h.key,h.props,null,f.mode,M),M.ref=ol(f,p,h),M.return=f,M)}function d(f,p,h,M){return p===null||p.tag!==4||p.stateNode.containerInfo!==h.containerInfo||p.stateNode.implementation!==h.implementation?(p=ui(h,f.mode,M),p.return=f,p):(p=l(p,h.children||[]),p.return=f,p)}function m(f,p,h,M,T){return p===null||p.tag!==7?(p=lr(h,f.mode,M,T),p.return=f,p):(p=l(p,h),p.return=f,p)}function y(f,p,h){if(typeof p=="string"&&p!==""||typeof p=="number")return p=di(""+p,f.mode,h),p.return=f,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case la:return h=Ma(p.type,p.key,p.props,null,f.mode,h),h.ref=ol(f,null,p),h.return=f,h;case yr:return p=ui(p,f.mode,h),p.return=f,p;case Pn:var M=p._init;return y(f,M(p._payload),h)}if(pl(p)||sl(p))return p=lr(p,f.mode,h,null),p.return=f,p;xa(f,p)}return null}function x(f,p,h,M){var T=p!==null?p.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return T!==null?null:c(f,p,""+h,M);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case la:return h.key===T?i(f,p,h,M):null;case yr:return h.key===T?d(f,p,h,M):null;case Pn:return T=h._init,x(f,p,T(h._payload),M)}if(pl(h)||sl(h))return T!==null?null:m(f,p,h,M,null);xa(f,h)}return null}function C(f,p,h,M,T){if(typeof M=="string"&&M!==""||typeof M=="number")return f=f.get(h)||null,c(p,f,""+M,T);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case la:return f=f.get(M.key===null?h:M.key)||null,i(p,f,M,T);case yr:return f=f.get(M.key===null?h:M.key)||null,d(p,f,M,T);case Pn:var F=M._init;return C(f,p,h,F(M._payload),T)}if(pl(M)||sl(M))return f=f.get(h)||null,m(p,f,M,T,null);xa(p,M)}return null}function U(f,p,h,M){for(var T=null,F=null,R=p,u=p=0,b=null;R!==null&&u<h.length;u++){R.index>u?(b=R,R=null):b=R.sibling;var S=x(f,R,h[u],M);if(S===null){R===null&&(R=b);break}e&&R&&S.alternate===null&&t(f,R),p=a(S,p,u),F===null?T=S:F.sibling=S,F=S,R=b}if(u===h.length)return n(f,R),mt&&Jn(f,u),T;if(R===null){for(;u<h.length;u++)R=y(f,h[u],M),R!==null&&(p=a(R,p,u),F===null?T=R:F.sibling=R,F=R);return mt&&Jn(f,u),T}for(R=r(f,R);u<h.length;u++)b=C(R,f,u,h[u],M),b!==null&&(e&&b.alternate!==null&&R.delete(b.key===null?u:b.key),p=a(b,p,u),F===null?T=b:F.sibling=b,F=b);return e&&R.forEach(function(j){return t(f,j)}),mt&&Jn(f,u),T}function N(f,p,h,M){var T=sl(h);if(typeof T!="function")throw Error(fe(150));if(h=T.call(h),h==null)throw Error(fe(151));for(var F=T=null,R=p,u=p=0,b=null,S=h.next();R!==null&&!S.done;u++,S=h.next()){R.index>u?(b=R,R=null):b=R.sibling;var j=x(f,R,S.value,M);if(j===null){R===null&&(R=b);break}e&&R&&j.alternate===null&&t(f,R),p=a(j,p,u),F===null?T=j:F.sibling=j,F=j,R=b}if(S.done)return n(f,R),mt&&Jn(f,u),T;if(R===null){for(;!S.done;u++,S=h.next())S=y(f,S.value,M),S!==null&&(p=a(S,p,u),F===null?T=S:F.sibling=S,F=S);return mt&&Jn(f,u),T}for(R=r(f,R);!S.done;u++,S=h.next())S=C(R,f,u,S.value,M),S!==null&&(e&&S.alternate!==null&&R.delete(S.key===null?u:S.key),p=a(S,p,u),F===null?T=S:F.sibling=S,F=S);return e&&R.forEach(function(k){return t(f,k)}),mt&&Jn(f,u),T}function z(f,p,h,M){if(typeof h=="object"&&h!==null&&h.type===vr&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case la:e:{for(var T=h.key,F=p;F!==null;){if(F.key===T){if(T=h.type,T===vr){if(F.tag===7){n(f,F.sibling),p=l(F,h.props.children),p.return=f,f=p;break e}}else if(F.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Pn&&lu(T)===F.type){n(f,F.sibling),p=l(F,h.props),p.ref=ol(f,F,h),p.return=f,f=p;break e}n(f,F);break}else t(f,F);F=F.sibling}h.type===vr?(p=lr(h.props.children,f.mode,M,h.key),p.return=f,f=p):(M=Ma(h.type,h.key,h.props,null,f.mode,M),M.ref=ol(f,p,h),M.return=f,f=M)}return o(f);case yr:e:{for(F=h.key;p!==null;){if(p.key===F)if(p.tag===4&&p.stateNode.containerInfo===h.containerInfo&&p.stateNode.implementation===h.implementation){n(f,p.sibling),p=l(p,h.children||[]),p.return=f,f=p;break e}else{n(f,p);break}else t(f,p);p=p.sibling}p=ui(h,f.mode,M),p.return=f,f=p}return o(f);case Pn:return F=h._init,z(f,p,F(h._payload),M)}if(pl(h))return U(f,p,h,M);if(sl(h))return N(f,p,h,M);xa(f,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,p!==null&&p.tag===6?(n(f,p.sibling),p=l(p,h),p.return=f,f=p):(n(f,p),p=di(h,f.mode,M),p.return=f,f=p),o(f)):n(f,p)}return z}var Ur=fp(!0),xp=fp(!1),Xa=Kn(null),eo=null,Dr=null,Uc=null;function Bc(){Uc=Dr=eo=null}function Wc(e){var t=Xa.current;dt(Xa),e._currentValue=t}function Gi(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Or(e,t){eo=e,Uc=Dr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ls=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(Uc!==e)if(e={context:e,memoizedValue:t,next:null},Dr===null){if(eo===null)throw Error(fe(308));Dr=e,eo.dependencies={lanes:0,firstContext:e}}else Dr=Dr.next=e;return t}var tr=null;function Hc(e){tr===null?tr=[e]:tr.push(e)}function gp(e,t,n,r){var l=t.interleaved;return l===null?(n.next=n,Hc(t)):(n.next=l.next,l.next=n),t.interleaved=n,gn(e,r)}function gn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Rn=!1;function Vc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $n(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,tt&2){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,gn(e,n)}return l=r.interleaved,l===null?(t.next=t,Hc(r)):(t.next=l.next,l.next=t),r.interleaved=t,gn(e,n)}function za(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rc(e,n)}}function au(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var l=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?l=a=o:a=a.next=o,n=n.next}while(n!==null);a===null?l=a=t:a=a.next=t}else l=a=t;n={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function to(e,t,n,r){var l=e.updateQueue;Rn=!1;var a=l.firstBaseUpdate,o=l.lastBaseUpdate,c=l.shared.pending;if(c!==null){l.shared.pending=null;var i=c,d=i.next;i.next=null,o===null?a=d:o.next=d,o=i;var m=e.alternate;m!==null&&(m=m.updateQueue,c=m.lastBaseUpdate,c!==o&&(c===null?m.firstBaseUpdate=d:c.next=d,m.lastBaseUpdate=i))}if(a!==null){var y=l.baseState;o=0,m=d=i=null,c=a;do{var x=c.lane,C=c.eventTime;if((r&x)===x){m!==null&&(m=m.next={eventTime:C,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var U=e,N=c;switch(x=t,C=n,N.tag){case 1:if(U=N.payload,typeof U=="function"){y=U.call(C,y,x);break e}y=U;break e;case 3:U.flags=U.flags&-65537|128;case 0:if(U=N.payload,x=typeof U=="function"?U.call(C,y,x):U,x==null)break e;y=yt({},y,x);break e;case 2:Rn=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,x=l.effects,x===null?l.effects=[c]:x.push(c))}else C={eventTime:C,lane:x,tag:c.tag,payload:c.payload,callback:c.callback,next:null},m===null?(d=m=C,i=y):m=m.next=C,o|=x;if(c=c.next,c===null){if(c=l.shared.pending,c===null)break;x=c,c=x.next,x.next=null,l.lastBaseUpdate=x,l.shared.pending=null}}while(1);if(m===null&&(i=y),l.baseState=i,l.firstBaseUpdate=d,l.lastBaseUpdate=m,t=l.shared.interleaved,t!==null){l=t;do o|=l.lane,l=l.next;while(l!==t)}else a===null&&(l.shared.lanes=0);cr|=o,e.lanes=o,e.memoizedState=y}}function ou(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=n,typeof l!="function")throw Error(fe(191,l));l.call(r)}}}var Xl={},Js=Kn(Xl),Al=Kn(Xl),$l=Kn(Xl);function sr(e){if(e===Xl)throw Error(fe(174));return e}function qc(e,t){switch(it($l,t),it(Al,e),it(Js,Xl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Di(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Di(t,e)}dt(Js),it(Js,t)}function Br(){dt(Js),dt(Al),dt($l)}function vp(e){sr($l.current);var t=sr(Js.current),n=Di(t,e.type);t!==n&&(it(Al,e),it(Js,n))}function Gc(e){Al.current===e&&(dt(Js),dt(Al))}var ft=Kn(0);function so(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ri=[];function Kc(){for(var e=0;e<ri.length;e++)ri[e]._workInProgressVersionPrimary=null;ri.length=0}var Ta=bn.ReactCurrentDispatcher,li=bn.ReactCurrentBatchConfig,ir=0,xt=null,Dt=null,_t=null,no=!1,wl=!1,Ul=0,og=0;function Wt(){throw Error(fe(321))}function Yc(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Us(e[n],t[n]))return!1;return!0}function Qc(e,t,n,r,l,a){if(ir=a,xt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ta.current=e===null||e.memoizedState===null?ug:mg,e=n(r,l),wl){a=0;do{if(wl=!1,Ul=0,25<=a)throw Error(fe(301));a+=1,_t=Dt=null,t.updateQueue=null,Ta.current=pg,e=n(r,l)}while(wl)}if(Ta.current=ro,t=Dt!==null&&Dt.next!==null,ir=0,_t=Dt=xt=null,no=!1,t)throw Error(fe(300));return e}function Zc(){var e=Ul!==0;return Ul=0,e}function Gs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _t===null?xt.memoizedState=_t=e:_t=_t.next=e,_t}function Rs(){if(Dt===null){var e=xt.alternate;e=e!==null?e.memoizedState:null}else e=Dt.next;var t=_t===null?xt.memoizedState:_t.next;if(t!==null)_t=t,Dt=e;else{if(e===null)throw Error(fe(310));Dt=e,e={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},_t===null?xt.memoizedState=_t=e:_t=_t.next=e}return _t}function Bl(e,t){return typeof t=="function"?t(e):t}function ai(e){var t=Rs(),n=t.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=e;var r=Dt,l=r.baseQueue,a=n.pending;if(a!==null){if(l!==null){var o=l.next;l.next=a.next,a.next=o}r.baseQueue=l=a,n.pending=null}if(l!==null){a=l.next,r=r.baseState;var c=o=null,i=null,d=a;do{var m=d.lane;if((ir&m)===m)i!==null&&(i=i.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var y={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};i===null?(c=i=y,o=r):i=i.next=y,xt.lanes|=m,cr|=m}d=d.next}while(d!==null&&d!==a);i===null?o=r:i.next=c,Us(r,t.memoizedState)||(ls=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=i,n.lastRenderedState=r}if(e=n.interleaved,e!==null){l=e;do a=l.lane,xt.lanes|=a,cr|=a,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function oi(e){var t=Rs(),n=t.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=e;var r=n.dispatch,l=n.pending,a=t.memoizedState;if(l!==null){n.pending=null;var o=l=l.next;do a=e(a,o.action),o=o.next;while(o!==l);Us(a,t.memoizedState)||(ls=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function bp(){}function jp(e,t){var n=xt,r=Rs(),l=t(),a=!Us(r.memoizedState,l);if(a&&(r.memoizedState=l,ls=!0),r=r.queue,Jc(wp.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||_t!==null&&_t.memoizedState.tag&1){if(n.flags|=2048,Wl(9,kp.bind(null,n,r,l,t),void 0,null),Ot===null)throw Error(fe(349));ir&30||Np(n,t,l)}return l}function Np(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xt.updateQueue,t===null?(t={lastEffect:null,stores:null},xt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function kp(e,t,n,r){t.value=n,t.getSnapshot=r,Cp(t)&&Sp(e)}function wp(e,t,n){return n(function(){Cp(t)&&Sp(e)})}function Cp(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Us(e,n)}catch{return!0}}function Sp(e){var t=gn(e,1);t!==null&&As(t,e,1,-1)}function iu(e){var t=Gs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bl,lastRenderedState:e},t.queue=e,e=e.dispatch=dg.bind(null,xt,e),[t.memoizedState,e]}function Wl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=xt.updateQueue,t===null?(t={lastEffect:null,stores:null},xt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Dp(){return Rs().memoizedState}function _a(e,t,n,r){var l=Gs();xt.flags|=e,l.memoizedState=Wl(1|t,n,void 0,r===void 0?null:r)}function No(e,t,n,r){var l=Rs();r=r===void 0?null:r;var a=void 0;if(Dt!==null){var o=Dt.memoizedState;if(a=o.destroy,r!==null&&Yc(r,o.deps)){l.memoizedState=Wl(t,n,a,r);return}}xt.flags|=e,l.memoizedState=Wl(1|t,n,a,r)}function cu(e,t){return _a(8390656,8,e,t)}function Jc(e,t){return No(2048,8,e,t)}function Ep(e,t){return No(4,2,e,t)}function Pp(e,t){return No(4,4,e,t)}function Rp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zp(e,t,n){return n=n!=null?n.concat([e]):null,No(4,4,Rp.bind(null,t,e),n)}function Xc(){}function Tp(e,t){var n=Rs();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Yc(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _p(e,t){var n=Rs();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Yc(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Op(e,t,n){return ir&21?(Us(n,t)||(n=Am(),xt.lanes|=n,cr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ls=!0),e.memoizedState=n)}function ig(e,t){var n=ot;ot=n!==0&&4>n?n:4,e(!0);var r=li.transition;li.transition={};try{e(!1),t()}finally{ot=n,li.transition=r}}function Ip(){return Rs().memoizedState}function cg(e,t,n){var r=Bn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Lp(e))Mp(t,n);else if(n=gp(e,t,n,r),n!==null){var l=Jt();As(n,e,r,l),Fp(n,t,r)}}function dg(e,t,n){var r=Bn(e),l={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Lp(e))Mp(t,l);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,c=a(o,n);if(l.hasEagerState=!0,l.eagerState=c,Us(c,o)){var i=t.interleaved;i===null?(l.next=l,Hc(t)):(l.next=i.next,i.next=l),t.interleaved=l;return}}catch{}finally{}n=gp(e,t,l,r),n!==null&&(l=Jt(),As(n,e,r,l),Fp(n,t,r))}}function Lp(e){var t=e.alternate;return e===xt||t!==null&&t===xt}function Mp(e,t){wl=no=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Fp(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Rc(e,n)}}var ro={readContext:Ps,useCallback:Wt,useContext:Wt,useEffect:Wt,useImperativeHandle:Wt,useInsertionEffect:Wt,useLayoutEffect:Wt,useMemo:Wt,useReducer:Wt,useRef:Wt,useState:Wt,useDebugValue:Wt,useDeferredValue:Wt,useTransition:Wt,useMutableSource:Wt,useSyncExternalStore:Wt,useId:Wt,unstable_isNewReconciler:!1},ug={readContext:Ps,useCallback:function(e,t){return Gs().memoizedState=[e,t===void 0?null:t],e},useContext:Ps,useEffect:cu,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,_a(4194308,4,Rp.bind(null,t,e),n)},useLayoutEffect:function(e,t){return _a(4194308,4,e,t)},useInsertionEffect:function(e,t){return _a(4,2,e,t)},useMemo:function(e,t){var n=Gs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Gs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=cg.bind(null,xt,e),[r.memoizedState,e]},useRef:function(e){var t=Gs();return e={current:e},t.memoizedState=e},useState:iu,useDebugValue:Xc,useDeferredValue:function(e){return Gs().memoizedState=e},useTransition:function(){var e=iu(!1),t=e[0];return e=ig.bind(null,e[1]),Gs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=xt,l=Gs();if(mt){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=t(),Ot===null)throw Error(fe(349));ir&30||Np(r,t,n)}l.memoizedState=n;var a={value:n,getSnapshot:t};return l.queue=a,cu(wp.bind(null,r,a,e),[e]),r.flags|=2048,Wl(9,kp.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Gs(),t=Ot.identifierPrefix;if(mt){var n=dn,r=cn;n=(r&~(1<<32-Fs(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ul++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=og++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mg={readContext:Ps,useCallback:Tp,useContext:Ps,useEffect:Jc,useImperativeHandle:zp,useInsertionEffect:Ep,useLayoutEffect:Pp,useMemo:_p,useReducer:ai,useRef:Dp,useState:function(){return ai(Bl)},useDebugValue:Xc,useDeferredValue:function(e){var t=Rs();return Op(t,Dt.memoizedState,e)},useTransition:function(){var e=ai(Bl)[0],t=Rs().memoizedState;return[e,t]},useMutableSource:bp,useSyncExternalStore:jp,useId:Ip,unstable_isNewReconciler:!1},pg={readContext:Ps,useCallback:Tp,useContext:Ps,useEffect:Jc,useImperativeHandle:zp,useInsertionEffect:Ep,useLayoutEffect:Pp,useMemo:_p,useReducer:oi,useRef:Dp,useState:function(){return oi(Bl)},useDebugValue:Xc,useDeferredValue:function(e){var t=Rs();return Dt===null?t.memoizedState=e:Op(t,Dt.memoizedState,e)},useTransition:function(){var e=oi(Bl)[0],t=Rs().memoizedState;return[e,t]},useMutableSource:bp,useSyncExternalStore:jp,useId:Ip,unstable_isNewReconciler:!1};function Is(e,t){if(e&&e.defaultProps){t=yt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ki(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:yt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ko={isMounted:function(e){return(e=e._reactInternals)?hr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Jt(),l=Bn(e),a=mn(r,l);a.payload=t,n!=null&&(a.callback=n),t=$n(e,a,l),t!==null&&(As(t,e,l,r),za(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Jt(),l=Bn(e),a=mn(r,l);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=$n(e,a,l),t!==null&&(As(t,e,l,r),za(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Jt(),r=Bn(e),l=mn(n,r);l.tag=2,t!=null&&(l.callback=t),t=$n(e,l,r),t!==null&&(As(t,e,r,n),za(t,e,r))}};function du(e,t,n,r,l,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!Il(n,r)||!Il(l,a):!0}function Ap(e,t,n){var r=!1,l=qn,a=t.contextType;return typeof a=="object"&&a!==null?a=Ps(a):(l=is(t)?ar:Yt.current,r=t.contextTypes,a=(r=r!=null)?Ar(e,l):qn),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ko,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=a),t}function uu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ko.enqueueReplaceState(t,t.state,null)}function Yi(e,t,n,r){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},Vc(e);var a=t.contextType;typeof a=="object"&&a!==null?l.context=Ps(a):(a=is(t)?ar:Yt.current,l.context=Ar(e,a)),l.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Ki(e,t,a,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&ko.enqueueReplaceState(l,l.state,null),to(e,n,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function Wr(e,t){try{var n="",r=t;do n+=Uf(r),r=r.return;while(r);var l=n}catch(a){l=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:l,digest:null}}function ii(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Qi(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var hg=typeof WeakMap=="function"?WeakMap:Map;function $p(e,t,n){n=mn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ao||(ao=!0,ac=r),Qi(e,t)},n}function Up(e,t,n){n=mn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;n.payload=function(){return r(l)},n.callback=function(){Qi(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Qi(e,t),typeof r!="function"&&(Un===null?Un=new Set([this]):Un.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function mu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new hg;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(n)||(l.add(n),e=Eg.bind(null,e,t,n),t.then(e,e))}function pu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function hu(e,t,n,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=mn(-1,1),t.tag=2,$n(n,t,1))),n.lanes|=1),e)}var fg=bn.ReactCurrentOwner,ls=!1;function Zt(e,t,n,r){t.child=e===null?xp(t,null,n,r):Ur(t,e.child,n,r)}function fu(e,t,n,r,l){n=n.render;var a=t.ref;return Or(t,l),r=Qc(e,t,n,r,a,l),n=Zc(),e!==null&&!ls?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,yn(e,t,l)):(mt&&n&&Fc(t),t.flags|=1,Zt(e,t,r,l),t.child)}function xu(e,t,n,r,l){if(e===null){var a=n.type;return typeof a=="function"&&!od(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,Bp(e,t,a,r,l)):(e=Ma(n.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&l)){var o=a.memoizedProps;if(n=n.compare,n=n!==null?n:Il,n(o,r)&&e.ref===t.ref)return yn(e,t,l)}return t.flags|=1,e=Wn(a,r),e.ref=t.ref,e.return=t,t.child=e}function Bp(e,t,n,r,l){if(e!==null){var a=e.memoizedProps;if(Il(a,r)&&e.ref===t.ref)if(ls=!1,t.pendingProps=r=a,(e.lanes&l)!==0)e.flags&131072&&(ls=!0);else return t.lanes=e.lanes,yn(e,t,l)}return Zi(e,t,n,r,l)}function Wp(e,t,n){var r=t.pendingProps,l=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},it(Pr,ms),ms|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,it(Pr,ms),ms|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,it(Pr,ms),ms|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,it(Pr,ms),ms|=r;return Zt(e,t,l,n),t.child}function Hp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Zi(e,t,n,r,l){var a=is(n)?ar:Yt.current;return a=Ar(t,a),Or(t,l),n=Qc(e,t,n,r,a,l),r=Zc(),e!==null&&!ls?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,yn(e,t,l)):(mt&&r&&Fc(t),t.flags|=1,Zt(e,t,n,l),t.child)}function gu(e,t,n,r,l){if(is(n)){var a=!0;Qa(t)}else a=!1;if(Or(t,l),t.stateNode===null)Oa(e,t),Ap(t,n,r),Yi(t,n,r,l),r=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var i=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ps(d):(d=is(n)?ar:Yt.current,d=Ar(t,d));var m=n.getDerivedStateFromProps,y=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";y||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||i!==d)&&uu(t,o,r,d),Rn=!1;var x=t.memoizedState;o.state=x,to(t,r,o,l),i=t.memoizedState,c!==r||x!==i||os.current||Rn?(typeof m=="function"&&(Ki(t,n,m,r),i=t.memoizedState),(c=Rn||du(t,n,c,r,x,i,d))?(y||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=i),o.props=r,o.state=i,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,yp(e,t),c=t.memoizedProps,d=t.type===t.elementType?c:Is(t.type,c),o.props=d,y=t.pendingProps,x=o.context,i=n.contextType,typeof i=="object"&&i!==null?i=Ps(i):(i=is(n)?ar:Yt.current,i=Ar(t,i));var C=n.getDerivedStateFromProps;(m=typeof C=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==y||x!==i)&&uu(t,o,r,i),Rn=!1,x=t.memoizedState,o.state=x,to(t,r,o,l);var U=t.memoizedState;c!==y||x!==U||os.current||Rn?(typeof C=="function"&&(Ki(t,n,C,r),U=t.memoizedState),(d=Rn||du(t,n,d,r,x,U,i)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,U,i),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,U,i)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=U),o.props=r,o.state=U,o.context=i,r=d):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&x===e.memoizedState||(t.flags|=1024),r=!1)}return Ji(e,t,n,r,a,l)}function Ji(e,t,n,r,l,a){Hp(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return l&&su(t,n,!1),yn(e,t,a);r=t.stateNode,fg.current=t;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Ur(t,e.child,null,a),t.child=Ur(t,null,c,a)):Zt(e,t,c,a),t.memoizedState=r.state,l&&su(t,n,!0),t.child}function Vp(e){var t=e.stateNode;t.pendingContext?tu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&tu(e,t.context,!1),qc(e,t.containerInfo)}function yu(e,t,n,r,l){return $r(),$c(l),t.flags|=256,Zt(e,t,n,r),t.child}var Xi={dehydrated:null,treeContext:null,retryLane:0};function ec(e){return{baseLanes:e,cachePool:null,transitions:null}}function qp(e,t,n){var r=t.pendingProps,l=ft.current,a=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(l&2)!==0),c?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),it(ft,l&1),e===null)return qi(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=So(o,r,0,null),e=lr(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ec(n),t.memoizedState=Xi,e):ed(t,o));if(l=e.memoizedState,l!==null&&(c=l.dehydrated,c!==null))return xg(e,t,o,r,c,l,n);if(a){a=r.fallback,o=t.mode,l=e.child,c=l.sibling;var i={mode:"hidden",children:r.children};return!(o&1)&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=i,t.deletions=null):(r=Wn(l,i),r.subtreeFlags=l.subtreeFlags&14680064),c!==null?a=Wn(c,a):(a=lr(a,o,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?ec(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~n,t.memoizedState=Xi,r}return a=e.child,e=a.sibling,r=Wn(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ed(e,t){return t=So({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ga(e,t,n,r){return r!==null&&$c(r),Ur(t,e.child,null,n),e=ed(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function xg(e,t,n,r,l,a,o){if(n)return t.flags&256?(t.flags&=-257,r=ii(Error(fe(422))),ga(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,l=t.mode,r=So({mode:"visible",children:r.children},l,0,null),a=lr(a,l,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Ur(t,e.child,null,o),t.child.memoizedState=ec(o),t.memoizedState=Xi,a);if(!(t.mode&1))return ga(e,t,o,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(fe(419)),r=ii(a,r,void 0),ga(e,t,o,r)}if(c=(o&e.childLanes)!==0,ls||c){if(r=Ot,r!==null){switch(o&-o){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|o)?0:l,l!==0&&l!==a.retryLane&&(a.retryLane=l,gn(e,l),As(r,e,l,-1))}return ad(),r=ii(Error(fe(421))),ga(e,t,o,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=Pg.bind(null,e),l._reactRetry=t,null):(e=a.treeContext,hs=An(l.nextSibling),fs=t,mt=!0,Ms=null,e!==null&&(Cs[Ss++]=cn,Cs[Ss++]=dn,Cs[Ss++]=or,cn=e.id,dn=e.overflow,or=t),t=ed(t,r.children),t.flags|=4096,t)}function vu(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Gi(e.return,t,n)}function ci(e,t,n,r,l){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:l}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=l)}function Gp(e,t,n){var r=t.pendingProps,l=r.revealOrder,a=r.tail;if(Zt(e,t,r.children,n),r=ft.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vu(e,n,t);else if(e.tag===19)vu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(it(ft,r),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&so(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),ci(t,!1,l,n,a);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&so(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}ci(t,!0,n,null,a);break;case"together":ci(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Oa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function yn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),cr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(fe(153));if(t.child!==null){for(e=t.child,n=Wn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Wn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function gg(e,t,n){switch(t.tag){case 3:Vp(t),$r();break;case 5:vp(t);break;case 1:is(t.type)&&Qa(t);break;case 4:qc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;it(Xa,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(it(ft,ft.current&1),t.flags|=128,null):n&t.child.childLanes?qp(e,t,n):(it(ft,ft.current&1),e=yn(e,t,n),e!==null?e.sibling:null);it(ft,ft.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Gp(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),it(ft,ft.current),r)break;return null;case 22:case 23:return t.lanes=0,Wp(e,t,n)}return yn(e,t,n)}var Kp,tc,Yp,Qp;Kp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tc=function(){};Yp=function(e,t,n,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,sr(Js.current);var a=null;switch(n){case"input":l=ki(e,l),r=ki(e,r),a=[];break;case"select":l=yt({},l,{value:void 0}),r=yt({},r,{value:void 0}),a=[];break;case"textarea":l=Si(e,l),r=Si(e,r),a=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ka)}Ei(n,r);var o;n=null;for(d in l)if(!r.hasOwnProperty(d)&&l.hasOwnProperty(d)&&l[d]!=null)if(d==="style"){var c=l[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(El.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var i=r[d];if(c=l!=null?l[d]:void 0,r.hasOwnProperty(d)&&i!==c&&(i!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||i&&i.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in i)i.hasOwnProperty(o)&&c[o]!==i[o]&&(n||(n={}),n[o]=i[o])}else n||(a||(a=[]),a.push(d,n)),n=i;else d==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,c=c?c.__html:void 0,i!=null&&c!==i&&(a=a||[]).push(d,i)):d==="children"?typeof i!="string"&&typeof i!="number"||(a=a||[]).push(d,""+i):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(El.hasOwnProperty(d)?(i!=null&&d==="onScroll"&&ct("scroll",e),a||c===i||(a=[])):(a=a||[]).push(d,i))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};Qp=function(e,t,n,r){n!==r&&(t.flags|=4)};function il(e,t){if(!mt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ht(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function yg(e,t,n){var r=t.pendingProps;switch(Ac(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(t),null;case 1:return is(t.type)&&Ya(),Ht(t),null;case 3:return r=t.stateNode,Br(),dt(os),dt(Yt),Kc(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(fa(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Ms!==null&&(cc(Ms),Ms=null))),tc(e,t),Ht(t),null;case 5:Gc(t);var l=sr($l.current);if(n=t.type,e!==null&&t.stateNode!=null)Yp(e,t,n,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(fe(166));return Ht(t),null}if(e=sr(Js.current),fa(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Ks]=t,r[Fl]=a,e=(t.mode&1)!==0,n){case"dialog":ct("cancel",r),ct("close",r);break;case"iframe":case"object":case"embed":ct("load",r);break;case"video":case"audio":for(l=0;l<fl.length;l++)ct(fl[l],r);break;case"source":ct("error",r);break;case"img":case"image":case"link":ct("error",r),ct("load",r);break;case"details":ct("toggle",r);break;case"input":Ed(r,a),ct("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},ct("invalid",r);break;case"textarea":Rd(r,a),ct("invalid",r)}Ei(n,a),l=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&ha(r.textContent,c,e),l=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&ha(r.textContent,c,e),l=["children",""+c]):El.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&ct("scroll",r)}switch(n){case"input":aa(r),Pd(r,a,!0);break;case"textarea":aa(r),zd(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Ka)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=wm(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Ks]=t,e[Fl]=r,Kp(e,t,!1,!1),t.stateNode=e;e:{switch(o=Pi(n,r),n){case"dialog":ct("cancel",e),ct("close",e),l=r;break;case"iframe":case"object":case"embed":ct("load",e),l=r;break;case"video":case"audio":for(l=0;l<fl.length;l++)ct(fl[l],e);l=r;break;case"source":ct("error",e),l=r;break;case"img":case"image":case"link":ct("error",e),ct("load",e),l=r;break;case"details":ct("toggle",e),l=r;break;case"input":Ed(e,r),l=ki(e,r),ct("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=yt({},r,{value:void 0}),ct("invalid",e);break;case"textarea":Rd(e,r),l=Si(e,r),ct("invalid",e);break;default:l=r}Ei(n,l),c=l;for(a in c)if(c.hasOwnProperty(a)){var i=c[a];a==="style"?Dm(e,i):a==="dangerouslySetInnerHTML"?(i=i?i.__html:void 0,i!=null&&Cm(e,i)):a==="children"?typeof i=="string"?(n!=="textarea"||i!=="")&&Pl(e,i):typeof i=="number"&&Pl(e,""+i):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(El.hasOwnProperty(a)?i!=null&&a==="onScroll"&&ct("scroll",e):i!=null&&wc(e,a,i,o))}switch(n){case"input":aa(e),Pd(e,r,!1);break;case"textarea":aa(e),zd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Vn(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Rr(e,!!r.multiple,a,!1):r.defaultValue!=null&&Rr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Ka)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ht(t),null;case 6:if(e&&t.stateNode!=null)Qp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(fe(166));if(n=sr($l.current),sr(Js.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[Ks]=t,(a=r.nodeValue!==n)&&(e=fs,e!==null))switch(e.tag){case 3:ha(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ha(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ks]=t,t.stateNode=r}return Ht(t),null;case 13:if(dt(ft),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(mt&&hs!==null&&t.mode&1&&!(t.flags&128))hp(),$r(),t.flags|=98560,a=!1;else if(a=fa(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(fe(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(fe(317));a[Ks]=t}else $r(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ht(t),a=!1}else Ms!==null&&(cc(Ms),Ms=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||ft.current&1?Et===0&&(Et=3):ad())),t.updateQueue!==null&&(t.flags|=4),Ht(t),null);case 4:return Br(),tc(e,t),e===null&&Ll(t.stateNode.containerInfo),Ht(t),null;case 10:return Wc(t.type._context),Ht(t),null;case 17:return is(t.type)&&Ya(),Ht(t),null;case 19:if(dt(ft),a=t.memoizedState,a===null)return Ht(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)il(a,!1);else{if(Et!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=so(e),o!==null){for(t.flags|=128,il(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return it(ft,ft.current&1|2),t.child}e=e.sibling}a.tail!==null&&kt()>Hr&&(t.flags|=128,r=!0,il(a,!1),t.lanes=4194304)}else{if(!r)if(e=so(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),il(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!mt)return Ht(t),null}else 2*kt()-a.renderingStartTime>Hr&&n!==1073741824&&(t.flags|=128,r=!0,il(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(n=a.last,n!==null?n.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=kt(),t.sibling=null,n=ft.current,it(ft,r?n&1|2:n&1),t):(Ht(t),null);case 22:case 23:return ld(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?ms&1073741824&&(Ht(t),t.subtreeFlags&6&&(t.flags|=8192)):Ht(t),null;case 24:return null;case 25:return null}throw Error(fe(156,t.tag))}function vg(e,t){switch(Ac(t),t.tag){case 1:return is(t.type)&&Ya(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Br(),dt(os),dt(Yt),Kc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Gc(t),null;case 13:if(dt(ft),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(fe(340));$r()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return dt(ft),null;case 4:return Br(),null;case 10:return Wc(t.type._context),null;case 22:case 23:return ld(),null;case 24:return null;default:return null}}var ya=!1,Kt=!1,bg=typeof WeakSet=="function"?WeakSet:Set,Se=null;function Er(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){vt(e,t,r)}else n.current=null}function sc(e,t,n){try{n()}catch(r){vt(e,t,r)}}var bu=!1;function jg(e,t){if(Ai=Va,e=tp(),Mc(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var l=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var o=0,c=-1,i=-1,d=0,m=0,y=e,x=null;t:for(;;){for(var C;y!==n||l!==0&&y.nodeType!==3||(c=o+l),y!==a||r!==0&&y.nodeType!==3||(i=o+r),y.nodeType===3&&(o+=y.nodeValue.length),(C=y.firstChild)!==null;)x=y,y=C;for(;;){if(y===e)break t;if(x===n&&++d===l&&(c=o),x===a&&++m===r&&(i=o),(C=y.nextSibling)!==null)break;y=x,x=y.parentNode}y=C}n=c===-1||i===-1?null:{start:c,end:i}}else n=null}n=n||{start:0,end:0}}else n=null;for($i={focusedElem:e,selectionRange:n},Va=!1,Se=t;Se!==null;)if(t=Se,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Se=e;else for(;Se!==null;){t=Se;try{var U=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(U!==null){var N=U.memoizedProps,z=U.memoizedState,f=t.stateNode,p=f.getSnapshotBeforeUpdate(t.elementType===t.type?N:Is(t.type,N),z);f.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(M){vt(t,t.return,M)}if(e=t.sibling,e!==null){e.return=t.return,Se=e;break}Se=t.return}return U=bu,bu=!1,U}function Cl(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var a=l.destroy;l.destroy=void 0,a!==void 0&&sc(t,n,a)}l=l.next}while(l!==r)}}function wo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function nc(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Zp(e){var t=e.alternate;t!==null&&(e.alternate=null,Zp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ks],delete t[Fl],delete t[Wi],delete t[ng],delete t[rg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jp(e){return e.tag===5||e.tag===3||e.tag===4}function ju(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function rc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ka));else if(r!==4&&(e=e.child,e!==null))for(rc(e,t,n),e=e.sibling;e!==null;)rc(e,t,n),e=e.sibling}function lc(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(lc(e,t,n),e=e.sibling;e!==null;)lc(e,t,n),e=e.sibling}var At=null,Ls=!1;function Sn(e,t,n){for(n=n.child;n!==null;)Xp(e,t,n),n=n.sibling}function Xp(e,t,n){if(Zs&&typeof Zs.onCommitFiberUnmount=="function")try{Zs.onCommitFiberUnmount(xo,n)}catch{}switch(n.tag){case 5:Kt||Er(n,t);case 6:var r=At,l=Ls;At=null,Sn(e,t,n),At=r,Ls=l,At!==null&&(Ls?(e=At,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):At.removeChild(n.stateNode));break;case 18:At!==null&&(Ls?(e=At,n=n.stateNode,e.nodeType===8?si(e.parentNode,n):e.nodeType===1&&si(e,n),_l(e)):si(At,n.stateNode));break;case 4:r=At,l=Ls,At=n.stateNode.containerInfo,Ls=!0,Sn(e,t,n),At=r,Ls=l;break;case 0:case 11:case 14:case 15:if(!Kt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var a=l,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&sc(n,t,o),l=l.next}while(l!==r)}Sn(e,t,n);break;case 1:if(!Kt&&(Er(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){vt(n,t,c)}Sn(e,t,n);break;case 21:Sn(e,t,n);break;case 22:n.mode&1?(Kt=(r=Kt)||n.memoizedState!==null,Sn(e,t,n),Kt=r):Sn(e,t,n);break;default:Sn(e,t,n)}}function Nu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new bg),t.forEach(function(r){var l=Rg.bind(null,e,r);n.has(r)||(n.add(r),r.then(l,l))})}}function Os(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var l=n[r];try{var a=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:At=c.stateNode,Ls=!1;break e;case 3:At=c.stateNode.containerInfo,Ls=!0;break e;case 4:At=c.stateNode.containerInfo,Ls=!0;break e}c=c.return}if(At===null)throw Error(fe(160));Xp(a,o,l),At=null,Ls=!1;var i=l.alternate;i!==null&&(i.return=null),l.return=null}catch(d){vt(l,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)eh(t,e),t=t.sibling}function eh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Os(t,e),qs(e),r&4){try{Cl(3,e,e.return),wo(3,e)}catch(N){vt(e,e.return,N)}try{Cl(5,e,e.return)}catch(N){vt(e,e.return,N)}}break;case 1:Os(t,e),qs(e),r&512&&n!==null&&Er(n,n.return);break;case 5:if(Os(t,e),qs(e),r&512&&n!==null&&Er(n,n.return),e.flags&32){var l=e.stateNode;try{Pl(l,"")}catch(N){vt(e,e.return,N)}}if(r&4&&(l=e.stateNode,l!=null)){var a=e.memoizedProps,o=n!==null?n.memoizedProps:a,c=e.type,i=e.updateQueue;if(e.updateQueue=null,i!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&Nm(l,a),Pi(c,o);var d=Pi(c,a);for(o=0;o<i.length;o+=2){var m=i[o],y=i[o+1];m==="style"?Dm(l,y):m==="dangerouslySetInnerHTML"?Cm(l,y):m==="children"?Pl(l,y):wc(l,m,y,d)}switch(c){case"input":wi(l,a);break;case"textarea":km(l,a);break;case"select":var x=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!a.multiple;var C=a.value;C!=null?Rr(l,!!a.multiple,C,!1):x!==!!a.multiple&&(a.defaultValue!=null?Rr(l,!!a.multiple,a.defaultValue,!0):Rr(l,!!a.multiple,a.multiple?[]:"",!1))}l[Fl]=a}catch(N){vt(e,e.return,N)}}break;case 6:if(Os(t,e),qs(e),r&4){if(e.stateNode===null)throw Error(fe(162));l=e.stateNode,a=e.memoizedProps;try{l.nodeValue=a}catch(N){vt(e,e.return,N)}}break;case 3:if(Os(t,e),qs(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_l(t.containerInfo)}catch(N){vt(e,e.return,N)}break;case 4:Os(t,e),qs(e);break;case 13:Os(t,e),qs(e),l=e.child,l.flags&8192&&(a=l.memoizedState!==null,l.stateNode.isHidden=a,!a||l.alternate!==null&&l.alternate.memoizedState!==null||(nd=kt())),r&4&&Nu(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(Kt=(d=Kt)||m,Os(t,e),Kt=d):Os(t,e),qs(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(Se=e,m=e.child;m!==null;){for(y=Se=m;Se!==null;){switch(x=Se,C=x.child,x.tag){case 0:case 11:case 14:case 15:Cl(4,x,x.return);break;case 1:Er(x,x.return);var U=x.stateNode;if(typeof U.componentWillUnmount=="function"){r=x,n=x.return;try{t=r,U.props=t.memoizedProps,U.state=t.memoizedState,U.componentWillUnmount()}catch(N){vt(r,n,N)}}break;case 5:Er(x,x.return);break;case 22:if(x.memoizedState!==null){wu(y);continue}}C!==null?(C.return=x,Se=C):wu(y)}m=m.sibling}e:for(m=null,y=e;;){if(y.tag===5){if(m===null){m=y;try{l=y.stateNode,d?(a=l.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=y.stateNode,i=y.memoizedProps.style,o=i!=null&&i.hasOwnProperty("display")?i.display:null,c.style.display=Sm("display",o))}catch(N){vt(e,e.return,N)}}}else if(y.tag===6){if(m===null)try{y.stateNode.nodeValue=d?"":y.memoizedProps}catch(N){vt(e,e.return,N)}}else if((y.tag!==22&&y.tag!==23||y.memoizedState===null||y===e)&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===e)break e;for(;y.sibling===null;){if(y.return===null||y.return===e)break e;m===y&&(m=null),y=y.return}m===y&&(m=null),y.sibling.return=y.return,y=y.sibling}}break;case 19:Os(t,e),qs(e),r&4&&Nu(e);break;case 21:break;default:Os(t,e),qs(e)}}function qs(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Jp(n)){var r=n;break e}n=n.return}throw Error(fe(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(Pl(l,""),r.flags&=-33);var a=ju(e);lc(e,a,l);break;case 3:case 4:var o=r.stateNode.containerInfo,c=ju(e);rc(e,c,o);break;default:throw Error(fe(161))}}catch(i){vt(e,e.return,i)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ng(e,t,n){Se=e,th(e)}function th(e,t,n){for(var r=(e.mode&1)!==0;Se!==null;){var l=Se,a=l.child;if(l.tag===22&&r){var o=l.memoizedState!==null||ya;if(!o){var c=l.alternate,i=c!==null&&c.memoizedState!==null||Kt;c=ya;var d=Kt;if(ya=o,(Kt=i)&&!d)for(Se=l;Se!==null;)o=Se,i=o.child,o.tag===22&&o.memoizedState!==null?Cu(l):i!==null?(i.return=o,Se=i):Cu(l);for(;a!==null;)Se=a,th(a),a=a.sibling;Se=l,ya=c,Kt=d}ku(e)}else l.subtreeFlags&8772&&a!==null?(a.return=l,Se=a):ku(e)}}function ku(e){for(;Se!==null;){var t=Se;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Kt||wo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Kt)if(n===null)r.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:Is(t.type,n.memoizedProps);r.componentDidUpdate(l,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&ou(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}ou(t,o,n)}break;case 5:var c=t.stateNode;if(n===null&&t.flags&4){n=c;var i=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":i.autoFocus&&n.focus();break;case"img":i.src&&(n.src=i.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var y=m.dehydrated;y!==null&&_l(y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}Kt||t.flags&512&&nc(t)}catch(x){vt(t,t.return,x)}}if(t===e){Se=null;break}if(n=t.sibling,n!==null){n.return=t.return,Se=n;break}Se=t.return}}function wu(e){for(;Se!==null;){var t=Se;if(t===e){Se=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Se=n;break}Se=t.return}}function Cu(e){for(;Se!==null;){var t=Se;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{wo(4,t)}catch(i){vt(t,n,i)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(i){vt(t,l,i)}}var a=t.return;try{nc(t)}catch(i){vt(t,a,i)}break;case 5:var o=t.return;try{nc(t)}catch(i){vt(t,o,i)}}}catch(i){vt(t,t.return,i)}if(t===e){Se=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Se=c;break}Se=t.return}}var kg=Math.ceil,lo=bn.ReactCurrentDispatcher,td=bn.ReactCurrentOwner,Es=bn.ReactCurrentBatchConfig,tt=0,Ot=null,St=null,$t=0,ms=0,Pr=Kn(0),Et=0,Hl=null,cr=0,Co=0,sd=0,Sl=null,ns=null,nd=0,Hr=1/0,an=null,ao=!1,ac=null,Un=null,va=!1,On=null,oo=0,Dl=0,oc=null,Ia=-1,La=0;function Jt(){return tt&6?kt():Ia!==-1?Ia:Ia=kt()}function Bn(e){return e.mode&1?tt&2&&$t!==0?$t&-$t:ag.transition!==null?(La===0&&(La=Am()),La):(e=ot,e!==0||(e=window.event,e=e===void 0?16:qm(e.type)),e):1}function As(e,t,n,r){if(50<Dl)throw Dl=0,oc=null,Error(fe(185));Ql(e,n,r),(!(tt&2)||e!==Ot)&&(e===Ot&&(!(tt&2)&&(Co|=n),Et===4&&Tn(e,$t)),cs(e,r),n===1&&tt===0&&!(t.mode&1)&&(Hr=kt()+500,jo&&Yn()))}function cs(e,t){var n=e.callbackNode;ax(e,t);var r=Ha(e,e===Ot?$t:0);if(r===0)n!==null&&Od(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Od(n),t===1)e.tag===0?lg(Su.bind(null,e)):up(Su.bind(null,e)),tg(function(){!(tt&6)&&Yn()}),n=null;else{switch($m(r)){case 1:n=Pc;break;case 4:n=Mm;break;case 16:n=Wa;break;case 536870912:n=Fm;break;default:n=Wa}n=ch(n,sh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sh(e,t){if(Ia=-1,La=0,tt&6)throw Error(fe(327));var n=e.callbackNode;if(Ir()&&e.callbackNode!==n)return null;var r=Ha(e,e===Ot?$t:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=io(e,r);else{t=r;var l=tt;tt|=2;var a=rh();(Ot!==e||$t!==t)&&(an=null,Hr=kt()+500,rr(e,t));do try{Sg();break}catch(c){nh(e,c)}while(1);Bc(),lo.current=a,tt=l,St!==null?t=0:(Ot=null,$t=0,t=Et)}if(t!==0){if(t===2&&(l=Oi(e),l!==0&&(r=l,t=ic(e,l))),t===1)throw n=Hl,rr(e,0),Tn(e,r),cs(e,kt()),n;if(t===6)Tn(e,r);else{if(l=e.current.alternate,!(r&30)&&!wg(l)&&(t=io(e,r),t===2&&(a=Oi(e),a!==0&&(r=a,t=ic(e,a))),t===1))throw n=Hl,rr(e,0),Tn(e,r),cs(e,kt()),n;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(fe(345));case 2:Xn(e,ns,an);break;case 3:if(Tn(e,r),(r&130023424)===r&&(t=nd+500-kt(),10<t)){if(Ha(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){Jt(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Bi(Xn.bind(null,e,ns,an),t);break}Xn(e,ns,an);break;case 4:if(Tn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var o=31-Fs(r);a=1<<o,o=t[o],o>l&&(l=o),r&=~a}if(r=l,r=kt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kg(r/1960))-r,10<r){e.timeoutHandle=Bi(Xn.bind(null,e,ns,an),r);break}Xn(e,ns,an);break;case 5:Xn(e,ns,an);break;default:throw Error(fe(329))}}}return cs(e,kt()),e.callbackNode===n?sh.bind(null,e):null}function ic(e,t){var n=Sl;return e.current.memoizedState.isDehydrated&&(rr(e,t).flags|=256),e=io(e,t),e!==2&&(t=ns,ns=n,t!==null&&cc(t)),e}function cc(e){ns===null?ns=e:ns.push.apply(ns,e)}function wg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var l=n[r],a=l.getSnapshot;l=l.value;try{if(!Us(a(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Tn(e,t){for(t&=~sd,t&=~Co,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Fs(t),r=1<<n;e[n]=-1,t&=~r}}function Su(e){if(tt&6)throw Error(fe(327));Ir();var t=Ha(e,0);if(!(t&1))return cs(e,kt()),null;var n=io(e,t);if(e.tag!==0&&n===2){var r=Oi(e);r!==0&&(t=r,n=ic(e,r))}if(n===1)throw n=Hl,rr(e,0),Tn(e,t),cs(e,kt()),n;if(n===6)throw Error(fe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xn(e,ns,an),cs(e,kt()),null}function rd(e,t){var n=tt;tt|=1;try{return e(t)}finally{tt=n,tt===0&&(Hr=kt()+500,jo&&Yn())}}function dr(e){On!==null&&On.tag===0&&!(tt&6)&&Ir();var t=tt;tt|=1;var n=Es.transition,r=ot;try{if(Es.transition=null,ot=1,e)return e()}finally{ot=r,Es.transition=n,tt=t,!(tt&6)&&Yn()}}function ld(){ms=Pr.current,dt(Pr)}function rr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,eg(n)),St!==null)for(n=St.return;n!==null;){var r=n;switch(Ac(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ya();break;case 3:Br(),dt(os),dt(Yt),Kc();break;case 5:Gc(r);break;case 4:Br();break;case 13:dt(ft);break;case 19:dt(ft);break;case 10:Wc(r.type._context);break;case 22:case 23:ld()}n=n.return}if(Ot=e,St=e=Wn(e.current,null),$t=ms=t,Et=0,Hl=null,sd=Co=cr=0,ns=Sl=null,tr!==null){for(t=0;t<tr.length;t++)if(n=tr[t],r=n.interleaved,r!==null){n.interleaved=null;var l=r.next,a=n.pending;if(a!==null){var o=a.next;a.next=l,r.next=o}n.pending=r}tr=null}return e}function nh(e,t){do{var n=St;try{if(Bc(),Ta.current=ro,no){for(var r=xt.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}no=!1}if(ir=0,_t=Dt=xt=null,wl=!1,Ul=0,td.current=null,n===null||n.return===null){Et=1,Hl=t,St=null;break}e:{var a=e,o=n.return,c=n,i=t;if(t=$t,c.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){var d=i,m=c,y=m.tag;if(!(m.mode&1)&&(y===0||y===11||y===15)){var x=m.alternate;x?(m.updateQueue=x.updateQueue,m.memoizedState=x.memoizedState,m.lanes=x.lanes):(m.updateQueue=null,m.memoizedState=null)}var C=pu(o);if(C!==null){C.flags&=-257,hu(C,o,c,a,t),C.mode&1&&mu(a,d,t),t=C,i=d;var U=t.updateQueue;if(U===null){var N=new Set;N.add(i),t.updateQueue=N}else U.add(i);break e}else{if(!(t&1)){mu(a,d,t),ad();break e}i=Error(fe(426))}}else if(mt&&c.mode&1){var z=pu(o);if(z!==null){!(z.flags&65536)&&(z.flags|=256),hu(z,o,c,a,t),$c(Wr(i,c));break e}}a=i=Wr(i,c),Et!==4&&(Et=2),Sl===null?Sl=[a]:Sl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var f=$p(a,i,t);au(a,f);break e;case 1:c=i;var p=a.type,h=a.stateNode;if(!(a.flags&128)&&(typeof p.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(Un===null||!Un.has(h)))){a.flags|=65536,t&=-t,a.lanes|=t;var M=Up(a,c,t);au(a,M);break e}}a=a.return}while(a!==null)}ah(n)}catch(T){t=T,St===n&&n!==null&&(St=n=n.return);continue}break}while(1)}function rh(){var e=lo.current;return lo.current=ro,e===null?ro:e}function ad(){(Et===0||Et===3||Et===2)&&(Et=4),Ot===null||!(cr&268435455)&&!(Co&268435455)||Tn(Ot,$t)}function io(e,t){var n=tt;tt|=2;var r=rh();(Ot!==e||$t!==t)&&(an=null,rr(e,t));do try{Cg();break}catch(l){nh(e,l)}while(1);if(Bc(),tt=n,lo.current=r,St!==null)throw Error(fe(261));return Ot=null,$t=0,Et}function Cg(){for(;St!==null;)lh(St)}function Sg(){for(;St!==null&&!Zf();)lh(St)}function lh(e){var t=ih(e.alternate,e,ms);e.memoizedProps=e.pendingProps,t===null?ah(e):St=t,td.current=null}function ah(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=vg(n,t),n!==null){n.flags&=32767,St=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Et=6,St=null;return}}else if(n=yg(n,t,ms),n!==null){St=n;return}if(t=t.sibling,t!==null){St=t;return}St=t=e}while(t!==null);Et===0&&(Et=5)}function Xn(e,t,n){var r=ot,l=Es.transition;try{Es.transition=null,ot=1,Dg(e,t,n,r)}finally{Es.transition=l,ot=r}return null}function Dg(e,t,n,r){do Ir();while(On!==null);if(tt&6)throw Error(fe(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(fe(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(ox(e,a),e===Ot&&(St=Ot=null,$t=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||va||(va=!0,ch(Wa,function(){return Ir(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Es.transition,Es.transition=null;var o=ot;ot=1;var c=tt;tt|=4,td.current=null,jg(e,n),eh(n,e),Gx($i),Va=!!Ai,$i=Ai=null,e.current=n,Ng(n),Jf(),tt=c,ot=o,Es.transition=a}else e.current=n;if(va&&(va=!1,On=e,oo=l),a=e.pendingLanes,a===0&&(Un=null),tx(n.stateNode),cs(e,kt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],r(l.value,{componentStack:l.stack,digest:l.digest});if(ao)throw ao=!1,e=ac,ac=null,e;return oo&1&&e.tag!==0&&Ir(),a=e.pendingLanes,a&1?e===oc?Dl++:(Dl=0,oc=e):Dl=0,Yn(),null}function Ir(){if(On!==null){var e=$m(oo),t=Es.transition,n=ot;try{if(Es.transition=null,ot=16>e?16:e,On===null)var r=!1;else{if(e=On,On=null,oo=0,tt&6)throw Error(fe(331));var l=tt;for(tt|=4,Se=e.current;Se!==null;){var a=Se,o=a.child;if(Se.flags&16){var c=a.deletions;if(c!==null){for(var i=0;i<c.length;i++){var d=c[i];for(Se=d;Se!==null;){var m=Se;switch(m.tag){case 0:case 11:case 15:Cl(8,m,a)}var y=m.child;if(y!==null)y.return=m,Se=y;else for(;Se!==null;){m=Se;var x=m.sibling,C=m.return;if(Zp(m),m===d){Se=null;break}if(x!==null){x.return=C,Se=x;break}Se=C}}}var U=a.alternate;if(U!==null){var N=U.child;if(N!==null){U.child=null;do{var z=N.sibling;N.sibling=null,N=z}while(N!==null)}}Se=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Se=o;else e:for(;Se!==null;){if(a=Se,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Cl(9,a,a.return)}var f=a.sibling;if(f!==null){f.return=a.return,Se=f;break e}Se=a.return}}var p=e.current;for(Se=p;Se!==null;){o=Se;var h=o.child;if(o.subtreeFlags&2064&&h!==null)h.return=o,Se=h;else e:for(o=p;Se!==null;){if(c=Se,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:wo(9,c)}}catch(T){vt(c,c.return,T)}if(c===o){Se=null;break e}var M=c.sibling;if(M!==null){M.return=c.return,Se=M;break e}Se=c.return}}if(tt=l,Yn(),Zs&&typeof Zs.onPostCommitFiberRoot=="function")try{Zs.onPostCommitFiberRoot(xo,e)}catch{}r=!0}return r}finally{ot=n,Es.transition=t}}return!1}function Du(e,t,n){t=Wr(n,t),t=$p(e,t,1),e=$n(e,t,1),t=Jt(),e!==null&&(Ql(e,1,t),cs(e,t))}function vt(e,t,n){if(e.tag===3)Du(e,e,n);else for(;t!==null;){if(t.tag===3){Du(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Un===null||!Un.has(r))){e=Wr(n,e),e=Up(t,e,1),t=$n(t,e,1),e=Jt(),t!==null&&(Ql(t,1,e),cs(t,e));break}}t=t.return}}function Eg(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Jt(),e.pingedLanes|=e.suspendedLanes&n,Ot===e&&($t&n)===n&&(Et===4||Et===3&&($t&130023424)===$t&&500>kt()-nd?rr(e,0):sd|=n),cs(e,t)}function oh(e,t){t===0&&(e.mode&1?(t=ca,ca<<=1,!(ca&130023424)&&(ca=4194304)):t=1);var n=Jt();e=gn(e,t),e!==null&&(Ql(e,t,n),cs(e,n))}function Pg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),oh(e,n)}function Rg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(fe(314))}r!==null&&r.delete(t),oh(e,n)}var ih;ih=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||os.current)ls=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return ls=!1,gg(e,t,n);ls=!!(e.flags&131072)}else ls=!1,mt&&t.flags&1048576&&mp(t,Ja,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Oa(e,t),e=t.pendingProps;var l=Ar(t,Yt.current);Or(t,n),l=Qc(null,t,r,e,l,n);var a=Zc();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,is(r)?(a=!0,Qa(t)):a=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Vc(t),l.updater=ko,t.stateNode=l,l._reactInternals=t,Yi(t,r,e,n),t=Ji(null,t,r,!0,a,n)):(t.tag=0,mt&&a&&Fc(t),Zt(null,t,l,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Oa(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=Tg(r),e=Is(r,e),l){case 0:t=Zi(null,t,r,e,n);break e;case 1:t=gu(null,t,r,e,n);break e;case 11:t=fu(null,t,r,e,n);break e;case 14:t=xu(null,t,r,Is(r.type,e),n);break e}throw Error(fe(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Is(r,l),Zi(e,t,r,l,n);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Is(r,l),gu(e,t,r,l,n);case 3:e:{if(Vp(t),e===null)throw Error(fe(387));r=t.pendingProps,a=t.memoizedState,l=a.element,yp(e,t),to(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){l=Wr(Error(fe(423)),t),t=yu(e,t,r,n,l);break e}else if(r!==l){l=Wr(Error(fe(424)),t),t=yu(e,t,r,n,l);break e}else for(hs=An(t.stateNode.containerInfo.firstChild),fs=t,mt=!0,Ms=null,n=xp(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if($r(),r===l){t=yn(e,t,n);break e}Zt(e,t,r,n)}t=t.child}return t;case 5:return vp(t),e===null&&qi(t),r=t.type,l=t.pendingProps,a=e!==null?e.memoizedProps:null,o=l.children,Ui(r,l)?o=null:a!==null&&Ui(r,a)&&(t.flags|=32),Hp(e,t),Zt(e,t,o,n),t.child;case 6:return e===null&&qi(t),null;case 13:return qp(e,t,n);case 4:return qc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Ur(t,null,r,n):Zt(e,t,r,n),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Is(r,l),fu(e,t,r,l,n);case 7:return Zt(e,t,t.pendingProps,n),t.child;case 8:return Zt(e,t,t.pendingProps.children,n),t.child;case 12:return Zt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,a=t.memoizedProps,o=l.value,it(Xa,r._currentValue),r._currentValue=o,a!==null)if(Us(a.value,o)){if(a.children===l.children&&!os.current){t=yn(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var i=c.firstContext;i!==null;){if(i.context===r){if(a.tag===1){i=mn(-1,n&-n),i.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?i.next=i:(i.next=m.next,m.next=i),d.pending=i}}a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),Gi(a.return,n,t),c.lanes|=n;break}i=i.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(fe(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Gi(o,n,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Zt(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,Or(t,n),l=Ps(l),r=r(l),t.flags|=1,Zt(e,t,r,n),t.child;case 14:return r=t.type,l=Is(r,t.pendingProps),l=Is(r.type,l),xu(e,t,r,l,n);case 15:return Bp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:Is(r,l),Oa(e,t),t.tag=1,is(r)?(e=!0,Qa(t)):e=!1,Or(t,n),Ap(t,r,l),Yi(t,r,l,n),Ji(null,t,r,!0,e,n);case 19:return Gp(e,t,n);case 22:return Wp(e,t,n)}throw Error(fe(156,t.tag))};function ch(e,t){return Lm(e,t)}function zg(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ds(e,t,n,r){return new zg(e,t,n,r)}function od(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Tg(e){if(typeof e=="function")return od(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Sc)return 11;if(e===Dc)return 14}return 2}function Wn(e,t){var n=e.alternate;return n===null?(n=Ds(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ma(e,t,n,r,l,a){var o=2;if(r=e,typeof e=="function")od(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case vr:return lr(n.children,l,a,t);case Cc:o=8,l|=8;break;case vi:return e=Ds(12,n,t,l|2),e.elementType=vi,e.lanes=a,e;case bi:return e=Ds(13,n,t,l),e.elementType=bi,e.lanes=a,e;case ji:return e=Ds(19,n,t,l),e.elementType=ji,e.lanes=a,e;case vm:return So(n,l,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case gm:o=10;break e;case ym:o=9;break e;case Sc:o=11;break e;case Dc:o=14;break e;case Pn:o=16,r=null;break e}throw Error(fe(130,e==null?e:typeof e,""))}return t=Ds(o,n,t,l),t.elementType=e,t.type=r,t.lanes=a,t}function lr(e,t,n,r){return e=Ds(7,e,r,t),e.lanes=n,e}function So(e,t,n,r){return e=Ds(22,e,r,t),e.elementType=vm,e.lanes=n,e.stateNode={isHidden:!1},e}function di(e,t,n){return e=Ds(6,e,null,t),e.lanes=n,e}function ui(e,t,n){return t=Ds(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function _g(e,t,n,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vo(0),this.expirationTimes=Vo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vo(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function id(e,t,n,r,l,a,o,c,i){return e=new _g(e,t,n,c,i),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ds(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vc(a),e}function Og(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function dh(e){if(!e)return qn;e=e._reactInternals;e:{if(hr(e)!==e||e.tag!==1)throw Error(fe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(is(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(fe(171))}if(e.tag===1){var n=e.type;if(is(n))return dp(e,n,t)}return t}function uh(e,t,n,r,l,a,o,c,i){return e=id(n,r,!0,e,l,a,o,c,i),e.context=dh(null),n=e.current,r=Jt(),l=Bn(n),a=mn(r,l),a.callback=t??null,$n(n,a,l),e.current.lanes=l,Ql(e,l,r),cs(e,r),e}function Do(e,t,n,r){var l=t.current,a=Jt(),o=Bn(l);return n=dh(n),t.context===null?t.context=n:t.pendingContext=n,t=mn(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=$n(l,t,o),e!==null&&(As(e,l,o,a),za(e,l,o)),o}function co(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Eu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function cd(e,t){Eu(e,t),(e=e.alternate)&&Eu(e,t)}function Ig(){return null}var mh=typeof reportError=="function"?reportError:function(e){console.error(e)};function dd(e){this._internalRoot=e}Eo.prototype.render=dd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(fe(409));Do(e,t,null,null)};Eo.prototype.unmount=dd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;dr(function(){Do(null,e,null,null)}),t[xn]=null}};function Eo(e){this._internalRoot=e}Eo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Wm();e={blockedOn:null,target:e,priority:t};for(var n=0;n<zn.length&&t!==0&&t<zn[n].priority;n++);zn.splice(n,0,e),n===0&&Vm(e)}};function ud(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Po(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Pu(){}function Lg(e,t,n,r,l){if(l){if(typeof r=="function"){var a=r;r=function(){var d=co(o);a.call(d)}}var o=uh(t,r,e,0,null,!1,!1,"",Pu);return e._reactRootContainer=o,e[xn]=o.current,Ll(e.nodeType===8?e.parentNode:e),dr(),o}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var c=r;r=function(){var d=co(i);c.call(d)}}var i=id(e,0,!1,null,null,!1,!1,"",Pu);return e._reactRootContainer=i,e[xn]=i.current,Ll(e.nodeType===8?e.parentNode:e),dr(function(){Do(t,i,n,r)}),i}function Ro(e,t,n,r,l){var a=n._reactRootContainer;if(a){var o=a;if(typeof l=="function"){var c=l;l=function(){var i=co(o);c.call(i)}}Do(t,o,e,l)}else o=Lg(n,t,e,l,r);return co(o)}Um=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=hl(t.pendingLanes);n!==0&&(Rc(t,n|1),cs(t,kt()),!(tt&6)&&(Hr=kt()+500,Yn()))}break;case 13:dr(function(){var r=gn(e,1);if(r!==null){var l=Jt();As(r,e,1,l)}}),cd(e,1)}};zc=function(e){if(e.tag===13){var t=gn(e,134217728);if(t!==null){var n=Jt();As(t,e,134217728,n)}cd(e,134217728)}};Bm=function(e){if(e.tag===13){var t=Bn(e),n=gn(e,t);if(n!==null){var r=Jt();As(n,e,t,r)}cd(e,t)}};Wm=function(){return ot};Hm=function(e,t){var n=ot;try{return ot=e,t()}finally{ot=n}};zi=function(e,t,n){switch(t){case"input":if(wi(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var l=bo(r);if(!l)throw Error(fe(90));jm(r),wi(r,l)}}}break;case"textarea":km(e,n);break;case"select":t=n.value,t!=null&&Rr(e,!!n.multiple,t,!1)}};Rm=rd;zm=dr;var Mg={usingClientEntryPoint:!1,Events:[Jl,kr,bo,Em,Pm,rd]},cl={findFiberByHostInstance:er,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Fg={bundleType:cl.bundleType,version:cl.version,rendererPackageName:cl.rendererPackageName,rendererConfig:cl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Om(e),e===null?null:e.stateNode},findFiberByHostInstance:cl.findFiberByHostInstance||Ig,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ba.isDisabled&&ba.supportsFiber)try{xo=ba.inject(Fg),Zs=ba}catch{}}vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mg;vs.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ud(t))throw Error(fe(200));return Og(e,t,null,n)};vs.createRoot=function(e,t){if(!ud(e))throw Error(fe(299));var n=!1,r="",l=mh;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=id(e,1,!1,null,null,n,!1,r,l),e[xn]=t.current,Ll(e.nodeType===8?e.parentNode:e),new dd(t)};vs.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(fe(188)):(e=Object.keys(e).join(","),Error(fe(268,e)));return e=Om(t),e=e===null?null:e.stateNode,e};vs.flushSync=function(e){return dr(e)};vs.hydrate=function(e,t,n){if(!Po(t))throw Error(fe(200));return Ro(null,e,t,!0,n)};vs.hydrateRoot=function(e,t,n){if(!ud(e))throw Error(fe(405));var r=n!=null&&n.hydratedSources||null,l=!1,a="",o=mh;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=uh(t,null,e,1,n??null,l,!1,a,o),e[xn]=t.current,Ll(e),r)for(e=0;e<r.length;e++)n=r[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new Eo(t)};vs.render=function(e,t,n){if(!Po(t))throw Error(fe(200));return Ro(null,e,t,!1,n)};vs.unmountComponentAtNode=function(e){if(!Po(e))throw Error(fe(40));return e._reactRootContainer?(dr(function(){Ro(null,null,e,!1,function(){e._reactRootContainer=null,e[xn]=null})}),!0):!1};vs.unstable_batchedUpdates=rd;vs.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Po(n))throw Error(fe(200));if(e==null||e._reactInternals===void 0)throw Error(fe(38));return Ro(e,t,n,!1,r)};vs.version="18.3.1-next-f1338f8080-20240426";function ph(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ph)}catch(e){console.error(e)}}ph(),pm.exports=vs;var Ag=pm.exports,Ru=Ag;gi.createRoot=Ru.createRoot,gi.hydrateRoot=Ru.hydrateRoot;const $g="modulepreload",Ug=function(e){return"/"+e},zu={},Bg=function(t,n,r){if(!n||n.length===0)return t();const l=document.getElementsByTagName("link");return Promise.all(n.map(a=>{if(a=Ug(a),a in zu)return;zu[a]=!0;const o=a.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(!!r)for(let m=l.length-1;m>=0;m--){const y=l[m];if(y.href===a&&(!o||y.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${c}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":$g,o||(d.as="script",d.crossOrigin=""),d.href=a,document.head.appendChild(d),o)return new Promise((m,y)=>{d.addEventListener("load",m),d.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};var Tu="popstate";function Wg(e={}){function t(r,l){let{pathname:a,search:o,hash:c}=r.location;return dc("",{pathname:a,search:o,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(r,l){return typeof l=="string"?l:Vl(l)}return Vg(t,n,null,e)}function gt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Bs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Hg(){return Math.random().toString(36).substring(2,10)}function _u(e,t){return{usr:e.state,key:e.key,idx:t}}function dc(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Qr(t):t,state:n,key:t&&t.key||r||Hg()}}function Vl({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Qr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Vg(e,t,n,r={}){let{window:l=document.defaultView,v5Compat:a=!1}=r,o=l.history,c="POP",i=null,d=m();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function m(){return(o.state||{idx:null}).idx}function y(){c="POP";let z=m(),f=z==null?null:z-d;d=z,i&&i({action:c,location:N.location,delta:f})}function x(z,f){c="PUSH";let p=dc(N.location,z,f);n&&n(p,z),d=m()+1;let h=_u(p,d),M=N.createHref(p);try{o.pushState(h,"",M)}catch(T){if(T instanceof DOMException&&T.name==="DataCloneError")throw T;l.location.assign(M)}a&&i&&i({action:c,location:N.location,delta:1})}function C(z,f){c="REPLACE";let p=dc(N.location,z,f);n&&n(p,z),d=m();let h=_u(p,d),M=N.createHref(p);o.replaceState(h,"",M),a&&i&&i({action:c,location:N.location,delta:0})}function U(z){return qg(z)}let N={get action(){return c},get location(){return e(l,o)},listen(z){if(i)throw new Error("A history only accepts one active listener");return l.addEventListener(Tu,y),i=z,()=>{l.removeEventListener(Tu,y),i=null}},createHref(z){return t(l,z)},createURL:U,encodeLocation(z){let f=U(z);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:x,replace:C,go(z){return o.go(z)}};return N}function qg(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),gt(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Vl(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function hh(e,t,n="/"){return Gg(e,t,n,!1)}function Gg(e,t,n,r){let l=typeof t=="string"?Qr(t):t,a=vn(l.pathname||"/",n);if(a==null)return null;let o=fh(e);Kg(o);let c=null;for(let i=0;c==null&&i<o.length;++i){let d=ly(a);c=ny(o[i],d,r)}return c}function fh(e,t=[],n=[],r="",l=!1){let a=(o,c,i=l,d)=>{let m={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&i)return;gt(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let y=pn([r,m.relativePath]),x=n.concat(m);o.children&&o.children.length>0&&(gt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),fh(o.children,t,x,y,i)),!(o.path==null&&!o.index)&&t.push({path:y,score:ty(y,o.index),routesMeta:x})};return e.forEach((o,c)=>{var i;if(o.path===""||!((i=o.path)!=null&&i.includes("?")))a(o,c);else for(let d of xh(o.path))a(o,c,!0,d)}),t}function xh(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,l=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return l?[a,""]:[a];let o=xh(r.join("/")),c=[];return c.push(...o.map(i=>i===""?a:[a,i].join("/"))),l&&c.push(...o),c.map(i=>e.startsWith("/")&&i===""?"/":i)}function Kg(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:sy(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Yg=/^:[\w-]+$/,Qg=3,Zg=2,Jg=1,Xg=10,ey=-2,Ou=e=>e==="*";function ty(e,t){let n=e.split("/"),r=n.length;return n.some(Ou)&&(r+=ey),t&&(r+=Zg),n.filter(l=>!Ou(l)).reduce((l,a)=>l+(Yg.test(a)?Qg:a===""?Jg:Xg),r)}function sy(e,t){return e.length===t.length&&e.slice(0,-1).every((r,l)=>r===t[l])?e[e.length-1]-t[t.length-1]:0}function ny(e,t,n=!1){let{routesMeta:r}=e,l={},a="/",o=[];for(let c=0;c<r.length;++c){let i=r[c],d=c===r.length-1,m=a==="/"?t:t.slice(a.length)||"/",y=uo({path:i.relativePath,caseSensitive:i.caseSensitive,end:d},m),x=i.route;if(!y&&d&&n&&!r[r.length-1].route.index&&(y=uo({path:i.relativePath,caseSensitive:i.caseSensitive,end:!1},m)),!y)return null;Object.assign(l,y.params),o.push({params:l,pathname:pn([a,y.pathname]),pathnameBase:cy(pn([a,y.pathnameBase])),route:x}),y.pathnameBase!=="/"&&(a=pn([a,y.pathnameBase]))}return o}function uo(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=ry(e.path,e.caseSensitive,e.end),l=t.match(n);if(!l)return null;let a=l[0],o=a.replace(/(.)\/+$/,"$1"),c=l.slice(1);return{params:r.reduce((d,{paramName:m,isOptional:y},x)=>{if(m==="*"){let U=c[x]||"";o=a.slice(0,a.length-U.length).replace(/(.)\/+$/,"$1")}const C=c[x];return y&&!C?d[m]=void 0:d[m]=(C||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:e}}function ry(e,t=!1,n=!0){Bs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,i)=>(r.push({paramName:c,isOptional:i!=null}),i?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),r]}function ly(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Bs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function vn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}var ay=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function oy(e,t="/"){let{pathname:n,search:r="",hash:l=""}=typeof e=="string"?Qr(e):e,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=Iu(n.substring(1),"/"):a=Iu(n,t)):a=t,{pathname:a,search:dy(r),hash:uy(l)}}function Iu(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function mi(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iy(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function gh(e){let t=iy(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function yh(e,t,n,r=!1){let l;typeof e=="string"?l=Qr(e):(l={...e},gt(!l.pathname||!l.pathname.includes("?"),mi("?","pathname","search",l)),gt(!l.pathname||!l.pathname.includes("#"),mi("#","pathname","hash",l)),gt(!l.search||!l.search.includes("#"),mi("#","search","hash",l)));let a=e===""||l.pathname==="",o=a?"/":l.pathname,c;if(o==null)c=n;else{let y=t.length-1;if(!r&&o.startsWith("..")){let x=o.split("/");for(;x[0]==="..";)x.shift(),y-=1;l.pathname=x.join("/")}c=y>=0?t[y]:"/"}let i=oy(l,c),d=o&&o!=="/"&&o.endsWith("/"),m=(a||o===".")&&n.endsWith("/");return!i.pathname.endsWith("/")&&(d||m)&&(i.pathname+="/"),i}var pn=e=>e.join("/").replace(/\/\/+/g,"/"),cy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),dy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,uy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,my=class{constructor(e,t,n,r=!1){this.status=e,this.statusText=t||"",this.internal=r,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function py(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function hy(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var vh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function bh(e,t){let n=e;if(typeof n!="string"||!ay.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let r=n,l=!1;if(vh)try{let a=new URL(window.location.href),o=n.startsWith("//")?new URL(a.protocol+n):new URL(n),c=vn(o.pathname,t);o.origin===a.origin&&c!=null?n=c+o.search+o.hash:l=!0}catch{Bs(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:l,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var jh=["POST","PUT","PATCH","DELETE"];new Set(jh);var fy=["GET",...jh];new Set(fy);var Zr=g.createContext(null);Zr.displayName="DataRouter";var zo=g.createContext(null);zo.displayName="DataRouterState";var xy=g.createContext(!1),Nh=g.createContext({isTransitioning:!1});Nh.displayName="ViewTransition";var gy=g.createContext(new Map);gy.displayName="Fetchers";var yy=g.createContext(null);yy.displayName="Await";var zs=g.createContext(null);zs.displayName="Navigation";var ea=g.createContext(null);ea.displayName="Location";var en=g.createContext({outlet:null,matches:[],isDataRoute:!1});en.displayName="Route";var md=g.createContext(null);md.displayName="RouteError";var kh="REACT_ROUTER_ERROR",vy="REDIRECT",by="ROUTE_ERROR_RESPONSE";function jy(e){if(e.startsWith(`${kh}:${vy}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function Ny(e){if(e.startsWith(`${kh}:${by}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new my(t.status,t.statusText,t.data)}catch{}}function ky(e,{relative:t}={}){gt(ta(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=g.useContext(zs),{hash:l,pathname:a,search:o}=sa(e,{relative:t}),c=a;return n!=="/"&&(c=a==="/"?n:pn([n,a])),r.createHref({pathname:c,search:o,hash:l})}function ta(){return g.useContext(ea)!=null}function Qn(){return gt(ta(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(ea).location}var wh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ch(e){g.useContext(zs).static||g.useLayoutEffect(e)}function To(){let{isDataRoute:e}=g.useContext(en);return e?My():wy()}function wy(){gt(ta(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(Zr),{basename:t,navigator:n}=g.useContext(zs),{matches:r}=g.useContext(en),{pathname:l}=Qn(),a=JSON.stringify(gh(r)),o=g.useRef(!1);return Ch(()=>{o.current=!0}),g.useCallback((i,d={})=>{if(Bs(o.current,wh),!o.current)return;if(typeof i=="number"){n.go(i);return}let m=yh(i,JSON.parse(a),l,d.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:pn([t,m.pathname])),(d.replace?n.replace:n.push)(m,d.state,d)},[t,n,a,l,e])}g.createContext(null);function Cy(){let{matches:e}=g.useContext(en),t=e[e.length-1];return t?t.params:{}}function sa(e,{relative:t}={}){let{matches:n}=g.useContext(en),{pathname:r}=Qn(),l=JSON.stringify(gh(n));return g.useMemo(()=>yh(e,JSON.parse(l),r,t==="path"),[e,l,r,t])}function Sy(e,t){return Sh(e,t)}function Sh(e,t,n,r,l){var p;gt(ta(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=g.useContext(zs),{matches:o}=g.useContext(en),c=o[o.length-1],i=c?c.params:{},d=c?c.pathname:"/",m=c?c.pathnameBase:"/",y=c&&c.route;{let h=y&&y.path||"";Eh(d,!y||h.endsWith("*")||h.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${h}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${h}"> to <Route path="${h==="/"?"*":`${h}/*`}">.`)}let x=Qn(),C;if(t){let h=typeof t=="string"?Qr(t):t;gt(m==="/"||((p=h.pathname)==null?void 0:p.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${h.pathname}" was given in the \`location\` prop.`),C=h}else C=x;let U=C.pathname||"/",N=U;if(m!=="/"){let h=m.replace(/^\//,"").split("/");N="/"+U.replace(/^\//,"").split("/").slice(h.length).join("/")}let z=hh(e,{pathname:N});Bs(y||z!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Bs(z==null||z[z.length-1].route.element!==void 0||z[z.length-1].route.Component!==void 0||z[z.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let f=zy(z&&z.map(h=>Object.assign({},h,{params:Object.assign({},i,h.params),pathname:pn([m,a.encodeLocation?a.encodeLocation(h.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:h.pathname]),pathnameBase:h.pathnameBase==="/"?m:pn([m,a.encodeLocation?a.encodeLocation(h.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:h.pathnameBase])})),o,n,r,l);return t&&f?g.createElement(ea.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},f):f}function Dy(){let e=Ly(),t=py(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:a},"ErrorBoundary")," or"," ",g.createElement("code",{style:a},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:l},n):null,o)}var Ey=g.createElement(Dy,null),Dh=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=Ny(e.digest);n&&(e=n)}let t=e!==void 0?g.createElement(en.Provider,{value:this.props.routeContext},g.createElement(md.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?g.createElement(Py,{error:e},t):t}};Dh.contextType=xy;var pi=new WeakMap;function Py({children:e,error:t}){let{basename:n}=g.useContext(zs);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let r=jy(t.digest);if(r){let l=pi.get(t);if(l)throw l;let a=bh(r.location,n);if(vh&&!pi.get(t))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw pi.set(t,o),o}return g.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return e}function Ry({routeContext:e,match:t,children:n}){let r=g.useContext(Zr);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(en.Provider,{value:e},n)}function zy(e,t=[],n=null,r=null,l=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,o=n==null?void 0:n.errors;if(o!=null){let m=a.findIndex(y=>y.route.id&&(o==null?void 0:o[y.route.id])!==void 0);gt(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let c=!1,i=-1;if(n)for(let m=0;m<a.length;m++){let y=a[m];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(i=m),y.route.id){let{loaderData:x,errors:C}=n,U=y.route.loader&&!x.hasOwnProperty(y.route.id)&&(!C||C[y.route.id]===void 0);if(y.route.lazy||U){c=!0,i>=0?a=a.slice(0,i+1):a=[a[0]];break}}}let d=n&&r?(m,y)=>{var x,C;r(m,{location:n.location,params:((C=(x=n.matches)==null?void 0:x[0])==null?void 0:C.params)??{},unstable_pattern:hy(n.matches),errorInfo:y})}:void 0;return a.reduceRight((m,y,x)=>{let C,U=!1,N=null,z=null;n&&(C=o&&y.route.id?o[y.route.id]:void 0,N=y.route.errorElement||Ey,c&&(i<0&&x===0?(Eh("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),U=!0,z=null):i===x&&(U=!0,z=y.route.hydrateFallbackElement||null)));let f=t.concat(a.slice(0,x+1)),p=()=>{let h;return C?h=N:U?h=z:y.route.Component?h=g.createElement(y.route.Component,null):y.route.element?h=y.route.element:h=m,g.createElement(Ry,{match:y,routeContext:{outlet:m,matches:f,isDataRoute:n!=null},children:h})};return n&&(y.route.ErrorBoundary||y.route.errorElement||x===0)?g.createElement(Dh,{location:n.location,revalidation:n.revalidation,component:N,error:C,children:p(),routeContext:{outlet:null,matches:f,isDataRoute:!0},onError:d}):p()},null)}function pd(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ty(e){let t=g.useContext(Zr);return gt(t,pd(e)),t}function _y(e){let t=g.useContext(zo);return gt(t,pd(e)),t}function Oy(e){let t=g.useContext(en);return gt(t,pd(e)),t}function hd(e){let t=Oy(e),n=t.matches[t.matches.length-1];return gt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function Iy(){return hd("useRouteId")}function Ly(){var r;let e=g.useContext(md),t=_y("useRouteError"),n=hd("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function My(){let{router:e}=Ty("useNavigate"),t=hd("useNavigate"),n=g.useRef(!1);return Ch(()=>{n.current=!0}),g.useCallback(async(l,a={})=>{Bs(n.current,wh),n.current&&(typeof l=="number"?await e.navigate(l):await e.navigate(l,{fromRouteId:t,...a}))},[e,t])}var Lu={};function Eh(e,t,n){!t&&!Lu[e]&&(Lu[e]=!0,Bs(!1,n))}g.memo(Fy);function Fy({routes:e,future:t,state:n,onError:r}){return Sh(e,void 0,n,r,t)}function xl(e){gt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ay({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:l,static:a=!1,unstable_useTransitions:o}){gt(!ta(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),i=g.useMemo(()=>({basename:c,navigator:l,static:a,unstable_useTransitions:o,future:{}}),[c,l,a,o]);typeof n=="string"&&(n=Qr(n));let{pathname:d="/",search:m="",hash:y="",state:x=null,key:C="default"}=n,U=g.useMemo(()=>{let N=vn(d,c);return N==null?null:{location:{pathname:N,search:m,hash:y,state:x,key:C},navigationType:r}},[c,d,m,y,x,C,r]);return Bs(U!=null,`<Router basename="${c}"> is not able to match the URL "${d}${m}${y}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:g.createElement(zs.Provider,{value:i},g.createElement(ea.Provider,{children:t,value:U}))}function $y({children:e,location:t}){return Sy(uc(e),t)}function uc(e,t=[]){let n=[];return g.Children.forEach(e,(r,l)=>{if(!g.isValidElement(r))return;let a=[...t,l];if(r.type===g.Fragment){n.push.apply(n,uc(r.props.children,a));return}gt(r.type===xl,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),gt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=uc(r.props.children,a)),n.push(o)}),n}var Fa="get",Aa="application/x-www-form-urlencoded";function _o(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function Uy(e){return _o(e)&&e.tagName.toLowerCase()==="button"}function By(e){return _o(e)&&e.tagName.toLowerCase()==="form"}function Wy(e){return _o(e)&&e.tagName.toLowerCase()==="input"}function Hy(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Vy(e,t){return e.button===0&&(!t||t==="_self")&&!Hy(e)}function mc(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(l=>[n,l]):[[n,r]])},[]))}function qy(e,t){let n=mc(e);return t&&t.forEach((r,l)=>{n.has(l)||t.getAll(l).forEach(a=>{n.append(l,a)})}),n}var ja=null;function Gy(){if(ja===null)try{new FormData(document.createElement("form"),0),ja=!1}catch{ja=!0}return ja}var Ky=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function hi(e){return e!=null&&!Ky.has(e)?(Bs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Aa}"`),null):e}function Yy(e,t){let n,r,l,a,o;if(By(e)){let c=e.getAttribute("action");r=c?vn(c,t):null,n=e.getAttribute("method")||Fa,l=hi(e.getAttribute("enctype"))||Aa,a=new FormData(e)}else if(Uy(e)||Wy(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=e.getAttribute("formaction")||c.getAttribute("action");if(r=i?vn(i,t):null,n=e.getAttribute("formmethod")||c.getAttribute("method")||Fa,l=hi(e.getAttribute("formenctype"))||hi(c.getAttribute("enctype"))||Aa,a=new FormData(c,e),!Gy()){let{name:d,type:m,value:y}=e;if(m==="image"){let x=d?`${d}.`:"";a.append(`${x}x`,"0"),a.append(`${x}y`,"0")}else d&&a.append(d,y)}}else{if(_o(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Fa,r=null,l=Aa,o=e}return a&&l==="text/plain"&&(o=a,a=void 0),{action:r,method:n.toLowerCase(),encType:l,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function fd(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Qy(e,t,n,r){let l=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${r}`:l.pathname=`${l.pathname}.${r}`:l.pathname==="/"?l.pathname=`_root.${r}`:t&&vn(l.pathname,t)==="/"?l.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${r}`,l}async function Zy(e,t){if(e.id in t)return t[e.id];try{let n=await Bg(()=>import(e.module),[]);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Jy(e){return e!=null&&typeof e.page=="string"}function Xy(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function e0(e,t,n){let r=await Promise.all(e.map(async l=>{let a=t.routes[l.route.id];if(a){let o=await Zy(a,n);return o.links?o.links():[]}return[]}));return r0(r.flat(1).filter(Xy).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Mu(e,t,n,r,l,a){let o=(i,d)=>n[d]?i.route.id!==n[d].route.id:!0,c=(i,d)=>{var m;return n[d].pathname!==i.pathname||((m=n[d].route.path)==null?void 0:m.endsWith("*"))&&n[d].params["*"]!==i.params["*"]};return a==="assets"?t.filter((i,d)=>o(i,d)||c(i,d)):a==="data"?t.filter((i,d)=>{var y;let m=r.routes[i.route.id];if(!m||!m.hasLoader)return!1;if(o(i,d)||c(i,d))return!0;if(i.route.shouldRevalidate){let x=i.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((y=n[0])==null?void 0:y.params)||{},nextUrl:new URL(e,window.origin),nextParams:i.params,defaultShouldRevalidate:!0});if(typeof x=="boolean")return x}return!0}):[]}function t0(e,t,{includeHydrateFallback:n}={}){return s0(e.map(r=>{let l=t.routes[r.route.id];if(!l)return[];let a=[l.module];return l.clientActionModule&&(a=a.concat(l.clientActionModule)),l.clientLoaderModule&&(a=a.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(a=a.concat(l.hydrateFallbackModule)),l.imports&&(a=a.concat(l.imports)),a}).flat(1))}function s0(e){return[...new Set(e)]}function n0(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function r0(e,t){let n=new Set,r=new Set(t);return e.reduce((l,a)=>{if(t&&!Jy(a)&&a.as==="script"&&a.href&&r.has(a.href))return l;let c=JSON.stringify(n0(a));return n.has(c)||(n.add(c),l.push({key:c,link:a})),l},[])}function Ph(){let e=g.useContext(Zr);return fd(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function l0(){let e=g.useContext(zo);return fd(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var xd=g.createContext(void 0);xd.displayName="FrameworkContext";function Rh(){let e=g.useContext(xd);return fd(e,"You must render this element inside a <HydratedRouter> element"),e}function a0(e,t){let n=g.useContext(xd),[r,l]=g.useState(!1),[a,o]=g.useState(!1),{onFocus:c,onBlur:i,onMouseEnter:d,onMouseLeave:m,onTouchStart:y}=t,x=g.useRef(null);g.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let N=f=>{f.forEach(p=>{o(p.isIntersecting)})},z=new IntersectionObserver(N,{threshold:.5});return x.current&&z.observe(x.current),()=>{z.disconnect()}}},[e]),g.useEffect(()=>{if(r){let N=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(N)}}},[r]);let C=()=>{l(!0)},U=()=>{l(!1),o(!1)};return n?e!=="intent"?[a,x,{}]:[a,x,{onFocus:dl(c,C),onBlur:dl(i,U),onMouseEnter:dl(d,C),onMouseLeave:dl(m,U),onTouchStart:dl(y,C)}]:[!1,x,{}]}function dl(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function o0({page:e,...t}){let{router:n}=Ph(),r=g.useMemo(()=>hh(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?g.createElement(c0,{page:e,matches:r,...t}):null}function i0(e){let{manifest:t,routeModules:n}=Rh(),[r,l]=g.useState([]);return g.useEffect(()=>{let a=!1;return e0(e,t,n).then(o=>{a||l(o)}),()=>{a=!0}},[e,t,n]),r}function c0({page:e,matches:t,...n}){let r=Qn(),{future:l,manifest:a,routeModules:o}=Rh(),{basename:c}=Ph(),{loaderData:i,matches:d}=l0(),m=g.useMemo(()=>Mu(e,t,d,a,r,"data"),[e,t,d,a,r]),y=g.useMemo(()=>Mu(e,t,d,a,r,"assets"),[e,t,d,a,r]),x=g.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let N=new Set,z=!1;if(t.forEach(p=>{var M;let h=a.routes[p.route.id];!h||!h.hasLoader||(!m.some(T=>T.route.id===p.route.id)&&p.route.id in i&&((M=o[p.route.id])!=null&&M.shouldRevalidate)||h.hasClientLoader?z=!0:N.add(p.route.id))}),N.size===0)return[];let f=Qy(e,c,l.unstable_trailingSlashAwareDataRequests,"data");return z&&N.size>0&&f.searchParams.set("_routes",t.filter(p=>N.has(p.route.id)).map(p=>p.route.id).join(",")),[f.pathname+f.search]},[c,l.unstable_trailingSlashAwareDataRequests,i,r,a,m,t,e,o]),C=g.useMemo(()=>t0(y,a),[y,a]),U=i0(y);return g.createElement(g.Fragment,null,x.map(N=>g.createElement("link",{key:N,rel:"prefetch",as:"fetch",href:N,...n})),C.map(N=>g.createElement("link",{key:N,rel:"modulepreload",href:N,...n})),U.map(({key:N,link:z})=>g.createElement("link",{key:N,nonce:n.nonce,...z,crossOrigin:z.crossOrigin??n.crossOrigin})))}function d0(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var u0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{u0&&(window.__reactRouterVersion="7.13.0")}catch{}function m0({basename:e,children:t,unstable_useTransitions:n,window:r}){let l=g.useRef();l.current==null&&(l.current=Wg({window:r,v5Compat:!0}));let a=l.current,[o,c]=g.useState({action:a.action,location:a.location}),i=g.useCallback(d=>{n===!1?c(d):g.startTransition(()=>c(d))},[n]);return g.useLayoutEffect(()=>a.listen(i),[a,i]),g.createElement(Ay,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:n})}var zh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Vr=g.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:l,reloadDocument:a,replace:o,state:c,target:i,to:d,preventScrollReset:m,viewTransition:y,unstable_defaultShouldRevalidate:x,...C},U){let{basename:N,unstable_useTransitions:z}=g.useContext(zs),f=typeof d=="string"&&zh.test(d),p=bh(d,N);d=p.to;let h=ky(d,{relative:l}),[M,T,F]=a0(r,C),R=x0(d,{replace:o,state:c,target:i,preventScrollReset:m,relative:l,viewTransition:y,unstable_defaultShouldRevalidate:x,unstable_useTransitions:z});function u(S){t&&t(S),S.defaultPrevented||R(S)}let b=g.createElement("a",{...C,...F,href:p.absoluteURL||h,onClick:p.isExternal||a?t:u,ref:d0(U,T),target:i,"data-discover":!f&&n==="render"?"true":void 0});return M&&!f?g.createElement(g.Fragment,null,b,g.createElement(o0,{page:h})):b});Vr.displayName="Link";var p0=g.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:l=!1,style:a,to:o,viewTransition:c,children:i,...d},m){let y=sa(o,{relative:d.relative}),x=Qn(),C=g.useContext(zo),{navigator:U,basename:N}=g.useContext(zs),z=C!=null&&j0(y)&&c===!0,f=U.encodeLocation?U.encodeLocation(y).pathname:y.pathname,p=x.pathname,h=C&&C.navigation&&C.navigation.location?C.navigation.location.pathname:null;n||(p=p.toLowerCase(),h=h?h.toLowerCase():null,f=f.toLowerCase()),h&&N&&(h=vn(h,N)||h);const M=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let T=p===f||!l&&p.startsWith(f)&&p.charAt(M)==="/",F=h!=null&&(h===f||!l&&h.startsWith(f)&&h.charAt(f.length)==="/"),R={isActive:T,isPending:F,isTransitioning:z},u=T?t:void 0,b;typeof r=="function"?b=r(R):b=[r,T?"active":null,F?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let S=typeof a=="function"?a(R):a;return g.createElement(Vr,{...d,"aria-current":u,className:b,ref:m,style:S,to:o,viewTransition:c},typeof i=="function"?i(R):i)});p0.displayName="NavLink";var h0=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:l,state:a,method:o=Fa,action:c,onSubmit:i,relative:d,preventScrollReset:m,viewTransition:y,unstable_defaultShouldRevalidate:x,...C},U)=>{let{unstable_useTransitions:N}=g.useContext(zs),z=v0(),f=b0(c,{relative:d}),p=o.toLowerCase()==="get"?"get":"post",h=typeof c=="string"&&zh.test(c),M=T=>{if(i&&i(T),T.defaultPrevented)return;T.preventDefault();let F=T.nativeEvent.submitter,R=(F==null?void 0:F.getAttribute("formmethod"))||o,u=()=>z(F||T.currentTarget,{fetcherKey:t,method:R,navigate:n,replace:l,state:a,relative:d,preventScrollReset:m,viewTransition:y,unstable_defaultShouldRevalidate:x});N&&n!==!1?g.startTransition(()=>u()):u()};return g.createElement("form",{ref:U,method:p,action:f,onSubmit:r?i:M,...C,"data-discover":!h&&e==="render"?"true":void 0})});h0.displayName="Form";function f0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Th(e){let t=g.useContext(Zr);return gt(t,f0(e)),t}function x0(e,{target:t,replace:n,state:r,preventScrollReset:l,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:c,unstable_useTransitions:i}={}){let d=To(),m=Qn(),y=sa(e,{relative:a});return g.useCallback(x=>{if(Vy(x,t)){x.preventDefault();let C=n!==void 0?n:Vl(m)===Vl(y),U=()=>d(e,{replace:C,state:r,preventScrollReset:l,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:c});i?g.startTransition(()=>U()):U()}},[m,d,y,n,r,t,e,l,a,o,c,i])}function _h(e){Bs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=g.useRef(mc(e)),n=g.useRef(!1),r=Qn(),l=g.useMemo(()=>qy(r.search,n.current?null:t.current),[r.search]),a=To(),o=g.useCallback((c,i)=>{const d=mc(typeof c=="function"?c(new URLSearchParams(l)):c);n.current=!0,a("?"+d,i)},[a,l]);return[l,o]}var g0=0,y0=()=>`__${String(++g0)}__`;function v0(){let{router:e}=Th("useSubmit"),{basename:t}=g.useContext(zs),n=Iy(),r=e.fetch,l=e.navigate;return g.useCallback(async(a,o={})=>{let{action:c,method:i,encType:d,formData:m,body:y}=Yy(a,t);if(o.navigate===!1){let x=o.fetcherKey||y0();await r(x,n,o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:m,body:y,formMethod:o.method||i,formEncType:o.encType||d,flushSync:o.flushSync})}else await l(o.action||c,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:m,body:y,formMethod:o.method||i,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,l,t,n])}function b0(e,{relative:t}={}){let{basename:n}=g.useContext(zs),r=g.useContext(en);gt(r,"useFormAction must be used inside a RouteContext");let[l]=r.matches.slice(-1),a={...sa(e||".",{relative:t})},o=Qn();if(e==null){a.search=o.search;let c=new URLSearchParams(a.search),i=c.getAll("index");if(i.some(m=>m==="")){c.delete("index"),i.filter(y=>y).forEach(y=>c.append("index",y));let m=c.toString();a.search=m?`?${m}`:""}}return(!e||e===".")&&l.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:pn([n,a.pathname])),Vl(a)}function j0(e,{relative:t}={}){let n=g.useContext(Nh);gt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Th("useViewTransitionState"),l=sa(e,{relative:t});if(!n.isTransitioning)return!1;let a=vn(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=vn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return uo(l.pathname,o)!=null||uo(l.pathname,a)!=null}var N0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const k0=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),w0=(e,t)=>{const n=g.forwardRef(({color:r="currentColor",size:l=24,strokeWidth:a=2,absoluteStrokeWidth:o,children:c,...i},d)=>g.createElement("svg",{ref:d,...N0,width:l,height:l,stroke:r,strokeWidth:o?Number(a)*24/Number(l):a,className:`lucide lucide-${k0(e)}`,...i},[...t.map(([m,y])=>g.createElement(m,y)),...(Array.isArray(c)?c:[c])||[]]));return n.displayName=`${e}`,n};var Re=w0;const C0=Re("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Oh=Re("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),bt=Re("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),S0=Re("Archive",[["rect",{width:"20",height:"5",x:"2",y:"4",rx:"2",key:"uhwcea"}],["path",{d:"M4 9v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9",key:"shkvi4"}],["path",{d:"M10 13h4",key:"ytezjc"}]]),D0=Re("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),E0=Re("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),xs=Re("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),pc=Re("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),P0=Re("Car",[["path",{d:"M14 16H9m10 0h3v-3.15a1 1 0 0 0-.84-.99L16 11l-2.7-3.6a1 1 0 0 0-.8-.4H5.24a2 2 0 0 0-1.8 1.1l-.8 1.63A6 6 0 0 0 2 12.42V16h2",key:"l5np60"}],["circle",{cx:"6.5",cy:"16.5",r:"2.5",key:"ae40ju"}],["circle",{cx:"16.5",cy:"16.5",r:"2.5",key:"1smtlt"}]]),R0=Re("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Fe=Re("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Xs=Re("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]),Oo=Re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),qr=Re("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ql=Re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Io=Re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),fi=Re("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Ih=Re("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),Hn=Re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Lh=Re("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),rs=Re("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Lo=Re("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Mo=Re("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ps=Re("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),gd=Re("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),gl=Re("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),z0=Re("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),hc=Re("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),T0=Re("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),_0=Re("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),Mh=Re("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),O0=Re("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Fh=Re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),un=Re("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),I0=Re("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),L0=Re("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),M0=Re("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),hn=Re("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),F0=Re("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Ah=Re("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),ur=Re("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),Fu=Re("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),A0=Re("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),gs=Re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),$h=Re("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),Uh=Re("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),mr=Re("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Au=Re("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),Bh=Re("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),$0=Re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),In=Re("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Wh=Re("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),$s=Re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Hh=Re("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),as=Re("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),U0=Re("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),yd=Re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Gl=Re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),nr=Re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Zn=Re("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),wt=Re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var Vh={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((n,r)=>{e.exports=r()})(pf,function n(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},l,a=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,c={},i=0,d={};function m(u){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(b){var S=T(b);S.chunkSize=parseInt(S.chunkSize),b.step||b.chunk||(S.chunkSize=null),this._handle=new N(S),(this._handle.streamer=this)._config=S}).call(this,u),this.parseChunk=function(b,S){var j=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<j){let H=this._config.newline;H||(k=this._config.quoteChar||'"',H=this._handle.guessLineEndings(b,k)),b=[...b.split(H).slice(j)].join(H)}this.isFirstChunk&&R(this._config.beforeFirstChunk)&&(k=this._config.beforeFirstChunk(b))!==void 0&&(b=k),this.isFirstChunk=!1,this._halted=!1;var j=this._partialLine+b,k=(this._partialLine="",this._handle.parse(j,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(b=k.meta.cursor,j=(this._finished||(this._partialLine=j.substring(b-this._baseIndex),this._baseIndex=b),k&&k.data&&(this._rowCount+=k.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)r.postMessage({results:k,workerId:d.WORKER_ID,finished:j});else if(R(this._config.chunk)&&!S){if(this._config.chunk(k,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=k=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(k.data),this._completeResults.errors=this._completeResults.errors.concat(k.errors),this._completeResults.meta=k.meta),this._completed||!j||!R(this._config.complete)||k&&k.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),j||k&&k.meta.paused||this._nextChunk(),k}this._halted=!0},this._sendError=function(b){R(this._config.error)?this._config.error(b):o&&this._config.error&&r.postMessage({workerId:d.WORKER_ID,error:b,finished:!1})}}function y(u){var b;(u=u||{}).chunkSize||(u.chunkSize=d.RemoteChunkSize),m.call(this,u),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(S){this._input=S,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(b=new XMLHttpRequest,this._config.withCredentials&&(b.withCredentials=this._config.withCredentials),a||(b.onload=F(this._chunkLoaded,this),b.onerror=F(this._chunkError,this)),b.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var S,j=this._config.downloadRequestHeaders;for(S in j)b.setRequestHeader(S,j[S])}var k;this._config.chunkSize&&(k=this._start+this._config.chunkSize-1,b.setRequestHeader("Range","bytes="+this._start+"-"+k));try{b.send(this._config.downloadRequestBody)}catch(H){this._chunkError(H.message)}a&&b.status===0&&this._chunkError()}},this._chunkLoaded=function(){b.readyState===4&&(b.status<200||400<=b.status?this._chunkError():(this._start+=this._config.chunkSize||b.responseText.length,this._finished=!this._config.chunkSize||this._start>=(S=>(S=S.getResponseHeader("Content-Range"))!==null?parseInt(S.substring(S.lastIndexOf("/")+1)):-1)(b),this.parseChunk(b.responseText)))},this._chunkError=function(S){S=b.statusText||S,this._sendError(new Error(S))}}function x(u){(u=u||{}).chunkSize||(u.chunkSize=d.LocalChunkSize),m.call(this,u);var b,S,j=typeof FileReader<"u";this.stream=function(k){this._input=k,S=k.slice||k.webkitSlice||k.mozSlice,j?((b=new FileReader).onload=F(this._chunkLoaded,this),b.onerror=F(this._chunkError,this)):b=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var k=this._input,H=(this._config.chunkSize&&(H=Math.min(this._start+this._config.chunkSize,this._input.size),k=S.call(k,this._start,H)),b.readAsText(k,this._config.encoding));j||this._chunkLoaded({target:{result:H}})},this._chunkLoaded=function(k){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(k.target.result)},this._chunkError=function(){this._sendError(b.error)}}function C(u){var b;m.call(this,u=u||{}),this.stream=function(S){return b=S,this._nextChunk()},this._nextChunk=function(){var S,j;if(!this._finished)return S=this._config.chunkSize,b=S?(j=b.substring(0,S),b.substring(S)):(j=b,""),this._finished=!b,this.parseChunk(j)}}function U(u){m.call(this,u=u||{});var b=[],S=!0,j=!1;this.pause=function(){m.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){m.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(k){this._input=k,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){j&&b.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),b.length?this.parseChunk(b.shift()):S=!0},this._streamData=F(function(k){try{b.push(typeof k=="string"?k:k.toString(this._config.encoding)),S&&(S=!1,this._checkIsFinished(),this.parseChunk(b.shift()))}catch(H){this._streamError(H)}},this),this._streamError=F(function(k){this._streamCleanUp(),this._sendError(k)},this),this._streamEnd=F(function(){this._streamCleanUp(),j=!0,this._streamData("")},this),this._streamCleanUp=F(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function N(u){var b,S,j,k,H=Math.pow(2,53),I=-H,ue=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,E=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,L=this,P=0,A=0,B=!1,ne=!1,oe=[],G={data:[],errors:[],meta:{}};function K(W){return u.skipEmptyLines==="greedy"?W.join("").trim()==="":W.length===1&&W[0].length===0}function ce(){if(G&&j&&(le("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),j=!1),u.skipEmptyLines&&(G.data=G.data.filter(function(X){return!K(X)})),ee()){let X=function(ae,ye){R(u.transformHeader)&&(ae=u.transformHeader(ae,ye)),oe.push(ae)};var Z=X;if(G)if(Array.isArray(G.data[0])){for(var W=0;ee()&&W<G.data.length;W++)G.data[W].forEach(X);G.data.splice(0,1)}else G.data.forEach(X)}function _(X,ae){for(var ye=u.header?{}:[],D=0;D<X.length;D++){var O=D,de=X[D],de=((ie,be)=>(ve=>(u.dynamicTypingFunction&&u.dynamicTyping[ve]===void 0&&(u.dynamicTyping[ve]=u.dynamicTypingFunction(ve)),(u.dynamicTyping[ve]||u.dynamicTyping)===!0))(ie)?be==="true"||be==="TRUE"||be!=="false"&&be!=="FALSE"&&((ve=>{if(ue.test(ve)&&(ve=parseFloat(ve),I<ve&&ve<H))return 1})(be)?parseFloat(be):E.test(be)?new Date(be):be===""?null:be):be)(O=u.header?D>=oe.length?"__parsed_extra":oe[D]:O,de=u.transform?u.transform(de,O):de);O==="__parsed_extra"?(ye[O]=ye[O]||[],ye[O].push(de)):ye[O]=de}return u.header&&(D>oe.length?le("FieldMismatch","TooManyFields","Too many fields: expected "+oe.length+" fields but parsed "+D,A+ae):D<oe.length&&le("FieldMismatch","TooFewFields","Too few fields: expected "+oe.length+" fields but parsed "+D,A+ae)),ye}var V;G&&(u.header||u.dynamicTyping||u.transform)&&(V=1,!G.data.length||Array.isArray(G.data[0])?(G.data=G.data.map(_),V=G.data.length):G.data=_(G.data,0),u.header&&G.meta&&(G.meta.fields=oe),A+=V)}function ee(){return u.header&&oe.length===0}function le(W,_,V,Z){W={type:W,code:_,message:V},Z!==void 0&&(W.row=Z),G.errors.push(W)}R(u.step)&&(k=u.step,u.step=function(W){G=W,ee()?ce():(ce(),G.data.length!==0&&(P+=W.data.length,u.preview&&P>u.preview?S.abort():(G.data=G.data[0],k(G,L))))}),this.parse=function(W,_,V){var Z=u.quoteChar||'"',Z=(u.newline||(u.newline=this.guessLineEndings(W,Z)),j=!1,u.delimiter?R(u.delimiter)&&(u.delimiter=u.delimiter(W),G.meta.delimiter=u.delimiter):((Z=((X,ae,ye,D,O)=>{var de,ie,be,ve;O=O||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var He=0;He<O.length;He++){for(var Ae,Oe=O[He],Pe=0,st=0,qe=0,rt=(be=void 0,new f({comments:D,delimiter:Oe,newline:ae,preview:10}).parse(X)),pt=0;pt<rt.data.length;pt++)ye&&K(rt.data[pt])?qe++:(Ae=rt.data[pt].length,st+=Ae,be===void 0?be=Ae:0<Ae&&(Pe+=Math.abs(Ae-be),be=Ae));0<rt.data.length&&(st/=rt.data.length-qe),(ie===void 0||Pe<=ie)&&(ve===void 0||ve<st)&&1.99<st&&(ie=Pe,de=Oe,ve=st)}return{successful:!!(u.delimiter=de),bestDelimiter:de}})(W,u.newline,u.skipEmptyLines,u.comments,u.delimitersToGuess)).successful?u.delimiter=Z.bestDelimiter:(j=!0,u.delimiter=d.DefaultDelimiter),G.meta.delimiter=u.delimiter),T(u));return u.preview&&u.header&&Z.preview++,b=W,S=new f(Z),G=S.parse(b,_,V),ce(),B?{meta:{paused:!0}}:G||{meta:{paused:!1}}},this.paused=function(){return B},this.pause=function(){B=!0,S.abort(),b=R(u.chunk)?"":b.substring(S.getCharIndex())},this.resume=function(){L.streamer._halted?(B=!1,L.streamer.parseChunk(b,!0)):setTimeout(L.resume,3)},this.aborted=function(){return ne},this.abort=function(){ne=!0,S.abort(),G.meta.aborted=!0,R(u.complete)&&u.complete(G),b=""},this.guessLineEndings=function(X,Z){X=X.substring(0,1048576);var Z=new RegExp(z(Z)+"([^]*?)"+z(Z),"gm"),V=(X=X.replace(Z,"")).split("\r"),Z=X.split(`
`),X=1<Z.length&&Z[0].length<V[0].length;if(V.length===1||X)return`
`;for(var ae=0,ye=0;ye<V.length;ye++)V[ye][0]===`
`&&ae++;return ae>=V.length/2?`\r
`:"\r"}}function z(u){return u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function f(u){var b=(u=u||{}).delimiter,S=u.newline,j=u.comments,k=u.step,H=u.preview,I=u.fastMode,ue=null,E=!1,L=u.quoteChar==null?'"':u.quoteChar,P=L;if(u.escapeChar!==void 0&&(P=u.escapeChar),(typeof b!="string"||-1<d.BAD_DELIMITERS.indexOf(b))&&(b=","),j===b)throw new Error("Comment character same as delimiter");j===!0?j="#":(typeof j!="string"||-1<d.BAD_DELIMITERS.indexOf(j))&&(j=!1),S!==`
`&&S!=="\r"&&S!==`\r
`&&(S=`
`);var A=0,B=!1;this.parse=function(ne,oe,G){if(typeof ne!="string")throw new Error("Input must be a string");var K=ne.length,ce=b.length,ee=S.length,le=j.length,W=R(k),_=[],V=[],Z=[],X=A=0;if(!ne)return Pe();if(I||I!==!1&&ne.indexOf(L)===-1){for(var ae=ne.split(S),ye=0;ye<ae.length;ye++){if(Z=ae[ye],A+=Z.length,ye!==ae.length-1)A+=S.length;else if(G)return Pe();if(!j||Z.substring(0,le)!==j){if(W){if(_=[],ve(Z.split(b)),st(),B)return Pe()}else ve(Z.split(b));if(H&&H<=ye)return _=_.slice(0,H),Pe(!0)}}return Pe()}for(var D=ne.indexOf(b,A),O=ne.indexOf(S,A),de=new RegExp(z(P)+z(L),"g"),ie=ne.indexOf(L,A);;)if(ne[A]===L)for(ie=A,A++;;){if((ie=ne.indexOf(L,ie+1))===-1)return G||V.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:_.length,index:A}),Ae();if(ie===K-1)return Ae(ne.substring(A,ie).replace(de,L));if(L===P&&ne[ie+1]===P)ie++;else if(L===P||ie===0||ne[ie-1]!==P){D!==-1&&D<ie+1&&(D=ne.indexOf(b,ie+1));var be=He((O=O!==-1&&O<ie+1?ne.indexOf(S,ie+1):O)===-1?D:Math.min(D,O));if(ne.substr(ie+1+be,ce)===b){Z.push(ne.substring(A,ie).replace(de,L)),ne[A=ie+1+be+ce]!==L&&(ie=ne.indexOf(L,A)),D=ne.indexOf(b,A),O=ne.indexOf(S,A);break}if(be=He(O),ne.substring(ie+1+be,ie+1+be+ee)===S){if(Z.push(ne.substring(A,ie).replace(de,L)),Oe(ie+1+be+ee),D=ne.indexOf(b,A),ie=ne.indexOf(L,A),W&&(st(),B))return Pe();if(H&&_.length>=H)return Pe(!0);break}V.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:_.length,index:A}),ie++}}else if(j&&Z.length===0&&ne.substring(A,A+le)===j){if(O===-1)return Pe();A=O+ee,O=ne.indexOf(S,A),D=ne.indexOf(b,A)}else if(D!==-1&&(D<O||O===-1))Z.push(ne.substring(A,D)),A=D+ce,D=ne.indexOf(b,A);else{if(O===-1)break;if(Z.push(ne.substring(A,O)),Oe(O+ee),W&&(st(),B))return Pe();if(H&&_.length>=H)return Pe(!0)}return Ae();function ve(qe){_.push(qe),X=A}function He(qe){var rt=0;return rt=qe!==-1&&(qe=ne.substring(ie+1,qe))&&qe.trim()===""?qe.length:rt}function Ae(qe){return G||(qe===void 0&&(qe=ne.substring(A)),Z.push(qe),A=K,ve(Z),W&&st()),Pe()}function Oe(qe){A=qe,ve(Z),Z=[],O=ne.indexOf(S,A)}function Pe(qe){if(u.header&&!oe&&_.length&&!E){var rt=_[0],pt=Object.create(null),Pt=new Set(rt);let Ct=!1;for(let It=0;It<rt.length;It++){let jt=rt[It];if(pt[jt=R(u.transformHeader)?u.transformHeader(jt,It):jt]){let lt,ut=pt[jt];for(;lt=jt+"_"+ut,ut++,Pt.has(lt););Pt.add(lt),rt[It]=lt,pt[jt]++,Ct=!0,(ue=ue===null?{}:ue)[lt]=jt}else pt[jt]=1,rt[It]=jt;Pt.add(jt)}Ct&&console.warn("Duplicate headers found and renamed."),E=!0}return{data:_,errors:V,meta:{delimiter:b,linebreak:S,aborted:B,truncated:!!qe,cursor:X+(oe||0),renamedHeaders:ue}}}function st(){k(Pe()),_=[],V=[]}},this.abort=function(){B=!0},this.getCharIndex=function(){return A}}function p(u){var b=u.data,S=c[b.workerId],j=!1;if(b.error)S.userError(b.error,b.file);else if(b.results&&b.results.data){var k={abort:function(){j=!0,h(b.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:M,resume:M};if(R(S.userStep)){for(var H=0;H<b.results.data.length&&(S.userStep({data:b.results.data[H],errors:b.results.errors,meta:b.results.meta},k),!j);H++);delete b.results}else R(S.userChunk)&&(S.userChunk(b.results,k,b.file),delete b.results)}b.finished&&!j&&h(b.workerId,b.results)}function h(u,b){var S=c[u];R(S.userComplete)&&S.userComplete(b),S.terminate(),delete c[u]}function M(){throw new Error("Not implemented.")}function T(u){if(typeof u!="object"||u===null)return u;var b,S=Array.isArray(u)?[]:{};for(b in u)S[b]=T(u[b]);return S}function F(u,b){return function(){u.apply(b,arguments)}}function R(u){return typeof u=="function"}return d.parse=function(u,b){var S=(b=b||{}).dynamicTyping||!1;if(R(S)&&(b.dynamicTypingFunction=S,S={}),b.dynamicTyping=S,b.transform=!!R(b.transform)&&b.transform,!b.worker||!d.WORKERS_SUPPORTED)return S=null,d.NODE_STREAM_INPUT,typeof u=="string"?(u=(j=>j.charCodeAt(0)!==65279?j:j.slice(1))(u),S=new(b.download?y:C)(b)):u.readable===!0&&R(u.read)&&R(u.on)?S=new U(b):(r.File&&u instanceof File||u instanceof Object)&&(S=new x(b)),S.stream(u);(S=(()=>{var j;return!!d.WORKERS_SUPPORTED&&(j=(()=>{var k=r.URL||r.webkitURL||null,H=n.toString();return d.BLOB_URL||(d.BLOB_URL=k.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",H,")();"],{type:"text/javascript"})))})(),(j=new r.Worker(j)).onmessage=p,j.id=i++,c[j.id]=j)})()).userStep=b.step,S.userChunk=b.chunk,S.userComplete=b.complete,S.userError=b.error,b.step=R(b.step),b.chunk=R(b.chunk),b.complete=R(b.complete),b.error=R(b.error),delete b.worker,S.postMessage({input:u,config:b,workerId:S.id})},d.unparse=function(u,b){var S=!1,j=!0,k=",",H=`\r
`,I='"',ue=I+I,E=!1,L=null,P=!1,A=((()=>{if(typeof b=="object"){if(typeof b.delimiter!="string"||d.BAD_DELIMITERS.filter(function(oe){return b.delimiter.indexOf(oe)!==-1}).length||(k=b.delimiter),typeof b.quotes!="boolean"&&typeof b.quotes!="function"&&!Array.isArray(b.quotes)||(S=b.quotes),typeof b.skipEmptyLines!="boolean"&&typeof b.skipEmptyLines!="string"||(E=b.skipEmptyLines),typeof b.newline=="string"&&(H=b.newline),typeof b.quoteChar=="string"&&(I=b.quoteChar),typeof b.header=="boolean"&&(j=b.header),Array.isArray(b.columns)){if(b.columns.length===0)throw new Error("Option columns is empty");L=b.columns}b.escapeChar!==void 0&&(ue=b.escapeChar+I),b.escapeFormulae instanceof RegExp?P=b.escapeFormulae:typeof b.escapeFormulae=="boolean"&&b.escapeFormulae&&(P=/^[=+\-@\t\r].*$/)}})(),new RegExp(z(I),"g"));if(typeof u=="string"&&(u=JSON.parse(u)),Array.isArray(u)){if(!u.length||Array.isArray(u[0]))return B(null,u,E);if(typeof u[0]=="object")return B(L||Object.keys(u[0]),u,E)}else if(typeof u=="object")return typeof u.data=="string"&&(u.data=JSON.parse(u.data)),Array.isArray(u.data)&&(u.fields||(u.fields=u.meta&&u.meta.fields||L),u.fields||(u.fields=Array.isArray(u.data[0])?u.fields:typeof u.data[0]=="object"?Object.keys(u.data[0]):[]),Array.isArray(u.data[0])||typeof u.data[0]=="object"||(u.data=[u.data])),B(u.fields||[],u.data||[],E);throw new Error("Unable to serialize unrecognized input");function B(oe,G,K){var ce="",ee=(typeof oe=="string"&&(oe=JSON.parse(oe)),typeof G=="string"&&(G=JSON.parse(G)),Array.isArray(oe)&&0<oe.length),le=!Array.isArray(G[0]);if(ee&&j){for(var W=0;W<oe.length;W++)0<W&&(ce+=k),ce+=ne(oe[W],W);0<G.length&&(ce+=H)}for(var _=0;_<G.length;_++){var V=(ee?oe:G[_]).length,Z=!1,X=ee?Object.keys(G[_]).length===0:G[_].length===0;if(K&&!ee&&(Z=K==="greedy"?G[_].join("").trim()==="":G[_].length===1&&G[_][0].length===0),K==="greedy"&&ee){for(var ae=[],ye=0;ye<V;ye++){var D=le?oe[ye]:ye;ae.push(G[_][D])}Z=ae.join("").trim()===""}if(!Z){for(var O=0;O<V;O++){0<O&&!X&&(ce+=k);var de=ee&&le?oe[O]:O;ce+=ne(G[_][de],O)}_<G.length-1&&(!K||0<V&&!X)&&(ce+=H)}}return ce}function ne(oe,G){var K,ce;return oe==null?"":oe.constructor===Date?JSON.stringify(oe).slice(1,25):(ce=!1,P&&typeof oe=="string"&&P.test(oe)&&(oe="'"+oe,ce=!0),K=oe.toString().replace(A,ue),(ce=ce||S===!0||typeof S=="function"&&S(oe,G)||Array.isArray(S)&&S[G]||((ee,le)=>{for(var W=0;W<le.length;W++)if(-1<ee.indexOf(le[W]))return!0;return!1})(K,d.BAD_DELIMITERS)||-1<K.indexOf(k)||K.charAt(0)===" "||K.charAt(K.length-1)===" ")?I+K+I:K)}},d.RECORD_SEP=String.fromCharCode(30),d.UNIT_SEP=String.fromCharCode(31),d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!a&&!!r.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=f,d.ParserHandle=N,d.NetworkStreamer=y,d.FileStreamer=x,d.StringStreamer=C,d.ReadableStreamStreamer=U,r.jQuery&&((l=r.jQuery).fn.parse=function(u){var b=u.config||{},S=[];return this.each(function(H){if(!(l(this).prop("tagName").toUpperCase()==="INPUT"&&l(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var I=0;I<this.files.length;I++)S.push({file:this.files[I],inputElem:this,instanceConfig:l.extend({},b)})}),j(),this;function j(){if(S.length===0)R(u.complete)&&u.complete();else{var H,I,ue,E,L=S[0];if(R(u.before)){var P=u.before(L.file,L.inputElem);if(typeof P=="object"){if(P.action==="abort")return H="AbortError",I=L.file,ue=L.inputElem,E=P.reason,void(R(u.error)&&u.error({name:H},I,ue,E));if(P.action==="skip")return void k();typeof P.config=="object"&&(L.instanceConfig=l.extend(L.instanceConfig,P.config))}else if(P==="skip")return void k()}var A=L.instanceConfig.complete;L.instanceConfig.complete=function(B){R(A)&&A(B,L.file,L.inputElem),k()},d.parse(L.file,L.instanceConfig)}}function k(){S.splice(0,1),j()}}),o&&(r.onmessage=function(u){u=u.data,d.WORKER_ID===void 0&&u&&(d.WORKER_ID=u.workerId),typeof u.input=="string"?r.postMessage({workerId:d.WORKER_ID,results:d.parse(u.input,u.config),finished:!0}):(r.File&&u.input instanceof File||u.input instanceof Object)&&(u=d.parse(u.input,u.config))&&r.postMessage({workerId:d.WORKER_ID,results:u,finished:!0})}),(y.prototype=Object.create(m.prototype)).constructor=y,(x.prototype=Object.create(m.prototype)).constructor=x,(C.prototype=Object.create(C.prototype)).constructor=C,(U.prototype=Object.create(m.prototype)).constructor=U,d})})(Vh);var B0=Vh.exports;const Jr=tm(B0),mo=["Produce","Meat & Seafood","Dairy & Eggs","Pantry & Dry Goods","Spices & Seasonings","Other"],qh=["oz","lb","g","kg","each","bunch","cup","tbsp","tsp","clove","head","can","jar","package"],$u=qh,ws=["A","B","C"],Uu=["Not home","Wrong address","Refused delivery","House hard to find","Other"],Bu=["Monday","Tuesday","Thursday"],W0=["protein","veg","starch","sauces","breakfast","soups"],H0=[{id:"kds",label:"KDS",icon:L0},{id:"recipes",label:"Recipes",icon:E0},{id:"deliveries",label:"Deliveries",icon:as},{id:"prep",label:"Shop",icon:Wh}],V0={protein:[],veg:[],starch:[],sauces:[],breakfast:[],soups:[]},q0=[{name:"Tim Brown",displayName:"",persons:7,address:"10590 Canterberry Rd, Fairfax Station, VA 22039",email:"",phone:"",notes:"",mealsPerWeek:4,frequency:"weekly",status:"active",pausedDate:"",honeyBookLink:"",billingNotes:"",deliveryDay:"",zone:"",pickup:!1},{name:"Scott Inman",displayName:"",persons:4,address:"3418 Putnam Rd, Falls Church, VA 22042",email:"",phone:"",notes:"",mealsPerWeek:4,frequency:"weekly",status:"active",pausedDate:"",honeyBookLink:"",billingNotes:"",deliveryDay:"",zone:"",pickup:!1}],gr={fullName:"",displayName:"",email:"",phone:"",address:""},G0={subscriptionId:"",displayName:"",portions:1,mealsPerWeek:0,frequency:"weekly",status:"active",zone:"",deliveryDay:"",pickup:!1,planPrice:0,serviceFee:0,prepayDiscount:!1,newClientFeePaid:!1,paysOwnGroceries:!1,billingNotes:"",accessCode:"",honeyBookLink:"",contacts:[{...gr}],deliveryDates:[],billDueDate:"",chefChoice:!0,dietaryRestrictions:""},K0=G0,Lr={name:"",phone:"",zone:"",accessCode:""},po={category:"protein",name:"",instructions:"",ingredients:[{name:"",quantity:"",unit:"oz",cost:"",source:"",section:"Other"}]},fc={protein:"",veg:"",starch:"",extras:[],portions:1},xc={name:"",cost:"",unit:"oz",source:"",section:"Produce"};function Y0({activeTab:e,setActiveTab:t}){return s.jsx(s.Fragment,{children:H0.map(n=>s.jsxs("button",{onClick:()=>t(n.id),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors ${e===n.id?"border-b-2 text-blue-700":"text-gray-600 hover:text-gray-900"}`,style:e===n.id?{borderColor:"#3d59ab",color:"#3d59ab"}:{},children:[s.jsx(n.icon,{size:18}),n.label]},n.id))})}const Wu=[{id:"menu",label:"Menu Planned",icon:Ih},{id:"cooking",label:"Cooking",icon:Xs},{id:"ready",label:"Ready for Delivery",icon:hn},{id:"delivering",label:"Out for Delivery",icon:as},{id:"delivered",label:"Delivered",icon:R0},{id:"history",label:"History",icon:S0}],Q0={menu:"menu",cooking:"kds",ready:"deliveries",delivering:"deliveries",delivered:"history",history:"history"};function Z0({menuItems:e=[],completedDishes:t={},readyForDelivery:n=[],deliveryLog:r=[],orderHistory:l=[],selectedDate:a,onNavigate:o}){const c=e.filter(R=>!R.approved),i=e.filter(R=>R.approved),m=(()=>{const R=new Set;i.forEach(S=>{["protein","veg","starch"].forEach(j=>{S[j]&&R.add(S[j])}),(S.extras||[]).forEach(j=>R.add(j))});const u=R.size,b=[...R].filter(S=>t[S]).length;return{total:u,completed:b}})(),y=c.length,x=i.length,C=n.length,U=r.filter(R=>R.date===a),N=U.length>0&&C>0?U.length:0,f=l.filter(R=>{const u=r.find(b=>b.clientName===R.clientName&&b.date===R.date);return u&&u.date===a}).length,p=l.length,h={menu:y,cooking:x,ready:C,delivering:N,delivered:f,history:p},M={menu:y>0,cooking:x>0,ready:C>0,delivering:N>0&&C>0,delivered:f>0,history:p>0},F=(()=>N>0&&C>0?"delivering":C>0?"ready":x>0&&m.completed<m.total?"cooking":y>0?"menu":null)();return s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-4 mb-6",children:s.jsx("div",{className:"flex items-center justify-between overflow-x-auto",children:Wu.map((R,u)=>{const b=R.icon,S=h[R.id],j=M[R.id],k=F===R.id;return s.jsxs(yl.Fragment,{children:[u>0&&s.jsx("div",{className:"flex-shrink-0 h-1 w-8 mx-1",style:{backgroundColor:M[Wu[u-1].id]?"#3d59ab":"#e5e7eb"}}),s.jsxs("div",{className:"flex flex-col items-center flex-shrink-0 px-2",children:[s.jsxs("div",{className:"relative w-12 h-12 rounded-full flex items-center justify-center transition-all cursor-pointer",style:{backgroundColor:j?"#3d59ab":"#e5e7eb",color:j?"white":"#9ca3af",boxShadow:k?"0 0 0 3px white, 0 0 0 6px #ffd700":"none"},onClick:()=>o&&o(Q0[R.id]),children:[s.jsx(b,{size:24}),S>0&&s.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full text-xs font-bold flex items-center justify-center",style:{backgroundColor:k?"#ffd700":"#22c55e",color:k?"#423d3c":"white"},children:S>99?"99+":S})]}),s.jsx("span",{className:`text-xs mt-2 text-center whitespace-nowrap font-medium ${j?"":"text-gray-400"}`,style:{color:j?"#3d59ab":void 0},children:R.label})]})]},R.id)})})})}function Kl(e=new Date){const t=new Date(e);t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);const n=new Date(t.getFullYear(),0,4),r=1+Math.round(((t-n)/864e5-3+(n.getDay()+6)%7)/7);return`${t.getFullYear()}-W${String(r).padStart(2,"0")}`}function na(e){const[t,n]=e.split("-W"),r=parseInt(n,10),l=new Date(parseInt(t,10),0,4),a=l.getDay()||7,o=new Date(l);o.setDate(l.getDate()-a+1);const c=new Date(o);return c.setDate(o.getDate()+(r-1)*7),c.toISOString().split("T")[0]}function Gh(e){const t=na(e),n=new Date(t+"T12:00:00");return n.setDate(n.getDate()+6),n.toISOString().split("T")[0]}function Ys(e){return Kl(new Date(e+"T12:00:00"))}function xi(e){const t=new Date(na(e)+"T12:00:00"),n=new Date(Gh(e)+"T12:00:00"),r=t.toLocaleDateString("en-US",{month:"short"}),l=n.toLocaleDateString("en-US",{month:"short"}),a=t.getDate(),o=n.getDate(),c=n.getFullYear();return r===l?`${r} ${a} - ${o}, ${c}`:`${r} ${a} - ${l} ${o}, ${c}`}function J0(e,t){return Ys(e)===t}function En(e){return{weekId:e,startDate:na(e),endDate:Gh(e),status:"draft",createdAt:new Date().toISOString(),lockedAt:null,snapshot:{menu:{},stops:[],subscriptions:{}},kdsStatus:{},readyForDelivery:[],deliveryLog:[],groceryBills:[]}}function X0(e){if(e.subscriptionId)return e;const t=e.contacts&&e.contacts.length>0?e.contacts.map(n=>({fullName:n.fullName||n.name||"",displayName:n.displayName||"",email:n.email||"",phone:n.phone||"",address:n.address||""})):[{fullName:e.name||"",displayName:"",email:e.email||"",phone:e.phone||"",address:e.address||""}];return{subscriptionId:e.id||Date.now().toString(),displayName:e.displayName||e.name||"",portions:e.portions||e.persons||1,mealsPerWeek:e.mealsPerWeek||0,frequency:e.frequency||"weekly",status:e.status||"active",zone:e.zone||"",deliveryDay:e.deliveryDay||"",pickup:e.pickup||!1,contacts:t}}function ev(e,t,n){const r={},l=new Set;t.forEach(c=>{J0(c.date,e)&&c.approved&&(r[c.clientName]||(r[c.clientName]=[]),r[c.clientName].push({id:c.id,date:c.date,protein:c.protein,veg:c.veg,starch:c.starch,extras:c.extras||[],portions:c.portions}),l.add(c.clientName))});const a=[],o={};return l.forEach(c=>{const i=n.find(x=>x.name===c||x.displayName===c);if(!i)return;const d=X0(i);if(o[c]=d,d.pickup)return;const m=d.contacts||[],y={};m.forEach((x,C)=>{if(!x.address)return;const U=x.address.toLowerCase().trim();y[U]||(y[U]={address:x.address,contacts:[],zone:d.zone}),y[U].contacts.push({fullName:x.fullName,displayName:x.displayName,phone:x.phone,email:x.email})}),Object.values(y).forEach((x,C)=>{a.push({subscriptionId:d.subscriptionId,clientName:c,displayName:d.displayName,portions:d.portions,zone:x.zone,deliveryDay:d.deliveryDay,address:x.address,contacts:x.contacts,stopIndex:C})})}),{menu:r,stops:a,subscriptions:o}}function Kh(e,t,n){const r=ev(e.weekId,t,n);return{...e,status:"locked",lockedAt:new Date().toISOString(),snapshot:r}}function tv(e){return{...e,status:"draft",unlockedAt:new Date().toISOString()}}function Hu(e,t=1){const n=new Date(na(e)+"T12:00:00");return n.setDate(n.getDate()+t*7),Kl(n)}function Yh({selectedWeekId:e,setSelectedWeekId:t,weeks:n={},compact:r=!1,onLockWeek:l,onUnlockWeek:a}){const o=Kl(),c=n[e],i=(c==null?void 0:c.status)==="locked",d=()=>{t(Hu(e,-1))},m=()=>{t(Hu(e,1))},y=()=>{t(o)},x=()=>{i&&a?a(e):!i&&l&&l(e)},C=[],U=Object.keys(n).sort().reverse();return U.includes(o)||C.push({id:o,label:`${xi(o)} (Current)`,isCurrent:!0}),U.forEach(N=>{const z=n[N],f=N===o,p=(z==null?void 0:z.status)==="locked"?" [Locked]":"";C.push({id:N,label:`${xi(N)}${f?" (Current)":""}${p}`,isCurrent:f,isLocked:(z==null?void 0:z.status)==="locked"})}),C.sort((N,z)=>z.id.localeCompare(N.id)),r?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:d,className:"p-1 rounded hover:bg-gray-100",title:"Previous week",children:s.jsx(qr,{size:20})}),s.jsx("select",{value:e,onChange:N=>t(N.target.value),className:"p-2 border-2 rounded-lg text-sm",style:{borderColor:"#ebb582"},children:C.map(N=>s.jsx("option",{value:N.id,children:N.label},N.id))}),s.jsx("button",{onClick:m,className:"p-1 rounded hover:bg-gray-100",title:"Next week",children:s.jsx(ql,{size:20})}),e!==o&&s.jsx("button",{onClick:y,className:"text-xs px-2 py-1 rounded bg-blue-100 text-blue-700",children:"Today"})]}):s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:d,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Previous week",children:s.jsx(qr,{size:24})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xs,{size:20,style:{color:"#3d59ab"}}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-bold text-lg",style:{color:"#3d59ab"},children:xi(e)}),s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-gray-500",children:e}),e===o&&s.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-green-100 text-green-700",children:"Current Week"})]})]})]}),s.jsx("button",{onClick:m,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Next week",children:s.jsx(ql,{size:24})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[e!==o&&s.jsx("button",{onClick:y,className:"px-4 py-2 rounded-lg text-sm font-medium",style:{backgroundColor:"#3d59ab",color:"white"},children:"Go to Current Week"}),(l||a)&&s.jsx("button",{onClick:x,className:`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ${i?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:i?s.jsxs(s.Fragment,{children:[s.jsx(O0,{size:16}),"Locked"]}):s.jsxs(s.Fragment,{children:[s.jsx(U0,{size:16}),"Unlocked"]})}),s.jsx("select",{value:e,onChange:N=>t(N.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:C.map(N=>s.jsx("option",{value:N.id,children:N.label},N.id))})]})]})})}const Qs=e=>e.toLowerCase().trim().replace(/s$/,"").replace(/es$/,"").replace(/ies$/,"y").replace(/[^a-z0-9]/g,""),ho=(e,t)=>{const n=Qs(e),r=Qs(t);if(n===r)return 1;if(n.includes(r)||r.includes(n))return .9;const l=n.length>r.length?n:r;if(n.length>r.length,l.length===0)return 1;const a=[];for(let o=0;o<=n.length;o++){let c=o;for(let i=0;i<=r.length;i++)if(o===0)a[i]=i;else if(i>0){let d=a[i-1];n.charAt(o-1)!==r.charAt(i-1)&&(d=Math.min(Math.min(d,c),a[i])+1),a[i-1]=c,c=d}o>0&&(a[r.length]=c)}return(l.length-a[r.length])/l.length},vd=(e,t)=>{const n=new Blob([e],{type:"text/csv"}),r=URL.createObjectURL(n),l=document.createElement("a");l.href=r,l.download=t,l.click(),URL.revokeObjectURL(r)},sv=e=>{const t=e.toLowerCase();return["lettuce","cucumber","tomato","onion","garlic","carrot","potato","cauliflower","broccoli","spinach","pepper","celery","mushroom","zucchini","squash","asparagus","lemon","lime","ginger","cilantro","parsley"].some(n=>t.includes(n))?"Produce":["chicken","beef","pork","salmon","fish","shrimp","turkey","lamb","bacon","sausage","steak","thigh","breast"].some(n=>t.includes(n))?"Meat & Seafood":["milk","cheese","butter","egg","cream","yogurt"].some(n=>t.includes(n))?"Dairy & Eggs":["salt","pepper","spice","cumin","paprika","oregano","thyme","cinnamon","cayenne","curry"].some(n=>t.includes(n))?"Spices & Seasonings":["rice","pasta","flour","sugar","oil","vinegar","sauce","honey","bread","stock","broth"].some(n=>t.includes(n))?"Pantry & Dry Goods":"Other"},nv=e=>{vd(Jr.unparse(e.map(t=>({name:t.name,cost:t.cost,unit:t.unit,source:t.source,section:t.section})),{columns:["name","cost","unit","source","section"]}),"ingredients.csv")},Qh=e=>{const t=[];Object.entries(e).forEach(([n,r])=>{r.forEach(l=>{var a;((a=l.ingredients)==null?void 0:a.length)>0?l.ingredients.forEach(o=>{t.push({"Recipe Name":l.name,Category:n,Instructions:l.instructions||"",Ingredient:o.name,"Portion Size (oz)":o.quantity,cost:o.cost||"",source:o.source||"",section:o.section||"Other"})}):t.push({"Recipe Name":l.name,Category:n,Instructions:l.instructions||"",Ingredient:"","Portion Size (oz)":"",cost:"",source:"",section:""})})}),vd(Jr.unparse(t,{columns:["Recipe Name","Category","Instructions","Ingredient","Portion Size (oz)","cost","source","section"]}),"recipes.csv")},Dn=e=>e===!0||e==="true"||e==="yes"||e==="Yes"||e==="YES"||e==="1",Na=e=>{if(!e)return 0;const t=String(e).replace(/[$,]/g,"").trim();return parseFloat(t)||0},Zh=(e,t,n)=>{Jr.parse(e,{header:!0,skipEmptyLines:!0,complete:r=>{const l=r.meta.fields||[],a=l.includes("subscriptionId")||l.includes("subscriptionDisplayName"),o=(c,...i)=>{for(const d of i)if(c[d]!==void 0&&c[d]!=="")return c[d];return""};if(a){const c={};let i=null;r.data.forEach(m=>{const y=o(m,"subscriptionDisplayName","SubscriptionDisplayName","Subscription Display Name"),x=o(m,"subscriptionId","SubscriptionId")||(y?Date.now().toString()+Math.random():null);if(x&&y){const f=o(m,"zone","Zone").toUpperCase();i={subscriptionId:x,displayName:y,portions:parseInt(o(m,"portions","Portions"))||1,mealsPerWeek:parseInt(o(m,"mealsPerWeek","MealsPerWeek","meals","Meals"))||0,frequency:(o(m,"frequency","Frequency")||"weekly").toLowerCase(),status:(o(m,"status","Status")||"active").toLowerCase(),zone:f==="UNASSIGNED"?"":f,deliveryDay:o(m,"deliveryDay","DeliveryDay"),pickup:Dn(o(m,"pickup","Pickup")),planPrice:Na(o(m,"planPrice","PlanPrice")),serviceFee:Na(o(m,"serviceFee","ServiceFee")),prepayDiscount:Dn(o(m,"prepayDiscount","PrepayDiscount")),newClientFeePaid:Dn(o(m,"newClientFeePaid","NewClientFeePaid")),paysOwnGroceries:Dn(o(m,"paysOwnGroceries","PaysOwnGroceries")),billingNotes:o(m,"billingNotes","BillingNotes","notes","Notes"),dietaryRestrictions:o(m,"dietaryRestrictions","DietaryRestrictions","dietary","Dietary","allergies","Allergies"),accessCode:o(m,"accessCode","AccessCode"),honeyBookLink:o(m,"honeyBookLink","HoneyBookLink"),contacts:[]},c[x]=i}const C=o(m,"contactFullName","ContactFullName","Contact Full Name"),U=o(m,"email","Email"),N=o(m,"phone","Phone"),z=o(m,"address","Address");i&&(C||U||z)&&i.contacts.push({fullName:C,displayName:o(m,"contactDisplayName","ContactDisplayName","Contact Display Name"),email:U,phone:N,address:z})});const d=Object.values(c).filter(m=>m.displayName||m.contacts.length>0);t(d)}else{const c=r.data.filter(i=>i.Name||i.name||i["Display Name"]||i.displayName).map(i=>{const d=i.Name||i.name||"",m=i["Display Name"]||i.displayName||d,y=parseInt(i.Portions||i.portions||i.persons)||1,x=parseInt(i.Meals||i.mealsPerWeek||i.meals)||0,C=(i.zone||i.Zone||"").toUpperCase();return{subscriptionId:Date.now().toString()+Math.random(),displayName:m,name:d,portions:y,mealsPerWeek:x,frequency:(i.frequency||i.Frequency||"weekly").toLowerCase(),status:(i.status||i.Status||"active").toLowerCase(),zone:C==="UNASSIGNED"?"":C,deliveryDay:i.deliveryDay||i.DeliveryDay||"",pickup:Dn(i.pickup||i.Pickup),planPrice:Na(i.planPrice||i.PlanPrice),serviceFee:Na(i.serviceFee||i.ServiceFee),prepayDiscount:Dn(i.prepayDiscount||i.PrepayDiscount),newClientFeePaid:Dn(i.newClientFeePaid||i.NewClientFeePaid),paysOwnGroceries:Dn(i.paysOwnGroceries||i.PaysOwnGroceries),billingNotes:i.billingNotes||i.BillingNotes||i.notes||"",dietaryRestrictions:i.dietaryRestrictions||i.DietaryRestrictions||i.dietary||i.Dietary||i.allergies||i.Allergies||"",accessCode:i.accessCode||i.AccessCode||"",honeyBookLink:i.honeyBookLink||i.HoneyBookLink||"",contacts:[{fullName:d,displayName:"",email:i.Email||i.email||"",phone:i.Phone||i.phone||"",address:i.Address||i.address||""}]}});t(c)}},error:n})},Jh=(e,t,n)=>{Jr.parse(e,{header:!0,skipEmptyLines:!0,complete:r=>{const l=(o,...c)=>{for(const i of c)if(o[i]!==void 0&&o[i]!=="")return o[i];return""},a=r.data.filter(o=>l(o,"name","Name","ingredient","Ingredient")).map(o=>({id:Date.now()+Math.random(),name:l(o,"name","Name","ingredient","Ingredient"),cost:l(o,"cost","Cost","price","Price"),unit:l(o,"unit","Unit","units","Units")||"oz",source:l(o,"source","Source","vendor","Vendor","store","Store"),section:l(o,"section","Section","category","Category","aisle","Aisle")||"Other"}));t(a)},error:n})},rv=(e,t,n)=>{Jr.parse(e,{header:!0,complete:r=>{const l={protein:[],veg:[],starch:[],sauces:[],breakfast:[],soups:[]},a={},o=[];r.data.forEach(c=>{if(!c["Recipe Name"])return;const i=c["Recipe Name"],d=(c.Category||"protein").toLowerCase();if(a[i]||(a[i]={name:i,category:d,instructions:c.Instructions||"",ingredients:[]}),c.Ingredient){const m={name:c.Ingredient,quantity:c["Portion Size (oz)"]||"",unit:"oz",cost:c.cost||"",source:c.source||"",section:c.section||"Other"};a[i].ingredients.push(m),o.push(m)}}),Object.values(a).forEach(c=>{l[c.category]&&l[c.category].push({name:c.name,instructions:c.instructions,ingredients:c.ingredients})}),t(l,o)},error:n})};function lv(){const[e,t]=g.useState(V0),[n,r]=g.useState([]),[l,a]=g.useState([]),[o,c]=g.useState(new Date().toISOString().split("T")[0]),[i,d]=g.useState(q0),[m,y]=g.useState(K0),[x,C]=g.useState(po),[U,N]=g.useState(fc),[z,f]=g.useState([]),[p,h]=g.useState(xc),[M,T]=g.useState(null),[F,R]=g.useState(null),[u,b]=g.useState(null),[S,j]=g.useState([]),[k,H]=g.useState({}),[I,ue]=g.useState([]),[E,L]=g.useState({}),[P,A]=g.useState([]),[B,ne]=g.useState(Lr),[oe,G]=g.useState([]),[K,ce]=g.useState({}),[ee,le]=g.useState([]),[W,_]=g.useState({}),[V,Z]=g.useState([]),[X,ae]=g.useState({routeStartAddress:""}),[ye,D]=g.useState([]),[O,de]=g.useState([]),[ie,be]=g.useState({}),[ve,He]=g.useState(Kl()),[Ae,Oe]=g.useState(qh);g.useEffect(()=>{const $=()=>{const he=localStorage.getItem("goldfinchChefData");if(he)try{const ge=JSON.parse(he);ge.recipes&&t(ge.recipes),ge.clients&&d(ge.clients),ge.menuItems&&r(ge.menuItems),ge.masterIngredients&&f(ge.masterIngredients),ge.orderHistory&&ue(ge.orderHistory),ge.weeklyTasks&&L(ge.weeklyTasks),ge.drivers&&A(ge.drivers),ge.deliveryLog&&G(ge.deliveryLog),ge.bagReminders&&ce(ge.bagReminders),ge.readyForDelivery&&le(ge.readyForDelivery),ge.clientPortalData&&_(ge.clientPortalData),ge.blockedDates&&Z(ge.blockedDates),ge.adminSettings&&ae(ge.adminSettings),ge.customTasks&&D(ge.customTasks),ge.groceryBills&&de(ge.groceryBills),ge.weeks&&be(ge.weeks),ge.units&&Oe(ge.units)}catch(ge){console.error("Error loading saved data:",ge)}};$();const J=he=>{he.key==="goldfinchChefData"&&$()},te=()=>{$()},pe=()=>{document.visibilityState==="visible"&&$()};return window.addEventListener("storage",J),window.addEventListener("goldfinchDataUpdated",te),document.addEventListener("visibilitychange",pe),()=>{window.removeEventListener("storage",J),window.removeEventListener("goldfinchDataUpdated",te),document.removeEventListener("visibilitychange",pe)}},[]),g.useEffect(()=>{const $={recipes:e,clients:i,menuItems:n,masterIngredients:z,orderHistory:I,weeklyTasks:E,drivers:P,deliveryLog:oe,bagReminders:K,readyForDelivery:ee,clientPortalData:W,blockedDates:V,adminSettings:X,customTasks:ye,groceryBills:O,weeks:ie,units:Ae,lastSaved:new Date().toISOString()};localStorage.setItem("goldfinchChefData",JSON.stringify($))},[e,i,n,z,I,E,P,oe,K,ee,W,V,X,ye,O,ie,Ae]);const Pe=$=>!$||$.length<2?[]:z.filter(J=>{const te=ho($,J.name);return te>.7&&te<1}),st=$=>z.find(J=>Qs(J.name)===Qs($)),qe=()=>{const $=new Set;return z.forEach(J=>{J.source&&J.source.trim()&&$.add(J.source.trim())}),Array.from($).sort()},rt=$=>{if(!$||$.trim()==="")return;const J=$.trim().toLowerCase();Ae.includes(J)||Oe(te=>[...te,J].sort())},pt=$=>{if(!$.name)return;const J=st($.name);if(J){($.cost||$.source||$.section!=="Other")&&f(te=>te.map(pe=>pe.id===J.id?{...pe,cost:$.cost||pe.cost,source:$.source||pe.source,section:$.section!=="Other"?$.section:pe.section}:pe));return}f(te=>[...te,{id:Date.now()+Math.random(),name:$.name,cost:$.cost||"",unit:$.unit||"oz",source:$.source||"",section:$.section||"Other"}])},Pt=($,J)=>{const te=st($);return te&&J?(f(pe=>pe.map(he=>he.id===te.id?{...he,cost:J}:he)),!0):!1},Ct=()=>{let $=0,J=0;const te={...e};return Object.keys(te).forEach(pe=>{te[pe]=te[pe].map(he=>{const ge=he.ingredients.map(Te=>{const ze=st(Te.name);if(ze){const Me={...Te};return ze.cost&&ze.cost!==Te.cost&&(Me.cost=ze.cost,J++),ze.source&&ze.source!==Te.source&&(Me.source=ze.source),ze.section&&ze.section!=="Other"&&ze.section!==Te.section&&(Me.section=ze.section),ze.unit&&ze.unit!==Te.unit&&(Me.unit=ze.unit),Me}else if(Te.name)return $++,Te;return Te});return{...he,ingredients:ge}})}),Object.values(te).forEach(pe=>{pe.forEach(he=>{he.ingredients.forEach(ge=>{ge.name&&!st(ge.name)&&pt(ge)})})}),t(te),{ingredientsAdded:$,costsUpdated:J}},It=($,J)=>{const te=z.find(ge=>ge.id===$),pe=z.find(ge=>ge.id===J);if(!te||!pe)return;const he={...e};Object.keys(he).forEach(ge=>{he[ge]=he[ge].map(Te=>({...Te,ingredients:Te.ingredients.map(ze=>Qs(ze.name)===Qs(pe.name)?{...ze,name:te.name}:ze)}))}),t(he),f(ge=>ge.filter(Te=>Te.id!==J)),j(ge=>ge.filter(Te=>Te.ing1.id!==J&&Te.ing2.id!==J)),alert(`Merged "${pe.name}" into "${te.name}"`)},jt=()=>{const $=[],J=new Set;z.forEach((te,pe)=>{z.forEach((he,ge)=>{if(pe>=ge)return;const Te=[te.id,he.id].sort().join("-");if(J.has(Te))return;J.add(Te);const ze=ho(te.name,he.name);ze>.7&&ze<1&&$.push({ing1:te,ing2:he,similarity:ze})})}),j($),$.length===0&&alert("No duplicate ingredients found!")},lt=$=>$!=null&&$.ingredients?$.ingredients.reduce((J,te)=>{const pe=st(te.name),he=parseFloat((pe==null?void 0:pe.cost)||te.cost||0),ge=parseFloat(te.quantity||0);return J+he*ge},0):0,ut=()=>{const $={};let J=0;return Object.entries(e).forEach(([te,pe])=>{$[te]=pe.length,J+=pe.length}),$.total=J,$},Ge=g.useCallback($=>{if(ie[$])return ie[$];const J=En($);return be(te=>({...te,[$]:J})),J},[ie]),Lt=g.useCallback(()=>Ge(ve),[ve,Ge]),Qt=g.useCallback($=>{const J=ie[$]||En($);if(J.status==="locked")return J;const te=Kh(J,n,i);return be(pe=>({...pe,[$]:te})),te},[ie,n,i]),Ws=g.useCallback($=>{const J=ie[$];if(!J||J.status!=="locked")return null;const te=tv(J);return be(pe=>({...pe,[$]:te})),te},[ie]),js=g.useCallback(($,J)=>{be(te=>{const pe=te[$]||En($);return{...te,[$]:{...pe,...J}}})},[]),Hs=g.useCallback(($,J,te)=>{be(pe=>{const he=pe[$]||En($);return{...pe,[$]:{...he,kdsStatus:{...he.kdsStatus,[J]:{status:te,completedAt:te==="complete"?new Date().toISOString():null}}}}})},[]),Ns=g.useCallback(($,J)=>{be(te=>{const pe=te[$]||En($);return{...te,[$]:{...pe,readyForDelivery:[...pe.readyForDelivery,...J]}}})},[]),Vs=g.useCallback(($,J)=>{be(te=>{const pe=te[$]||En($);return{...te,[$]:{...pe,deliveryLog:[...pe.deliveryLog,J]}}})},[]),se=g.useCallback(($,J)=>{be(te=>{const pe=te[$];return pe?{...te,[$]:{...pe,readyForDelivery:pe.readyForDelivery.filter(he=>he.id!==J)}}:te})},[]),w=g.useCallback(($,J)=>{be(te=>{const pe=te[$]||En($);return{...te,[$]:{...pe,groceryBills:[...pe.groceryBills,J]}}})},[]),Y=g.useCallback($=>{const J=ie[$];if(!J||J.status!=="locked")return!1;const te=Kl();return $<te},[ie]),re=g.useCallback(()=>Object.keys(ie).sort().reverse(),[ie]);return{recipes:e,setRecipes:t,menuItems:n,setMenuItems:r,selectedClients:l,setSelectedClients:a,menuDate:o,setMenuDate:c,clients:i,setClients:d,newClient:m,setNewClient:y,newRecipe:x,setNewRecipe:C,newMenuItem:U,setNewMenuItem:N,masterIngredients:z,setMasterIngredients:f,newIngredient:p,setNewIngredient:h,editingRecipe:M,setEditingRecipe:T,editingIngredientId:F,setEditingIngredientId:R,editingIngredientData:u,setEditingIngredientData:b,duplicateWarnings:S,setDuplicateWarnings:j,completedDishes:k,setCompletedDishes:H,orderHistory:I,setOrderHistory:ue,weeklyTasks:E,setWeeklyTasks:L,drivers:P,setDrivers:A,newDriver:B,setNewDriver:ne,deliveryLog:oe,setDeliveryLog:G,bagReminders:K,setBagReminders:ce,readyForDelivery:ee,setReadyForDelivery:le,clientPortalData:W,setClientPortalData:_,blockedDates:V,setBlockedDates:Z,adminSettings:X,setAdminSettings:ae,customTasks:ye,setCustomTasks:D,groceryBills:O,setGroceryBills:de,weeks:ie,setWeeks:be,selectedWeekId:ve,setSelectedWeekId:He,units:Ae,addUnit:rt,findSimilarIngredients:Pe,findExactMatch:st,addToMasterIngredients:pt,updateMasterIngredientCost:Pt,syncRecipeIngredientsFromMaster:Ct,getUniqueVendors:qe,mergeIngredients:It,scanForDuplicates:jt,getRecipeCost:lt,getRecipeCounts:ut,getOrCreateWeek:Ge,getCurrentWeek:Lt,lockWeekAndSnapshot:Qt,unlockWeekById:Ws,updateWeekData:js,updateWeekKdsStatus:Hs,addReadyForDeliveryToWeek:Ns,addDeliveryLogToWeek:Vs,removeReadyForDeliveryFromWeek:se,addGroceryBillToWeek:w,isWeekReadOnly:Y,getWeekIds:re}}function Xh({recipes:e,newRecipe:t,setNewRecipe:n,editingRecipe:r,setEditingRecipe:l,masterIngredients:a,recipesFileRef:o,findExactMatch:c,findSimilarIngredients:i,getRecipeCost:d,getRecipeCounts:m,saveRecipe:y,deleteRecipe:x,startEditingRecipe:C,saveEditingRecipe:U,updateEditingIngredient:N,addEditingIngredient:z,removeEditingIngredient:f,exportRecipesCSV:p,getUniqueVendors:h,updateMasterIngredientCost:M,syncRecipeIngredientsFromMaster:T,units:F=["oz","lb","each","bunch","cup","tbsp","tsp"],addUnit:R,duplicateRecipe:u}){const[b,S]=g.useState({}),[j,k]=g.useState({}),[H,I]=g.useState({}),[ue,E]=g.useState({}),L=m(),P=h?h():[],A=_=>{var X;const V=!_.instructions||_.instructions.trim()==="",Z=(X=_.ingredients)==null?void 0:X.some(ae=>!ae.cost||ae.cost===""||parseFloat(ae.cost)===0);return V||Z},ne=(()=>{let _=0;return Object.values(e).forEach(V=>{V.forEach(Z=>{A(Z)&&_++})}),_})(),oe=()=>n({...t,ingredients:[...t.ingredients,{name:"",quantity:"",unit:"oz",cost:"",source:"",section:"Other"}]}),G=(_,V,Z)=>{const X=[...t.ingredients];if(X[_][V]=Z,V==="name"&&Z.length>2){const ae=c(Z);ae&&(X[_]={...X[_],name:Z,cost:ae.cost||X[_].cost,source:ae.source||X[_].source,section:ae.section||X[_].section,unit:ae.unit||X[_].unit})}V==="cost"&&Z&&X[_].name&&M&&M(X[_].name,Z),n({...t,ingredients:X})},K=_=>n({...t,ingredients:t.ingredients.filter((V,Z)=>Z!==_)}),ce=(_,V)=>{const Z=[...t.ingredients];Z[_]={...Z[_],name:V.name,cost:V.cost,source:V.source,section:V.section,unit:V.unit},n({...t,ingredients:Z})},ee=()=>{if(!T)return;const _=T();alert(`Sync complete!

${_.ingredientsAdded} ingredient(s) added to master list
${_.costsUpdated} cost(s) updated from master`)},le=({value:_,onChange:V,index:Z,isEditing:X=!1})=>{const ae=X?j[Z]:b[Z],ye=X?D=>k(O=>({...O,[Z]:D})):D=>S(O=>({...O,[Z]:D}));return ae?s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{type:"text",value:_,onChange:D=>V(D.target.value),placeholder:"New vendor",className:X?"w-16 p-1 border rounded text-sm":"w-20 p-2 border-2 rounded-lg",style:X?{}:{borderColor:"#ebb582"},autoFocus:!0}),s.jsx("button",{onClick:()=>ye(!1),className:"text-gray-500 hover:text-gray-700",type:"button",children:s.jsx(wt,{size:X?14:16})})]}):s.jsxs("select",{value:P.includes(_)?_:"",onChange:D=>{D.target.value==="__new__"?(ye(!0),V("")):V(D.target.value)},className:X?"w-20 p-1 border rounded text-sm":"w-24 p-2 border-2 rounded-lg",style:X?{}:{borderColor:"#ebb582"},children:[s.jsx("option",{value:"",children:"Vendor"}),P.map(D=>s.jsx("option",{value:D,children:D},D)),s.jsx("option",{value:"__new__",children:"+ Add new..."})]})},W=({value:_,onChange:V,index:Z,isEditing:X=!1})=>{const ae=X?ue[Z]:H[Z],ye=X?D=>E(O=>({...O,[Z]:D})):D=>I(O=>({...O,[Z]:D}));return ae?s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{type:"text",value:_,onChange:D=>V(D.target.value),onBlur:()=>{_&&R&&R(_)},onKeyDown:D=>{D.key==="Enter"&&(D.preventDefault(),_&&R&&R(_),ye(!1))},placeholder:"New unit",className:X?"w-14 p-1 border rounded text-sm":"w-16 p-2 border-2 rounded-lg",style:X?{}:{borderColor:"#ebb582"},autoFocus:!0}),s.jsx("button",{onClick:()=>{_&&R&&R(_),ye(!1)},className:"text-green-600 hover:text-green-700",type:"button",title:"Save unit",children:s.jsx(Fe,{size:X?14:16})}),s.jsx("button",{onClick:()=>{V("oz"),ye(!1)},className:"text-gray-500 hover:text-gray-700",type:"button",title:"Cancel",children:s.jsx(wt,{size:X?14:16})})]}):s.jsxs("select",{value:F.includes(_)?_:_||"oz",onChange:D=>{D.target.value==="__new__"?(ye(!0),V("")):V(D.target.value)},className:X?"w-16 p-1 border rounded text-sm":"w-20 p-2 border-2 rounded-lg",style:X?{}:{borderColor:"#ebb582"},children:[F.map(D=>s.jsx("option",{value:D,children:D},D)),s.jsx("option",{value:"__new__",children:"+ New..."})]})};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Recipes"}),s.jsxs("p",{className:"text-sm",children:[ne>0?s.jsxs("span",{className:"text-amber-600 font-medium",children:[s.jsx(bt,{size:14,className:"inline mr-1"}),ne," recipe",ne!==1?"s":""," incomplete"]}):s.jsxs("span",{className:"text-green-600 font-medium",children:[s.jsx(Fe,{size:14,className:"inline mr-1"}),"All recipes complete"]}),s.jsxs("span",{className:"text-gray-500 ml-2",children:["(",L.total," total)"]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[T&&s.jsxs("button",{onClick:ee,className:"flex items-center gap-2 px-4 py-2 rounded-lg border-2 border-green-500 text-green-600 hover:bg-green-50",children:[s.jsx(mr,{size:18}),"Sync Ingredients"]}),s.jsxs("button",{onClick:()=>o.current.click(),className:"flex items-center gap-2 px-4 py-2 rounded-lg border-2",style:{borderColor:"#3d59ab",color:"#3d59ab"},children:[s.jsx(yd,{size:18}),"Import"]}),s.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[s.jsx(Mo,{size:18}),"Export"]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx("select",{value:t.category,onChange:_=>n({...t,category:_.target.value}),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:W0.map(_=>s.jsx("option",{value:_,children:_.charAt(0).toUpperCase()+_.slice(1)},_))}),s.jsx("input",{type:"text",value:t.name,onChange:_=>n({...t,name:_.target.value}),placeholder:"Recipe name",className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}})]}),s.jsx("textarea",{value:t.instructions,onChange:_=>n({...t,instructions:_.target.value}),placeholder:"Cooking instructions...",className:"w-full p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},rows:"2"}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#423d3c"},children:"Ingredients"}),t.ingredients.map((_,V)=>{const Z=_.name.length>2?c(_.name):null,X=_.name.length>2&&!Z?i(_.name):[];return s.jsxs("div",{className:"mb-2",children:[s.jsxs("div",{className:"flex flex-wrap gap-2 p-2 rounded",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("input",{type:"text",value:_.name,onChange:ae=>G(V,"name",ae.target.value),placeholder:"Ingredient",className:"flex-1 min-w-[120px] p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},list:`ing-${V}`}),s.jsx("datalist",{id:`ing-${V}`,children:a.map((ae,ye)=>s.jsx("option",{value:ae.name},ye))}),s.jsx("input",{type:"text",value:_.quantity,onChange:ae=>G(V,"quantity",ae.target.value),placeholder:"Qty",className:"w-16 p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}}),s.jsx(W,{value:_.unit||"oz",onChange:ae=>G(V,"unit",ae),index:V}),s.jsx("input",{type:"text",value:_.cost,onChange:ae=>G(V,"cost",ae.target.value),placeholder:"$",className:"w-16 p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}}),s.jsx(le,{value:_.source,onChange:ae=>G(V,"source",ae),index:V}),s.jsx("select",{value:_.section,onChange:ae=>G(V,"section",ae.target.value),className:"w-28 p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:mo.map(ae=>s.jsx("option",{value:ae,children:ae},ae))}),t.ingredients.length>1&&s.jsx("button",{onClick:()=>K(V),className:"text-red-600 p-2",children:s.jsx(wt,{size:20})})]}),Z&&s.jsxs("button",{onClick:()=>ce(V,Z),className:"mt-1 text-xs px-2 py-1 rounded bg-green-100 text-green-700",children:['Auto-fill "',Z.name,'"']}),X.length>0&&s.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[s.jsxs("span",{className:"text-xs text-orange-600",children:[s.jsx(Oh,{size:12,className:"inline"})," Similar:"]}),X.slice(0,3).map((ae,ye)=>s.jsxs("button",{onClick:()=>ce(V,ae),className:"text-xs px-2 py-1 rounded bg-orange-100 text-orange-700",children:['"',ae.name,'"']},ye))]})]},V)}),s.jsx("button",{onClick:oe,className:"text-sm px-3 py-1 rounded",style:{backgroundColor:"#ebb582"},children:"+ Add Ingredient"})]}),s.jsxs("button",{onClick:y,className:"px-6 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[s.jsx(Bh,{size:20,className:"inline mr-2"}),"Save Recipe"]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",style:{color:"#3d59ab"},children:"Recipe Library"}),Object.entries(e).map(([_,V])=>V.length>0&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-bold capitalize mb-2",style:{color:"#ebb582"},children:[_," (",V.length,")"]}),s.jsx("div",{className:"space-y-2",children:V.map((Z,X)=>{var ye;const ae=d(Z);return s.jsx("div",{children:(r==null?void 0:r.category)===_&&(r==null?void 0:r.index)===X?s.jsxs("div",{className:"p-4 rounded-lg border-2",style:{borderColor:"#3d59ab",backgroundColor:"#f9f9ed"},children:[s.jsx("input",{type:"text",value:r.recipe.name,onChange:D=>l({...r,recipe:{...r.recipe,name:D.target.value}}),className:"w-full p-2 border-2 rounded-lg mb-2 font-bold",style:{borderColor:"#ebb582"}}),s.jsx("textarea",{value:r.recipe.instructions,onChange:D=>l({...r,recipe:{...r.recipe,instructions:D.target.value}}),placeholder:"Instructions...",className:"w-full p-2 border-2 rounded-lg mb-2",style:{borderColor:"#ebb582"},rows:"2"}),s.jsx("p",{className:"text-sm font-medium mb-2",children:"Ingredients:"}),r.recipe.ingredients.map((D,O)=>{const de=D.name.length>2?c(D.name):null;return s.jsxs("div",{className:"mb-2",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("input",{type:"text",value:D.name,onChange:ie=>{N(O,"name",ie.target.value);const be=ie.target.value.length>2?c(ie.target.value):null;be&&setTimeout(()=>{be.cost&&N(O,"cost",be.cost),be.source&&N(O,"source",be.source),be.section&&N(O,"section",be.section),be.unit&&N(O,"unit",be.unit)},0)},placeholder:"Name",className:"flex-1 min-w-[100px] p-1 border rounded text-sm",list:`edit-ing-${O}`}),s.jsx("datalist",{id:`edit-ing-${O}`,children:a.map((ie,be)=>s.jsx("option",{value:ie.name},be))}),s.jsx("input",{type:"text",value:D.quantity,onChange:ie=>N(O,"quantity",ie.target.value),placeholder:"Qty",className:"w-12 p-1 border rounded text-sm"}),s.jsx(W,{value:D.unit||"oz",onChange:ie=>N(O,"unit",ie),index:O,isEditing:!0}),s.jsx("input",{type:"text",value:D.cost,onChange:ie=>{N(O,"cost",ie.target.value),ie.target.value&&D.name&&M&&M(D.name,ie.target.value)},placeholder:"$",className:"w-12 p-1 border rounded text-sm"}),s.jsx(le,{value:D.source,onChange:ie=>N(O,"source",ie),index:O,isEditing:!0}),s.jsx("select",{value:D.section,onChange:ie=>N(O,"section",ie.target.value),className:"w-24 p-1 border rounded text-sm",children:mo.map(ie=>s.jsx("option",{value:ie,children:ie},ie))}),s.jsx("button",{onClick:()=>f(O),className:"text-red-600",children:s.jsx(wt,{size:16})})]}),de&&s.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["Master: $",de.cost||"?","/",de.unit,"  ",de.source||"No vendor","  ",de.section]})]},O)}),s.jsx("button",{onClick:z,className:"text-sm px-2 py-1 rounded mb-2",style:{backgroundColor:"#ebb582"},children:"+ Add"}),s.jsxs("div",{className:"flex gap-2 mt-2",children:[s.jsxs("button",{onClick:U,className:"flex items-center gap-1 px-3 py-1 rounded text-white text-sm",style:{backgroundColor:"#3d59ab"},children:[s.jsx(Fe,{size:16}),"Save"]}),s.jsx("button",{onClick:()=>l(null),className:"px-3 py-1 rounded bg-gray-200 text-sm",children:"Cancel"})]})]}):s.jsxs("div",{className:"flex justify-between items-start p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[A(Z)&&s.jsx(bt,{size:16,className:"text-amber-500",title:"Missing costs or instructions"}),s.jsx("p",{className:"font-medium",children:Z.name}),ae>0&&s.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-green-100 text-green-700",children:["$",ae.toFixed(2),"/portion"]})]}),s.jsx("p",{className:"text-sm text-gray-600",children:(ye=Z.ingredients)==null?void 0:ye.map(D=>`${D.name} (${D.quantity} ${D.unit||"oz"})`).join(", ")}),Z.instructions&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Z.instructions})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>C(_,X),className:"text-blue-600",title:"Edit",children:s.jsx(ur,{size:18})}),u&&s.jsx("button",{onClick:()=>u(_,X),className:"text-green-600",title:"Duplicate",children:s.jsx(Lh,{size:18})}),s.jsx("button",{onClick:()=>x(_,X),className:"text-red-600",title:"Delete",children:s.jsx($s,{size:18})})]})]})},X)})})]},_)),Object.values(e).flat().length===0&&s.jsx("p",{className:"text-gray-500",children:"No recipes yet."})]})]})}const ef={protein:{label:"Proteins",color:"#dc2626"},veg:{label:"Veggies",color:"#16a34a"},starch:{label:"Starch",color:"#ca8a04"},extras:{label:"Extras",color:"#7c3aed"}},Vu={monTue:{label:"Monday/Tuesday Production",deliveries:"For Mon & Tue deliveries",icon:""},thursday:{label:"Thursday Production",deliveries:"For Thu deliveries",icon:""}};function av({dishName:e,data:t,recipe:n,isComplete:r,isExpanded:l,onToggleExpand:a,onToggleComplete:o}){return s.jsxs("div",{className:`border-2 rounded-lg overflow-hidden transition-all ${r?"opacity-60":""}`,style:{borderColor:r?"#22c55e":"#ebb582"},children:[s.jsx("div",{className:"p-3 cursor-pointer select-none",style:{backgroundColor:r?"#dcfce7":"#f9f9ed"},onClick:a,children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h4",{className:"font-bold truncate",style:{color:"#3d59ab"},children:e}),s.jsxs("p",{className:"text-xl font-bold",style:{color:r?"#22c55e":"#3d59ab"},children:[t.totalPortions," ",s.jsx("span",{className:"text-xs font-normal text-gray-500",children:"portions"})]})]}),s.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[r&&s.jsx(Fe,{size:18,className:"text-green-600"}),l?s.jsx(Io,{size:18,className:"text-gray-400"}):s.jsx(Oo,{size:18,className:"text-gray-400"})]})]})}),l&&s.jsxs("div",{className:"p-3 border-t text-sm",style:{borderColor:"#ebb582"},children:[s.jsx("p",{className:"text-xs text-gray-500 mb-3",children:t.clients.map(c=>`${c.name} (${c.portions})`).join(", ")}),s.jsxs("button",{onClick:c=>{c.stopPropagation(),o()},className:`w-full mb-3 px-3 py-2 rounded-lg flex items-center justify-center gap-2 font-medium text-sm ${r?"bg-green-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:[s.jsx(Fe,{size:16}),r?"Completed":"Mark Complete"]}),(n==null?void 0:n.ingredients)&&n.ingredients.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Ingredients:"}),s.jsx("div",{className:"space-y-1",children:n.ingredients.map((c,i)=>s.jsxs("div",{className:"flex justify-between text-xs p-1.5 rounded",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("span",{children:c.name}),s.jsxs("span",{className:"font-bold",children:[(parseFloat(c.quantity)*t.totalPortions).toFixed(1)," ",c.unit||"oz"]})]},i))})]}),(n==null?void 0:n.instructions)&&s.jsxs("div",{children:[s.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Instructions:"}),s.jsx("p",{className:"text-xs p-2 rounded",style:{backgroundColor:"#fff4e0"},children:n.instructions})]})]})]})}function qu({productionDay:e,config:t,data:n,recipes:r,completedDishes:l,expandedTiles:a,onToggleExpand:o,onToggleComplete:c,onCompleteAll:i}){const d=[];["protein","veg","starch","extras"].forEach(C=>{Object.entries(n[C]||{}).forEach(([U,N])=>{d.push({dishName:U,...N,categoryType:C})})});const m=d.filter(C=>l[C.dishName]).length,y=d.length>0&&m===d.length;return d.length>0?s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b-2",style:{borderColor:"#ebb582"},children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",style:{color:"#3d59ab"},children:[s.jsx("span",{children:t.icon}),t.label]}),s.jsx("p",{className:"text-sm text-gray-500",children:t.deliveries})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[m,"/",d.length," done"]}),y&&s.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white text-sm",style:{backgroundColor:"#22c55e"},children:[s.jsx(Fe,{size:16}),"Ready for Delivery"]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:["protein","veg","starch","extras"].map(C=>{const U=Object.entries(n[C]||{}).sort((z,f)=>f[1].totalPortions-z[1].totalPortions),N=ef[C];return U.length===0?null:s.jsxs("div",{children:[s.jsx("div",{className:"text-center py-2 px-3 rounded-t-lg mb-2 font-bold text-white text-sm",style:{backgroundColor:N.color},children:N.label}),s.jsx("div",{className:"space-y-3",children:U.map(([z,f])=>{var M;let p=null;const h=f.category;if(h&&r[h]&&(p=r[h].find(T=>T.name===z)),!p)for(const T of["protein","veg","starch","sauces","breakfast","soups"]){const F=(M=r[T])==null?void 0:M.find(R=>R.name===z);if(F){p=F;break}}return s.jsx(av,{dishName:z,data:f,recipe:p,isComplete:l[z],isExpanded:a[z],onToggleExpand:()=>o(z),onToggleComplete:()=>c(z)},z)})})]},C)})})]}):null}function ov({menuItems:e,recipes:t,completedDishes:n,toggleDishComplete:r,allDishesComplete:l,completeAllOrders:a,getKDSView:o}){const[c,i]=g.useState({}),d=o(),m=N=>{i(z=>({...z,[N]:!z[N]}))},y=()=>{const N=window.open("","_blank");let z=`
      <html>
      <head>
        <title>KDS - Kitchen Production List</title>
        <style>
          body { font-family: Arial, sans-serif; padding: 20px; }
          h1 { color: #3d59ab; margin-bottom: 5px; }
          h2 { color: #666; margin-top: 20px; border-bottom: 2px solid #ebb582; padding-bottom: 5px; }
          h3 { margin: 10px 0 5px 0; color: #333; }
          .category { margin-bottom: 15px; }
          .category-header { font-weight: bold; padding: 5px 10px; color: white; display: inline-block; margin-bottom: 5px; }
          .protein { background: #dc2626; }
          .veg { background: #16a34a; }
          .starch { background: #ca8a04; }
          .extras { background: #7c3aed; }
          .dish { padding: 3px 0; border-bottom: 1px dotted #ddd; }
          .dish-name { font-weight: 500; }
          .portions { color: #666; }
          @media print { body { padding: 0; } }
        </style>
      </head>
      <body>
        <h1>Kitchen Production List</h1>
        <p style="color: #666; margin-bottom: 20px;">Printed: ${new Date().toLocaleDateString()}</p>
    `;["monTue","thursday"].forEach(f=>{const p=d[f],h=f==="monTue"?"Monday/Tuesday Production":"Thursday Production";["protein","veg","starch","extras"].some(T=>Object.keys((p==null?void 0:p[T])||{}).length>0)&&(z+=`<h2>${h}</h2>`,["protein","veg","starch","extras"].forEach(T=>{const F=Object.entries(p[T]||{}).sort((R,u)=>u[1].totalPortions-R[1].totalPortions);if(F.length>0){const R=ef[T].label;z+=`<div class="category"><span class="category-header ${T}">${R}</span>`,F.forEach(([u,b])=>{z+=`<div class="dish"><span class="dish-name">${u}</span> <span class="portions">(${b.totalPortions} portions)</span></div>`}),z+="</div>"}}))}),z+="</body></html>",N.document.write(z),N.document.close(),N.print()},x=["protein","veg","starch","extras"].some(N=>{var z;return Object.keys(((z=d.monTue)==null?void 0:z[N])||{}).length>0}),C=["protein","veg","starch","extras"].some(N=>{var z;return Object.keys(((z=d.thursday)==null?void 0:z[N])||{}).length>0}),U=x||C;return s.jsxs("div",{children:[s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Kitchen Display"}),s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Dishes grouped by production day and category"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[U&&s.jsxs("button",{onClick:y,className:"flex items-center gap-2 px-4 py-2 rounded-lg border-2",style:{borderColor:"#3d59ab",color:"#3d59ab"},children:[s.jsx($h,{size:18}),"Print"]}),e.length>0&&l()&&s.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#22c55e"},children:[s.jsx(Fe,{size:18}),"Complete All & Ready for Delivery"]})]})]})}),U?s.jsxs(s.Fragment,{children:[x&&s.jsx(qu,{productionDay:"monTue",config:Vu.monTue,data:d.monTue,recipes:t,completedDishes:n,expandedTiles:c,onToggleExpand:m,onToggleComplete:r,onCompleteAll:a}),C&&s.jsx(qu,{productionDay:"thursday",config:Vu.thursday,data:d.thursday,recipes:t,completedDishes:n,expandedTiles:c,onToggleExpand:m,onToggleComplete:r,onCompleteAll:a})]}):s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Zn,{size:48,className:"mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-gray-500 text-lg",children:"No dishes to cook yet"}),s.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Approved menus for this week will appear here when ready for cooking."})]})})]})}const Gu="goldfinchShopData",Ku="goldfinchShopChecked",Yu="goldfinchShopOverrides",xr=["Sunday","Tuesday","Thursday"],iv=["Produce","Meat & Seafood","Dairy & Eggs","Pantry","Frozen","Bakery","Beverages","Spices & Seasonings","Oils & Vinegars","Canned Goods","Grains & Pasta","Other"],cv=["Grocery Store","Costco","Restaurant Depot","Farmers Market","Specialty Store","Online","Other"];function dv({prepList:e,shoppingListsByDay:t={},exportPrepList:n}){const[r,l]=g.useState(()=>{try{const W=localStorage.getItem(Ku);return W?JSON.parse(W):{}}catch{return{}}}),[a,o]=g.useState(()=>{try{const W=localStorage.getItem(Gu);if(W){const _=JSON.parse(W),V={};return xr.forEach(Z=>{V[Z]=(_[Z]||[]).filter(X=>X.manual)}),V}}catch{}return{Sunday:[],Tuesday:[],Thursday:[]}}),[c,i]=g.useState(""),[d,m]=g.useState(null),[y,x]=g.useState(null),[C,U]=g.useState(null),[N,z]=g.useState(null),[f,p]=g.useState(()=>{try{const W=localStorage.getItem(Yu);return W?JSON.parse(W):{}}catch{return{}}});g.useEffect(()=>{localStorage.setItem(Yu,JSON.stringify(f))},[f]),g.useEffect(()=>{localStorage.setItem(Ku,JSON.stringify(r))},[r]);const h=W=>(W||"").toLowerCase().trim().replace(/\s+/g," ");g.useEffect(()=>{const W={};xr.forEach(_=>{const V=(t[_]||[]).map(Z=>{const X=h(Z.name),ae=(Z.unit||"oz").toLowerCase().trim();return{...Z,id:`auto-${X}|${ae}`,manual:!1}});W[_]=[...V,...a[_]||[]]}),localStorage.setItem(Gu,JSON.stringify(W))},[a,t]);const M=(W,_)=>`${W}-${_}`,T=W=>(W||"").toLowerCase().trim().replace(/\s+/g," "),F=W=>{const _=(t[W]||[]).map(Z=>{const X=T(Z.name),ae=(Z.unit||"oz").toLowerCase().trim(),ye=`auto-${X}|${ae}`,D=M(W,ye),O=f[D]||{};return{...Z,id:ye,dayItemId:D,manual:!1,checked:r[D]||!1,section:O.section||Z.section,source:O.source||Z.source,originalSection:Z.section,originalSource:Z.source,hasOverride:!!(O.section||O.source)}}),V=(a[W]||[]).map(Z=>{const X=M(W,Z.id),ae=f[X]||{};return{...Z,dayItemId:X,checked:r[X]||!1,section:ae.section||Z.section,source:ae.source||Z.source,originalSection:Z.section,originalSource:Z.source,hasOverride:!!(ae.section||ae.source)}});return[..._,...V]},R=(W,_,V)=>{const Z=M(W,_.id);p(X=>({...X,[Z]:{...X[Z],section:V}}))},u=(W,_,V)=>{const Z=M(W,_.id);p(X=>({...X,[Z]:{...X[Z],source:V}}))},b=(W,_)=>{const V=M(W,_.id);p(Z=>{const X={...Z};return delete X[V],X})},S=W=>{const _=F(W),V=new Set(_.map(X=>X.section).filter(Boolean)),Z=new Set([...iv,...V]);return Array.from(Z).sort()},j=W=>{const _=F(W),V=new Set(_.map(X=>X.source).filter(Boolean)),Z=new Set([...cv,...V]);return Array.from(Z).sort()},k=W=>{l(_=>({..._,[W]:!_[W]}))},H=W=>{if(!c.trim())return;const _={id:`manual-${Date.now()}-${Math.random()}`,name:c.trim(),quantity:null,unit:"",section:"Manual Items",source:"",manual:!0};o(V=>({...V,[W]:[...V[W]||[],_]})),i(""),m(null)},I=(W,_)=>{o(Z=>({...Z,[W]:(Z[W]||[]).filter(X=>X.id!==_)}));const V=M(W,_);l(Z=>{const X={...Z};return delete X[V],X})},ue=(W,_,V)=>{if(W!==V){if(_.manual){o(ae=>({...ae,[W]:(ae[W]||[]).filter(ye=>ye.id!==_.id),[V]:[...ae[V]||[],_]}));const Z=M(W,_.id),X=M(V,_.id);l(ae=>{const ye={...ae};return ye[Z]&&(ye[X]=!0,delete ye[Z]),ye})}else{const Z={id:`manual-moved-${Date.now()}-${Math.random()}`,name:_.name,quantity:_.quantity,unit:_.unit,section:_.section,source:_.source||"Moved",manual:!0};o(ae=>({...ae,[V]:[...ae[V]||[],Z]}));const X=M(W,_.id);l(ae=>({...ae,[X]:!0}))}x(null)}},E=(W,_,V)=>{U({day:_,item:V}),W.dataTransfer.effectAllowed="move",W.dataTransfer.setData("text/plain",V.name),setTimeout(()=>{W.target.style.opacity="0.5"},0)},L=W=>{W.target.style.opacity="1",U(null),z(null)},P=(W,_)=>{W.preventDefault(),W.dataTransfer.dropEffect="move",C&&C.day!==_&&z(_)},A=W=>{W.currentTarget.contains(W.relatedTarget)||z(null)},B=(W,_)=>{W.preventDefault(),C&&C.day!==_&&ue(C.day,C.item,_),U(null),z(null)},ne=W=>{const _=F(W),V=_.filter(X=>X.checked).map(X=>X.dayItemId),Z=_.filter(X=>X.checked).map(X=>X.id);o(X=>({...X,[W]:(X[W]||[]).filter(ae=>!Z.includes(ae.id))})),l(X=>{const ae={...X};return V.forEach(ye=>delete ae[ye]),ae})},oe=()=>{window.confirm("Clear all checked items?")&&l({})},G=W=>{const _=F(W),V=_.filter(Z=>Z.checked).length;return{total:_.length,checked:V}},K=W=>{const _=F(W),V={};return _.forEach((Z,X)=>{const ae=Z.source||"Other",ye=Z.section||"Other";V[ae]||(V[ae]={}),V[ae][ye]||(V[ae][ye]=[]),V[ae][ye].push({...Z,originalIndex:X})}),V},ce=W=>W==="Sunday"?"For Monday deliveries":W==="Tuesday"?"For Tuesday deliveries":W==="Thursday"?"For Thursday deliveries":"",ee=xr.reduce((W,_)=>W+G(_).total,0),le=xr.reduce((W,_)=>W+G(_).checked,0);return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Shopping Lists"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Auto-generated from approved menus  ",le,"/",ee," items checked"]})]}),s.jsxs("div",{className:"flex gap-2",children:[le>0&&s.jsxs("button",{onClick:oe,className:"px-4 py-2 rounded-lg border-2 flex items-center gap-2",style:{borderColor:"#ebb582",color:"#423d3c"},children:[s.jsx(mr,{size:18}),"Reset Checks"]}),s.jsxs("button",{onClick:n,className:"px-4 py-2 rounded-lg text-white flex items-center gap-2",style:{backgroundColor:"#3d59ab"},children:[s.jsx(Mo,{size:18}),"Export All"]})]})]}),ee===0&&s.jsxs("div",{className:"text-center py-8 mb-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("p",{className:"text-gray-500",children:"No shopping items yet"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Approve menus in Menu Planner to auto-generate shopping lists"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:xr.map(W=>{const _=G(W),V=K(W),Z=Object.keys(V).sort(),X=xr.filter(ae=>ae!==W);return s.jsxs("div",{className:`border-2 rounded-lg overflow-hidden transition-all ${N===W?"ring-2 ring-blue-400 ring-offset-2":""}`,style:{borderColor:N===W?"#3d59ab":"#ebb582",backgroundColor:N===W?"#e8f0fe":void 0},onDragOver:ae=>P(ae,W),onDragLeave:A,onDrop:ae=>B(ae,W),children:[s.jsxs("div",{className:"p-4 flex justify-between items-center",style:{backgroundColor:"#3d59ab"},children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-white",children:W}),s.jsx("p",{className:"text-xs text-white/70",children:ce(W)}),s.jsxs("p",{className:"text-sm text-white/80 mt-1",children:[_.checked,"/",_.total," done"]})]}),s.jsx("div",{className:"flex gap-2",children:_.checked>0&&s.jsx("button",{onClick:()=>ne(W),className:"p-2 rounded bg-white/20 hover:bg-white/30 text-white",title:"Remove checked items",children:s.jsx($s,{size:16})})})]}),s.jsx("div",{className:"p-4 max-h-[500px] overflow-y-auto",style:{backgroundColor:"#f9f9ed"},children:_.total===0?s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No items for this day"}):Z.map(ae=>s.jsxs("div",{className:"mb-4",children:[s.jsx("h4",{className:"font-bold text-sm mb-2",style:{color:"#3d59ab"},children:ae}),Object.entries(V[ae]).map(([ye,D])=>s.jsxs("div",{className:"mb-2",children:[s.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:ye}),D.map(O=>s.jsxs("div",{draggable:!O.checked,onDragStart:de=>E(de,W,O),onDragEnd:L,className:`flex items-center gap-2 p-2 rounded mb-1 group ${O.checked?"opacity-50":""} ${O.checked?"":"cursor-grab active:cursor-grabbing"}`,style:{backgroundColor:"white"},children:[!O.checked&&s.jsx(gl,{size:14,className:"text-gray-300 flex-shrink-0 opacity-0 group-hover:opacity-100"}),s.jsx("button",{onClick:()=>k(O.dayItemId),className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${O.checked?"bg-green-500 border-green-500":"border-gray-300 bg-white hover:border-green-400"}`,children:O.checked&&s.jsx(Fe,{size:12,className:"text-white"})}),s.jsxs("span",{className:`flex-1 text-sm ${O.checked?"line-through text-gray-400":""}`,children:[O.name,O.hasOverride&&s.jsx("span",{className:"ml-1 text-xs text-purple-500",title:"Reorganized",children:""})]}),O.quantity!=null&&s.jsxs("span",{className:`text-xs font-medium ${O.checked?"text-gray-400":"text-gray-600"}`,children:[typeof O.quantity=="number"?O.quantity.toFixed(1):O.quantity," ",O.unit]}),!O.checked&&s.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100",children:[s.jsxs("select",{className:"text-xs p-1 rounded border border-gray-300 bg-white cursor-pointer",style:{maxWidth:"80px"},value:O.section||"",onChange:de=>{de.target.value&&R(W,O,de.target.value)},title:"Change section",children:[s.jsx("option",{value:"",disabled:!0,children:"Section..."}),S(W).map(de=>s.jsx("option",{value:de,children:de},de))]}),s.jsxs("select",{className:"text-xs p-1 rounded border border-gray-300 bg-white cursor-pointer",style:{maxWidth:"80px"},value:O.source||"",onChange:de=>{de.target.value&&u(W,O,de.target.value)},title:"Change store/vendor",children:[s.jsx("option",{value:"",disabled:!0,children:"Store..."}),j(W).map(de=>s.jsx("option",{value:de,children:de},de))]}),s.jsxs("select",{className:"text-xs p-1 rounded border border-gray-300 bg-white cursor-pointer",style:{maxWidth:"70px"},value:"",onChange:de=>{de.target.value&&ue(W,O,de.target.value)},title:"Move to another day",children:[s.jsx("option",{value:"",children:"Day..."}),X.map(de=>s.jsx("option",{value:de,children:de},de))]}),O.hasOverride&&s.jsx("button",{onClick:()=>b(W,O),className:"p-1 rounded hover:bg-gray-100",title:"Reset to original section/store",children:s.jsx(mr,{size:12,className:"text-gray-400"})})]}),O.manual&&s.jsx("button",{onClick:()=>I(W,O.id),className:"opacity-0 group-hover:opacity-100 p-1 rounded hover:bg-red-100",title:"Remove item",children:s.jsx(wt,{size:14,className:"text-red-400"})})]},O.dayItemId))]},ye))]},ae))}),s.jsx("div",{className:"p-3 border-t",style:{borderColor:"#ebb582"},children:d===W?s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:c,onChange:ae=>i(ae.target.value),onKeyPress:ae=>ae.key==="Enter"&&H(W),placeholder:"Item name...",className:"flex-1 px-3 py-2 border rounded text-sm",autoFocus:!0}),s.jsx("button",{onClick:()=>H(W),className:"px-3 py-2 rounded text-white text-sm",style:{backgroundColor:"#3d59ab"},children:"Add"}),s.jsx("button",{onClick:()=>{m(null),i("")},className:"px-3 py-2 rounded border text-sm",children:"Cancel"})]}):s.jsxs("button",{onClick:()=>m(W),className:"w-full flex items-center justify-center gap-2 py-2 rounded text-sm hover:bg-gray-100",style:{color:"#3d59ab"},children:[s.jsx(gs,{size:16}),"Add Item"]})})]},W)})})]})})}const uv=({activeView:e,setActiveView:t})=>s.jsx("div",{className:"flex rounded-lg overflow-hidden border-2 flex-wrap",style:{borderColor:"#ebb582"},children:[{id:"week",label:"Week View",icon:xs},{id:"plan",label:"Plan Routes",icon:un},{id:"progress",label:"Live Progress",icon:C0},{id:"log",label:"Delivery Log",icon:gd},{id:"bags",label:"Bags Summary",icon:In},{id:"drivers",label:"Drivers",icon:P0}].map(n=>s.jsxs("button",{onClick:()=>t(n.id),className:`flex items-center gap-2 px-4 py-2 font-medium transition-colors ${e===n.id?"text-white":"bg-white"}`,style:e===n.id?{backgroundColor:"#3d59ab"}:{color:"#423d3c"},children:[s.jsx(n.icon,{size:18}),n.label]},n.id))}),sn=({label:e,children:t})=>s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"text-sm font-medium mb-1",style:{color:"#423d3c"},children:e}),t]}),nn="p-2 border-2 rounded-lg",rn={borderColor:"#ebb582"},Qu="goldfinchRouteOrder",Zu="goldfinchSavedRoutes";function mv({clients:e,drivers:t,setDrivers:n,newDriver:r,setNewDriver:l,deliveryLog:a=[],setDeliveryLog:o,bagReminders:c={},setBagReminders:i,readyForDelivery:d=[],setReadyForDelivery:m,orderHistory:y=[],setOrderHistory:x,selectedWeekId:C,weeks:U={},addDeliveryLogToWeek:N,removeReadyForDeliveryFromWeek:z,isReadOnly:f=!1,menuItems:p=[],clientPortalData:h={},saveDriverRoutes:M}){const[T,F]=g.useState(()=>{try{const w=localStorage.getItem(Zu);return w?JSON.parse(w):{}}catch{return{}}}),R=w=>{F(w),localStorage.setItem(Zu,JSON.stringify(w))},[u,b]=g.useState("week"),[S,j]=g.useState(new Date().toISOString().split("T")[0]),[k,H]=g.useState(null),[I,ue]=g.useState(null),[E,L]=g.useState(()=>{try{const w=localStorage.getItem(Qu);return w?JSON.parse(w):{}}catch{return{}}}),P=w=>{L(w),localStorage.setItem(Qu,JSON.stringify(w))},[A,B]=g.useState(null),[ne,oe]=g.useState(null),[G,K]=g.useState(r||{...Lr}),[ce,ee]=g.useState(""),[le,W]=g.useState(""),[_,V]=g.useState(""),[Z,X]=g.useState(!1),[ae,ye]=g.useState(()=>{try{return localStorage.getItem("goldfinchStartingAddress")||""}catch{return""}}),D=w=>{ye(w),localStorage.setItem("goldfinchStartingAddress",w)},O=[];for(let w=9;w<=18;w++)for(let Y=0;Y<60&&!(w===18&&Y>0);Y+=30){const re=w>12?w-12:w,$=w>=12?"PM":"AM",J=Y===30?w+1>12?w+1-12:w+1:w>12?w-12:w,te=Y===30?"00":"30",pe=Y===30&&w+1>=12?"PM":$,he=`${re}:${Y.toString().padStart(2,"0")} ${$} - ${J}:${te} ${pe}`;O.push({value:`${w}:${Y.toString().padStart(2,"0")}`,label:he})}const de=new Date(S+"T12:00:00").toLocaleDateString("en-US",{weekday:"long"}),be=(w=>d.filter(Y=>Y.date===w))(S),ve=w=>w!=null&&w.contacts&&w.contacts.length>0?w.contacts:[{name:(w==null?void 0:w.name)||"",email:(w==null?void 0:w.email)||"",phone:(w==null?void 0:w.phone)||"",address:(w==null?void 0:w.address)||""}],Ae=(()=>{const w=[...new Set(be.map(re=>re.clientName))],Y=[];return w.forEach(re=>{const $=e.find(Te=>Te.name===re);if($!=null&&$.pickup)return;const J=be.filter(Te=>Te.clientName===re),te=ve($),pe=te.filter(Te=>Te.address),he={};pe.forEach((Te,ze)=>{const Me=Te.address.toLowerCase().trim();he[Me]||(he[Me]={address:Te.address,contacts:[],originalIndex:ze}),he[Me].contacts.push(Te)});const ge=Object.values(he);ge.length===0?Y.push({...$,name:re,orders:J,zone:($==null?void 0:$.zone)||"Unassigned",address:"",displayName:($==null?void 0:$.displayName)||re,pickup:!1,contactNames:te.map(Te=>Te.name).filter(Boolean),contactPhones:te.map(Te=>Te.phone).filter(Boolean),contactIndex:0,totalStops:1,stopKey:re}):ge.forEach((Te,ze)=>{Y.push({...$,name:re,orders:J,zone:($==null?void 0:$.zone)||"Unassigned",address:Te.address,displayName:($==null?void 0:$.displayName)||re,pickup:!1,contactNames:Te.contacts.map(Me=>Me.name).filter(Boolean),contactPhones:Te.contacts.map(Me=>Me.phone).filter(Boolean),contactEmails:Te.contacts.map(Me=>Me.email).filter(Boolean),contactIndex:ze,totalStops:ge.length,stopKey:ge.length>1?`${re}-${ze}`:re})})}),Y})(),Oe={};ws.forEach(w=>{Oe[w]=Ae.filter(Y=>Y.zone===w)});const Pe=Ae.filter(w=>!w.zone||!ws.includes(w.zone));Pe.length>0&&(Oe.Unassigned=Pe);const st=w=>t.find(Y=>Y.zone===w),qe=(w,Y,re=0)=>a.find($=>$.date===w&&$.clientName===Y&&($.contactIndex===re||$.contactIndex===void 0&&re===0)),rt=(w,Y,re=0,$="",J=null,te="",pe=!1)=>{if(f)return;const he=st(Y),ge={id:Date.now(),date:S,clientName:w,contactIndex:re,contactName:$,zone:Y,driverName:(he==null?void 0:he.name)||"Unknown",completedAt:new Date().toISOString(),problem:J,problemNote:te,bagsReturned:pe};o([...a,ge]),C&&N&&N(C,ge);const Te=e.find(De=>De.name===w),ts=ve(Te).filter(De=>De.address).length||1;if(a.filter(De=>De.date===S&&De.clientName===w).length+1>=ts){const De=d.filter($e=>$e.clientName===w&&$e.date===S);De.length>0&&(x($e=>[...$e,...De]),m($e=>$e.filter(Ue=>!(Ue.clientName===w&&Ue.date===S))),C&&z&&De.forEach($e=>{z(C,$e.id)}))}},pt=w=>{o(a.map(Y=>Y.id===w?{...Y,bagsReturned:!Y.bagsReturned}:Y))},Pt=w=>{i({...c,[w]:!c[w]})},Ct=()=>{const w={};return[...a].sort((re,$)=>new Date($.completedAt)-new Date(re.completedAt)).forEach(re=>{w[re.clientName]||(w[re.clientName]=re)}),Object.values(w).filter(re=>!re.bagsReturned).sort((re,$)=>new Date(re.completedAt)-new Date($.completedAt))},It=w=>{const Y=a.find(re=>re.id===w);if(Y){const re=y.filter($=>$.clientName===Y.clientName&&$.date===Y.date);re.length>0&&(m($=>[...$,...re]),x($=>$.filter(J=>!(J.clientName===Y.clientName&&J.date===Y.date))))}o(a.filter(re=>re.id!==w))},jt=()=>{const w=[...new Set(be.map($=>$.clientName))],Y=[...new Set(a.filter($=>$.date===S).map($=>$.clientName))];return[...new Set([...w,...Y])].map($=>{const J=e.find(te=>te.name===$);return{name:$,zone:(J==null?void 0:J.zone)||"Unassigned",displayName:(J==null?void 0:J.displayName)||$,pickup:(J==null?void 0:J.pickup)||!1}}).filter($=>!$.pickup)},lt=()=>{const w={},Y=jt();return ws.forEach(re=>{const $=st(re);if(!$)return;const J=Y.filter(ze=>ze.zone===re);if(J.length===0)return;const te=J.filter(ze=>qe(S,ze.name)),pe=te.filter(ze=>{const Me=qe(S,ze.name);return Me==null?void 0:Me.problem}),he=a.filter(ze=>ze.date===S&&ze.zone===re).sort((ze,Me)=>new Date(Me.completedAt)-new Date(ze.completedAt))[0],Te=Ae.filter(ze=>ze.zone===re).find(ze=>!qe(S,ze.name));w[$.name]={driver:$,zone:re,total:J.length,completed:te.length,problems:pe.length,lastCompletedAt:he==null?void 0:he.completedAt,lastClientName:he==null?void 0:he.clientName,currentStop:Te}}),w},ut=()=>a.filter(w=>!(ce&&w.date!==ce||le&&w.driverName!==le||_&&w.zone!==_||Z&&!w.problem)).sort((w,Y)=>new Date(Y.completedAt)-new Date(w.completedAt)),Ge=Object.entries(Oe).filter(([w,Y])=>Y.length>0),Lt=(w,Y)=>{var J;const re=(J=E[S])==null?void 0:J[w];return!re||re.length===0?Y:[...Y].sort((te,pe)=>{const he=te.stopKey||te.name,ge=pe.stopKey||pe.name,Te=re.indexOf(he),ze=re.indexOf(ge);return Te!==-1&&ze!==-1?Te-ze:Te===-1&&ze!==-1?1:Te!==-1&&ze===-1?-1:0})},Qt=(w,Y,re)=>{H({zone:Y,clientName:re}),w.dataTransfer.effectAllowed="move"},Ws=(w,Y,re)=>{w.preventDefault(),k&&k.zone===Y&&k.clientName!==re&&ue({zone:Y,clientName:re})},js=()=>ue(null),Hs=(w,Y,re)=>{if(w.preventDefault(),!k||k.zone!==Y||k.clientName===re){H(null),ue(null);return}const $=Oe[Y]||[],te=Lt(Y,$).map(Me=>Me.stopKey||Me.name),pe=te.indexOf(k.clientName),he=te.indexOf(re);if(pe===-1||he===-1){H(null),ue(null);return}const ge=[...te],[Te]=ge.splice(pe,1);ge.splice(he,0,Te);const ze={...E,[S]:{...E[S]||{},[Y]:ge}};P(ze),H(null),ue(null)},Ns=()=>{H(null),ue(null)},Vs=w=>{const Y=Oe[w]||[],$=Lt(w,Y).filter(J=>J.address).map(J=>encodeURIComponent(J.address));if(ae&&$.unshift(encodeURIComponent(ae)),$.length===0){alert("No addresses found for this zone");return}window.open(`https://www.google.com/maps/dir/${$.join("/")}`,"_blank")},se=w=>w?new Date(w).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"";return s.jsxs("div",{className:"space-y-6",children:[f&&s.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-lg p-4 flex items-center gap-3",children:[s.jsx(bt,{size:24,className:"text-amber-600"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-amber-800",children:"Viewing Past Week (Read-only)"}),s.jsx("p",{className:"text-sm text-amber-600",children:"This week is locked and cannot be modified."})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(as,{size:28,style:{color:"#3d59ab"}}),s.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Deliveries"})]}),s.jsx(uv,{activeView:u,setActiveView:b})]})}),u==="plan"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:s.jsx("div",{className:"flex items-center justify-between flex-wrap gap-4",children:s.jsxs("div",{children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Delivery Date:"}),s.jsx("input",{type:"date",value:S,onChange:w=>j(w.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}})]}),s.jsxs("p",{className:"text-gray-600 mt-2",children:[de,"  ",Ae.length," orders ready for delivery"]})]})})}),Ge.length===0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[s.jsxs("p",{className:"text-gray-500 italic",children:["No orders ready for delivery on ",S]}),s.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Complete orders in KDS to see them here."})]}),Ge.map(([w,Y])=>{const re=w!=="Unassigned"?st(w):null,$=Lt(w,Y);return s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(un,{size:24,style:{color:"#3d59ab"}}),s.jsxs("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:["Zone ",w," (",Y.length," stops)"]}),re&&s.jsx("span",{className:"text-sm px-3 py-1 rounded-full text-white ml-2",style:{backgroundColor:"#3d59ab"},children:re.name})]}),s.jsxs("button",{onClick:()=>Vs(w),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#27ae60"},children:[s.jsx(ps,{size:18}),"Google Maps"]})]}),s.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center gap-2",children:[s.jsx(gl,{size:16})," Drag to reorder stops"]}),s.jsx("div",{className:"space-y-2",children:$.map((J,te)=>{const pe=J.stopKey||J.name,he=qe(S,J.name,J.contactIndex||0),ge=(k==null?void 0:k.zone)===w&&(k==null?void 0:k.clientName)===pe,Te=(I==null?void 0:I.zone)===w&&(I==null?void 0:I.clientName)===pe,ze=J.totalStops>1,Me=J.contactNames||[],ts=J.contactPhones||[];return s.jsxs("div",{draggable:!0,onDragStart:ke=>Qt(ke,w,pe),onDragOver:ke=>Ws(ke,w,pe),onDragLeave:js,onDrop:ke=>Hs(ke,w,pe),onDragEnd:Ns,className:`border-2 rounded-lg p-3 flex items-center gap-3 cursor-move transition-all ${ge?"opacity-50":""} ${he?"bg-green-50":""}`,style:{borderColor:he?"#22c55e":Te?"#3d59ab":"#ebb582"},children:[s.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[s.jsx(gl,{size:20}),s.jsx("span",{className:"font-bold text-lg w-6 text-center",style:{color:"#3d59ab"},children:te+1})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("h4",{className:"font-bold",children:J.displayName||J.name}),ze&&s.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-purple-100 text-purple-700",children:["Stop ",J.contactIndex+1,"/",J.totalStops]}),Me.length>0&&Me.some(ke=>ke&&ke!==J.name)&&s.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-blue-100 text-blue-700 flex items-center gap-1",children:[s.jsx(Gl,{size:12})," ",Me.filter(Boolean).join(", ")]}),he&&s.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-green-100 text-green-700 flex items-center gap-1",children:[s.jsx(Fe,{size:12})," ",se(he.completedAt)]}),he&&s.jsxs("span",{className:`text-xs px-2 py-1 rounded flex items-center gap-1 ${he.bagsReturned?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:[s.jsx(In,{size:12})," ",he.bagsReturned?"Bags returned":"No bags"]}),(he==null?void 0:he.problem)&&s.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-red-100 text-red-700 flex items-center gap-1",children:[s.jsx(bt,{size:12})," ",he.problem]})]}),J.address&&s.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(J.address)}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline truncate flex items-center gap-1",onClick:ke=>ke.stopPropagation(),children:[s.jsx(un,{size:12}),J.address]}),ts.length>0&&s.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-1",children:[s.jsx(Fu,{size:12})," ",ts.join(", ")]}),J.orders&&J.orders.length>0&&J.contactIndex===0&&s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:J.orders.map(ke=>`${ke.portions}p: ${ke.dishes.join(", ")}`).join(" | ")})]}),!he&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>rt(J.name,w,J.contactIndex||0,Me.join(", "),null,"",!0),className:"px-3 py-1 rounded text-sm text-white flex items-center gap-1",style:{backgroundColor:"#22c55e"},children:[s.jsx(In,{size:14})," + Bags"]}),s.jsx("button",{onClick:()=>rt(J.name,w,J.contactIndex||0,Me.join(", "),null,"",!1),className:"px-3 py-1 rounded text-sm bg-gray-200",children:"No Bags"})]}),he&&!he.bagsReturned&&s.jsx("button",{onClick:()=>pt(he.id),className:"px-2 py-1 rounded text-xs bg-amber-100 text-amber-700",children:"Mark bags returned"})]},pe)})})]},w)})]}),u==="progress"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:"Date:"}),s.jsx("input",{type:"date",value:S,onChange:w=>j(w.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}})]}),s.jsx("p",{className:"text-gray-600",children:de})]})}),Object.entries(lt()).map(([w,Y])=>{const re=Y.total>0?Math.round(Y.completed/Y.total*100):0;return s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Gl,{size:24,style:{color:"#3d59ab"}}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:w}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Zone ",Y.zone]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-2xl font-bold",style:{color:re===100?"#22c55e":"#3d59ab"},children:[Y.completed,"/",Y.total]}),s.jsx("p",{className:"text-sm text-gray-600",children:"stops completed"})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full transition-all duration-500",style:{width:`${re}%`,backgroundColor:re===100?"#22c55e":"#3d59ab"}})}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[re,"% complete"]})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Current Stop"}),s.jsx("p",{className:"font-bold",style:{color:"#3d59ab"},children:Y.currentStop?Y.currentStop.displayName||Y.currentStop.name:"Complete!"})]}),s.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Last Completion"}),s.jsx("p",{className:"font-bold",style:{color:"#3d59ab"},children:Y.lastCompletedAt?se(Y.lastCompletedAt):"N/A"})]}),s.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Last Client"}),s.jsx("p",{className:"font-bold",style:{color:"#3d59ab"},children:Y.lastClientName||"N/A"})]}),s.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:Y.problems>0?"#fef2f2":"#f9f9ed"},children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Problems"}),s.jsxs("p",{className:"font-bold flex items-center gap-1",style:{color:Y.problems>0?"#dc2626":"#3d59ab"},children:[Y.problems>0&&s.jsx(bt,{size:16}),Y.problems]})]})]}),Y.problems>0&&s.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-red-50 border border-red-200",children:[s.jsx("p",{className:"font-medium text-red-700 mb-2",children:"Flagged Problems:"}),a.filter($=>$.date===S&&$.zone===Y.zone&&$.problem).map($=>s.jsxs("div",{className:"text-sm text-red-600 flex items-center gap-2",children:[s.jsx(bt,{size:14}),s.jsxs("span",{className:"font-medium",children:[$.clientName,":"]}),s.jsx("span",{children:$.problem}),$.problemNote&&s.jsxs("span",{className:"text-red-500",children:["- ",$.problemNote]})]},$.id))]})]},w)}),Object.keys(lt()).length===0&&s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:s.jsx("p",{className:"text-gray-500",children:"No drivers assigned to zones with deliveries today."})})]}),u==="log"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("h3",{className:"font-bold mb-4",style:{color:"#3d59ab"},children:"Filters"}),s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date"}),s.jsx("input",{type:"date",value:ce,onChange:w=>ee(w.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Driver"}),s.jsxs("select",{value:le,onChange:w=>W(w.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:[s.jsx("option",{value:"",children:"All Drivers"}),t.map(w=>s.jsx("option",{value:w.name,children:w.name},w.id||w.name))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Zone"}),s.jsxs("select",{value:_,onChange:w=>V(w.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:[s.jsx("option",{value:"",children:"All Zones"}),ws.map(w=>s.jsxs("option",{value:w,children:["Zone ",w]},w))]})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("label",{className:"flex items-center gap-2 p-2",children:[s.jsx("input",{type:"checkbox",checked:Z,onChange:w=>X(w.target.checked),className:"w-5 h-5",style:{accentColor:"#3d59ab"}}),s.jsx("span",{className:"font-medium",children:"Problems Only"})]})}),s.jsx("div",{className:"flex items-end",children:s.jsx("button",{onClick:()=>{ee(""),W(""),V(""),X(!1)},className:"px-4 py-2 rounded-lg bg-gray-200",children:"Clear Filters"})})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("h3",{className:"font-bold mb-4",style:{color:"#3d59ab"},children:["Delivery Log (",ut().length," entries)"]}),ut().length>0?s.jsx("div",{className:"space-y-2",children:ut().map(w=>s.jsxs("div",{className:`border-2 rounded-lg p-3 flex items-center justify-between ${w.problem?"bg-red-50":""}`,style:{borderColor:w.problem?"#fca5a5":"#ebb582"},children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"text-center min-w-[80px]",children:[s.jsx("p",{className:"text-sm text-gray-500",children:w.date}),s.jsx("p",{className:"font-bold",style:{color:"#3d59ab"},children:se(w.completedAt)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",children:w.clientName}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Zone ",w.zone,"  ",w.driverName]})]}),w.problem&&s.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[s.jsx(bt,{size:16}),s.jsx("span",{className:"font-medium",children:w.problem}),w.problemNote&&s.jsxs("span",{className:"text-sm",children:["- ",w.problemNote]})]})]}),s.jsx("button",{onClick:()=>It(w.id),className:"text-sm px-3 py-1 rounded bg-gray-100 text-gray-600 hover:bg-gray-200",children:"Undo"})]},w.id))}):s.jsx("p",{className:"text-gray-500 text-center py-8",children:"No delivery log entries match the filters."})]})]}),u==="bags"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx(In,{size:24,style:{color:"#3d59ab"}}),s.jsx("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:"Outstanding Bags"})]}),s.jsx("p",{className:"text-gray-600",children:"Clients who haven't returned bags on their last delivery"})]}),Ct().length>0?s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("div",{className:"space-y-3",children:Ct().map(w=>{const Y=e.find($=>$.name===w.clientName),re=c[w.clientName];return s.jsxs("div",{className:`border-2 rounded-lg p-4 flex items-center justify-between ${re?"bg-green-50":"bg-amber-50"}`,style:{borderColor:re?"#22c55e":"#f59e0b"},children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg",children:(Y==null?void 0:Y.displayName)||w.clientName}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Last delivery: ",w.date,"  Zone ",w.zone]}),(Y==null?void 0:Y.phone)&&s.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[s.jsx(Fu,{size:14})," ",Y.phone]})]})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:re||!1,onChange:()=>Pt(w.clientName),className:"w-5 h-5",style:{accentColor:"#3d59ab"}}),s.jsxs("span",{className:"text-sm font-medium flex items-center gap-1",children:[s.jsx(D0,{size:16}),"Reminder Sent"]})]}),s.jsx("button",{onClick:()=>pt(w.id),className:"px-4 py-2 rounded-lg text-white text-sm",style:{backgroundColor:"#22c55e"},children:"Mark Returned"})]})]},w.id)})}),s.jsx("div",{className:"mt-4 pt-4 border-t",children:s.jsxs("p",{className:"text-sm text-gray-600",children:["Total outstanding: ",s.jsx("span",{className:"font-bold",children:Ct().length})," clients"," ",""," ","Reminders sent: ",s.jsx("span",{className:"font-bold",children:Ct().filter(w=>c[w.clientName]).length})]})})]}):s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[s.jsx(In,{size:48,className:"mx-auto mb-4 text-green-300"}),s.jsx("p",{className:"text-gray-500",children:"All bags have been returned!"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"No outstanding bags from recent deliveries."})]})]}),u==="week"&&(()=>{const Y=(()=>{const ke=new Date(S+"T12:00:00"),De=ke.getDay(),$e=ke.getDate()-De+(De===0?-6:1),Ue=new Date(ke.setDate($e));return{monday:Ue.toISOString().split("T")[0],tuesday:new Date(new Date(Ue).setDate(Ue.getDate()+1)).toISOString().split("T")[0],thursday:new Date(new Date(Ue).setDate(Ue.getDate()+3)).toISOString().split("T")[0]}})(),re=(ke,De)=>{const $e=Ke=>{const Nt=ke.name,Ce=ke.displayName;return Ke.clientName===Nt||Ke.clientName===Ce},Ue=p.filter(Ke=>$e(Ke)&&Ke.date===De);return a.some(Ke=>(Ke.clientName===ke.name||Ke.clientName===ke.displayName)&&Ke.date===De)?{status:"delivered",label:"Delivered",color:"#22c55e",bgColor:"#dcfce7"}:d.some(Ke=>(Ke.clientName===ke.name||Ke.clientName===ke.displayName)&&Ke.date===De)?{status:"ready",label:"Ready",color:"#f59e0b",bgColor:"#fef3c7"}:Ue.some(Ke=>Ke.approved)?{status:"kds",label:"In KDS",color:"#3b82f6",bgColor:"#dbeafe"}:Ue.some(Ke=>!Ke.approved)?{status:"pending",label:"Menu Pending",color:"#6b7280",bgColor:"#f3f4f6"}:{status:"none",label:"No Menu",color:"#9ca3af",bgColor:"#f9fafb"}},$=(ke,De)=>{const $e=[],Ue=new Set,Ke=Ce=>p.some(Be=>(Be.clientName===Ce.name||Be.clientName===Ce.displayName)&&Be.date===De),Nt=Ce=>d.some(Be=>(Be.clientName===Ce.name||Be.clientName===Ce.displayName)&&Be.date===De);return e.forEach(Ce=>{var ss,Mt,Rt,at,ds,jn;if(Ce.status!=="active"||Ce.pickup||Ue.has(Ce.name))return;let Be=!1;(Ke(Ce)||Nt(Ce))&&(Be=!0),!Be&&Ce.deliveryDay===ke&&(Be=!0),!Be&&((ss=Ce.deliveryDates)==null?void 0:ss.length)>0&&Ce.deliveryDates.includes(De)&&(Be=!0);const Qe=h[Ce.name];if(!Be&&((Mt=Qe==null?void 0:Qe.selectedDates)==null?void 0:Mt.length)>0&&Qe.selectedDates.includes(De)&&(Be=!0),Be){Ue.add(Ce.name);const xe=Ce.contacts||[],Ne=((Rt=xe.find(Ze=>Ze.address))==null?void 0:Rt.address)||Ce.address||"",je=re(Ce,De),Ie=d.filter(Ze=>(Ze.clientName===Ce.name||Ze.clientName===Ce.displayName)&&Ze.date===De),_e=Ce.deliveryDay===ke||((at=Ce.deliveryDates)==null?void 0:at.includes(De))||((ds=Qe==null?void 0:Qe.selectedDates)==null?void 0:ds.includes(De));(je.status!=="none"||_e)&&$e.push({clientName:Ce.name,displayName:Ce.displayName||Ce.name,zone:Ce.zone||"Unassigned",address:Ne,phone:((jn=xe[0])==null?void 0:jn.phone)||Ce.phone||"",orders:Ie,stopKey:Ce.name,...je})}}),$e},J=(ke,De,$e)=>{var Ke;const Ue=(Ke=E[ke])==null?void 0:Ke[De];return!Ue||Ue.length===0?$e:[...$e].sort((Nt,Ce)=>{const Be=Ue.indexOf(Nt.stopKey),Qe=Ue.indexOf(Ce.stopKey);return Be!==-1&&Qe!==-1?Be-Qe:Be===-1&&Qe!==-1?1:Be!==-1&&Qe===-1?-1:0})},te=(ke,De,$e,Ue)=>{H({date:De,zone:$e,clientName:Ue}),ke.dataTransfer.effectAllowed="move"},pe=(ke,De,$e,Ue)=>{ke.preventDefault(),k&&k.date===De&&k.zone===$e&&k.clientName!==Ue&&ue({date:De,zone:$e,clientName:Ue})},he=(ke,De,$e,Ue,Ke)=>{if(ke.preventDefault(),!k||k.date!==De||k.zone!==$e||k.clientName===Ue){H(null),ue(null);return}const Nt=$(Ke,De).filter(ds=>ds.zone===$e),Be=J(De,$e,Nt).map(ds=>ds.stopKey),Qe=Be.indexOf(k.clientName),ss=Be.indexOf(Ue);if(Qe===-1||ss===-1){H(null),ue(null);return}const Mt=[...Be],[Rt]=Mt.splice(Qe,1);Mt.splice(ss,0,Rt);const at={...E,[De]:{...E[De]||{},[$e]:Mt}};P(at),H(null),ue(null)},ge=(ke,De,$e)=>{const Ue=t.find(Qe=>Qe.zone===De);if(!Ue){alert("No driver assigned to this zone");return}const Ke=$e.filter(Qe=>Qe.status==="ready");if(Ke.length===0){alert("No clients are ready for delivery in this zone yet.");return}const Nt=J(ke,De,Ke),Ce={date:ke,zone:De,driverName:Ue.name,driverId:Ue.id,stops:Nt.map((Qe,ss)=>({order:ss+1,clientName:Qe.clientName,displayName:Qe.displayName,address:Qe.address,phone:Qe.phone,dishes:Qe.orders.flatMap(Mt=>Mt.dishes||[]),portions:Qe.orders.reduce((Mt,Rt)=>Mt+(Rt.portions||0),0)})),savedAt:new Date().toISOString()},Be={...T,[`${ke}-${De}`]:Ce};R(Be),M&&M(Be),alert(`Route saved for ${Ue.name} on ${ke}!
${Ke.length} stop(s) ready for delivery.
The driver can now view this route in the Driver Portal.`)},Te=(ke,De,$e)=>{const Ue=$($e,ke).filter(Ce=>Ce.zone===De),Nt=J(ke,De,Ue).filter(Ce=>Ce.address).map(Ce=>encodeURIComponent(Ce.address));if(ae&&Nt.unshift(encodeURIComponent(ae)),Nt.length===0){alert("No addresses found for this zone");return}window.open(`https://www.google.com/maps/dir/${Nt.join("/")}`,"_blank")},ze=[{name:"Monday",date:Y.monday},{name:"Tuesday",date:Y.tuesday},{name:"Thursday",date:Y.thursday}],Me=ze.reduce((ke,De)=>ke+$(De.name,De.date).length,0),ts=ze.reduce((ke,De)=>ke+$(De.name,De.date).filter($e=>$e.status==="ready").length,0);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:"Week Deliveries"}),s.jsxs("p",{className:"text-gray-600",children:[Me," scheduled  ",ts," ready for delivery"]})]}),s.jsx("div",{children:s.jsx("input",{type:"date",value:S,onChange:ke=>j(ke.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}})})]}),s.jsxs("div",{className:"flex flex-wrap gap-3 text-xs",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#22c55e"}}),"Delivered"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#f59e0b"}}),"Ready"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#3b82f6"}}),"In KDS"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#6b7280"}}),"Menu Pending"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#9ca3af"}}),"No Menu"]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:ze.map(ke=>{const De=$(ke.name,ke.date),$e={};ws.forEach(Ce=>{const Be=De.filter(Qe=>Qe.zone===Ce);Be.length>0&&($e[Ce]=Be)});const Ue=De.filter(Ce=>!Ce.zone||!ws.includes(Ce.zone));Ue.length>0&&($e.Unassigned=Ue);const Ke=Object.keys($e),Nt=De.filter(Ce=>Ce.status==="ready").length;return s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold text-lg",style:{color:"#3d59ab"},children:ke.name}),s.jsx("p",{className:"text-sm text-gray-500",children:new Date(ke.date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"text-2xl font-bold",style:{color:Nt>0?"#22c55e":"#3d59ab"},children:De.length}),s.jsx("p",{className:"text-xs text-gray-500",children:Nt>0?`${Nt} ready`:"scheduled"})]})]}),s.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:De.length===0?s.jsxs("div",{className:"text-center py-4",children:[s.jsx(as,{size:32,className:"mx-auto mb-2 text-gray-300"}),s.jsx("p",{className:"text-gray-400 text-sm italic",children:"No deliveries scheduled"})]}):Ke.map(Ce=>{const Be=$e[Ce],Qe=J(ke.date,Ce,Be),ss=Ce!=="Unassigned"?t.find(at=>at.zone===Ce):null,Mt=T[`${ke.date}-${Ce}`],Rt=Be.filter(at=>at.status==="ready").length;return s.jsxs("div",{className:"border-2 rounded-lg p-3",style:{borderColor:Mt?"#22c55e":"#ebb582"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"font-bold text-sm",style:{color:"#3d59ab"},children:["Zone ",Ce]}),ss&&s.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-purple-100 text-purple-700",children:ss.name}),Mt&&s.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-green-100 text-green-700 flex items-center gap-1",children:[s.jsx(Fe,{size:10})," Saved"]})]}),s.jsxs("span",{className:"text-xs text-gray-500",children:[Be.length," stops ",Rt>0&&`(${Rt} ready)`]})]}),s.jsxs("p",{className:"text-xs text-gray-400 mb-2 flex items-center gap-1",children:[s.jsx(gl,{size:12})," Drag to reorder route"]}),s.jsx("div",{className:"space-y-1 mb-3",children:Qe.map((at,ds)=>{const jn=(k==null?void 0:k.date)===ke.date&&(k==null?void 0:k.zone)===Ce&&(k==null?void 0:k.clientName)===at.stopKey,xe=(I==null?void 0:I.date)===ke.date&&(I==null?void 0:I.zone)===Ce&&(I==null?void 0:I.clientName)===at.stopKey;return s.jsxs("div",{draggable:at.status!=="delivered",onDragStart:Ne=>te(Ne,ke.date,Ce,at.stopKey),onDragOver:Ne=>pe(Ne,ke.date,Ce,at.stopKey),onDragLeave:js,onDrop:Ne=>he(Ne,ke.date,Ce,at.stopKey,ke.name),onDragEnd:Ns,className:`p-2 rounded text-sm flex items-center gap-2 ${at.status==="delivered"?"opacity-60":jn?"opacity-50":"cursor-move"}`,style:{backgroundColor:at.bgColor,borderLeft:xe?"3px solid #3d59ab":"3px solid transparent"},children:[s.jsx("span",{className:"font-bold text-xs w-5 text-center",style:{color:"#3d59ab"},children:ds+1}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsx("span",{className:at.status==="delivered"?"line-through text-gray-400":"",children:at.displayName})}),s.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded",style:{backgroundColor:at.color+"20",color:at.color},children:at.label}),at.status!=="delivered"&&s.jsx(gl,{size:14,className:"text-gray-300"})]},at.stopKey)})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>ge(ke.date,Ce,Be),disabled:Rt===0,className:`flex-1 flex items-center justify-center gap-1 px-2 py-1.5 rounded text-white text-xs ${Rt===0?"opacity-50 cursor-not-allowed":""}`,style:{backgroundColor:"#3d59ab"},title:Rt===0?"No clients ready for delivery":"Save route to driver portal",children:[s.jsx(Bh,{size:12}),"Save Route ",Rt>0&&`(${Rt})`]}),s.jsx("button",{onClick:()=>Te(ke.date,Ce,ke.name),className:"flex items-center justify-center gap-1 px-2 py-1.5 rounded text-white text-xs",style:{backgroundColor:"#27ae60"},title:"Open in Google Maps",children:s.jsx(M0,{size:12})})]})]},Ce)})})]},ke.name)})})]})})(),u==="drivers"&&(()=>{const w=()=>{if(!G.name){alert("Please enter a driver name");return}n&&n([...t,{...G,id:Date.now()}]),K({...Lr}),l&&l({...Lr})},Y=te=>{window.confirm("Delete this driver?")&&n&&n(t.filter((pe,he)=>he!==te))},re=te=>{B(te),oe({...t[te]})},$=()=>{B(null),oe(null)},J=()=>{if(n){const te=[...t];te[A]=ne,n(te)}B(null),oe(null)};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:"Route Settings"}),s.jsx(sn,{label:"Starting Address (for all routes)",children:s.jsx("input",{type:"text",value:ae,onChange:te=>D(te.target.value),placeholder:"e.g., 123 Kitchen St, City, State",className:nn+" w-full md:w-1/2",style:rn})}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This address will be used as the starting point when generating Google Maps routes."})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:"Add Driver"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(sn,{label:"Driver Name",children:s.jsx("input",{type:"text",value:G.name,onChange:te=>K({...G,name:te.target.value}),placeholder:"Enter driver name",className:nn,style:rn})}),s.jsx(sn,{label:"Phone",children:s.jsx("input",{type:"tel",value:G.phone||"",onChange:te=>K({...G,phone:te.target.value}),placeholder:"Phone number",className:nn,style:rn})}),s.jsx(sn,{label:"Zone",children:s.jsxs("select",{value:G.zone||"",onChange:te=>K({...G,zone:te.target.value}),className:nn,style:rn,children:[s.jsx("option",{value:"",children:"Unassigned"}),ws.map(te=>s.jsxs("option",{value:te,children:["Zone ",te]},te))]})}),s.jsx(sn,{label:"Access Code",children:s.jsx("input",{type:"text",value:G.accessCode||"",onChange:te=>K({...G,accessCode:te.target.value}),placeholder:"Access code",className:nn,style:rn})})]}),s.jsxs("button",{onClick:w,className:"mt-4 px-6 py-2 rounded-lg text-white flex items-center gap-2",style:{backgroundColor:"#3d59ab"},children:[s.jsx(gs,{size:20}),"Add Driver"]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:["Drivers (",t.length,")"]}),t.length>0?s.jsx("div",{className:"space-y-3",children:t.map((te,pe)=>s.jsx("div",{children:A===pe?s.jsxs("div",{className:"border-2 rounded-lg p-4",style:{borderColor:"#3d59ab",backgroundColor:"#f9f9ed"},children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(sn,{label:"Driver Name",children:s.jsx("input",{type:"text",value:ne.name,onChange:he=>oe({...ne,name:he.target.value}),className:nn,style:rn})}),s.jsx(sn,{label:"Phone",children:s.jsx("input",{type:"tel",value:ne.phone||"",onChange:he=>oe({...ne,phone:he.target.value}),className:nn,style:rn})}),s.jsx(sn,{label:"Zone",children:s.jsxs("select",{value:ne.zone||"",onChange:he=>oe({...ne,zone:he.target.value}),className:nn,style:rn,children:[s.jsx("option",{value:"",children:"Unassigned"}),ws.map(he=>s.jsxs("option",{value:he,children:["Zone ",he]},he))]})}),s.jsx(sn,{label:"Access Code",children:s.jsx("input",{type:"text",value:ne.accessCode||"",onChange:he=>oe({...ne,accessCode:he.target.value}),className:nn,style:rn})})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsxs("button",{onClick:J,className:"flex items-center gap-1 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[s.jsx(Fe,{size:18}),"Save"]}),s.jsxs("button",{onClick:$,className:"flex items-center gap-1 px-4 py-2 rounded-lg bg-gray-200",children:[s.jsx(wt,{size:18}),"Cancel"]})]})]}):s.jsxs("div",{className:"border-2 rounded-lg p-4 flex justify-between",style:{borderColor:"#ebb582"},children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("h4",{className:"font-bold text-lg",children:te.name}),te.zone&&s.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-purple-100 text-purple-700",children:["Zone ",te.zone]})]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[te.phone&&`Phone: ${te.phone}`,te.phone&&te.accessCode&&"  ",te.accessCode&&`Code: ${te.accessCode}`]})]}),s.jsxs("div",{className:"flex gap-2 self-start ml-4",children:[s.jsx("button",{onClick:()=>re(pe),className:"text-blue-600",children:s.jsx(ur,{size:18})}),s.jsx("button",{onClick:()=>Y(pe),className:"text-red-600",children:s.jsx($s,{size:18})})]})]})},te.id||pe))}):s.jsx("p",{className:"text-gray-500",children:"No drivers yet. Add your first driver above."})]})]})})()]})}function pv(){To();const[e,t]=g.useState("kds"),{recipes:n,setRecipes:r,menuItems:l,setMenuItems:a,selectedClients:o,setSelectedClients:c,menuDate:i,setMenuDate:d,clients:m,setClients:y,newClient:x,setNewClient:C,newRecipe:U,setNewRecipe:N,newMenuItem:z,setNewMenuItem:f,masterIngredients:p,setMasterIngredients:h,newIngredient:M,setNewIngredient:T,editingRecipe:F,setEditingRecipe:R,editingIngredientId:u,setEditingIngredientId:b,editingIngredientData:S,setEditingIngredientData:j,duplicateWarnings:k,setDuplicateWarnings:H,completedDishes:I,setCompletedDishes:ue,orderHistory:E,setOrderHistory:L,weeklyTasks:P,setWeeklyTasks:A,drivers:B,setDrivers:ne,newDriver:oe,setNewDriver:G,deliveryLog:K,setDeliveryLog:ce,bagReminders:ee,setBagReminders:le,readyForDelivery:W,setReadyForDelivery:_,clientPortalData:V,setClientPortalData:Z,weeks:X,setWeeks:ae,selectedWeekId:ye,setSelectedWeekId:D,findSimilarIngredients:O,findExactMatch:de,addToMasterIngredients:ie,updateMasterIngredientCost:be,syncRecipeIngredientsFromMaster:ve,getUniqueVendors:He,mergeIngredients:Ae,scanForDuplicates:Oe,getRecipeCost:Pe,getRecipeCounts:st,getOrCreateWeek:qe,getCurrentWeek:rt,lockWeekAndSnapshot:pt,unlockWeekById:Pt,updateWeekData:Ct,updateWeekKdsStatus:It,addReadyForDeliveryToWeek:jt,addDeliveryLogToWeek:lt,removeReadyForDeliveryFromWeek:ut,isWeekReadOnly:Ge,getWeekIds:Lt,units:Qt,addUnit:Ws}=lv(),js=g.useRef(),Hs=g.useRef(),Ns=g.useRef();g.useEffect(()=>{ye&&d(ye)},[ye,d]);const Vs=xe=>{const Ne=xe.target.files[0];if(Ne){try{Zh(Ne,je=>{if(console.log("Parsed clients:",je),je.length===0){alert(`No subscriptions found in CSV. Please check the file format.

Expected columns: Name, Display Name, Address, Email, Phone, Portions, Meals, etc.`);return}const Ie=je.reduce((_e,Ze)=>{var Ft;return _e+(((Ft=Ze.contacts)==null?void 0:Ft.length)||0)},0);y(je),alert(`Import successful!

${je.length} subscription(s) imported
${Ie} contact(s) total`)},je=>{console.error("CSV parse error:",je),alert("Error parsing CSV: "+(je.message||je))})}catch(je){console.error("Import error:",je),alert("Error importing CSV: "+je.message)}xe.target.value=""}},se=xe=>{const Ne=xe.target.files[0];Ne&&(Jh(Ne,je=>{if(je.length===0){alert("No ingredients found in CSV. Please check the file format.");return}h(je),alert(`Import successful!

${je.length} ingredient(s) imported`)},je=>alert("Error parsing CSV: "+je.message)),xe.target.value="")},w=xe=>{const Ne=xe.target.files[0];Ne&&(rv(Ne,(je,Ie)=>{const _e=Object.values(je).flat().length;if(_e===0){alert("No recipes found in CSV. Please check the file format.");return}r(je),Ie.forEach(Ze=>ie(Ze)),alert(`Import successful!

${_e} recipe(s) imported
${Ie.length} ingredient(s) added to master list`)},je=>alert("Error parsing CSV: "+je.message)),xe.target.value="")},Y=()=>{if(!U.name){alert("Please enter a recipe name");return}const xe=U.ingredients.filter(Ne=>Ne.name&&Ne.quantity);if(xe.length===0){alert("Please add at least one ingredient with name and quantity");return}xe.forEach(Ne=>ie(Ne)),r({...n,[U.category]:[...n[U.category],{name:U.name,instructions:U.instructions,ingredients:xe}]}),N(po),alert("Recipe saved!")},re=(xe,Ne)=>{window.confirm("Delete this recipe?")&&r({...n,[xe]:n[xe].filter((je,Ie)=>Ie!==Ne)})},$=(xe,Ne)=>{const je=n[xe][Ne],Ie={...je,name:`${je.name} (Copy)`,ingredients:je.ingredients.map(_e=>({..._e}))};r({...n,[xe]:[...n[xe],Ie]})},J=(xe,Ne)=>{const je=n[xe][Ne];R({category:xe,index:Ne,recipe:{...je,ingredients:je.ingredients.map(Ie=>({name:Ie.name||"",quantity:Ie.quantity||"",unit:Ie.unit||"oz",cost:Ie.cost||"",source:Ie.source||"",section:Ie.section||"Other"}))}})},te=(xe,Ne,je)=>{const Ie=[...F.recipe.ingredients];Ie[xe][Ne]=je,R({...F,recipe:{...F.recipe,ingredients:Ie}})},pe=()=>{R({...F,recipe:{...F.recipe,ingredients:[...F.recipe.ingredients,{name:"",quantity:"",unit:"oz",cost:"",source:"",section:"Other"}]}})},he=xe=>{R({...F,recipe:{...F.recipe,ingredients:F.recipe.ingredients.filter((Ne,je)=>je!==xe)}})},ge=()=>{const{category:xe,index:Ne,recipe:je}=F,Ie=je.ingredients.filter(Ze=>Ze.name&&Ze.quantity);Ie.forEach(Ze=>ie(Ze));const _e={...n};_e[xe][Ne]={...je,ingredients:Ie},r(_e),R(null),alert("Recipe updated!")},Te=()=>{const xe={};return l.forEach(Ne=>{xe[Ne.clientName]||(xe[Ne.clientName]=[]),xe[Ne.clientName].push(Ne)}),xe},ze=()=>l.filter(xe=>xe.approved),Me=X[ye]||null,ts=()=>{var xe;if((Me==null?void 0:Me.status)==="locked"&&((xe=Me.snapshot)!=null&&xe.menu)){const Ne=[];return Object.entries(Me.snapshot.menu).forEach(([je,Ie])=>{Ie.forEach(_e=>{Ne.push({..._e,clientName:je,approved:!0})})}),Ne}return l.filter(Ne=>Ys(Ne.date)===ye)},ke=()=>ts().filter(Ne=>Ne.approved),De=xe=>xe&&new Date(xe+"T12:00:00").getDay()===4?"thursday":"monTue",$e=()=>{const xe={monTue:{protein:{},veg:{},starch:{},extras:{}},thursday:{protein:{},veg:{},starch:{},extras:{}}};return ke().forEach(je=>{const Ie=De(je.date);["protein","veg","starch"].forEach(_e=>{je[_e]&&(xe[Ie][_e][je[_e]]||(xe[Ie][_e][je[_e]]={totalPortions:0,category:_e,clients:[]}),xe[Ie][_e][je[_e]].totalPortions+=je.portions,xe[Ie][_e][je[_e]].clients.push({name:je.clientName,portions:je.portions,date:je.date}))}),je.extras&&je.extras.forEach(_e=>{var Ft,zt;const Ze=(Ft=n.sauces)!=null&&Ft.find(ks=>ks.name===_e)?"sauces":(zt=n.breakfast)!=null&&zt.find(ks=>ks.name===_e)?"breakfast":"soups";xe[Ie].extras[_e]||(xe[Ie].extras[_e]={totalPortions:0,category:Ze,clients:[]}),xe[Ie].extras[_e].totalPortions+=je.portions,xe[Ie].extras[_e].clients.push({name:je.clientName,portions:je.portions,date:je.date})})}),xe},Ue=xe=>{ue(Ne=>({...Ne,[xe]:!Ne[xe]}))},Ke=()=>{const xe=$e(),Ne=[];return["monTue","thursday"].forEach(je=>{["protein","veg","starch","extras"].forEach(Ie=>{Object.keys(xe[je][Ie]).forEach(_e=>{Ne.push(_e)})})}),Ne.length>0&&Ne.every(je=>I[je])},Nt=()=>{if(!window.confirm("Mark all orders complete and move to Ready for Delivery?"))return;const xe=Te(),Ne=[];Object.entries(xe).forEach(([Ie,_e])=>{_e.forEach(Ze=>{const Ft=[Ze.protein,Ze.veg,Ze.starch,...Ze.extras||[]].filter(Boolean);let zt=0;Ft.forEach(ks=>{const us=["protein","veg","starch","sauces","breakfast","soups"].find(Ts=>{var Tt;return(Tt=n[Ts])==null?void 0:Tt.find(Bt=>Bt.name===ks)}),Nn=us?n[us].find(Ts=>Ts.name===ks):null;Nn&&(zt+=Pe(Nn)*Ze.portions)}),Ne.push({id:Date.now()+Math.random(),clientName:Ie,date:Ze.date||i,dishes:Ft,portions:Ze.portions,cost:zt})})});const je={};Ne.forEach(Ie=>{const _e=Ys(Ie.date);je[_e]||(je[_e]=[]),je[_e].push(Ie)}),Object.entries(je).forEach(([Ie,_e])=>{jt(Ie,_e)}),_(Ie=>[...Ie,...Ne]),a([]),ue({}),c([]),alert("Orders ready for delivery!")},Ce=()=>{const xe={Sunday:{},Tuesday:{},Thursday:{}},Ne=ke(),je=_e=>(_e||"").toLowerCase().trim().replace(/\s+/g," ");Ne.forEach(_e=>{const Ze=m.find(us=>us.name===_e.clientName||us.displayName===_e.clientName),Ft=(Ze==null?void 0:Ze.deliveryDay)||"";let zt="Sunday";Ft==="Tuesday"?zt="Tuesday":Ft==="Thursday"&&(zt="Thursday"),[_e.protein,_e.veg,_e.starch,..._e.extras||[]].filter(Boolean).forEach(us=>{const Nn=["protein","veg","starch","sauces","breakfast","soups"].find(Tt=>{var Bt;return(Bt=n[Tt])==null?void 0:Bt.find(Xr=>Xr.name===us)}),Ts=Nn?n[Nn].find(Tt=>Tt.name===us):null;Ts!=null&&Ts.ingredients&&Ts.ingredients.forEach(Tt=>{const Bt=de(Tt.name),Xr=je(Tt.name),el=(Tt.unit||"oz").toLowerCase().trim(),kn=`${Xr}|${el}`;xe[zt][kn]||(xe[zt][kn]={name:Tt.name.trim(),quantity:0,unit:el,section:Tt.section||(Bt==null?void 0:Bt.section)||sv(Tt.name),cost:(Bt==null?void 0:Bt.cost)||Tt.cost||"",source:(Bt==null?void 0:Bt.source)||Tt.source||"",recipes:[]}),xe[zt][kn].quantity+=parseFloat(Tt.quantity||0)*(_e.portions||1),xe[zt][kn].recipes.includes(us)||xe[zt][kn].recipes.push(us)})})});const Ie=_e=>Object.values(_e).sort((Ze,Ft)=>{const zt=(Ze.source||"ZZZ").localeCompare(Ft.source||"ZZZ");if(zt!==0)return zt;const ks=(Ze.section||"ZZZ").localeCompare(Ft.section||"ZZZ");return ks!==0?ks:Ze.name.localeCompare(Ft.name)});return{Sunday:Ie(xe.Sunday),Tuesday:Ie(xe.Tuesday),Thursday:Ie(xe.Thursday)}},Be=()=>{const xe=Ce();return[...xe.Sunday,...xe.Tuesday,...xe.Thursday]},Qe=()=>{const xe=Be();vd(Jr.unparse(xe.map(Ne=>({Source:Ne.source,Section:Ne.section,Ingredient:Ne.name,Quantity:Ne.quantity.toFixed(2),Unit:Ne.unit})),{columns:["Source","Section","Ingredient","Quantity","Unit"]}),"shopping-list.csv")},ss=Be(),Mt=Ge(ye),Rt=xe=>{const Ne=localStorage.getItem("goldfinchChefData");let je={};if(Ne)try{je=JSON.parse(Ne)}catch(_e){console.error("Error parsing saved data:",_e)}const Ie={...je,savedRoutes:xe,lastSaved:new Date().toISOString()};localStorage.setItem("goldfinchChefData",JSON.stringify(Ie))},at=()=>{var xe;return((xe=Me==null?void 0:Me.readyForDelivery)==null?void 0:xe.length)>0?Me.readyForDelivery:W.filter(Ne=>Ys(Ne.date)===ye)},ds=()=>{var xe;return((xe=Me==null?void 0:Me.deliveryLog)==null?void 0:xe.length)>0?Me.deliveryLog:K.filter(Ne=>Ys(Ne.date)===ye)},jn=()=>(Me==null?void 0:Me.kdsStatus)||{};return s.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("input",{type:"file",ref:js,onChange:Vs,accept:".csv",className:"hidden"}),s.jsx("input",{type:"file",ref:Hs,onChange:w,accept:".csv",className:"hidden"}),s.jsx("input",{type:"file",ref:Ns,onChange:se,accept:".csv",className:"hidden"}),s.jsx("header",{className:"text-white p-4",style:{backgroundColor:"#3d59ab"},children:s.jsxs("div",{className:"flex items-center justify-between max-w-6xl mx-auto",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Xs,{size:32,style:{color:"#ffd700"}}),s.jsx("h1",{className:"text-2xl font-bold",children:"Goldfinch Chef"})]}),s.jsxs(Vr,{to:"/admin",className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition-colors",children:[s.jsx($0,{size:20}),"Admin"]})]})}),s.jsx("nav",{className:"bg-white shadow-md sticky top-0 z-10",children:s.jsx("div",{className:"max-w-6xl mx-auto flex overflow-x-auto",children:s.jsx(Y0,{activeTab:e,setActiveTab:t})})}),s.jsxs("div",{className:"max-w-6xl mx-auto p-4 space-y-6",children:[["kds","deliveries"].includes(e)&&s.jsx(Yh,{selectedWeekId:ye,setSelectedWeekId:D,weeks:X,onLockWeek:pt,onUnlockWeek:Pt}),["kds","deliveries"].includes(e)&&s.jsx(Z0,{menuItems:ts(),completedDishes:jn(),readyForDelivery:at(),deliveryLog:ds(),orderHistory:E,selectedDate:i,onNavigate:t}),e==="recipes"&&s.jsx(Xh,{recipes:n,newRecipe:U,setNewRecipe:N,editingRecipe:F,setEditingRecipe:R,masterIngredients:p,recipesFileRef:Hs,findExactMatch:de,findSimilarIngredients:O,getRecipeCost:Pe,getRecipeCounts:st,saveRecipe:Y,deleteRecipe:re,startEditingRecipe:J,saveEditingRecipe:ge,updateEditingIngredient:te,addEditingIngredient:pe,removeEditingIngredient:he,exportRecipesCSV:()=>Qh(n),getUniqueVendors:He,updateMasterIngredientCost:be,syncRecipeIngredientsFromMaster:ve,units:Qt,addUnit:Ws,duplicateRecipe:$}),e==="kds"&&s.jsx(ov,{menuItems:ze(),recipes:n,completedDishes:I,toggleDishComplete:Ue,allDishesComplete:Ke,completeAllOrders:Nt,getKDSView:$e}),e==="prep"&&s.jsx(dv,{prepList:ss,shoppingListsByDay:Ce(),exportPrepList:Qe}),e==="deliveries"&&s.jsx(mv,{clients:m,drivers:B,setDrivers:ne,newDriver:oe,setNewDriver:G,deliveryLog:ds(),setDeliveryLog:ce,bagReminders:ee,setBagReminders:le,readyForDelivery:at(),setReadyForDelivery:_,orderHistory:E,setOrderHistory:L,selectedWeekId:ye,weeks:X,addDeliveryLogToWeek:lt,removeReadyForDeliveryFromWeek:ut,isReadOnly:Mt,menuItems:ts(),clientPortalData:V,saveDriverRoutes:Rt})]})]})}const ka="goldfinchChefData";function hv(){const[e,t]=g.useState([]),[n,r]=g.useState([]),[l,a]=g.useState([]),[o,c]=g.useState([]),[i,d]=g.useState([]),[m,y]=g.useState([]),[x,C]=g.useState({}),[U,N]=g.useState({}),[z,f]=g.useState(!1);g.useEffect(()=>{const u=()=>{const S=localStorage.getItem(ka);if(S)try{const j=JSON.parse(S);j.drivers&&t(j.drivers),j.clients&&r(j.clients),j.readyForDelivery&&a(j.readyForDelivery),j.deliveryLog&&c(j.deliveryLog),j.orderHistory&&d(j.orderHistory),j.menuItems&&y(j.menuItems),j.savedRoutes&&C(j.savedRoutes),j.clientPortalData&&N(j.clientPortalData)}catch(j){console.error("Error loading saved data:",j)}f(!0)};u();const b=S=>{S.key===ka&&u()};return window.addEventListener("storage",b),()=>window.removeEventListener("storage",b)},[]);const p=g.useCallback(u=>{const b=localStorage.getItem(ka);let S={};if(b)try{S=JSON.parse(b)}catch(k){console.error("Error parsing saved data:",k)}const j={...S,...u,lastSaved:new Date().toISOString()};localStorage.setItem(ka,JSON.stringify(j))},[]),h=g.useCallback(u=>{c(u),p({deliveryLog:u})},[p]),M=g.useCallback(u=>{a(u),p({readyForDelivery:u})},[p]),T=g.useCallback(u=>{d(u),p({orderHistory:u})},[p]),F=g.useCallback(u=>e.find(b=>b.accessCode===u),[e]),R=g.useCallback(u=>e.find(b=>b.name===u),[e]);return{drivers:e,clients:n,readyForDelivery:l,deliveryLog:o,orderHistory:i,menuItems:m,savedRoutes:x,clientPortalData:U,isLoaded:z,updateDeliveryLog:h,updateReadyForDelivery:M,updateOrderHistory:T,authenticateDriver:F,getDriverByName:R}}const ht={HAND:"hand",PORCH:"porch"},ln={DELIVERED:{key:"delivered",label:"Delivered",color:"#22c55e",icon:Fe},READY:{key:"ready",label:"Ready",color:"#f59e0b",icon:as},IN_KDS:{key:"kds",label:"In Kitchen",color:"#3b82f6",icon:Xs},PENDING:{key:"pending",label:"Menu Pending",color:"#6b7280",icon:gd},NONE:{key:"none",label:"No Menu",color:"#9ca3af",icon:Hn}};function fv(){var Ns,Vs;const[e]=_h(),{clients:t,readyForDelivery:n,deliveryLog:r,orderHistory:l,menuItems:a,savedRoutes:o,clientPortalData:c,isLoaded:i,updateDeliveryLog:d,updateReadyForDelivery:m,updateOrderHistory:y,authenticateDriver:x,getDriverByName:C}=hv(),[U,N]=g.useState(""),[z,f]=g.useState(null),[p,h]=g.useState(""),[M,T]=g.useState(!1);g.useEffect(()=>{if(i&&!z){const se=e.get("admin_driver");if(se){const w=C(se);w&&(f(w),T(!0))}}},[i,e,z,C]);const[F,R]=g.useState(0),[u,b]=g.useState(ht.HAND),[S,j]=g.useState(null),[k,H]=g.useState(null),[I,ue]=g.useState(!1),[E,L]=g.useState(!1),[P,A]=g.useState(""),[B,ne]=g.useState(""),[oe,G]=g.useState(!1),[K,ce]=g.useState(!1),[ee,le]=g.useState([]),[W,_]=g.useState(!1);g.useState(!1);const[V,Z]=g.useState(null),[X,ae]=g.useState(null),ye=g.useRef(null),D=new Date().toISOString().split("T")[0],O=V||D,de=O!==D,ie=(se,w)=>r.some(Y=>Y.clientName===se&&Y.date===w)?ln.DELIVERED:n.some(Y=>Y.clientName===se&&Y.date===w)?ln.READY:a.some(Y=>Y.clientName===se&&Y.approved&&Y.date===w)?ln.IN_KDS:a.some(Y=>Y.clientName===se&&!Y.approved&&Y.date===w)?ln.PENDING:ln.NONE,be=se=>{const w=new Date(se+"T12:00:00");return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][w.getDay()]},ve=(se,w)=>{var $,J;if(!se||se.status!=="active"||se.pickup)return!1;const Y=be(w);if(se.deliveryDay===Y||($=se.deliveryDates)!=null&&$.includes(w))return!0;const re=c[se.name];return!!((J=re==null?void 0:re.selectedDates)!=null&&J.includes(w))},He=()=>{if(!z)return[];const se=[],w=new Date(D);for(let Y=0;Y<14;Y++){const re=new Date(w);re.setDate(w.getDate()+Y);const $=re.toISOString().split("T")[0];t.some(te=>te.zone===z.zone&&ve(te,$))&&se.push($)}return se},Ae=()=>z?n.filter(se=>{const w=t.find(Y=>Y.name===se.clientName);return w&&w.zone===z.zone&&!w.pickup}).map(se=>{const w=t.find(re=>re.name===se.clientName),Y=r.some(re=>re.clientName===se.clientName&&re.date===se.date);return{...se,displayName:(w==null?void 0:w.displayName)||se.clientName,address:(w==null?void 0:w.address)||"",zone:w==null?void 0:w.zone,isDelivered:Y}}).filter(se=>!se.isDelivered).sort((se,w)=>new Date(se.date)-new Date(w.date)):[];He();const Oe=Ae(),Pe=se=>{var $;if(!z)return[];const w=t.filter(J=>J.zone===z.zone&&ve(J,se)).map(J=>{const te=ie(J.name,se),pe=n.filter(he=>he.clientName===J.name&&he.date===se);return{clientName:J.name,displayName:J.displayName||J.name,address:J.address||"",orders:pe,zone:J.zone,date:se,status:te.key,statusInfo:te,isReady:te.key==="ready",isDelivered:te.key==="delivered"}}),Y=`${se}-${z.zone}`,re=o==null?void 0:o[Y];if((($=re==null?void 0:re.stops)==null?void 0:$.length)>0){const J=[],te=new Set;return re.stops.forEach(pe=>{const he=w.find(ge=>ge.clientName===pe.clientName);he&&!te.has(he.clientName)&&(J.push(he),te.add(he.clientName))}),w.forEach(pe=>{te.has(pe.clientName)||J.push(pe)}),J}return w},st=se=>Pe(se).filter(w=>w.isReady),qe=Pe(O),rt=st(O),pt=st(D),Pt=rt.filter(se=>!ee.includes(se.clientName)&&!se.isDelivered),Ct=Pt[F],It=se=>r.some(w=>w.date===D&&w.clientName===se);g.useEffect(()=>{if(z&&i&&!de){const se=pt.filter(w=>It(w.clientName)).map(w=>w.clientName);le(se)}},[z,i,pt.length,de]),g.useEffect(()=>{z&&rt.length>0&&Pt.length===0&&_(!0)},[z,rt.length,Pt.length]);const jt=se=>{se.preventDefault();const w=x(U);w?(f(w),h("")):h("Invalid access code")},lt=()=>{f(null),N(""),R(0),le([]),_(!1),ut()},ut=()=>{b(ht.HAND),j(null),H(null),ue(!1),A(""),ne(""),L(!1)},Ge=se=>{const w=se.target.files[0];if(w){j(w);const Y=new FileReader;Y.onloadend=()=>{H(Y.result)},Y.readAsDataURL(w)}},Lt=(se=null,w="")=>{const Y=X||Ct;if(!Y)return;const re=Y.date||D;if(u===ht.PORCH&&!S&&!se){alert("Photo is required for porch drops");return}if(se==="Other"&&!w.trim()){alert('Please provide details for "Other" problem');return}const $={id:Date.now(),date:re,clientName:Y.clientName,zone:z.zone,driverName:z.name,completedAt:new Date().toISOString(),handoffType:u,photoData:k,bagsReturned:I,problem:se,problemNote:w},J=[...r,$];d(J);const te=n.filter(pe=>pe.clientName===Y.clientName&&pe.date===re);te.length>0&&(y([...l,...te]),m(n.filter(pe=>!(pe.clientName===Y.clientName&&pe.date===re)))),X?(ae(null),ut(),L(!1)):(le([...ee,Y.clientName]),ut(),L(!1),Pt.length<=1&&_(!0))},Qt=()=>{if(!P){alert("Please select a problem type");return}Lt(P,B)},Ws=()=>{if(F>0)R(F-1),ut();else if(ee.length>0){const se=ee[ee.length-1],w=r.filter(re=>!(re.date===D&&re.clientName===se));d(w);const Y=l.filter(re=>re.clientName===se&&re.date===D);Y.length>0&&(m([...n,...Y]),y(l.filter(re=>!(re.clientName===se&&re.date===D)))),le(ee.slice(0,-1)),_(!1),ut()}},js=se=>{window.open(`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(se)}`,"_blank")},Hs=()=>{const se=r.filter(w=>w.date===D&&w.driverName===(z==null?void 0:z.name));return{completed:se.length,problems:se.filter(w=>w.problem).length,bagsReturned:se.filter(w=>w.bagsReturned).length,porchDrops:se.filter(w=>w.handoffType===ht.PORCH).length,handoffs:se.filter(w=>w.handoffType===ht.HAND).length}};if(!i)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#f9f9ed"},children:s.jsxs("div",{className:"text-center",children:[s.jsx(as,{size:48,className:"mx-auto mb-4 animate-pulse",style:{color:"#3d59ab"}}),s.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(!z)return s.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:"#f9f9ed"},children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx(as,{size:48,className:"mx-auto mb-4",style:{color:"#3d59ab"}}),s.jsx("h1",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Driver Login"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Enter your access code to start deliveries"})]}),s.jsxs("form",{onSubmit:jt,children:[s.jsx("input",{type:"text",value:U,onChange:se=>N(se.target.value),placeholder:"Access Code",className:"w-full p-4 text-center text-2xl border-2 rounded-lg mb-4 tracking-widest",style:{borderColor:"#ebb582"},autoFocus:!0}),p&&s.jsx("p",{className:"text-red-600 text-center mb-4",children:p}),s.jsx("button",{type:"submit",className:"w-full py-4 rounded-lg text-white font-bold text-lg",style:{backgroundColor:"#3d59ab"},children:"Start Deliveries"})]})]})});if(oe)return s.jsx("div",{className:"min-h-screen p-4",style:{backgroundColor:"#f9f9ed"},children:s.jsxs("div",{className:"max-w-lg mx-auto",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-4 mb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:"All Scheduled"}),s.jsx("p",{className:"text-sm text-gray-500",children:O===D?"Today":new Date(O+"T12:00:00").toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})]}),s.jsx("button",{onClick:()=>G(!1),className:"px-4 py-2 rounded-lg bg-gray-200",children:"Back"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-3 mb-4",children:s.jsxs("div",{className:"flex flex-wrap gap-3 text-xs",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ln.READY.color}}),"Ready to Deliver"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ln.IN_KDS.color}}),"In Kitchen"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ln.PENDING.color}}),"Menu Pending"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:ln.DELIVERED.color}}),"Delivered"]})]})}),s.jsx("div",{className:"space-y-3",children:qe.map((se,w)=>{const Y=r.find($=>$.date===O&&$.clientName===se.clientName),re=se.statusInfo.icon;return s.jsx("div",{className:`bg-white rounded-lg shadow p-4 border-l-4 ${se.isDelivered?"opacity-60":""}`,style:{borderLeftColor:se.statusInfo.color},children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"font-bold text-lg",style:{color:"#3d59ab"},children:[w+1,"."]}),s.jsx("h3",{className:"font-bold",children:se.displayName}),s.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full flex items-center gap-1",style:{backgroundColor:se.statusInfo.color+"20",color:se.statusInfo.color},children:[s.jsx(re,{size:12}),se.statusInfo.label]})]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:se.address}),se.isReady&&se.orders.length>0&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:se.orders.map($=>{var J;return`${$.portions}p: ${(J=$.dishes)==null?void 0:J.join(", ")}`}).join(" | ")}),(Y==null?void 0:Y.problem)&&s.jsxs("p",{className:"text-sm text-red-600 mt-1 flex items-center gap-1",children:[s.jsx(bt,{size:14}),Y.problem]})]}),se.address&&s.jsx("button",{onClick:()=>js(se.address),className:"p-2 rounded-lg text-white",style:{backgroundColor:"#27ae60"},children:s.jsx(un,{size:20})})]})},se.clientName)})}),qe.length===0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",children:[s.jsx(hn,{size:48,className:"mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-gray-500",children:"No deliveries scheduled for your zone"})]})]})});if(K&&!X){const se=w=>{const Y=new Date(w+"T12:00:00"),re=be(w),$=Y.toLocaleString("en-US",{month:"short"}),J=Y.getDate();return w===D?`Today (${re})`:`${re}, ${$} ${J}`};return s.jsx("div",{className:"min-h-screen p-4",style:{backgroundColor:"#f9f9ed"},children:s.jsxs("div",{className:"max-w-lg mx-auto",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:"All Ready Orders"}),s.jsxs("p",{className:"text-sm text-gray-500",children:[Oe.length," order",Oe.length!==1?"s":""," ready for delivery"]})]}),s.jsx("button",{onClick:()=>ce(!1),className:"px-4 py-2 rounded-lg bg-gray-200",children:"Back"})]})}),Oe.length>0?s.jsx("div",{className:"space-y-4",children:Object.entries(Oe.reduce((w,Y)=>{const re=Y.date;return w[re]||(w[re]=[]),w[re].push(Y),w},{})).map(([w,Y])=>s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-bold mb-2 px-2",style:{color:"#3d59ab"},children:se(w)}),s.jsx("div",{className:"space-y-2",children:Y.map((re,$)=>{var J;return s.jsx("div",{className:"bg-white rounded-lg shadow p-4 border-l-4",style:{borderLeftColor:"#f59e0b"},children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"font-bold",children:re.displayName}),s.jsx("p",{className:"text-sm text-gray-600",children:re.address}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[re.portions,"p: ",(J=re.dishes)==null?void 0:J.join(", ")]})]}),s.jsxs("div",{className:"flex gap-2",children:[re.address&&s.jsx("button",{onClick:()=>js(re.address),className:"p-2 rounded-lg text-white",style:{backgroundColor:"#27ae60"},children:s.jsx(un,{size:20})}),s.jsx("button",{onClick:()=>ae({clientName:re.clientName,displayName:re.displayName,address:re.address,date:re.date,orders:[re]}),className:"p-2 rounded-lg text-white",style:{backgroundColor:"#f59e0b"},title:"Deliver Now",children:s.jsx(as,{size:20})})]})]})},`${re.clientName}-${re.date}-${$}`)})})]},w))}):s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",children:[s.jsx(hn,{size:48,className:"mx-auto mb-4 text-gray-300"}),s.jsx("p",{className:"text-gray-500",children:"No ready orders at this time"})]})]})})}if(X)return s.jsxs("div",{className:"min-h-screen p-4",style:{backgroundColor:"#f9f9ed"},children:[s.jsxs("div",{className:"max-w-lg mx-auto",children:[s.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("button",{onClick:()=>{ae(null),ut()},className:"flex items-center gap-2 text-gray-600",children:[s.jsx(qr,{size:20}),"Back"]}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Delivering for ",new Date(X.date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold mb-1",style:{color:"#3d59ab"},children:X.displayName}),s.jsxs("p",{className:"text-gray-600 flex items-center gap-2",children:[s.jsx(un,{size:16}),X.address||"No address"]}),((Ns=X.orders)==null?void 0:Ns[0])&&s.jsx("div",{className:"mt-3 p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:s.jsxs("p",{className:"text-sm font-medium",children:[X.orders[0].portions," portions: ",(Vs=X.orders[0].dishes)==null?void 0:Vs.join(", ")]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:[s.jsx("p",{className:"font-medium mb-3",style:{color:"#3d59ab"},children:"Handoff Type"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:()=>b(ht.HAND),className:`py-3 rounded-lg border-2 font-medium flex items-center justify-center gap-2 ${u===ht.HAND?"text-white":"bg-white"}`,style:{borderColor:"#3d59ab",backgroundColor:u===ht.HAND?"#3d59ab":"white",color:u===ht.HAND?"white":"#3d59ab"},children:[s.jsx(Gl,{size:18}),"Hand to Client"]}),s.jsxs("button",{onClick:()=>b(ht.PORCH),className:`py-3 rounded-lg border-2 font-medium flex items-center justify-center gap-2 ${u===ht.PORCH?"text-white":"bg-white"}`,style:{borderColor:"#3d59ab",backgroundColor:u===ht.PORCH?"#3d59ab":"white",color:u===ht.PORCH?"white":"#3d59ab"},children:[s.jsx(hc,{size:18}),"Porch Drop"]})]})]}),u===ht.PORCH&&s.jsxs("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:[s.jsx("p",{className:"font-medium mb-3",style:{color:"#3d59ab"},children:"Photo Proof (Required)"}),k?s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:k,alt:"Delivery",className:"w-full rounded-lg"}),s.jsx("button",{onClick:()=>{j(null),H(null)},className:"absolute top-2 right-2 p-2 rounded-full bg-red-500 text-white",children:""})]}):s.jsxs("button",{onClick:()=>{var se;return(se=ye.current)==null?void 0:se.click()},className:"w-full py-8 border-2 border-dashed rounded-lg flex flex-col items-center justify-center gap-2",style:{borderColor:"#3d59ab",color:"#3d59ab"},children:[s.jsx(pc,{size:32}),s.jsx("span",{children:"Take Photo"})]}),s.jsx("input",{type:"file",accept:"image/*",capture:"environment",ref:ye,onChange:Ge,className:"hidden"})]}),s.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:s.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:I,onChange:se=>ue(se.target.checked),className:"w-5 h-5 rounded"}),s.jsx("span",{className:"font-medium",children:"Bags Returned"})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>Lt(),className:"w-full py-4 rounded-lg text-white font-bold text-lg flex items-center justify-center gap-2",style:{backgroundColor:"#22c55e"},children:[s.jsx(Fe,{size:24}),"Complete Delivery"]}),s.jsxs("button",{onClick:()=>L(!0),className:"w-full py-3 rounded-lg border-2 font-medium flex items-center justify-center gap-2",style:{borderColor:"#dc2626",color:"#dc2626"},children:[s.jsx(bt,{size:18}),"Report Problem"]})]})]}),E&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md p-6",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:"Report Problem"}),s.jsx("div",{className:"space-y-3 mb-4",children:Uu.map(se=>s.jsx("button",{onClick:()=>A(se),className:`w-full py-3 px-4 rounded-lg text-left border-2 ${P===se?"border-red-500 bg-red-50":"border-gray-200"}`,children:se},se))}),P==="Other"&&s.jsx("textarea",{value:B,onChange:se=>ne(se.target.value),placeholder:"Describe the problem...",className:"w-full p-3 border-2 rounded-lg mb-4",rows:3}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{L(!1),A(""),ne("")},className:"flex-1 py-3 rounded-lg bg-gray-200 font-medium",children:"Cancel"}),s.jsx("button",{onClick:Qt,className:"flex-1 py-3 rounded-lg text-white font-medium",style:{backgroundColor:"#dc2626"},children:"Submit Problem"})]})]})})]});if(W){const se=Hs();return s.jsx("div",{className:"min-h-screen p-4",style:{backgroundColor:"#f9f9ed"},children:s.jsx("div",{className:"max-w-lg mx-auto",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[s.jsx("div",{className:"w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"#22c55e"},children:s.jsx(Fe,{size:40,className:"text-white"})}),s.jsx("h1",{className:"text-2xl font-bold mb-2",style:{color:"#3d59ab"},children:"All Deliveries Complete!"}),s.jsxs("p",{className:"text-gray-600 mb-6",children:["Great job, ",z.name,"!"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("p",{className:"text-3xl font-bold",style:{color:"#3d59ab"},children:se.completed}),s.jsx("p",{className:"text-sm text-gray-600",children:"Deliveries"})]}),s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:se.problems>0?"#fef2f2":"#f9f9ed"},children:[s.jsx("p",{className:"text-3xl font-bold",style:{color:se.problems>0?"#dc2626":"#3d59ab"},children:se.problems}),s.jsx("p",{className:"text-sm text-gray-600",children:"Problems"})]}),s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("p",{className:"text-3xl font-bold",style:{color:"#3d59ab"},children:se.bagsReturned}),s.jsx("p",{className:"text-sm text-gray-600",children:"Bags Returned"})]}),s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("p",{className:"text-3xl font-bold",style:{color:"#3d59ab"},children:se.porchDrops}),s.jsx("p",{className:"text-sm text-gray-600",children:"Porch Drops"})]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("button",{onClick:()=>G(!0),className:"w-full py-3 rounded-lg border-2 font-medium flex items-center justify-center gap-2",style:{borderColor:"#3d59ab",color:"#3d59ab"},children:[s.jsx(Mh,{size:20}),"View All Stops"]}),s.jsxs("button",{onClick:lt,className:"w-full py-3 rounded-lg bg-gray-200 font-medium flex items-center justify-center gap-2",children:[s.jsx(Fh,{size:20}),"Log Out"]})]})]})})})}if(Pt.length===0&&!W&&!K){const se=qe.filter(re=>!re.isDelivered).length,w=qe.filter(re=>re.status==="kds").length,Y=Oe.length;return s.jsx("div",{className:"min-h-screen p-4",style:{backgroundColor:"#f9f9ed"},children:s.jsxs("div",{className:"max-w-lg mx-auto",children:[s.jsx(Ju,{driver:z,onLogout:lt,onViewAll:()=>G(!0),onViewReady:()=>ce(!0),readyCount:Y}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",children:[s.jsx(hn,{size:48,className:"mx-auto mb-4 text-gray-300"}),s.jsx("h2",{className:"text-xl font-bold mb-2",style:{color:"#3d59ab"},children:"No Deliveries Ready Today"}),se>0?s.jsxs(s.Fragment,{children:[s.jsxs("p",{className:"text-gray-600 mb-4",children:[se," delivery",se!==1?"ies":""," scheduled for Zone ",z.zone," today, but ",se===1?"it's":"they're"," not ready yet."]}),w>0&&s.jsxs("p",{className:"text-blue-600 text-sm",children:[s.jsx(Xs,{size:16,className:"inline mr-1"}),w," in kitchen - coming soon!"]})]}):s.jsxs("p",{className:"text-gray-600",children:["No deliveries scheduled for Zone ",z.zone," today."]}),Y>0&&s.jsxs("div",{className:"mt-4 p-4 rounded-lg",style:{backgroundColor:"#fef3c7"},children:[s.jsxs("p",{className:"text-amber-800 font-medium",children:[s.jsx(as,{size:16,className:"inline mr-1"}),Y," order",Y!==1?"s":""," ready for upcoming dates"]}),s.jsx("button",{onClick:()=>ce(!0),className:"mt-2 px-4 py-2 rounded-lg text-white text-sm",style:{backgroundColor:"#f59e0b"},children:"View Ready Orders"})]}),s.jsx("button",{onClick:()=>G(!0),className:"mt-4 px-4 py-2 rounded-lg border-2",style:{borderColor:"#3d59ab",color:"#3d59ab"},children:"View All Scheduled"})]})]})})}return s.jsx("div",{className:"min-h-screen p-4",style:{backgroundColor:"#f9f9ed"},children:s.jsxs("div",{className:"max-w-lg mx-auto",children:[s.jsx(Ju,{driver:z,onLogout:lt,onViewAll:()=>G(!0),onViewReady:()=>ce(!0),readyCount:Oe.length}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-3 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"text-gray-600",children:["Stop ",ee.length+1," of ",rt.length," ready",qe.length>rt.length&&s.jsxs("span",{className:"text-gray-400 ml-1",children:["(",qe.length," scheduled)"]})]}),s.jsxs("span",{className:"font-medium",style:{color:"#3d59ab"},children:["Zone ",z.zone]})]}),s.jsx("div",{className:"h-2 bg-gray-200 rounded-full mt-2 overflow-hidden",children:s.jsx("div",{className:"h-full transition-all",style:{width:`${rt.length>0?ee.length/rt.length*100:0}%`,backgroundColor:"#3d59ab"}})})]}),Ct&&s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-4",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:Ct.displayName}),s.jsx("p",{className:"text-gray-600 mt-1",children:Ct.address}),Ct.orders.length>0&&s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:Ct.orders.map(se=>`${se.portions}p: ${se.dishes.join(", ")}`).join(" | ")})]}),s.jsxs("button",{onClick:()=>js(Ct.address),className:"w-full py-4 rounded-lg text-white font-bold text-lg flex items-center justify-center gap-2 mb-6",style:{backgroundColor:"#27ae60"},children:[s.jsx(un,{size:24}),"Navigate in Maps"]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Delivery Type"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:()=>b(ht.HAND),className:`p-4 rounded-lg border-2 flex flex-col items-center gap-2 transition-all ${u===ht.HAND?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[s.jsx(Gl,{size:24,style:{color:u===ht.HAND?"#3d59ab":"#9ca3af"}}),s.jsx("span",{className:u===ht.HAND?"font-medium":"text-gray-500",children:"Hand-off"})]}),s.jsxs("button",{onClick:()=>b(ht.PORCH),className:`p-4 rounded-lg border-2 flex flex-col items-center gap-2 transition-all ${u===ht.PORCH?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[s.jsx(hc,{size:24,style:{color:u===ht.PORCH?"#3d59ab":"#9ca3af"}}),s.jsx("span",{className:u===ht.PORCH?"font-medium":"text-gray-500",children:"Porch Drop"})]})]})]}),u===ht.PORCH&&s.jsxs("div",{className:"mb-6",children:[s.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Photo ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:Ge,ref:ye,className:"hidden"}),k?s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:k,alt:"Delivery photo",className:"w-full h-48 object-cover rounded-lg"}),s.jsx("button",{onClick:()=>{var se;return(se=ye.current)==null?void 0:se.click()},className:"absolute bottom-2 right-2 px-3 py-1 rounded bg-white shadow text-sm",children:"Retake"})]}):s.jsxs("button",{onClick:()=>{var se;return(se=ye.current)==null?void 0:se.click()},className:"w-full h-32 border-2 border-dashed rounded-lg flex flex-col items-center justify-center gap-2",style:{borderColor:"#ebb582"},children:[s.jsx(pc,{size:32,className:"text-gray-400"}),s.jsx("span",{className:"text-gray-500",children:"Take Photo"})]})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bags Returned?"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:()=>ue(!0),className:`p-3 rounded-lg border-2 flex items-center justify-center gap-2 ${I?"border-green-500 bg-green-50":"border-gray-200"}`,children:[s.jsx(In,{size:20,style:{color:I?"#22c55e":"#9ca3af"}}),s.jsx("span",{className:I?"font-medium text-green-700":"text-gray-500",children:"Yes"})]}),s.jsxs("button",{onClick:()=>ue(!1),className:`p-3 rounded-lg border-2 flex items-center justify-center gap-2 ${I?"border-gray-200":"border-amber-500 bg-amber-50"}`,children:[s.jsx(In,{size:20,style:{color:I?"#9ca3af":"#f59e0b"}}),s.jsx("span",{className:I?"text-gray-500":"font-medium text-amber-700",children:"No"})]})]})]}),s.jsxs("button",{onClick:()=>L(!0),className:"w-full py-3 rounded-lg border-2 border-red-300 text-red-600 font-medium flex items-center justify-center gap-2 mb-4",children:[s.jsx(bt,{size:20}),"Problem with Delivery"]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs("button",{onClick:Ws,className:"flex-1 py-4 rounded-lg bg-gray-200 font-medium flex items-center justify-center gap-2",disabled:F===0&&ee.length===0,children:[s.jsx(qr,{size:20}),"Back"]}),s.jsxs("button",{onClick:()=>Lt(),className:"flex-[2] py-4 rounded-lg text-white font-bold flex items-center justify-center gap-2",style:{backgroundColor:"#3d59ab"},children:["Complete Delivery",s.jsx(ql,{size:20})]})]})]}),E&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:"Report Problem"}),s.jsx("div",{className:"space-y-3 mb-4",children:Uu.map(se=>s.jsx("button",{onClick:()=>A(se),className:`w-full p-3 rounded-lg border-2 text-left ${P===se?"border-red-500 bg-red-50":"border-gray-200"}`,children:se},se))}),P==="Other"&&s.jsx("textarea",{value:B,onChange:se=>ne(se.target.value),placeholder:"Please describe the problem...",className:"w-full p-3 border-2 rounded-lg mb-4",style:{borderColor:"#ebb582"},rows:3}),P&&P!=="Other"&&s.jsx("textarea",{value:B,onChange:se=>ne(se.target.value),placeholder:"Additional notes (optional)",className:"w-full p-3 border-2 rounded-lg mb-4",style:{borderColor:"#ebb582"},rows:2}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>{L(!1),A(""),ne("")},className:"flex-1 py-3 rounded-lg bg-gray-200 font-medium",children:"Cancel"}),s.jsx("button",{onClick:Qt,className:"flex-1 py-3 rounded-lg text-white font-medium",style:{backgroundColor:"#dc2626"},children:"Submit Problem"})]})]})})]})})}function Ju({driver:e,onLogout:t,onViewAll:n,onViewReady:r,readyCount:l=0}){return s.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:"#3d59ab"},children:s.jsx(as,{size:20,className:"text-white"})}),s.jsxs("div",{children:[s.jsx("p",{className:"font-bold",style:{color:"#3d59ab"},children:e.name}),s.jsxs("p",{className:"text-sm text-gray-500",children:["Zone ",e.zone]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[r&&l>0&&s.jsxs("button",{onClick:r,className:"relative p-2 rounded-lg",style:{backgroundColor:"#fef3c7"},title:"View All Ready Orders",children:[s.jsx(hn,{size:20,style:{color:"#f59e0b"}}),s.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full text-xs text-white flex items-center justify-center",style:{backgroundColor:"#f59e0b"},children:l})]}),s.jsx("button",{onClick:n,className:"p-2 rounded-lg bg-gray-100",title:"View All Stops",children:s.jsx(Mh,{size:20,className:"text-gray-600"})}),s.jsx("button",{onClick:t,className:"p-2 rounded-lg bg-gray-100",title:"Log Out",children:s.jsx(Fh,{size:20,className:"text-gray-600"})})]})]})})}const wa="goldfinchChefData";function xv(){const[e,t]=g.useState([]),[n,r]=g.useState([]),[l,a]=g.useState([]),[o,c]=g.useState([]),[i,d]=g.useState([]),[m,y]=g.useState({}),[x,C]=g.useState({}),[U,N]=g.useState([]),[z,f]=g.useState(!1);g.useEffect(()=>{const j=()=>{const H=localStorage.getItem(wa);if(H)try{const I=JSON.parse(H);I.clients&&t(I.clients),I.menuItems&&r(I.menuItems),I.readyForDelivery&&a(I.readyForDelivery),I.deliveryLog&&c(I.deliveryLog),I.orderHistory&&d(I.orderHistory),I.recipes&&y(I.recipes),I.clientPortalData&&C(I.clientPortalData),I.blockedDates&&N(I.blockedDates)}catch(I){console.error("Error loading saved data:",I)}f(!0)};j();const k=H=>{H.key===wa&&j()};return window.addEventListener("storage",k),()=>window.removeEventListener("storage",k)},[]);const p=g.useCallback(j=>{const k=localStorage.getItem(wa);let H={};if(k)try{H=JSON.parse(k)}catch(ue){console.error("Error parsing saved data:",ue)}const I={...H,...j,lastSaved:new Date().toISOString()};localStorage.setItem(wa,JSON.stringify(I))},[]),h=g.useCallback((j,k)=>{const H={...x,[j]:{...x[j],...k}};C(H),p({clientPortalData:H})},[x,p]),M=j=>j?j.toLowerCase().replace(/\s+/g,"-"):"",T=g.useCallback(j=>{const k=(j==null?void 0:j.toLowerCase())||"";return e.find(H=>!!(H.id===j||H.displayName&&M(H.displayName)===k||M(H.name)===k))},[e]),F=g.useCallback((j,k)=>n.filter(H=>H.clientName===j&&H.approved===!0&&(!k||H.date===k)),[n]),R=g.useCallback((j,k)=>l.filter(H=>H.clientName===j&&(!k||H.date===k)),[l]),u=g.useCallback((j,k)=>o.find(H=>H.clientName===j&&H.date===k),[o]),b=g.useCallback(j=>i.filter(H=>H.clientName===j).map(H=>{const I=o.find(ue=>ue.clientName===j&&ue.date===H.date);return{...H,completedAt:(I==null?void 0:I.completedAt)||H.completedAt,handoffType:(I==null?void 0:I.handoffType)||H.handoffType,photoData:(I==null?void 0:I.photoData)||H.photoData}}).sort((H,I)=>new Date(I.date)-new Date(H.date)),[i,o]),S=g.useCallback(j=>{var k;for(const H of Object.keys(m)){const I=(k=m[H])==null?void 0:k.find(ue=>ue.name===j);if(I)return I}return null},[m]);return{clients:e,menuItems:n,readyForDelivery:l,deliveryLog:o,orderHistory:i,recipes:m,clientPortalData:x,blockedDates:U,isLoaded:z,getClientById:T,getClientMenuItems:F,getClientReadyOrders:R,getClientDeliveryStatus:u,getClientHistory:b,getRecipeName:S,updateClientPortalData:h}}const nt={PICK_DATES:"pick_dates",PICK_DISHES:"pick_dishes",NEEDS_PAYMENT:"needs_payment",MENU_READY:"menu_ready",DELIVERY_DAY:"delivery_day",DELIVERED:"delivered",OVERDUE:"overdue",PAUSED:"paused",NO_UPCOMING:"no_upcoming"};function bd(){const e=new Date,n=(6-e.getDay()+7)%7,r=new Date(e);return r.setDate(e.getDate()+n),r.setHours(23,59,59,999),r}function gc(e){if(!e)return!1;const t=new Date,n=new Date(e+"T12:00:00"),r=n.getDay(),l=r===0?1:r===6?0:r+1,a=new Date(n);return a.setDate(n.getDate()-l),a.setHours(23,59,59,999),t<a}function gv(){var M;const{id:e}=Cy(),{isLoaded:t,getClientById:n,getClientMenuItems:r,getClientReadyOrders:l,getClientDeliveryStatus:a,getClientHistory:o,clientPortalData:c,blockedDates:i,recipes:d,updateClientPortalData:m}=xv(),[y,x]=g.useState([]),[C,U]=g.useState(!1),N=g.useMemo(()=>n(e),[e,n]),z=new Date().toISOString().split("T")[0],p=(()=>{var S,j;if(!N)return null;if(N.status==="paused")return nt.PAUSED;const T=c[N.name]||{};if(T.paymentOverdue)return nt.OVERDUE;if(T.pendingPayment&&N.honeyBookLink)return nt.NEEDS_PAYMENT;if(a(N.name,z))return nt.DELIVERED;if(l(N.name,z).length>0)return nt.DELIVERY_DAY;const u=r(N.name).filter(k=>k.date>=z),b=l(N.name).filter(k=>k.date>=z);return u.length>0||b.length>0?nt.MENU_READY:T.needsDateSelection?nt.PICK_DATES:(N.chefChoice===!1||N.chefChoice==="false")&&(((S=N.deliveryDates)==null?void 0:S.length)>0||((j=T.selectedDates)==null?void 0:j.length)>0)?nt.MENU_READY:nt.NO_UPCOMING})();if(!t)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#f9f9ed"},children:s.jsxs("div",{className:"text-center",children:[s.jsx(Xs,{size:48,className:"mx-auto mb-4 animate-pulse",style:{color:"#ffd700"}}),s.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(!N)return s.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:"#f9f9ed"},children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center max-w-md",children:[s.jsx(bt,{size:48,className:"mx-auto mb-4 text-amber-500"}),s.jsx("h1",{className:"text-xl font-bold mb-2",style:{color:"#3d59ab"},children:"Page Not Found"}),s.jsx("p",{className:"text-gray-600",children:"We couldn't find your client portal. Please check the link and try again."})]})});const h=N.displayName||N.name;return s.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("header",{className:"text-white p-4",style:{backgroundColor:"#3d59ab"},children:s.jsxs("div",{className:"max-w-lg mx-auto flex items-center gap-3",children:[s.jsx(Xs,{size:32,style:{color:"#ffd700"}}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-xl font-bold",children:"Goldfinch Chef"}),s.jsx("p",{className:"text-sm opacity-80",children:"Client Portal"})]})]})}),s.jsxs("div",{className:"max-w-lg mx-auto p-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-4",children:[s.jsxs("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:["Hello, ",h.split(" ")[0],"!"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:yv(p,N)}),N.honeyBookLink&&!((M=c[N.name])!=null&&M.invoicePaid)&&s.jsxs("a",{href:N.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 mt-4 px-5 py-2 rounded-lg text-white font-medium text-sm",style:{backgroundColor:"#d9a87a"},children:[s.jsx(rs,{size:18}),"View & Pay Invoice",s.jsx(ps,{size:14})]})]}),p===nt.DELIVERY_DAY&&s.jsx(Ov,{client:N,getClientReadyOrders:l,getClientDeliveryStatus:a,today:z}),p===nt.OVERDUE&&s.jsx(Cv,{client:N}),p===nt.NEEDS_PAYMENT&&s.jsx(Sv,{client:N}),p===nt.PICK_DATES&&s.jsx(Dv,{client:N,selectedDates:y,setSelectedDates:x,blockedDates:i,onSubmit:T=>{m(N.name,{selectedDates:y,dateSelectionNotes:T,needsDateSelection:!1,dateSelectionSubmittedAt:new Date().toISOString()})}}),p===nt.PICK_DISHES&&s.jsx(Ev,{client:N,recipes:d,clientPortalData:c,onSubmit:T=>{m(N.name,{ingredientPicks:{...T,submittedAt:new Date().toISOString()}})}}),p===nt.PAUSED&&s.jsx(wv,{client:N}),(p===nt.MENU_READY||p===nt.DELIVERED||p===nt.NO_UPCOMING)&&s.jsxs(s.Fragment,{children:[s.jsx(bv,{client:N,clientPortalData:c,onEditDates:()=>U(!0),recipes:d,updateClientPortalData:m}),C&&s.jsx(kv,{client:N,blockedDates:i,clientPortalData:c,onSave:T=>{m(N.name,{selectedDates:T,dateSelectionSubmittedAt:new Date().toISOString()}),U(!1)},onClose:()=>U(!1)})]}),p===nt.MENU_READY&&s.jsx(Rv,{client:N,getClientMenuItems:r,getClientReadyOrders:l,today:z,clientPortalData:c,updateClientPortalData:m}),p===nt.DELIVERED&&s.jsx(Iv,{client:N,getClientDeliveryStatus:a,getClientReadyOrders:l,getClientHistory:o,today:z}),p===nt.NO_UPCOMING&&s.jsx(Lv,{client:N,getClientHistory:o}),(p===nt.MENU_READY||p===nt.DELIVERED||p===nt.NO_UPCOMING)&&s.jsx("div",{className:"mt-6",children:s.jsx(Nv,{client:N,getClientHistory:o})})]}),s.jsx("footer",{className:"text-center p-4 text-gray-500 text-sm",children:s.jsx("p",{children:"Questions? Contact us at hello@goldfinchchef.com"})})]})}function yv(e,t){switch(e){case nt.PAUSED:return"Your account is currently paused.";case nt.OVERDUE:return"Your account needs attention.";case nt.NEEDS_PAYMENT:return"Please complete your payment to continue.";case nt.PICK_DATES:return"Let's schedule your upcoming deliveries.";case nt.PICK_DISHES:return"Pick your protein, veggie, and starch dishes for this week!";case nt.MENU_READY:return(t==null?void 0:t.chefChoice)===!1||(t==null?void 0:t.chefChoice)==="false"?"Pick your dishes for each delivery below!":"Your menu is ready! Here's what's coming.";case nt.DELIVERY_DAY:return"Your delivery is on the way!";case nt.DELIVERED:return"Your delivery has arrived!";default:return"Welcome to your client portal."}}function vv({client:e}){const r=(()=>{if(e.status==="paused")return{status:"paused",label:"Account Paused",color:"#dc2626",bgColor:"#fef2f2",borderColor:"#fecaca"};if(e.invoicePaid)return{status:"paid",label:"Paid",color:"#22c55e",bgColor:"#dcfce7",borderColor:"#bbf7d0"};if(!e.billDueDate)return{status:"none",label:"No invoice",color:"#6b7280",bgColor:"#f9fafb",borderColor:"#e5e7eb"};const a=new Date;a.setHours(0,0,0,0);const c=new Date(e.billDueDate+"T12:00:00")-a,i=Math.ceil(c/(1e3*60*60*24));if(i>7)return{status:"not_yet_due",label:"Not Yet Due",color:"#3d59ab",bgColor:"#eff6ff",borderColor:"#bfdbfe",daysUntilDue:i};if(i>0)return{status:"due_soon",label:`Due in ${i} day${i!==1?"s":""}`,color:"#f59e0b",bgColor:"#fffbeb",borderColor:"#fde68a",daysUntilDue:i};if(i===0)return{status:"due_today",label:"Due Today",color:"#f59e0b",bgColor:"#fffbeb",borderColor:"#fde68a"};{const d=Math.abs(i),m=7-d;return m>0?{status:"grace_period",label:"Overdue",color:"#dc2626",bgColor:"#fef2f2",borderColor:"#fecaca",daysOverdue:d,daysRemaining:m}:{status:"overdue",label:"Overdue",color:"#dc2626",bgColor:"#fef2f2",borderColor:"#fecaca",daysOverdue:d}}})(),l=a=>a?new Date(a+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"";return r.status==="none"&&!e.honeyBookLink?null:s.jsxs("div",{className:"mb-4 p-4 rounded-lg border-2",style:{backgroundColor:r.bgColor,borderColor:r.borderColor},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(rs,{size:18,style:{color:r.color}}),s.jsx("h4",{className:"font-bold",style:{color:r.color},children:"Billing"})]}),r.status==="paused"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bt,{size:18,className:"text-red-600"}),s.jsx("p",{className:"text-red-700 font-medium",children:"Your account is paused"})]}),s.jsx("p",{className:"text-sm text-red-600",children:"Please pay your outstanding invoice to reactivate your subscription and resume deliveries."}),e.honeyBookLink&&s.jsxs("a",{href:e.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:"#dc2626"},children:[s.jsx(rs,{size:16}),"Pay to Reactivate",s.jsx(ps,{size:14})]})]}),r.status==="grace_period"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-3 rounded-lg bg-red-100 border border-red-200",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(bt,{size:18,className:"text-red-600"}),s.jsx("p",{className:"text-red-700 font-medium",children:"Payment Overdue - Grace Period"})]}),s.jsxs("p",{className:"text-sm text-red-600",children:["Your invoice is ",r.daysOverdue," day",r.daysOverdue!==1?"s":""," overdue. You have ",s.jsxs("strong",{children:[r.daysRemaining," day",r.daysRemaining!==1?"s":""]})," remaining before your account is paused."]})]}),e.billDueDate&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Due date: ",s.jsx("span",{className:"font-medium",children:l(e.billDueDate)})]}),e.honeyBookLink&&s.jsxs("a",{href:e.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:"#dc2626"},children:[s.jsx(rs,{size:16}),"Pay Now",s.jsx(ps,{size:14})]})]}),r.status==="overdue"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bt,{size:18,className:"text-red-600"}),s.jsxs("p",{className:"text-red-700 font-medium",children:["Invoice overdue (",r.daysOverdue," day",r.daysOverdue!==1?"s":"",")"]})]}),e.billDueDate&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Due date: ",s.jsx("span",{className:"font-medium",children:l(e.billDueDate)})]}),e.honeyBookLink&&s.jsxs("a",{href:e.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:"#dc2626"},children:[s.jsx(rs,{size:16}),"Pay Now",s.jsx(ps,{size:14})]})]}),(r.status==="due_today"||r.status==="due_soon")&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Invoice Status"}),s.jsx("p",{className:"font-medium",style:{color:r.color},children:r.label})]}),e.billDueDate&&s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Due Date"}),s.jsx("p",{className:"font-medium",children:l(e.billDueDate)})]})]}),e.honeyBookLink&&s.jsxs("a",{href:e.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:"#f59e0b"},children:[s.jsx(rs,{size:16}),"View & Pay Invoice",s.jsx(ps,{size:14})]})]}),r.status==="not_yet_due"&&s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Invoice Status"}),s.jsx("p",{className:"font-medium",style:{color:r.color},children:r.label})]}),e.billDueDate&&s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Due Date"}),s.jsx("p",{className:"font-medium",children:l(e.billDueDate)})]})]}),e.honeyBookLink&&s.jsxs("a",{href:e.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg border-2 font-medium",style:{borderColor:"#3d59ab",color:"#3d59ab"},children:[s.jsx(rs,{size:16}),"View & Pay Invoice",s.jsx(ps,{size:14})]})]}),r.status==="paid"&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fe,{size:18,className:"text-green-600"}),s.jsx("p",{className:"text-green-700 font-medium",children:"Invoice Paid - Thank you!"})]})]})}function bv({client:e,onEditDates:t,clientPortalData:n={},recipes:r,updateClientPortalData:l}){var M;const[a,o]=g.useState(null),c=e.portions||e.persons||1,i=e.mealsPerWeek||0,d=e.frequency||"weekly",m=((M=n[e.name])==null?void 0:M.selectedDates)||[],y=m.length>0?m:e.deliveryDates||[],x=T=>T?new Date(T+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",C=bd(),U=y.some(T=>gc(T)),N=e.chefChoice===!1||e.chefChoice==="false",z=T=>{var F,R;return(R=(F=n[e.name])==null?void 0:F.dateIngredientPicks)==null?void 0:R[T]},f=T=>{const F=new Date(T+"T12:00:00"),R=F.getDay(),u=R===0?1:R===6?0:R+1,b=new Date(F);return b.setDate(F.getDate()-u),b.setHours(23,59,59,999),b},p=T=>new Date>f(T),h=(T,F)=>{var u;const R=((u=n[e.name])==null?void 0:u.dateIngredientPicks)||{};l(e.name,{dateIngredientPicks:{...R,[T]:{...F,submittedAt:new Date().toISOString()}}}),o(null)};return s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"font-bold flex items-center gap-2",style:{color:"#3d59ab"},children:[s.jsx(Zn,{size:20}),"Your Subscription"]}),U&&t&&s.jsxs("button",{onClick:t,className:"flex items-center gap-1 px-3 py-1 text-sm rounded-lg bg-blue-50 text-blue-700 hover:bg-blue-100",children:[s.jsx(Ah,{size:14}),"Edit Dates"]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[s.jsxs("div",{className:"text-center p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("p",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:c}),s.jsx("p",{className:"text-xs text-gray-500",children:"Portions"})]}),s.jsxs("div",{className:"text-center p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("p",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:i}),s.jsx("p",{className:"text-xs text-gray-500",children:"Meals/Week"})]}),s.jsxs("div",{className:"text-center p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("p",{className:"text-lg font-bold capitalize",style:{color:"#3d59ab"},children:d}),s.jsx("p",{className:"text-xs text-gray-500",children:"Frequency"})]})]}),s.jsx(vv,{client:e}),y.length>0?s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium text-gray-600 mb-2 flex items-center gap-2",children:[s.jsx(xs,{size:14}),"Upcoming Deliveries"]}),s.jsx("div",{className:"space-y-2",children:y.slice(0,4).map((T,F)=>{const R=gc(T),u=new Date(T+"T12:00:00")<new Date,b=z(T),S=b==null?void 0:b.submittedAt,j=p(T),k=f(T);return s.jsxs("div",{className:`p-3 rounded-lg ${u?"opacity-50":""}`,style:{backgroundColor:"#fff",border:"1px solid #ebb582"},children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-xs text-gray-400",children:["#",F+1]}),s.jsx("span",{className:u?"text-gray-400":"",children:x(T)})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[!R&&!u&&!N&&s.jsxs("span",{className:"text-xs text-amber-600 flex items-center gap-1",children:[s.jsx(Hn,{size:12}),"Locked"]}),u&&s.jsx(Fe,{size:16,className:"text-green-500"})]})]}),N&&!u&&s.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:S?s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-1",children:[s.jsx(Fe,{size:14}),"Picks submitted"]}),!j&&s.jsx("button",{onClick:()=>o(T),className:"text-xs text-blue-600 hover:text-blue-800",children:"Edit"})]}):j?s.jsxs("span",{className:"text-xs text-amber-600 flex items-center gap-1",children:[s.jsx(Hn,{size:12}),"Deadline passed - Chef will pick"]}):s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:()=>o(T),className:"text-xs px-3 py-1 rounded-lg text-white font-medium",style:{backgroundColor:"#3d59ab"},children:"Pick Dishes"}),s.jsxs("span",{className:"text-xs text-gray-500",children:["by ",k.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})]})]})})]},T)})}),U&&!N&&s.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-center gap-1",children:[s.jsx(Hn,{size:12}),"Edit dates by Saturday ",C.toLocaleDateString("en-US",{month:"short",day:"numeric"})," at 11:59 PM"]})]}):N?s.jsx("div",{className:"p-4 rounded-lg bg-amber-50 border border-amber-200",children:s.jsx("p",{className:"text-sm text-amber-700",children:"No delivery dates scheduled yet. Contact us to set up your deliveries, then you can pick your dishes!"})}):null,a&&s.jsx(jv,{client:e,dateStr:a,recipes:r,existingPicks:z(a),onSave:T=>h(a,T),onClose:()=>o(null)})]})}function jv({client:e,dateStr:t,recipes:n,existingPicks:r,onSave:l,onClose:a}){var F,R,u;const o=e.mealsPerWeek||3,[c,i]=g.useState((r==null?void 0:r.proteins)||Array(o).fill("")),[d,m]=g.useState((r==null?void 0:r.veggies)||Array(o).fill("")),[y,x]=g.useState((r==null?void 0:r.starches)||Array(o).fill("")),[C,U]=g.useState((r==null?void 0:r.notes)||""),N=((F=n==null?void 0:n.protein)==null?void 0:F.map(b=>b.name))||[],z=((R=n==null?void 0:n.veg)==null?void 0:R.map(b=>b.name))||[],f=((u=n==null?void 0:n.starch)==null?void 0:u.map(b=>b.name))||[],p=b=>new Date(b+"T12:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),h=(b,S,j)=>{const k=S.filter((H,I)=>I!==j);return b.filter(H=>!k.includes(H))},M=()=>c.every(b=>b!=="")&&d.every(b=>b!=="")&&y.every(b=>b!==""),T=()=>{if(!M()){alert(`Please select ${o} of each: proteins, veggies, and starches.`);return}l({proteins:c,veggies:d,starches:y,notes:C,mealsPerWeek:o})};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"p-4 border-b flex items-center justify-between",style:{backgroundColor:"#f9f9ed"},children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold",style:{color:"#3d59ab"},children:"Pick Your Dishes"}),s.jsx("p",{className:"text-sm text-gray-600",children:p(t)})]}),s.jsx("button",{onClick:a,className:"p-1 hover:bg-gray-200 rounded",children:s.jsx("span",{className:"text-2xl",children:""})})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("p",{className:"text-gray-600 mb-4",children:["Select ",o," proteins, veggies, and starches. Chef Paula will pair them into delicious meals!"]}),N.length===0&&z.length===0&&f.length===0&&s.jsx("div",{className:"p-4 rounded-lg bg-amber-50 border border-amber-200 mb-4",children:s.jsx("p",{className:"text-sm text-amber-700",children:"Dish options are not available yet. Please contact us or check back later."})}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("h4",{className:"font-bold mb-2 flex items-center gap-2 text-sm",style:{color:"#3d59ab"},children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-red-100 flex items-center justify-center text-red-600 text-xs",children:"P"}),"Proteins (",c.filter(b=>b).length,"/",o,")"]}),s.jsx("div",{className:"space-y-2",children:c.map((b,S)=>s.jsxs("select",{value:b,onChange:j=>{const k=[...c];k[S]=j.target.value,i(k)},className:"w-full p-2 border-2 rounded-lg text-sm",style:{borderColor:b?"#22c55e":"#ebb582"},children:[s.jsxs("option",{value:"",children:["Select protein #",S+1]}),h(N,c,S).map(j=>s.jsx("option",{value:j,children:j},j))]},S))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("h4",{className:"font-bold mb-2 flex items-center gap-2 text-sm",style:{color:"#3d59ab"},children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center text-green-600 text-xs",children:"V"}),"Veggies (",d.filter(b=>b).length,"/",o,")"]}),s.jsx("div",{className:"space-y-2",children:d.map((b,S)=>s.jsxs("select",{value:b,onChange:j=>{const k=[...d];k[S]=j.target.value,m(k)},className:"w-full p-2 border-2 rounded-lg text-sm",style:{borderColor:b?"#22c55e":"#ebb582"},children:[s.jsxs("option",{value:"",children:["Select veggie #",S+1]}),h(z,d,S).map(j=>s.jsx("option",{value:j,children:j},j))]},S))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsxs("h4",{className:"font-bold mb-2 flex items-center gap-2 text-sm",style:{color:"#3d59ab"},children:[s.jsx("span",{className:"w-5 h-5 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 text-xs",children:"S"}),"Starches (",y.filter(b=>b).length,"/",o,")"]}),s.jsx("div",{className:"space-y-2",children:y.map((b,S)=>s.jsxs("select",{value:b,onChange:j=>{const k=[...y];k[S]=j.target.value,x(k)},className:"w-full p-2 border-2 rounded-lg text-sm",style:{borderColor:b?"#22c55e":"#ebb582"},children:[s.jsxs("option",{value:"",children:["Select starch #",S+1]}),h(f,y,S).map(j=>s.jsx("option",{value:j,children:j},j))]},S))})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Special requests (optional)"}),s.jsx("textarea",{value:C,onChange:b=>U(b.target.value),placeholder:"E.g., 'Keep chicken mild' or 'Extra sauce'",className:"w-full p-2 border-2 rounded-lg text-sm",style:{borderColor:"#ebb582"},rows:2})]}),s.jsx("div",{className:"mb-4 p-2 rounded-lg text-sm",style:{backgroundColor:"#f9f9ed"},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:M()?"All selections complete!":"Complete all to submit"}),s.jsxs("span",{className:"font-bold",style:{color:M()?"#22c55e":"#3d59ab"},children:[c.filter(b=>b).length+d.filter(b=>b).length+y.filter(b=>b).length," / ",o*3]})]})})]}),s.jsxs("div",{className:"p-4 border-t flex justify-end gap-3",children:[s.jsx("button",{onClick:a,className:"px-4 py-2 rounded-lg border-2 hover:bg-gray-50",style:{borderColor:"#ebb582"},children:"Cancel"}),s.jsx("button",{onClick:T,disabled:!M(),className:"px-4 py-2 rounded-lg text-white disabled:opacity-50",style:{backgroundColor:"#3d59ab"},children:"Save Picks"})]})]})})}function Nv({client:e,getClientHistory:t}){const[n,r]=g.useState(!1),l=t(e.name),a=n?l:l.slice(0,3),o=i=>i?new Date(i+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",c=i=>i?new Date(i).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"";return l.length===0?null:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(z0,{size:24,style:{color:"#3d59ab"}}),s.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Delivery History"})]}),s.jsx("div",{className:"space-y-4",children:a.map((i,d)=>{var m;return s.jsxs("div",{className:"border rounded-lg overflow-hidden",style:{borderColor:"#ebb582"},children:[s.jsxs("div",{className:"p-3 flex items-center justify-between",style:{backgroundColor:"#f9f9ed"},children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:o(i.date)}),i.completedAt&&s.jsxs("p",{className:"text-xs text-gray-500",children:["Delivered at ",c(i.completedAt),i.handoffType==="porch"&&" (Porch drop)",i.handoffType==="hand"&&" (Hand delivery)"]})]}),s.jsx(Fe,{size:20,className:"text-green-500"})]}),s.jsx("div",{className:"p-3",children:s.jsx("div",{className:"flex flex-wrap gap-2",children:(m=i.dishes)==null?void 0:m.map((y,x)=>s.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm",style:{backgroundColor:"#fff4e0"},children:[s.jsx(Zn,{size:12,style:{color:"#3d59ab"}}),y]},x))})}),i.handoffType==="porch"&&i.photoData&&s.jsxs("div",{className:"p-3 border-t",style:{borderColor:"#ebb582"},children:[s.jsxs("p",{className:"text-xs text-gray-500 mb-2 flex items-center gap-1",children:[s.jsx(pc,{size:12}),"Delivery Photo"]}),s.jsx("img",{src:i.photoData,alt:"Delivery confirmation",className:"w-full max-h-48 object-cover rounded-lg"})]})]},d)})}),l.length>3&&s.jsx("button",{onClick:()=>r(!n),className:"mt-4 w-full py-2 text-sm font-medium rounded-lg border-2 hover:bg-gray-50",style:{borderColor:"#ebb582",color:"#3d59ab"},children:n?"Show Less":`Show All (${l.length})`})]})}function kv({client:e,blockedDates:t=[],onSave:n,onClose:r,clientPortalData:l={}}){var F;const a=((F=l[e.name])==null?void 0:F.selectedDates)||[],o=a.length>0?a:e.deliveryDates||[],[c,i]=g.useState(o),[d,m]=g.useState(""),y=new Date,x=e.frequency==="biweekly",C=4,N={Monday:1,Tuesday:2,Thursday:4}[e.deliveryDay],f=(()=>{const R=[];let u=0;const b=120;for(;R.length<8&&u<b;){u++;const S=new Date(y);S.setDate(S.getDate()+u);const j=S.toISOString().split("T")[0];S.getDay()===N&&(t.includes(j)||R.push({date:j,display:S.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),canEdit:gc(j)}))}return R})(),p=R=>{if(!x||R.length<2)return!0;const u=[...R].sort();for(let b=1;b<u.length;b++){const S=new Date(u[b-1]+"T12:00:00");if((new Date(u[b]+"T12:00:00")-S)/(1e3*60*60*24)<14)return!1}return!0},h=R=>{if(m(""),c.includes(R))i(c.filter(u=>u!==R));else{if(c.length>=C){m(`Maximum ${C} delivery dates allowed`);return}const u=[...c,R];if(x&&!p(u)){m("Biweekly deliveries must be at least 2 weeks apart");return}i(u)}},M=()=>{if(c.length===0){m("Please select at least one delivery date");return}if(x&&!p(c)){m("Biweekly deliveries must be at least 2 weeks apart");return}n(c.sort())},T=bd();return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"p-4 border-b flex items-center justify-between",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("h3",{className:"text-lg font-bold",style:{color:"#3d59ab"},children:"Edit Delivery Dates"}),s.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-200 rounded",children:s.jsx("span",{className:"text-2xl",children:""})})]}),s.jsxs("div",{className:"p-4",children:[s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Your deliveries are on ",s.jsxs("strong",{children:[e.deliveryDay,"s"]}),". Select up to ",C," dates."]}),s.jsx("div",{className:"p-3 rounded-lg bg-amber-50 border border-amber-200 mb-4",children:s.jsxs("div",{className:"flex items-center gap-2 text-amber-700",children:[s.jsx(Hn,{size:16}),s.jsxs("span",{className:"text-sm",children:["Changes must be made by Saturday ",T.toLocaleDateString("en-US",{month:"short",day:"numeric"})," at 11:59 PM"]})]})}),d&&s.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm",children:d}),s.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Selected: ",c.length," / ",C]}),s.jsx("div",{className:"space-y-2 mb-4",children:f.map(({date:R,display:u,canEdit:b})=>{const S=c.includes(R),j=!b&&!S;return s.jsx("button",{onClick:()=>b&&h(R),disabled:j,className:`w-full p-3 rounded-lg border-2 text-left transition-all ${S?"border-blue-500 bg-blue-50":j?"border-gray-100 bg-gray-50 text-gray-300 cursor-not-allowed":"border-gray-200 hover:border-gray-300"}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:S?"text-blue-700 font-medium":"",children:u}),j&&s.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[s.jsx(Hn,{size:12}),"Locked"]}),S&&s.jsx(Fe,{size:16,className:"text-blue-600"})]})},R)})})]}),s.jsxs("div",{className:"p-4 border-t flex justify-end gap-3",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg border-2 hover:bg-gray-50",style:{borderColor:"#ebb582"},children:"Cancel"}),s.jsx("button",{onClick:M,className:"px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:"Save Changes"})]})]})})}function wv({client:e}){return s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center bg-gray-100",children:s.jsx(A0,{size:32,className:"text-gray-400 ml-1"})}),s.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"#3d59ab"},children:"Account Paused"}),s.jsx("p",{className:"text-gray-600 mb-4",children:e.pausedDate?`Paused since ${new Date(e.pausedDate).toLocaleDateString()}`:"Your meal deliveries are currently on hold."}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Ready to start enjoying delicious meals again? Contact us to reactivate your account."}),s.jsx("a",{href:"mailto:hello@goldfinchchef.com?subject=Reactivate%20My%20Account",className:"inline-block px-6 py-3 rounded-lg text-white font-medium",style:{backgroundColor:"#3d59ab"},children:"Request Reactivation"})]})})}function Cv({client:e}){return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(bt,{size:32,className:"text-red-500 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-bold text-red-700 mb-2",children:"Payment Overdue"}),s.jsx("p",{className:"text-red-600 mb-4",children:"Your account has an outstanding balance. Please make a payment to continue receiving deliveries."}),e.honeyBookLink&&s.jsxs("a",{href:e.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg text-white font-medium",style:{backgroundColor:"#dc2626"},children:[s.jsx(rs,{size:20}),"Pay Now",s.jsx(ps,{size:16})]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow p-4 text-center text-gray-600",children:s.jsxs("p",{children:["Questions about your invoice?"," ",s.jsx("a",{href:"mailto:hello@goldfinchchef.com",className:"text-blue-600 underline",children:"Contact us"})]})})]})}function Sv({client:e}){return s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"#fef3c7"},children:s.jsx(rs,{size:32,style:{color:"#f59e0b"}})}),s.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"#3d59ab"},children:"Payment Required"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Please complete your payment to confirm your upcoming deliveries."}),e.honeyBookLink&&s.jsxs("a",{href:e.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg text-white font-medium",style:{backgroundColor:"#3d59ab"},children:[s.jsx(rs,{size:20}),"View Invoice",s.jsx(ps,{size:16})]})]})})}function Dv({client:e,selectedDates:t,setSelectedDates:n,blockedDates:r=[],onSubmit:l}){const[a,o]=g.useState(""),[c,i]=g.useState(""),d=new Date,m=e.frequency==="biweekly",y=4,C={Monday:1,Tuesday:2,Thursday:4}[e.deliveryDay],U=[];let N=0;const z=120;for(;U.length<y&&N<z;){N++;const T=new Date(d);T.setDate(T.getDate()+N);const F=T.toISOString().split("T")[0];T.getDay()===C&&(r.includes(F)||U.push({date:F,display:T.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}))}const f=T=>{if(!m||T.length<2)return!0;const F=[...T].sort();for(let R=1;R<F.length;R++){const u=new Date(F[R-1]+"T12:00:00");if((new Date(F[R]+"T12:00:00")-u)/(1e3*60*60*24)<14)return!1}return!0},p=T=>{if(i(""),t.includes(T))n(t.filter(F=>F!==T));else{if(t.length>=y){i(`You can only select ${y} delivery dates`);return}const F=[...t,T];if(m&&!f(F)){i("Biweekly deliveries must be at least 2 weeks apart");return}n(F)}},h=()=>{if(t.length===0){i("Please select at least one delivery date");return}if(t.length>y){i(`Please select no more than ${y} dates`);return}if(m&&!f(t)){i("Biweekly deliveries must be at least 2 weeks apart");return}l(a)},M=T=>{if(t.includes(T))return!1;if(t.length>=y)return!0;if(m&&t.length>0){const F=[...t,T];return!f(F)}return!1};return e.deliveryDay?s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(xs,{size:24,style:{color:"#3d59ab"}}),s.jsxs("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:["Select Your Next ",y," Delivery Dates"]})]}),s.jsxs("p",{className:"text-gray-600 mb-2",children:["Your deliveries are on ",s.jsxs("strong",{children:[e.deliveryDay,"s"]}),". Choose ",y," upcoming dates."]}),m&&s.jsxs("p",{className:"text-sm text-amber-600 mb-4 flex items-center gap-2",children:[s.jsx(bt,{size:16}),"Biweekly schedule: dates must be at least 2 weeks apart"]}),c&&s.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm",children:c}),s.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Selected: ",t.length," / ",y]}),s.jsx("div",{className:"space-y-2 mb-6",children:U.map(({date:T,display:F})=>{const R=t.includes(T),u=M(T);return s.jsx("button",{onClick:()=>p(T),disabled:u&&!R,className:`w-full p-3 rounded-lg border-2 text-left transition-all ${R?"border-blue-500 bg-blue-50":u?"border-gray-100 bg-gray-50 text-gray-300 cursor-not-allowed":"border-gray-200 hover:border-gray-300"}`,children:s.jsx("p",{className:`font-medium ${R?"text-blue-700":""}`,children:F})},T)})}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Special requests or notes (optional)"}),s.jsx("textarea",{value:a,onChange:T=>o(T.target.value),placeholder:"E.g., 'No deliveries the week of the 15th' or 'Prefer morning deliveries'",className:"w-full p-3 border-2 rounded-lg",style:{borderColor:"#ebb582"},rows:3})]}),s.jsxs("button",{onClick:h,disabled:t.length===0,className:"w-full py-3 rounded-lg text-white font-medium disabled:opacity-50",style:{backgroundColor:"#3d59ab"},children:["Confirm ",t.length," Date",t.length!==1?"s":""]})]}):s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[s.jsx(xs,{size:32,className:"mx-auto mb-4 text-gray-400"}),s.jsx("h3",{className:"text-lg font-bold mb-2",style:{color:"#3d59ab"},children:"Delivery Day Not Set"}),s.jsx("p",{className:"text-gray-600",children:"Please contact us to set your preferred delivery day before selecting dates."})]})}function Ev({client:e,recipes:t,clientPortalData:n,onSubmit:r}){var b,S,j;const a=e.mealsPerWeek||3,[o,c]=g.useState(Array(a).fill("")),[i,d]=g.useState(Array(a).fill("")),[m,y]=g.useState(Array(a).fill("")),[x,C]=g.useState(""),U=((b=t==null?void 0:t.protein)==null?void 0:b.map(k=>k.name))||[],N=((S=t==null?void 0:t.veg)==null?void 0:S.map(k=>k.name))||[],z=((j=t==null?void 0:t.starch)==null?void 0:j.map(k=>k.name))||[],f=bd(),p=(k,H)=>{const I=[...o];I[k]=H,c(I)},h=(k,H)=>{const I=[...i];I[k]=H,d(I)},M=(k,H)=>{const I=[...m];I[k]=H,y(I)},T=()=>o.every(k=>k!=="")&&i.every(k=>k!=="")&&m.every(k=>k!==""),F=()=>{if(!T()){alert(`Please select ${a} of each: proteins, veggies, and starches.`);return}r({proteins:o,veggies:i,starches:m,notes:x,mealsPerWeek:a})},R=k=>k.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})+" at 11:59 PM",u=(k,H,I)=>{const ue=H.filter((E,L)=>L!==I);return k.filter(E=>!ue.includes(E))};return s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(Zn,{size:24,style:{color:"#3d59ab"}}),s.jsx("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:"Pick Your Dishes"})]}),s.jsxs("p",{className:"text-gray-600 mb-4",children:["Select ",a," proteins, ",a," veggies, and ",a," starches for your meals this week. Chef Paula will pair them into delicious meals!"]}),s.jsx("div",{className:"mb-6 p-3 rounded-lg bg-amber-50 border border-amber-200",children:s.jsxs("div",{className:"flex items-start gap-2 text-amber-700",children:[s.jsx(bt,{size:18,className:"flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-medium",children:["Deadline: ",R(f)]}),s.jsx("p",{className:"text-xs mt-1",children:"If not submitted by Saturday, Chef Paula will choose your dishes."})]})]})}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",style:{color:"#3d59ab"},children:[s.jsx("span",{className:"w-6 h-6 rounded-full bg-red-100 flex items-center justify-center text-red-600 text-sm",children:"P"}),"Proteins (",o.filter(k=>k).length,"/",a,")"]}),s.jsx("div",{className:"space-y-2",children:o.map((k,H)=>s.jsxs("select",{value:k,onChange:I=>p(H,I.target.value),className:"w-full p-3 border-2 rounded-lg",style:{borderColor:k?"#22c55e":"#ebb582"},children:[s.jsxs("option",{value:"",children:["Select protein #",H+1]}),u(U,o,H).map(I=>s.jsx("option",{value:I,children:I},I))]},H))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",style:{color:"#3d59ab"},children:[s.jsx("span",{className:"w-6 h-6 rounded-full bg-green-100 flex items-center justify-center text-green-600 text-sm",children:"V"}),"Veggies (",i.filter(k=>k).length,"/",a,")"]}),s.jsx("div",{className:"space-y-2",children:i.map((k,H)=>s.jsxs("select",{value:k,onChange:I=>h(H,I.target.value),className:"w-full p-3 border-2 rounded-lg",style:{borderColor:k?"#22c55e":"#ebb582"},children:[s.jsxs("option",{value:"",children:["Select veggie #",H+1]}),u(N,i,H).map(I=>s.jsx("option",{value:I,children:I},I))]},H))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",style:{color:"#3d59ab"},children:[s.jsx("span",{className:"w-6 h-6 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 text-sm",children:"S"}),"Starches (",m.filter(k=>k).length,"/",a,")"]}),s.jsx("div",{className:"space-y-2",children:m.map((k,H)=>s.jsxs("select",{value:k,onChange:I=>M(H,I.target.value),className:"w-full p-3 border-2 rounded-lg",style:{borderColor:k?"#22c55e":"#ebb582"},children:[s.jsxs("option",{value:"",children:["Select starch #",H+1]}),u(z,m,H).map(I=>s.jsx("option",{value:I,children:I},I))]},H))})]}),s.jsxs("div",{className:"mb-6",children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"Special requests (optional)"}),s.jsx("textarea",{value:x,onChange:k=>C(k.target.value),placeholder:"E.g., 'Keep chicken mild' or 'Extra sauce on the side'",className:"w-full p-3 border-2 rounded-lg",style:{borderColor:"#ebb582"},rows:2})]}),s.jsx("div",{className:"mb-4 p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-gray-600",children:T()?"All selections complete!":"Complete all selections to submit"}),s.jsxs("span",{className:"font-bold",style:{color:T()?"#22c55e":"#3d59ab"},children:[o.filter(k=>k).length+i.filter(k=>k).length+m.filter(k=>k).length," / ",a*3]})]})}),s.jsx("button",{onClick:F,disabled:!T(),className:"w-full py-3 rounded-lg text-white font-medium disabled:opacity-50",style:{backgroundColor:"#3d59ab"},children:"Submit My Picks"})]})}function Pv({client:e,date:t,menuItems:n,readyOrders:r}){const l=new Date(t+"T12:00:00").toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}).toUpperCase(),o=(()=>{const i=[];return n.forEach(d=>{const m={protein:d.protein,sides:[d.veg,d.starch].filter(Boolean)};(m.protein||m.sides.length>0)&&i.push(m),d.extras&&d.extras.forEach(y=>{i.push({protein:y,sides:[],isExtra:!0})})}),r.forEach(d=>{d.dishes&&d.dishes.forEach((m,y)=>{(y===0||d.dishes.length===1)&&i.push({protein:m,sides:d.dishes.slice(1),isExtra:!1})})}),i})(),c=e.displayName||e.name;return s.jsxs("div",{className:"overflow-hidden shadow-lg",style:{backgroundColor:"#fff"},children:[s.jsxs("div",{className:"relative px-4 pt-6 pb-8",style:{backgroundColor:"#f9f9ed",backgroundImage:"url(/pattern4.png)",backgroundSize:"cover",backgroundPosition:"center"},children:[s.jsx("p",{className:"text-center mb-2",style:{fontFamily:'"Glacial Indifference", sans-serif',fontSize:"12px",letterSpacing:"0.3em",color:"#5a5a5a"},children:"GOLDFINCH CHEF SERVICES"}),s.jsxs("h2",{className:"text-center mb-3",style:{color:"#3d59ab",fontFamily:'"Poller One", cursive',fontSize:"18px",textTransform:"uppercase",letterSpacing:"0.05em",textDecoration:"underline",textDecorationColor:"#3d59ab",textUnderlineOffset:"4px"},children:[c,"'s Menu"]}),s.jsx("p",{className:"text-center mb-4",style:{color:"#5a5a5a",fontFamily:'"Beth Ellen", cursive',fontSize:"12px"},children:"here's what to expect on your plate!"}),s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("img",{src:"/goldfinch5.png",alt:"Goldfinch",className:"w-12 h-12 object-contain"}),s.jsx("p",{style:{fontFamily:'"Glacial Indifference", sans-serif',fontSize:"14px",letterSpacing:"0.2em",color:"#5a5a5a"},children:l})]})]}),s.jsx("div",{className:"px-6 py-8",style:{backgroundColor:"#d9a87a"},children:s.jsx("div",{className:"space-y-8",children:o.map((i,d)=>s.jsxs("div",{className:"text-center",children:[i.protein&&s.jsx("h3",{style:{color:"#ffffff",fontFamily:'"Glacial Indifference", sans-serif',fontSize:"1.1rem",fontWeight:"bold",letterSpacing:"0.15em",textTransform:"uppercase",marginBottom:i.sides.length>0?"0.5rem":0},children:i.protein}),i.sides.length>0&&s.jsx("p",{style:{color:"#f5e6d3",fontFamily:'"Glacial Indifference", sans-serif',fontSize:"0.85rem",letterSpacing:"0.1em",textTransform:"uppercase"},children:i.sides.join(", ")})]},d))})}),s.jsxs("div",{className:"relative px-6 py-6",style:{backgroundColor:"#f9f9ed",fontFamily:'"Glacial Indifference", sans-serif'},children:[s.jsx("h4",{className:"mb-3",style:{color:"#3d59ab",fontFamily:'"Poller One", cursive',fontSize:"1.1rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Get Ready!"}),s.jsx("p",{className:"mb-4 pr-20",style:{color:"#5a5a5a",fontSize:"0.9rem",lineHeight:"1.5"},children:"Remember to put out bags, containers, and ice packs. And get excited  great food is on the way!"}),s.jsx("img",{src:"/stemflower.png",alt:"",className:"absolute right-4 bottom-4 h-20 object-contain"})]})]})}function Rv({client:e,getClientMenuItems:t,getClientReadyOrders:n,today:r,clientPortalData:l,updateClientPortalData:a}){const o=t(e.name).filter(y=>y.date>=r),c=n(e.name).filter(y=>y.date>=r),i={};o.forEach(y=>{i[y.date]||(i[y.date]={menuItems:[],readyOrders:[]}),i[y.date].menuItems.push(y)}),c.forEach(y=>{i[y.date]||(i[y.date]={menuItems:[],readyOrders:[]}),i[y.date].readyOrders.push(y)});const d=Object.keys(i).sort(),m=d.length>0;return s.jsxs("div",{className:"space-y-6",children:[d.map(y=>{const{menuItems:x,readyOrders:C}=i[y];return s.jsx(Pv,{client:e,date:y,menuItems:x,readyOrders:C},y)}),m&&s.jsx(_v,{clientName:e.name,clientPortalData:l,updateClientPortalData:a,deliveryDate:d[0]}),e.honeyBookLink&&s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(rs,{size:24,style:{color:"#d9a87a"}}),s.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Billing"})]}),s.jsx("p",{className:"text-gray-600 mb-4",children:"View your invoice and manage payments through our secure billing portal."}),s.jsxs("a",{href:e.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg text-white font-medium",style:{backgroundColor:"#d9a87a"},children:[s.jsx(rs,{size:20}),"View & Pay Invoice",s.jsx(ps,{size:16})]})]})]})}function zv({order:e}){return s.jsxs("div",{className:"mb-3 last:mb-0",children:[s.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[e.portions," portion",e.portions!==1?"s":""]}),s.jsx("div",{className:"space-y-2",children:e.dishes.map((t,n)=>s.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx(Zn,{size:16,style:{color:"#3d59ab"}}),s.jsx("span",{className:"font-medium",children:t})]},n))})]})}function tf(e){if(!e){const a=new Date,c=(6-a.getDay()+7)%7||7,i=new Date(a);return i.setDate(a.getDate()+c),i.setHours(23,59,59,999),i}const t=new Date(e+"T12:00:00"),n=t.getDay(),r=n===0?1:n===6?0:n+1,l=new Date(t);return l.setDate(t.getDate()-r),l.setHours(23,59,59,999),l}function Tv(e){return new Date<tf(e)}function _v({clientName:e,clientPortalData:t,updateClientPortalData:n,deliveryDate:r}){var N,z;const[l,a]=g.useState(""),[o,c]=g.useState(!1),i=tf(r),d=Tv(r),m=((N=t[e])==null?void 0:N.substitutionRequests)||[],y=(z=t[e])==null?void 0:z.substitutionRequest,x=y?[...m,y]:m,C=f=>f.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})+" at 11:59 PM",U=f=>{if(f.preventDefault(),!l.trim()){alert("Please enter your substitution request");return}const p={clientId:e,date:r||new Date().toISOString().split("T")[0],requestText:l.trim(),submittedAt:new Date().toISOString()},h=[...m,p];n(e,{substitutionRequests:h,substitutionRequest:p}),c(!0),a("")};return s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(mr,{size:24,style:{color:"#3d59ab"}}),s.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Request a Substitution"})]}),x.length>0&&s.jsxs("div",{className:"mb-6 space-y-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Your submitted requests:"}),x.map((f,p)=>s.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#dcfce7"},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx(Fe,{size:16,className:"text-green-600"}),s.jsx("span",{className:"text-sm font-medium text-green-700",children:"Request received"})]}),s.jsx("p",{className:"text-sm text-gray-700",children:f.requestText||(f.originalDish?`Instead of ${f.originalDish}: ${f.requestedSubstitution}`:f.requestedSubstitution)})]},p))]}),o&&s.jsxs("div",{className:"mb-6 p-4 rounded-lg border-2 border-green-200",style:{backgroundColor:"#f0fdf4"},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Fe,{size:20,className:"text-green-600"}),s.jsx("span",{className:"font-bold text-green-700",children:"Request submitted!"})]}),s.jsx("p",{className:"text-sm text-gray-600",children:"We'll review it before your next delivery."})]}),d?s.jsxs("form",{onSubmit:U,children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium mb-2",children:"What would you like to change or substitute?"}),s.jsx("textarea",{value:l,onChange:f=>a(f.target.value),placeholder:"E.g., 'Chicken instead of beef for Tuesday' or 'No onions in any dishes please' or 'Can I have extra vegetables instead of the starch?'",className:"w-full p-3 border-2 rounded-lg",style:{borderColor:"#ebb582"},rows:4})]}),s.jsx("div",{className:"mb-4 p-3 rounded-lg bg-amber-50 border border-amber-200",children:s.jsxs("div",{className:"flex items-center gap-2 text-amber-700",children:[s.jsx(Hn,{size:16}),s.jsxs("span",{className:"text-sm font-medium",children:["Deadline: ",C(i)]})]})}),s.jsx("button",{type:"submit",disabled:!l.trim(),className:"w-full py-3 rounded-lg text-white font-medium disabled:opacity-50",style:{backgroundColor:"#3d59ab"},children:"Submit Request"})]}):s.jsxs("div",{className:"text-center py-4",children:[s.jsx(bt,{size:32,className:"mx-auto mb-2 text-amber-500"}),s.jsx("p",{className:"text-gray-600",children:"The substitution deadline has passed for this delivery."}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Requests must be submitted by Saturday at 11:59 PM."})]})]})}function Ov({client:e,getClientReadyOrders:t,today:n}){const r=t(e.name,n);return s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center animate-pulse",style:{backgroundColor:"#dbeafe"},children:s.jsx(as,{size:40,style:{color:"#3d59ab"}})}),s.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"#3d59ab"},children:"Out for Delivery"}),s.jsx("p",{className:"text-gray-600",children:"Your meals are on their way to you today!"})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(Hn,{size:24,style:{color:"#3d59ab"}}),s.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Estimated Arrival"})]}),s.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.deliveryWindow||"2:00 PM - 6:00 PM"}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"We'll leave your meals at the door if you're not home."})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(hn,{size:24,style:{color:"#3d59ab"}}),s.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Today's Order"})]}),r.map((l,a)=>s.jsx(zv,{order:l},a))]}),e.address&&s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(un,{size:24,style:{color:"#3d59ab"}}),s.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Delivery Address"})]}),s.jsx("p",{className:"text-gray-700",children:e.address}),s.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Wrong address?"," ",s.jsx("a",{href:"mailto:hello@goldfinchchef.com",className:"text-blue-600 underline",children:"Let us know ASAP"})]})]})]})}function Iv({client:e,getClientDeliveryStatus:t,getClientHistory:n,today:r}){var i;const l=t(e.name,r),o=n(e.name).slice(0,3),c=d=>new Date(d).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"#dcfce7"},children:s.jsx(Fe,{size:40,className:"text-green-600"})}),s.jsx("h3",{className:"text-xl font-bold mb-2 text-green-700",children:"Delivered!"}),l&&s.jsxs("p",{className:"text-gray-600",children:[l.handoffType==="porch"?"Left at your door":"Handed off"," at ",c(l.completedAt)]})]}),(l==null?void 0:l.handoffType)==="porch"&&(l==null?void 0:l.photoData)&&s.jsxs("div",{className:"mt-6",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Delivery Photo:"}),s.jsx("img",{src:l.photoData,alt:"Delivery confirmation",className:"w-full rounded-lg shadow"})]}),(l==null?void 0:l.handoffType)==="hand"&&s.jsx("div",{className:"mt-6 p-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Gl,{size:24,style:{color:"#3d59ab"}}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"Hand Delivery"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Received at ",c(l.completedAt)]})]})]})})]}),o.length>0&&o[0].date===r&&s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx(hn,{size:24,style:{color:"#3d59ab"}}),s.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"What's in Your Delivery"})]}),(i=o[0].dishes)==null?void 0:i.map((d,m)=>s.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg mb-2",style:{backgroundColor:"#f9f9ed"},children:[s.jsx(Zn,{size:16,style:{color:"#3d59ab"}}),s.jsx("span",{className:"font-medium",children:d})]},m))]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[s.jsx(Xs,{size:24,style:{color:"#ffd700"}}),s.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Heating Instructions"})]}),s.jsxs("div",{className:"text-gray-600 space-y-2 text-sm",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Refrigerate"})," meals within 2 hours of delivery."]}),s.jsxs("p",{children:[s.jsx("strong",{children:"To reheat:"})," Remove lid, cover with damp paper towel, microwave 2-3 minutes or until heated through."]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Best enjoyed"})," within 4 days."]})]})]})]})}function Lv({client:e,getClientHistory:t}){const r=t(e.name).slice(0,5);return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"#f9f9ed"},children:s.jsx(xs,{size:32,className:"text-gray-400"})}),s.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"#3d59ab"},children:"No Upcoming Deliveries"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have any meals scheduled yet."}),s.jsx("a",{href:"mailto:hello@goldfinchchef.com?subject=Schedule%20Deliveries",className:"inline-block px-6 py-3 rounded-lg text-white font-medium",style:{backgroundColor:"#3d59ab"},children:"Schedule Deliveries"})]}),r.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("h4",{className:"font-bold mb-4",style:{color:"#3d59ab"},children:"Recent Deliveries"}),s.jsx("div",{className:"space-y-3",children:r.map((l,a)=>{var o,c;return s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:new Date(l.date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})}),s.jsxs("p",{className:"text-sm text-gray-500",children:[(o=l.dishes)==null?void 0:o.slice(0,2).join(", "),((c=l.dishes)==null?void 0:c.length)>2&&` +${l.dishes.length-2} more`]})]}),s.jsx(Fe,{size:20,className:"text-green-600"})]},a)})})]})]})}function Mv({clients:e,weeklyTasks:t={},setWeeklyTasks:n,clientPortalData:r={}}){const l=new Date,a=l.toLocaleDateString("en-US",{weekday:"long"}),c=(()=>{const j=new Date(l),k=j.getDay(),H=j.getDate()-k+(k===0?-6:1);return j.setDate(H),j.toISOString().split("T")[0]})(),i=new Date(new Date(c).getTime()+6*24*60*60*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric"}),d=new Date(c).toLocaleDateString("en-US",{month:"short",day:"numeric"}),[m,y]=g.useState({}),x=t[c]||m,C=(j,k,H)=>{const I={...x,[j]:{...x[j]||{},[k]:H}};n?n({...t,[c]:I}):y(I)},U=(j,k)=>{C(j,"honeybookLink",k)},N=j=>{const k=j.startDate?new Date(j.startDate):new Date(2024,0,1);return Math.floor((l-k)/(7*24*60*60*1e3))%4+1},z=[],f=[],p=[];e.forEach(j=>{if(j.status==="paused")p.push(j);else if(j.status==="active"){const k=N(j);k===4&&z.push({...j,weekNumber:k}),(j.frequency==="weekly"||j.frequency==="biweekly"&&Math.floor(l.getTime()/6048e5)%2===0)&&f.push(j)}});const h=[];Object.entries(r).forEach(([j,k])=>{if(k.substitutionRequest){const H=e.find(I=>I.name===j);h.push({clientName:j,displayName:(H==null?void 0:H.displayName)||j,...k.substitutionRequest})}});const M=()=>{let j=0,k=z.length*5;return z.forEach(H=>{var I,ue,E,L,P;(I=x[H.name])!=null&&I.invoicePrepared&&j++,(ue=x[H.name])!=null&&ue.honeybookLink&&j++,(E=x[H.name])!=null&&E.reminderSent&&j++,(L=x[H.name])!=null&&L.invoicePaid&&j++,(P=x[H.name])!=null&&P.datesSelected&&j++}),{completed:j,total:k}},T=()=>{let j=0,k=f.length*2;return f.forEach(H=>{var I,ue;(I=x[H.name])!=null&&I.menusPlanned&&j++,(ue=x[H.name])!=null&&ue.menusSent&&j++}),{completed:j,total:k}},F=M(),R=T(),u={completed:F.completed+R.completed+h.filter(j=>{var k;return(k=x[j.clientName])==null?void 0:k.substitutionHandled}).length,total:F.total+R.total+h.length},b=[{key:"deliveringThisWeek",title:"Delivering This Week",icon:as,color:"#27ae60",clients:f},{key:"paused",title:"Paused",icon:F0,color:"#9b59b6",clients:p}],S=({client:j})=>s.jsx("div",{className:"border-2 rounded-lg p-3 bg-white",style:{borderColor:"#ebb582"},children:s.jsx("div",{className:"flex justify-between items-start",children:s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold",children:j.displayName||j.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:[j.persons," persons  ",j.mealsPerWeek," meals/week  ",j.frequency]}),j.deliveryDay&&s.jsxs("p",{className:"text-sm text-gray-500",children:["Delivery: ",j.deliveryDay]}),j.zone&&s.jsxs("span",{className:"inline-block mt-1 px-2 py-0.5 text-xs rounded bg-blue-100 text-blue-800",children:["Zone ",j.zone]})]})})});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",style:{color:"#3d59ab"},children:"Weekly Tasks"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("p",{className:"text-gray-600",children:["Today is ",a]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("p",{className:"text-sm text-gray-500",children:["Week of ",d," - ",i]}),s.jsxs("p",{className:"text-lg font-bold",style:{color:u.completed===u.total&&u.total>0?"#27ae60":"#3d59ab"},children:[u.completed," / ",u.total," complete"]})]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mt-4",children:s.jsx("div",{className:"h-3 rounded-full transition-all duration-300",style:{width:`${u.total>0?u.completed/u.total*100:0}%`,backgroundColor:u.completed===u.total&&u.total>0?"#27ae60":"#3d59ab"}})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Lo,{size:24,style:{color:"#e74c3c"}}),s.jsx("h3",{className:"text-xl font-bold",style:{color:"#e74c3c"},children:"Billing & Renewals"})]}),s.jsxs("span",{className:"px-3 py-1 rounded text-sm font-medium",style:{backgroundColor:F.completed===F.total&&F.total>0?"#e8f8f0":"#fde8e8",color:F.completed===F.total&&F.total>0?"#27ae60":"#e74c3c"},children:[F.completed,"/",F.total]})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Week 4 clients due for renewal"}),z.length===0?s.jsx("p",{className:"text-gray-500 italic",children:"No clients in Week 4 this week"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left py-2 pr-4",children:"Client"}),s.jsx("th",{className:"text-center py-2 px-2",children:"Invoice Prepared"}),s.jsx("th",{className:"text-center py-2 px-2",children:"Honeybook Link"}),s.jsx("th",{className:"text-center py-2 px-2",children:"Reminder Sent"}),s.jsx("th",{className:"text-center py-2 px-2",children:"Invoice Paid"}),s.jsx("th",{className:"text-center py-2 px-2",children:"Dates Selected"})]})}),s.jsx("tbody",{children:z.map(j=>{var k,H,I,ue,E,L,P;return s.jsxs("tr",{className:"border-b border-gray-100",children:[s.jsxs("td",{className:"py-3 pr-4",children:[s.jsx("p",{className:"font-medium",children:j.displayName||j.name}),s.jsx("p",{className:"text-xs text-gray-500",children:j.frequency})]}),s.jsx("td",{className:"text-center py-3 px-2",children:s.jsx("input",{type:"checkbox",checked:((k=x[j.name])==null?void 0:k.invoicePrepared)||!1,onChange:A=>C(j.name,"invoicePrepared",A.target.checked),className:"w-5 h-5 rounded cursor-pointer",style:{accentColor:"#e74c3c"}})}),s.jsx("td",{className:"text-center py-3 px-2",children:s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("input",{type:"text",value:((H=x[j.name])==null?void 0:H.honeybookLink)||j.honeyBookLink||"",onChange:A=>U(j.name,A.target.value),placeholder:"Paste link...",className:"w-24 p-1 text-xs border rounded"}),(((I=x[j.name])==null?void 0:I.honeybookLink)||j.honeyBookLink)&&s.jsx("a",{href:((ue=x[j.name])==null?void 0:ue.honeybookLink)||j.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600",children:s.jsx(ps,{size:14})})]})}),s.jsx("td",{className:"text-center py-3 px-2",children:s.jsx("input",{type:"checkbox",checked:((E=x[j.name])==null?void 0:E.reminderSent)||!1,onChange:A=>C(j.name,"reminderSent",A.target.checked),className:"w-5 h-5 rounded cursor-pointer",style:{accentColor:"#e74c3c"}})}),s.jsx("td",{className:"text-center py-3 px-2",children:s.jsx("input",{type:"checkbox",checked:((L=x[j.name])==null?void 0:L.invoicePaid)||!1,onChange:A=>C(j.name,"invoicePaid",A.target.checked),className:"w-5 h-5 rounded cursor-pointer",style:{accentColor:"#27ae60"}})}),s.jsx("td",{className:"text-center py-3 px-2",children:s.jsx("input",{type:"checkbox",checked:((P=x[j.name])==null?void 0:P.datesSelected)||!1,onChange:A=>C(j.name,"datesSelected",A.target.checked),className:"w-5 h-5 rounded cursor-pointer",style:{accentColor:"#3d59ab"}})})]},j.name)})})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xs,{size:24,style:{color:"#27ae60"}}),s.jsx("h3",{className:"text-xl font-bold",style:{color:"#27ae60"},children:"Menu Planning"})]}),s.jsxs("span",{className:"px-3 py-1 rounded text-sm font-medium",style:{backgroundColor:(R.completed===R.total&&R.total>0,"#e8f8f0"),color:(R.completed===R.total&&R.total>0,"#27ae60")},children:[R.completed,"/",R.total]})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Clients with deliveries this week"}),f.length===0?s.jsx("p",{className:"text-gray-500 italic",children:"No deliveries scheduled this week"}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left py-2 pr-4",children:"Client"}),s.jsx("th",{className:"text-center py-2 px-2",children:"Menus Planned"}),s.jsx("th",{className:"text-center py-2 px-2",children:"Menus Sent"})]})}),s.jsx("tbody",{children:f.map(j=>{var k,H;return s.jsxs("tr",{className:"border-b border-gray-100",children:[s.jsxs("td",{className:"py-3 pr-4",children:[s.jsx("p",{className:"font-medium",children:j.displayName||j.name}),s.jsxs("p",{className:"text-xs text-gray-500",children:[j.persons,"p  ",j.mealsPerWeek," meals  ",j.deliveryDay||"No day set"]})]}),s.jsx("td",{className:"text-center py-3 px-2",children:s.jsx("input",{type:"checkbox",checked:((k=x[j.name])==null?void 0:k.menusPlanned)||!1,onChange:I=>C(j.name,"menusPlanned",I.target.checked),className:"w-5 h-5 rounded cursor-pointer",style:{accentColor:"#27ae60"}})}),s.jsx("td",{className:"text-center py-3 px-2",children:s.jsx("input",{type:"checkbox",checked:((H=x[j.name])==null?void 0:H.menusSent)||!1,onChange:I=>C(j.name,"menusSent",I.target.checked),className:"w-5 h-5 rounded cursor-pointer",style:{accentColor:"#27ae60"}})})]},j.name)})})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Au,{size:24,style:{color:"#f39c12"}}),s.jsx("h3",{className:"text-xl font-bold",style:{color:"#f39c12"},children:"Substitution Requests"})]}),h.length>0&&s.jsxs("span",{className:"px-3 py-1 rounded text-sm font-medium",style:{backgroundColor:"#fef3c7",color:"#f39c12"},children:[h.filter(j=>{var k;return(k=x[j.clientName])==null?void 0:k.substitutionHandled}).length,"/",h.length]})]}),h.length===0?s.jsxs("div",{className:"text-center py-6",children:[s.jsx(Au,{size:32,className:"mx-auto mb-2 text-gray-300"}),s.jsx("p",{className:"text-gray-500 italic",children:"No substitution requests this week"})]}):s.jsx("div",{className:"space-y-3",children:h.map((j,k)=>{var H,I,ue;return s.jsx("div",{className:`border-2 rounded-lg p-4 ${(H=x[j.clientName])!=null&&H.substitutionHandled?"bg-green-50 border-green-200":"border-amber-200 bg-amber-50"}`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h4",{className:"font-bold",children:j.displayName}),((I=x[j.clientName])==null?void 0:I.substitutionHandled)&&s.jsx("span",{className:"text-xs px-2 py-1 rounded bg-green-100 text-green-700",children:"Handled"})]}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsxs("p",{children:[s.jsx("span",{className:"text-gray-500",children:"Instead of:"})," ",s.jsx("span",{className:"font-medium",children:j.originalDish})]}),s.jsxs("p",{children:[s.jsx("span",{className:"text-gray-500",children:"Requested:"})," ",s.jsx("span",{className:"font-medium",children:j.requestedSubstitution})]}),j.submittedAt&&s.jsxs("p",{className:"text-xs text-gray-400",children:["Submitted: ",new Date(j.submittedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})]})]})]}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:((ue=x[j.clientName])==null?void 0:ue.substitutionHandled)||!1,onChange:E=>C(j.clientName,"substitutionHandled",E.target.checked),className:"w-5 h-5 rounded",style:{accentColor:"#27ae60"}}),s.jsx("span",{className:"text-sm",children:"Handled"})]})]})},k)})})]}),b.map(({key:j,title:k,icon:H,color:I,clients:ue})=>s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(H,{size:24,style:{color:I}}),s.jsxs("h3",{className:"text-xl font-bold",style:{color:I},children:[k," (",ue.length,")"]})]}),ue.length===0?s.jsx("p",{className:"text-gray-500 italic",children:"No clients in this category"}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:ue.map((E,L)=>s.jsx(S,{client:E},L))})]},j))]})}function Xu({client:e,date:t,menuItems:n}){const r=new Date(t+"T12:00:00").toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}).toUpperCase(),l=[];n.forEach(o=>{const c={protein:o.protein,sides:[o.veg,o.starch].filter(Boolean)};(c.protein||c.sides.length>0)&&l.push(c),o.extras&&o.extras.forEach(i=>{l.push({protein:i,sides:[],isExtra:!0})})});const a=e.displayName||e.name;return s.jsxs("div",{className:"overflow-hidden shadow-lg rounded-lg",style:{backgroundColor:"#fff"},children:[s.jsxs("div",{className:"relative px-4 pt-6 pb-8",style:{backgroundColor:"#f9f9ed",backgroundImage:"url(/pattern4.png)",backgroundSize:"cover",backgroundPosition:"center"},children:[s.jsx("p",{className:"text-center mb-2",style:{fontFamily:'"Glacial Indifference", sans-serif',fontSize:"12px",letterSpacing:"0.3em",color:"#5a5a5a"},children:"GOLDFINCH CHEF SERVICES"}),s.jsxs("h2",{className:"text-center mb-3",style:{color:"#3d59ab",fontFamily:'"Poller One", cursive',fontSize:"18px",textTransform:"uppercase",letterSpacing:"0.05em",textDecoration:"underline",textDecorationColor:"#3d59ab",textUnderlineOffset:"4px"},children:[a,"'s Menu"]}),s.jsx("p",{className:"text-center mb-4",style:{color:"#5a5a5a",fontFamily:'"Beth Ellen", cursive',fontSize:"12px"},children:"here's what to expect on your plate!"}),s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("img",{src:"/goldfinch5.png",alt:"Goldfinch",className:"w-12 h-12 object-contain"}),s.jsx("p",{style:{fontFamily:'"Glacial Indifference", sans-serif',fontSize:"14px",letterSpacing:"0.2em",color:"#5a5a5a"},children:r})]})]}),s.jsx("div",{className:"px-6 py-8",style:{backgroundColor:"#d9a87a"},children:s.jsxs("div",{className:"space-y-8",children:[l.map((o,c)=>s.jsxs("div",{className:"text-center",children:[o.protein&&s.jsx("h3",{style:{color:"#ffffff",fontFamily:'"Glacial Indifference", sans-serif',fontSize:"1.1rem",fontWeight:"bold",letterSpacing:"0.15em",textTransform:"uppercase",marginBottom:o.sides.length>0?"0.5rem":0},children:o.protein}),o.sides.length>0&&s.jsx("p",{style:{color:"#f5e6d3",fontFamily:'"Glacial Indifference", sans-serif',fontSize:"0.85rem",letterSpacing:"0.1em",textTransform:"uppercase"},children:o.sides.join(", ")})]},c)),l.length===0&&s.jsx("p",{className:"text-center text-white/70 italic",children:"No menu items yet"})]})}),s.jsxs("div",{className:"relative px-6 py-6",style:{backgroundColor:"#f9f9ed",fontFamily:'"Glacial Indifference", sans-serif'},children:[s.jsx("h4",{className:"mb-3",style:{color:"#3d59ab",fontFamily:'"Poller One", cursive',fontSize:"1.1rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Get Ready!"}),s.jsx("p",{className:"mb-4 pr-20",style:{color:"#5a5a5a",fontSize:"0.9rem",lineHeight:"1.5"},children:"Remember to put out bags, containers, and ice packs. And get excited  great food is on the way!"}),s.jsx("img",{src:"/stemflower.png",alt:"",className:"absolute right-4 bottom-4 h-20 object-contain"})]})]})}function Fv({menuDate:e,setMenuDate:t,clients:n,allClients:r,selectedClients:l,setSelectedClients:a,recipes:o,newMenuItem:c,setNewMenuItem:i,menuItems:d,setMenuItems:m,addMenuItem:y,clearMenu:x,deleteMenuItem:C,getOrdersByClient:U,clientPortalData:N={},weeklyTasks:z={},weeks:f={},selectedWeekId:p,setSelectedWeekId:h,lockWeekAndSnapshot:M,unlockWeekById:T}){const[F,R]=g.useState(null),[u,b]=g.useState(null),[S,j]=g.useState(!0),k=f==null?void 0:f[p],H=(k==null?void 0:k.status)==="locked",I=(r||n||[]).filter(D=>D.status==="active"),ue=g.useMemo(()=>{if(!p)return{Monday:"",Tuesday:"",Thursday:""};const D=na(p),O=new Date(D+"T12:00:00"),de=new Date(O);de.setDate(O.getDate()+1);const ie=new Date(O);return ie.setDate(O.getDate()+3),{Monday:O.toISOString().split("T")[0],Tuesday:de.toISOString().split("T")[0],Thursday:ie.toISOString().split("T")[0]}},[p]),E=D=>{var Ae;const O=D.displayName||D.name,de=((Ae=N==null?void 0:N[O])==null?void 0:Ae.selectedDates)||[],ie=Object.values(ue),be=de.find(Oe=>ie.includes(Oe));if(be)return be;const He=(D.deliveryDates||[]).find(Oe=>ie.includes(Oe));return He||(D.deliveryDay&&ue[D.deliveryDay]?ue[D.deliveryDay]:null)},L=g.useMemo(()=>I.filter(D=>E(D)!==null),[I,ue,N]),P=g.useMemo(()=>{const D={Monday:[],Tuesday:[],Thursday:[]};return L.forEach(O=>{const de=E(O);de===ue.Monday?D.Monday.push(O):de===ue.Tuesday?D.Tuesday.push(O):de===ue.Thursday&&D.Thursday.push(O)}),D},[L,ue]),A=d.filter(D=>Ys(D.date)===p),ne=(()=>{const D=new Date,O=D.getDay(),de=D.getDate()-O+(O===0?-6:1);return D.setDate(de),D.toISOString().split("T")[0]})();z[ne];const oe=D=>{const O=D.displayName||D.name,de=A.filter(He=>He.clientName===O),ie=de.length>0,be=ie&&de.every(He=>He.approved);let ve=null;if(D.billDueDate){const He=new Date(D.billDueDate+"T12:00:00"),Oe=Math.floor((new Date-He)/(1e3*60*60*24));Oe>=1&&(ve=`Invoice overdue (${Oe} day${Oe>1?"s":""})`)}return(!D.deliveryDates||D.deliveryDates.length===0)&&(ve=ve||"Delivery dates not set"),ie?be?{status:"approved",icon:Fe,color:"text-green-600",bg:"bg-green-50",warning:ve}:ve?{status:"warning",icon:bt,color:"text-amber-600",bg:"bg-amber-50",warning:ve}:{status:"pending",icon:fi,color:"text-blue-600",bg:"bg-blue-50",warning:ve}:{status:"none",icon:fi,color:"text-gray-400",bg:"bg-gray-50",warning:ve}},G=()=>I.filter(D=>A.some(de=>{const ie=D.displayName||D.name;return de.clientName===ie})),K=()=>{const D={};return A.forEach(O=>{D[O.clientName]||(D[O.clientName]=[]),D[O.clientName].push(O)}),D},ce=D=>{m(O=>O.map(de=>de.clientName===D?{...de,approved:!0}:de))},ee=()=>{const D=I.filter(O=>{O.displayName||O.name;const de=oe(O);return de.status==="pending"&&!de.warning});if(D.length===0){alert("No menus ready to approve");return}D.forEach(O=>{const de=O.displayName||O.name;ce(de)}),alert(`Approved ${D.length} menu(s)`)},le=D=>{window.confirm(`Remove all menu items for ${D}?`)&&(m(O=>O.filter(de=>de.clientName!==D)),R(null))},W=(D,O)=>{if(O.every(Oe=>Oe.approved)&&H){alert("This menu is approved and the week is locked. Unlock the week first to make edits.");return}const ie=I.find(Oe=>(Oe.displayName||Oe.name)===D)||I.find(Oe=>Oe.name===D),be=(ie==null?void 0:ie.name)||D,ve=O[0],He=O.flatMap(Oe=>Oe.extras||[]),Ae=[...new Set(He)];i({protein:(ve==null?void 0:ve.protein)||"",veg:(ve==null?void 0:ve.veg)||"",starch:(ve==null?void 0:ve.starch)||"",extras:Ae}),t((ve==null?void 0:ve.date)||e),a([be]),b(D),j(!0),m(Oe=>Oe.filter(Pe=>Pe.clientName!==D))},_=()=>{b(null),i({protein:"",veg:"",starch:"",extras:[]}),a([])},V=D=>A.filter(O=>O.clientName===D),Z=D=>{i(O=>({...O,extras:O.extras.includes(D)?O.extras.filter(de=>de!==D):[...O.extras,D]}))},X=[...o.sauces||[],...o.breakfast||[],...o.soups||[]],ae=K();G();const ye=()=>{const D=window.open("","_blank");let O=`
      <html>
      <head>
        <title>Menu Planner - Client Orders</title>
        <style>
          body {
            font-family: Arial, sans-serif;
            padding: 15px;
            font-size: 11px;
            line-height: 1.3;
          }
          h1 {
            color: #3d59ab;
            margin-bottom: 3px;
            font-size: 18px;
          }
          .header {
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid #3d59ab;
          }
          .header p { margin: 0; color: #666; font-size: 10px; }
          .columns {
            column-count: 2;
            column-gap: 25px;
          }
          .client {
            break-inside: avoid;
            margin-bottom: 10px;
            padding-bottom: 6px;
            border-bottom: 1px dotted #ccc;
          }
          .client-name {
            font-weight: bold;
            font-size: 12px;
            color: #3d59ab;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 6px;
          }
          .portions {
            color: #888;
            font-size: 10px;
            font-weight: normal;
          }
          .status { font-size: 12px; }
          .approved { color: #22c55e; }
          .pending { color: #f59e0b; }
          .meals {
            margin-left: 4px;
          }
          .meal {
            margin-bottom: 6px;
          }
          .protein {
            font-weight: bold;
            font-size: 11px;
            color: #333;
            padding: 2px 0;
          }
          .protein:before {
            content: "";
            margin-right: 6px;
            color: #3d59ab;
            font-weight: bold;
          }
          .sides {
            margin-left: 16px;
            color: #555;
            font-size: 10px;
          }
          .side {
            padding: 1px 0;
          }
          .side:before {
            content: "";
            margin-right: 5px;
            color: #999;
          }
          .extras {
            margin-left: 16px;
            margin-top: 2px;
          }
          .extra {
            color: #7c3aed;
            font-style: italic;
            font-size: 10px;
            padding: 1px 0;
          }
          .extra:before {
            content: "+";
            margin-right: 4px;
          }
          @media print {
            body { padding: 10px; }
            .columns { column-count: 2; }
          }
        </style>
      </head>
      <body>
        <div class="header">
          <h1>Client Orders</h1>
          <p>Week: ${p} | ${new Date().toLocaleDateString()}</p>
        </div>
        <div class="columns">
    `;Object.entries(ae).forEach(([de,ie])=>{var Oe;const be=ie.every(Pe=>Pe.approved),ve=I.find(Pe=>(Pe.displayName||Pe.name)===de)||I.find(Pe=>Pe.name===de),He=(ve==null?void 0:ve.displayName)||de,Ae=((Oe=ie[0])==null?void 0:Oe.portions)||1;O+='<div class="client">',O+='<div class="client-name">',O+=`<span>${He}</span>`,O+=`<span class="portions">(${Ae}p)</span>`,O+=`<span class="status ${be?"approved":"pending"}">${be?"":""}</span>`,O+="</div>",O+='<div class="meals">',ie.forEach(Pe=>{O+='<div class="meal">',Pe.protein?(O+=`<div class="protein">${Pe.protein}</div>`,(Pe.veg||Pe.starch)&&(O+='<div class="sides">',Pe.veg&&(O+=`<div class="side">${Pe.veg}</div>`),Pe.starch&&(O+=`<div class="side">${Pe.starch}</div>`),O+="</div>")):(Pe.veg&&(O+=`<div class="protein">${Pe.veg}</div>`),Pe.starch&&(O+=`<div class="protein">${Pe.starch}</div>`)),Pe.extras&&Pe.extras.length>0&&(O+='<div class="extras">',Pe.extras.forEach(st=>{O+=`<div class="extra">${st}</div>`}),O+="</div>"),O+="</div>"}),O+="</div></div>"}),O+="</div></body></html>",D.document.write(O),D.document.close(),D.print()};return I.filter(D=>oe(D).status==="approved").length,I.filter(D=>oe(D).status==="pending").length,I.filter(D=>oe(D).warning).length,I.filter(D=>oe(D).status==="none").length,s.jsxs("div",{className:"space-y-6",children:[f&&p&&h&&s.jsx(Yh,{selectedWeekId:p,setSelectedWeekId:h,weeks:f,onLockWeek:M,onUnlockWeek:T}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Delivering This Week"}),s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[L.length," clients scheduled  Based on delivery settings in Billing & Dates"]})]}),A.filter(D=>!D.approved).length>0&&s.jsx("button",{onClick:ee,className:"px-4 py-2 rounded-lg text-white font-medium text-sm",style:{backgroundColor:"#10b981"},children:"Approve All Ready"})]}),L.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["Monday","Tuesday","Thursday"].map(D=>{const O=P[D],de=ue[D],ie=new Date(de+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"});return s.jsxs("div",{className:"rounded-lg p-3",style:{backgroundColor:"#f9f9ed"},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2 pb-2 border-b",style:{borderColor:"#ebb582"},children:[s.jsx(xs,{size:16,style:{color:"#3d59ab"}}),s.jsx("span",{className:"font-bold text-sm",style:{color:"#3d59ab"},children:D}),s.jsx("span",{className:"text-xs text-gray-500",children:ie})]}),O.length>0?s.jsx("div",{className:"space-y-1",children:O.map((be,ve)=>{const He=be.displayName||be.name,Ae=A.some(Pe=>Pe.clientName===He),Oe=Ae&&A.filter(Pe=>Pe.clientName===He).every(Pe=>Pe.approved);return s.jsxs("div",{className:"flex items-center gap-1.5 text-sm",children:[Ae?s.jsx(Fe,{size:14,className:Oe?"text-green-600":"text-blue-500"}):s.jsx(fi,{size:14,className:"text-gray-300"}),s.jsx("span",{className:Ae?Oe?"text-green-700 font-medium":"text-blue-600":"text-gray-600",children:He})]},ve)})}):s.jsx("p",{className:"text-xs text-gray-400 italic",children:"No deliveries"})]},D)})}):s.jsxs("div",{className:"text-center py-6 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx(xs,{size:32,className:"mx-auto mb-2 text-gray-300"}),s.jsx("p",{className:"text-gray-500",children:"No clients scheduled for this week"}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Set delivery days in Clients  Edit or Billing & Dates"})]})]}),A.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h2",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:["Current Orders (",Object.keys(ae).length," clients)"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:ye,className:"flex items-center gap-2 px-3 py-1.5 rounded-lg border-2 text-sm",style:{borderColor:"#3d59ab",color:"#3d59ab"},children:[s.jsx($h,{size:16})," Print"]}),A.some(D=>!D.approved)&&s.jsxs("button",{onClick:ee,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white text-sm",style:{backgroundColor:"#22c55e"},children:[s.jsx(Fe,{size:16})," Approve All"]})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Object.entries(ae).map(([D,O])=>{var be;const de=O.every(ve=>ve.approved),ie=I.find(ve=>(ve.displayName||ve.name)===D)||I.find(ve=>ve.name===D)||{name:D,displayName:D};return s.jsxs("div",{className:"flex flex-col",children:[s.jsx(Xu,{client:ie,date:((be=O[0])==null?void 0:be.date)||e,menuItems:O}),s.jsxs("div",{className:"mt-3 flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("div",{className:"flex items-center gap-2",children:de?s.jsxs("span",{className:"text-sm text-green-700 flex items-center gap-1 font-medium",children:[s.jsx(Fe,{size:16})," Approved"]}):s.jsx("span",{className:"text-sm text-blue-600",children:"Pending approval"})}),s.jsxs("div",{className:"flex items-center gap-2",children:[!de&&s.jsxs("button",{onClick:()=>ce(D),className:"flex items-center gap-1 px-3 py-1.5 rounded text-sm text-white",style:{backgroundColor:"#22c55e"},children:[s.jsx(Fe,{size:14})," Approve"]}),s.jsxs("button",{onClick:()=>W(D,O),className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm ${de&&H?"bg-gray-100 text-gray-400 cursor-not-allowed":"bg-blue-100 text-blue-700 hover:bg-blue-200"}`,title:de&&H?"Unlock week to edit approved menu":"Edit menu",children:[s.jsx(ur,{size:14})," Edit"]}),s.jsxs("button",{onClick:()=>le(D),className:"flex items-center gap-1 px-3 py-1.5 rounded text-sm bg-red-100 text-red-700",children:[s.jsx($s,{size:14})," Remove"]})]})]})]},D)})})]}),s.jsxs("div",{className:`bg-white rounded-lg shadow-lg p-6 ${u?"ring-2 ring-blue-500":""}`,children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:u?`Editing: ${u}`:"Build Menu"}),u&&s.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 text-blue-700",children:"Editing Mode"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[u&&s.jsxs("button",{onClick:_,className:"flex items-center gap-1 px-3 py-1 rounded-lg text-sm bg-gray-200 text-gray-700 hover:bg-gray-300",children:[s.jsx(wt,{size:14})," Cancel Edit"]}),s.jsxs("button",{onClick:()=>j(!S),className:"flex items-center gap-2 px-3 py-1 rounded-lg text-sm text-gray-600 hover:bg-gray-100",children:[S?s.jsx(Io,{size:16}):s.jsx(Oo,{size:16}),S?"Collapse":"Expand"]})]})]}),S&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#423d3c"},children:"Select Clients for Menu"}),L.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:["Monday","Tuesday","Thursday"].map(D=>{const O=P[D],de=ue[D];return O.length===0?null:s.jsxs("div",{className:"rounded-lg p-3 border-2",style:{borderColor:"#ebb582",backgroundColor:"#fefefe"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-2 pb-1 border-b",style:{borderColor:"#f0d5bc"},children:[s.jsx("span",{className:"font-bold text-xs",style:{color:"#3d59ab"},children:D}),s.jsx("button",{onClick:()=>{const ie=O.map(ve=>ve.name);ie.every(ve=>l.includes(ve))?a(ve=>ve.filter(He=>!ie.includes(He))):(a(ve=>[...new Set([...ve,...ie])]),t(de))},className:"text-xs px-2 py-0.5 rounded",style:{backgroundColor:"#3d59ab",color:"white"},children:O.every(ie=>l.includes(ie.name))?"Deselect All":"Select All"})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:O.map((ie,be)=>{const ve=l.includes(ie.name),He=A.some(Ae=>Ae.clientName===(ie.displayName||ie.name));return s.jsxs("button",{onClick:()=>{ve?a(Ae=>Ae.filter(Oe=>Oe!==ie.name)):(a(Ae=>[...Ae,ie.name]),t(de))},className:`px-2 py-1 rounded-full border text-xs transition-colors ${ve?"text-white":"bg-white"}`,style:ve?{backgroundColor:"#3d59ab",borderColor:"#3d59ab"}:{borderColor:He?"#22c55e":"#ebb582",color:He?"#22c55e":"#423d3c"},children:[He&&s.jsx(Fe,{size:10,className:"inline mr-0.5"}),ie.displayName||ie.name]},be)})})]},D)})}):s.jsxs("div",{className:"text-center py-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("p",{className:"text-gray-500 text-sm",children:"No clients scheduled for this week"}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Set delivery days in Clients or Billing & Dates first"})]}),I.length>L.length&&s.jsxs("div",{className:"mt-3 pt-3 border-t",style:{borderColor:"#ebb582"},children:[s.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["Clients without scheduled delivery (",I.length-L.length,"):"]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:I.filter(D=>!L.includes(D)).map((D,O)=>s.jsx("button",{onClick:()=>{a(de=>de.includes(D.name)?de.filter(ie=>ie!==D.name):[...de,D.name])},className:`px-2 py-1 rounded-full border text-xs transition-colors ${l.includes(D.name)?"text-white":"bg-white"}`,style:l.includes(D.name)?{backgroundColor:"#9ca3af",borderColor:"#9ca3af"}:{borderColor:"#d1d5db",color:"#6b7280"},children:D.displayName||D.name},O))})]})]}),l.length>0&&s.jsx("div",{className:"mb-4 p-3 rounded-lg",style:{backgroundColor:"#e8f4fd",border:"1px solid #3d59ab33"},children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xs,{size:16,style:{color:"#3d59ab"}}),s.jsx("span",{className:"text-sm font-medium",style:{color:"#3d59ab"},children:"Delivery Date:"}),s.jsx("span",{className:"font-bold",style:{color:"#3d59ab"},children:new Date(e+"T12:00:00").toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})]}),s.jsx("input",{type:"date",value:e,onChange:D=>t(D.target.value),className:"text-sm p-1.5 border rounded",style:{borderColor:"#3d59ab33"},title:"Override delivery date if needed"})]})}),l.length>0&&s.jsxs("div",{className:"mb-4 p-3 rounded-lg",style:{backgroundColor:"#fff8e7",border:"1px solid #ebb582"},children:[s.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#423d3c"},children:"Dietary Restrictions"}),s.jsxs("div",{className:"space-y-1",children:[l.map(D=>{const O=I.find(ie=>ie.name===D),de=O==null?void 0:O.dietaryRestrictions;return de?s.jsxs("div",{className:"text-sm",children:[s.jsxs("span",{className:"font-medium",style:{color:"#3d59ab"},children:[O.displayName||O.name,":"]})," ",s.jsx("span",{style:{color:"#b45309"},children:de})]},D):null}),l.every(D=>{const O=I.find(de=>de.name===D);return!(O!=null&&O.dietaryRestrictions)})&&s.jsx("p",{className:"text-sm text-gray-500 italic",children:"No dietary restrictions noted"})]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:["protein","veg","starch"].map(D=>s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-2 capitalize",style:{color:"#423d3c"},children:D==="veg"?"Vegetable":D}),s.jsxs("select",{value:c[D],onChange:O=>i({...c,[D]:O.target.value}),className:"w-full p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:[s.jsx("option",{value:"",children:"Select..."}),(o[D]||[]).map((O,de)=>s.jsx("option",{value:O.name,children:O.name},de))]})]},D))}),X.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#423d3c"},children:"Extras (Sauces, Breakfast, Soups)"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:X.map((D,O)=>s.jsx("button",{onClick:()=>Z(D.name),className:`px-3 py-1 rounded-full border-2 transition-colors text-sm ${c.extras.includes(D.name)?"text-white":"bg-white"}`,style:c.extras.includes(D.name)?{backgroundColor:"#ebb582",borderColor:"#ebb582"}:{borderColor:"#ebb582",color:"#423d3c"},children:D.name},O))})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{y(),u&&b(null)},className:"flex items-center gap-2 px-6 py-2 rounded-lg hover:opacity-90",style:{backgroundColor:u?"#3d59ab":"#ffd700",color:u?"#fff":"#423d3c"},children:u?s.jsxs(s.Fragment,{children:[s.jsx(Fe,{size:20}),"Save Changes"]}):s.jsxs(s.Fragment,{children:[s.jsx(gs,{size:20}),"Add to Menu"]})}),u&&s.jsxs("button",{onClick:_,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-200 text-gray-700",children:[s.jsx(wt,{size:16}),"Cancel"]}),!u&&d.length>0&&s.jsxs("button",{onClick:x,className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-red-100 text-red-700 text-sm",children:[s.jsx($s,{size:16}),"Clear All"]})]})]})]}),F&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-auto",children:[s.jsxs("div",{className:"p-4 border-b flex items-center justify-between sticky top-0 bg-white",children:[s.jsx("h3",{className:"text-lg font-bold",style:{color:"#3d59ab"},children:"Menu Preview"}),s.jsx("button",{onClick:()=>R(null),className:"p-1 rounded hover:bg-gray-100",children:s.jsx(wt,{size:20})})]}),s.jsx("div",{className:"p-4",children:s.jsx(Xu,{client:F,date:e,menuItems:V(F.displayName||F.name)})}),s.jsxs("div",{className:"p-4 border-t flex justify-end gap-2 sticky bottom-0 bg-white",children:[s.jsx("button",{onClick:()=>le(F.displayName||F.name),className:"px-4 py-2 rounded-lg bg-red-100 text-red-700",children:"Remove Menu"}),s.jsxs("button",{onClick:()=>{const D=F.displayName||F.name,O=V(D);W(D,O),R(null)},className:"px-4 py-2 rounded-lg border-2 flex items-center gap-2",style:{borderColor:"#3d59ab",color:"#3d59ab"},children:[s.jsx(ur,{size:18})," Edit"]}),s.jsxs("button",{onClick:()=>{ce(F.displayName||F.name),R(null)},className:"px-4 py-2 rounded-lg text-white flex items-center gap-2",style:{backgroundColor:"#22c55e"},children:[s.jsx(Fe,{size:18})," Approve"]})]})]})})]})}function Av({masterIngredients:e,newIngredient:t,setNewIngredient:n,editingIngredientId:r,editingIngredientData:l,setEditingIngredientData:a,duplicateWarnings:o,setDuplicateWarnings:c,scanForDuplicates:i,mergeIngredients:d,addMasterIngredient:m,deleteMasterIngredient:y,startEditingMasterIngredient:x,saveEditingMasterIngredient:C,cancelEditingMasterIngredient:U,ingredientsFileRef:N,exportIngredientsCSV:z}){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Ingredients"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 rounded-lg border-2 border-orange-400 text-orange-600",children:[s.jsx(Oh,{size:18}),"Find Duplicates"]}),s.jsxs("button",{onClick:()=>N.current.click(),className:"flex items-center gap-2 px-4 py-2 rounded-lg border-2",style:{borderColor:"#3d59ab",color:"#3d59ab"},children:[s.jsx(yd,{size:18}),"Import"]}),s.jsxs("button",{onClick:z,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[s.jsx(Mo,{size:18}),"Export"]})]})]}),o.length>0&&s.jsxs("div",{className:"mb-4 p-4 bg-orange-50 border-2 border-orange-200 rounded-lg",children:[s.jsx("h3",{className:"font-bold text-orange-700 mb-2",children:"Duplicates:"}),o.map((f,p)=>s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-orange-200 last:border-0",children:[s.jsxs("span",{className:"text-sm",children:['"',f.ing1.name,'"  "',f.ing2.name,'"']}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>d(f.ing1.id,f.ing2.id),className:"text-xs px-2 py-1 rounded bg-blue-100 text-blue-700",children:['Keep "',f.ing1.name,'"']}),s.jsxs("button",{onClick:()=>d(f.ing2.id,f.ing1.id),className:"text-xs px-2 py-1 rounded bg-blue-100 text-blue-700",children:['Keep "',f.ing2.name,'"']}),s.jsx("button",{onClick:()=>c(h=>h.filter((M,T)=>T!==p)),className:"text-xs px-2 py-1 rounded bg-gray-100",children:"Ignore"})]})]},p))]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsx("input",{type:"text",value:t.name,onChange:f=>n({...t,name:f.target.value}),placeholder:"Name",className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}}),s.jsx("input",{type:"text",value:t.cost,onChange:f=>n({...t,cost:f.target.value}),placeholder:"Cost/unit",className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}}),s.jsx("select",{value:t.unit,onChange:f=>n({...t,unit:f.target.value}),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:$u.map(f=>s.jsx("option",{value:f,children:f},f))}),s.jsx("input",{type:"text",value:t.source,onChange:f=>n({...t,source:f.target.value}),placeholder:"Source",className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}}),s.jsx("select",{value:t.section,onChange:f=>n({...t,section:f.target.value}),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:mo.map(f=>s.jsx("option",{value:f,children:f},f))})]}),s.jsxs("button",{onClick:m,className:"px-6 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[s.jsx(gs,{size:20,className:"inline mr-2"}),"Add"]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-4",style:{color:"#3d59ab"},children:["All Ingredients (",e.length,")"]}),e.length>0?s.jsx("div",{className:"space-y-2",children:e.map(f=>s.jsx("div",{children:r===f.id?s.jsxs("div",{className:"flex flex-wrap gap-2 p-3 rounded-lg border-2",style:{borderColor:"#3d59ab",backgroundColor:"#f9f9ed"},children:[s.jsx("input",{type:"text",value:l.name,onChange:p=>a({...l,name:p.target.value}),className:"flex-1 min-w-[120px] p-2 border rounded"}),s.jsx("input",{type:"text",value:l.cost,onChange:p=>a({...l,cost:p.target.value}),placeholder:"$",className:"w-16 p-2 border rounded"}),s.jsx("select",{value:l.unit,onChange:p=>a({...l,unit:p.target.value}),className:"w-16 p-2 border rounded",children:$u.map(p=>s.jsx("option",{value:p,children:p},p))}),s.jsx("input",{type:"text",value:l.source,onChange:p=>a({...l,source:p.target.value}),placeholder:"Source",className:"w-20 p-2 border rounded"}),s.jsx("select",{value:l.section,onChange:p=>a({...l,section:p.target.value}),className:"w-28 p-2 border rounded",children:mo.map(p=>s.jsx("option",{value:p,children:p},p))}),s.jsx("button",{onClick:C,className:"px-3 py-2 rounded text-white",style:{backgroundColor:"#3d59ab"},children:s.jsx(Fe,{size:18})}),s.jsx("button",{onClick:U,className:"px-3 py-2 rounded bg-gray-200",children:s.jsx(wt,{size:18})})]}):s.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:f.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:[f.cost&&`$${f.cost}/${f.unit}`," ",f.source&&` ${f.source}`,"  ",f.section]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>x(f),className:"text-blue-600",children:s.jsx(ur,{size:18})}),s.jsx("button",{onClick:()=>y(f.id),className:"text-red-600",children:s.jsx($s,{size:18})})]})]})},f.id))}):s.jsx("p",{className:"text-gray-500",children:"No ingredients yet."})]})]})}const Je=({label:e,children:t})=>s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"text-sm font-medium mb-1",style:{color:"#423d3c"},children:e}),t]}),Xe="p-2 border-2 rounded-lg",et={borderColor:"#ebb582"},em=({contact:e,index:t,onChange:n,onRemove:r,canRemove:l})=>s.jsxs("div",{className:"p-4 rounded-lg border-2 relative",style:{borderColor:"#d9a87a",backgroundColor:"#fff"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("span",{className:"text-sm font-bold",style:{color:"#3d59ab"},children:["Contact ",t+1]}),l&&s.jsx("button",{type:"button",onClick:r,className:"text-red-500 hover:text-red-700 p-1",title:"Remove contact",children:s.jsx(I0,{size:18})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsx(Je,{label:"Full Name",children:s.jsx("input",{type:"text",value:e.fullName||"",onChange:a=>n(t,"fullName",a.target.value),placeholder:"Full name",className:Xe,style:et})}),s.jsx(Je,{label:"Display Name (for greetings)",children:s.jsx("input",{type:"text",value:e.displayName||"",onChange:a=>n(t,"displayName",a.target.value),placeholder:"e.g., Jennifer",className:Xe,style:et})}),s.jsx(Je,{label:"Email",children:s.jsx("input",{type:"email",value:e.email||"",onChange:a=>n(t,"email",a.target.value),placeholder:"Email address",className:Xe,style:et})}),s.jsx(Je,{label:"Phone",children:s.jsx("input",{type:"tel",value:e.phone||"",onChange:a=>n(t,"phone",a.target.value),placeholder:"Phone number",className:Xe,style:et})}),s.jsx("div",{className:"md:col-span-2",children:s.jsx(Je,{label:"Delivery Address",children:s.jsx("input",{type:"text",value:e.address||"",onChange:a=>n(t,"address",a.target.value),placeholder:"Street address",className:Xe,style:et})})})]})]}),Ca=e=>{if(e.subscriptionId)return e;const t=e.contacts&&e.contacts.length>0?e.contacts.map(n=>({fullName:n.fullName||n.name||"",displayName:n.displayName||"",email:n.email||"",phone:n.phone||"",address:n.address||""})):[{fullName:e.name||"",displayName:"",email:e.email||"",phone:e.phone||"",address:e.address||""}];return{subscriptionId:e.id||Date.now().toString(),displayName:e.displayName||e.name||"",portions:e.portions||e.persons||1,mealsPerWeek:e.mealsPerWeek||0,frequency:e.frequency||"weekly",status:e.status||"active",zone:e.zone||"",deliveryDay:e.deliveryDay||"",pickup:e.pickup||!1,planPrice:e.planPrice||0,serviceFee:e.serviceFee||0,prepayDiscount:e.prepayDiscount||!1,newClientFeePaid:e.newClientFeePaid||!1,paysOwnGroceries:e.paysOwnGroceries||!1,billingNotes:e.billingNotes||"",accessCode:e.accessCode||"",honeyBookLink:e.honeyBookLink||"",dietaryRestrictions:e.dietaryRestrictions||"",contacts:t}};function $v({clients:e,newClient:t,setNewClient:n,addClient:r,deleteClient:l,clientsFileRef:a,exportClientsCSV:o,setClients:c,deliveryLog:i=[],orderHistory:d=[]}){const[m,y]=g.useState(null),[x,C]=g.useState(null),[U,N]=g.useState({}),z=E=>{N(L=>({...L,[E]:!L[E]}))},f=E=>{const L=i.filter(B=>B.clientName===E).map(B=>({date:B.date,dishes:[],status:B.problem?"problem":"delivered",problem:B.problem,bagsReturned:B.bagsReturned,source:"log"})),P=d.filter(B=>B.clientName===E).map(B=>({date:B.date,dishes:B.dishes||[],status:"completed",source:"history"})),A={};return[...L,...P].forEach(B=>{(!A[B.date]||B.dishes.length>0)&&(A[B.date]=B)}),Object.values(A).sort((B,ne)=>new Date(ne.date)-new Date(B.date)).slice(0,4)},p=E=>E.contacts&&E.contacts.length>0?E.contacts:[{...gr}],h=E=>{const L=Ca(e[E]);y(E),C({...L,contacts:p(L)})},M=()=>{y(null),C(null)},T=()=>{const E=[...e];E[m]=x,c(E),y(null),C(null)},F=(E,L,P)=>{const A=[...t.contacts||[{...gr}]];A[E]={...A[E],[L]:P},n({...t,contacts:A})},R=()=>{const E=[...t.contacts||[],{...gr}];n({...t,contacts:E})},u=E=>{const L=(t.contacts||[]).filter((P,A)=>A!==E);n({...t,contacts:L})},b=(E,L,P)=>{const A=[...x.contacts];A[E]={...A[E],[L]:P},C({...x,contacts:A})},S=()=>{const E=[...x.contacts,{...gr}];C({...x,contacts:E})},j=E=>{const L=x.contacts.filter((P,A)=>A!==E);C({...x,contacts:L})},k=E=>{const L=(E.subscriptionId||E.displayName||E.name||"").toString().toLowerCase().replace(/\s+/g,"-");return`${window.location.origin}/client/${L}`},H=E=>{const L=k(E);navigator.clipboard.writeText(L).then(()=>{alert(`Portal link copied!
${L}`)}).catch(()=>{prompt("Copy this link:",L)})},I=E=>{const L=p(Ca(E)),P=[...new Set(L.filter(A=>A.address).map(A=>A.address.toLowerCase().trim()))];return{count:L.length,uniqueAddresses:P.length,contacts:L,primaryContact:L[0]}},ue=()=>{const E=["subscriptionId","subscriptionDisplayName","portions","mealsPerWeek","frequency","status","zone","deliveryDay","pickup","planPrice","serviceFee","prepayDiscount","newClientFeePaid","paysOwnGroceries","billingNotes","dietaryRestrictions","accessCode","contactFullName","contactDisplayName","email","phone","address"],L=[];e.forEach(oe=>{const G=Ca(oe);p(G).forEach((ce,ee)=>{L.push([ee===0?G.subscriptionId:"",ee===0?G.displayName:"",ee===0?G.portions:"",ee===0?G.mealsPerWeek:"",ee===0?G.frequency:"",ee===0?G.status:"",ee===0?G.zone:"",ee===0?G.deliveryDay:"",ee===0?G.pickup:"",ee===0?G.planPrice:"",ee===0?G.serviceFee:"",ee===0?G.prepayDiscount:"",ee===0?G.newClientFeePaid:"",ee===0?G.paysOwnGroceries:"",ee===0?G.billingNotes:"",ee===0?G.dietaryRestrictions:"",ee===0?G.accessCode:"",ce.fullName||"",ce.displayName||"",ce.email||"",ce.phone||"",ce.address||""].map(le=>`"${(le||"").toString().replace(/"/g,'""')}"`).join(","))})});const P=[E.join(","),...L].join(`
`),A=new Blob([P],{type:"text/csv"}),B=URL.createObjectURL(A),ne=document.createElement("a");ne.href=B,ne.download="subscriptions.csv",ne.click()};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Add Subscription"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>{var E;return(E=a.current)==null?void 0:E.click()},className:"flex items-center gap-2 px-4 py-2 rounded-lg border-2",style:{borderColor:"#3d59ab",color:"#3d59ab"},children:[s.jsx(yd,{size:18}),"Import"]}),s.jsxs("button",{onClick:ue,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[s.jsx(Mo,{size:18}),"Export"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsx(Je,{label:"Subscription Name",children:s.jsx("input",{type:"text",value:t.displayName||"",onChange:E=>n({...t,displayName:E.target.value}),placeholder:"e.g., J.J. and Lauren",className:Xe,style:et})}),s.jsx(Je,{label:"Portions",children:s.jsx("input",{type:"number",value:t.portions||1,onChange:E=>n({...t,portions:parseInt(E.target.value)||1}),placeholder:"Number of portions",className:Xe,style:et})}),s.jsx(Je,{label:"Meals per Week",children:s.jsx("input",{type:"number",value:t.mealsPerWeek||0,onChange:E=>n({...t,mealsPerWeek:parseInt(E.target.value)||0}),placeholder:"Number of meals",className:Xe,style:et})}),s.jsx(Je,{label:"Zone",children:s.jsxs("select",{value:t.zone||"",onChange:E=>n({...t,zone:E.target.value}),className:Xe,style:et,children:[s.jsx("option",{value:"",children:"Unassigned"}),ws.map(E=>s.jsxs("option",{value:E,children:["Zone ",E]},E))]})}),s.jsx(Je,{label:"Delivery Day",children:s.jsxs("select",{value:t.deliveryDay||"",onChange:E=>n({...t,deliveryDay:E.target.value}),className:Xe,style:et,children:[s.jsx("option",{value:"",children:"Select day"}),Bu.map(E=>s.jsx("option",{value:E,children:E},E))]})}),s.jsx(Je,{label:"Frequency",children:s.jsxs("select",{value:t.frequency||"weekly",onChange:E=>n({...t,frequency:E.target.value}),className:Xe,style:et,children:[s.jsx("option",{value:"weekly",children:"Weekly"}),s.jsx("option",{value:"biweekly",children:"Biweekly"})]})}),s.jsx(Je,{label:"Status",children:s.jsxs("select",{value:t.status||"active",onChange:E=>n({...t,status:E.target.value}),className:Xe,style:et,children:[s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"paused",children:"Paused"})]})}),s.jsx(Je,{label:"Client Portal Access Code",children:s.jsx("input",{type:"text",value:t.accessCode||"",onChange:E=>n({...t,accessCode:E.target.value}),placeholder:"Optional access code",className:Xe,style:et})}),s.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[s.jsx("input",{type:"checkbox",id:"pickup",checked:t.pickup||!1,onChange:E=>n({...t,pickup:E.target.checked,serviceFee:E.target.checked?0:t.serviceFee}),className:"w-5 h-5 rounded border-2",style:{accentColor:"#3d59ab"}}),s.jsx("label",{htmlFor:"pickup",className:"text-sm font-medium",style:{color:"#423d3c"},children:"Pickup (exclude from delivery routes)"})]}),s.jsx(Je,{label:"Menu Selection",children:s.jsxs("select",{value:t.chefChoice===!1?"client":"chef",onChange:E=>n({...t,chefChoice:E.target.value==="chef"}),className:Xe,style:et,children:[s.jsx("option",{value:"chef",children:"Chef Choice (Chef Paula picks)"}),s.jsx("option",{value:"client",children:"Client Picks (Client selects dishes)"})]})}),s.jsx(Je,{label:"HoneyBook Invoice Link",children:s.jsx("input",{type:"url",value:t.honeyBookLink||"",onChange:E=>n({...t,honeyBookLink:E.target.value}),className:Xe,style:et,placeholder:"https://..."})})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t-2",style:{borderColor:"#ebb582"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",style:{color:"#3d59ab"},children:[s.jsx(nr,{size:20}),"Contacts"]}),s.jsxs("button",{type:"button",onClick:R,className:"flex items-center gap-1 px-3 py-1 rounded-lg text-white text-sm",style:{backgroundColor:"#3d59ab"},children:[s.jsx(gs,{size:16}),"Add Contact"]})]}),s.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Each contact receives notifications. Different addresses = separate delivery stops."}),s.jsx("div",{className:"space-y-4",children:(t.contacts||[{...gr}]).map((E,L)=>s.jsx(em,{contact:E,index:L,onChange:F,onRemove:()=>u(L),canRemove:(t.contacts||[]).length>1},L))})]}),s.jsxs("div",{className:"mt-6 pt-6 border-t-2",style:{borderColor:"#ebb582"},children:[s.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:"#3d59ab"},children:"Pricing"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Je,{label:"Plan Price ($)",children:s.jsx("input",{type:"number",step:"0.01",value:t.planPrice||0,onChange:E=>n({...t,planPrice:parseFloat(E.target.value)||0}),placeholder:"0.00",className:Xe,style:et})}),s.jsx(Je,{label:"Service Fee ($)",children:s.jsx("input",{type:"number",step:"0.01",value:t.pickup?0:t.serviceFee||0,onChange:E=>n({...t,serviceFee:parseFloat(E.target.value)||0}),placeholder:"0.00",className:Xe,style:et,disabled:t.pickup})}),s.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[s.jsx("input",{type:"checkbox",id:"prepayDiscount",checked:t.prepayDiscount||!1,onChange:E=>n({...t,prepayDiscount:E.target.checked}),className:"w-5 h-5 rounded border-2",style:{accentColor:"#3d59ab"}}),s.jsx("label",{htmlFor:"prepayDiscount",className:"text-sm font-medium",style:{color:"#423d3c"},children:"Pre-pay Discount (10% off)"})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[s.jsx("input",{type:"checkbox",id:"newClientFeePaid",checked:t.newClientFeePaid||!1,onChange:E=>n({...t,newClientFeePaid:E.target.checked}),className:"w-5 h-5 rounded border-2",style:{accentColor:"#3d59ab"}}),s.jsx("label",{htmlFor:"newClientFeePaid",className:"text-sm font-medium",style:{color:"#423d3c"},children:"New Client Fee Paid"})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[s.jsx("input",{type:"checkbox",id:"paysOwnGroceries",checked:t.paysOwnGroceries||!1,onChange:E=>n({...t,paysOwnGroceries:E.target.checked}),className:"w-5 h-5 rounded border-2",style:{accentColor:"#3d59ab"}}),s.jsx("label",{htmlFor:"paysOwnGroceries",className:"text-sm font-medium",style:{color:"#423d3c"},children:"Pays Own Groceries"})]})]}),s.jsx("div",{className:"mt-4",children:s.jsx(Je,{label:"Billing Notes",children:s.jsx("textarea",{value:t.billingNotes||"",onChange:E=>n({...t,billingNotes:E.target.value}),placeholder:"Any billing notes",className:Xe+" w-full",style:et,rows:"2"})})}),s.jsx("div",{className:"mt-4",children:s.jsx(Je,{label:"Dietary Restrictions",children:s.jsx("textarea",{value:t.dietaryRestrictions||"",onChange:E=>n({...t,dietaryRestrictions:E.target.value}),placeholder:"Allergies, preferences, dietary needs...",className:Xe+" w-full",style:et,rows:"2"})})})]}),s.jsxs("button",{onClick:r,className:"mt-6 px-6 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[s.jsx(gs,{size:20,className:"inline mr-2"}),"Add Subscription"]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-4",style:{color:"#3d59ab"},children:["Subscriptions (",e.length,")"]}),s.jsx("div",{className:"space-y-3",children:e.map((E,L)=>{var A;const P=Ca(E);return s.jsx("div",{children:m===L?s.jsxs("div",{className:"border-2 rounded-lg p-4",style:{borderColor:"#3d59ab",backgroundColor:"#f9f9ed"},children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsx(Je,{label:"Subscription Name",children:s.jsx("input",{type:"text",value:x.displayName||"",onChange:B=>C({...x,displayName:B.target.value}),className:Xe,style:et})}),s.jsx(Je,{label:"Portions",children:s.jsx("input",{type:"number",value:x.portions||1,onChange:B=>C({...x,portions:parseInt(B.target.value)||1}),className:Xe,style:et})}),s.jsx(Je,{label:"Meals per Week",children:s.jsx("input",{type:"number",value:x.mealsPerWeek||0,onChange:B=>C({...x,mealsPerWeek:parseInt(B.target.value)||0}),className:Xe,style:et})}),s.jsx(Je,{label:"Zone",children:s.jsxs("select",{value:x.zone||"",onChange:B=>C({...x,zone:B.target.value}),className:Xe,style:et,children:[s.jsx("option",{value:"",children:"Unassigned"}),ws.map(B=>s.jsxs("option",{value:B,children:["Zone ",B]},B))]})}),s.jsx(Je,{label:"Delivery Day",children:s.jsxs("select",{value:x.deliveryDay||"",onChange:B=>C({...x,deliveryDay:B.target.value}),className:Xe,style:et,children:[s.jsx("option",{value:"",children:"Select day"}),Bu.map(B=>s.jsx("option",{value:B,children:B},B))]})}),s.jsx(Je,{label:"Frequency",children:s.jsxs("select",{value:x.frequency||"weekly",onChange:B=>C({...x,frequency:B.target.value}),className:Xe,style:et,children:[s.jsx("option",{value:"weekly",children:"Weekly"}),s.jsx("option",{value:"biweekly",children:"Biweekly"})]})}),s.jsx(Je,{label:"Status",children:s.jsxs("select",{value:x.status||"active",onChange:B=>C({...x,status:B.target.value}),className:Xe,style:et,children:[s.jsx("option",{value:"active",children:"Active"}),s.jsx("option",{value:"paused",children:"Paused"})]})}),s.jsx(Je,{label:"Access Code",children:s.jsx("input",{type:"text",value:x.accessCode||"",onChange:B=>C({...x,accessCode:B.target.value}),className:Xe,style:et})}),s.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[s.jsx("input",{type:"checkbox",id:`pickup-edit-${L}`,checked:x.pickup||!1,onChange:B=>C({...x,pickup:B.target.checked,serviceFee:B.target.checked?0:x.serviceFee}),className:"w-5 h-5 rounded border-2",style:{accentColor:"#3d59ab"}}),s.jsx("label",{htmlFor:`pickup-edit-${L}`,className:"text-sm font-medium",style:{color:"#423d3c"},children:"Pickup"})]}),s.jsx(Je,{label:"Menu Selection",children:s.jsxs("select",{value:x.chefChoice===!1?"client":"chef",onChange:B=>C({...x,chefChoice:B.target.value==="chef"}),className:Xe,style:et,children:[s.jsx("option",{value:"chef",children:"Chef Choice (Chef Paula picks)"}),s.jsx("option",{value:"client",children:"Client Picks (Client selects dishes)"})]})}),s.jsx(Je,{label:"HoneyBook Invoice Link",children:s.jsx("input",{type:"url",value:x.honeyBookLink||"",onChange:B=>C({...x,honeyBookLink:B.target.value}),className:Xe,style:et,placeholder:"https://..."})})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t-2",style:{borderColor:"#ebb582"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h4",{className:"text-md font-bold flex items-center gap-2",style:{color:"#3d59ab"},children:[s.jsx(nr,{size:18}),"Contacts (",((A=x.contacts)==null?void 0:A.length)||1,")"]}),s.jsxs("button",{type:"button",onClick:S,className:"flex items-center gap-1 px-3 py-1 rounded-lg text-white text-sm",style:{backgroundColor:"#3d59ab"},children:[s.jsx(gs,{size:16}),"Add Contact"]})]}),s.jsx("div",{className:"space-y-4",children:(x.contacts||[]).map((B,ne)=>s.jsx(em,{contact:B,index:ne,onChange:b,onRemove:()=>j(ne),canRemove:x.contacts.length>1},ne))})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t-2",style:{borderColor:"#ebb582"},children:[s.jsx("h4",{className:"text-md font-bold mb-3",style:{color:"#3d59ab"},children:"Pricing"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Je,{label:"Plan Price ($)",children:s.jsx("input",{type:"number",step:"0.01",value:x.planPrice||0,onChange:B=>C({...x,planPrice:parseFloat(B.target.value)||0}),className:Xe,style:et})}),s.jsx(Je,{label:"Service Fee ($)",children:s.jsx("input",{type:"number",step:"0.01",value:x.pickup?0:x.serviceFee||0,onChange:B=>C({...x,serviceFee:parseFloat(B.target.value)||0}),className:Xe,style:et,disabled:x.pickup})}),s.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[s.jsx("input",{type:"checkbox",id:`prepayDiscount-edit-${L}`,checked:x.prepayDiscount||!1,onChange:B=>C({...x,prepayDiscount:B.target.checked}),className:"w-5 h-5 rounded border-2",style:{accentColor:"#3d59ab"}}),s.jsx("label",{htmlFor:`prepayDiscount-edit-${L}`,className:"text-sm font-medium",style:{color:"#423d3c"},children:"Pre-pay (10% off)"})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[s.jsx("input",{type:"checkbox",id:`newClientFeePaid-edit-${L}`,checked:x.newClientFeePaid||!1,onChange:B=>C({...x,newClientFeePaid:B.target.checked}),className:"w-5 h-5 rounded border-2",style:{accentColor:"#3d59ab"}}),s.jsx("label",{htmlFor:`newClientFeePaid-edit-${L}`,className:"text-sm font-medium",style:{color:"#423d3c"},children:"New Client Fee Paid"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:`paysOwnGroceries-edit-${L}`,checked:x.paysOwnGroceries||!1,onChange:B=>C({...x,paysOwnGroceries:B.target.checked}),className:"w-5 h-5 rounded border-2",style:{accentColor:"#3d59ab"}}),s.jsx("label",{htmlFor:`paysOwnGroceries-edit-${L}`,className:"text-sm font-medium",style:{color:"#423d3c"},children:"Pays Own Groceries"})]})]}),s.jsx("div",{className:"mt-4",children:s.jsx(Je,{label:"Billing Notes",children:s.jsx("textarea",{value:x.billingNotes||"",onChange:B=>C({...x,billingNotes:B.target.value}),className:Xe+" w-full",style:et,rows:"2"})})}),s.jsx("div",{className:"mt-4",children:s.jsx(Je,{label:"Dietary Restrictions",children:s.jsx("textarea",{value:x.dietaryRestrictions||"",onChange:B=>C({...x,dietaryRestrictions:B.target.value}),placeholder:"Allergies, preferences, dietary needs...",className:Xe+" w-full",style:et,rows:"2"})})})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsxs("button",{onClick:T,className:"flex items-center gap-1 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[s.jsx(Fe,{size:18}),"Save"]}),s.jsxs("button",{onClick:M,className:"flex items-center gap-1 px-4 py-2 rounded-lg bg-gray-200",children:[s.jsx(wt,{size:18}),"Cancel"]})]})]}):s.jsx("div",{className:`border-2 rounded-lg p-4 ${P.status==="paused"?"opacity-60":""}`,style:{borderColor:P.status==="paused"?"#9ca3af":"#ebb582"},children:s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("h3",{className:"font-bold text-lg",children:P.displayName||"Unnamed"}),P.status==="paused"&&s.jsx("span",{className:"text-xs px-2 py-1 rounded bg-gray-200 text-gray-600",children:"Paused"}),P.status==="active"&&s.jsx("span",{className:"text-xs px-2 py-1 rounded bg-green-100 text-green-700",children:"Active"}),P.pickup&&s.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-100 text-blue-700",children:"Pickup"})]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[P.portions," portions  ",P.mealsPerWeek," meals/week  ",P.frequency==="biweekly"?"Biweekly":"Weekly"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[P.zone?`Zone ${P.zone}`:"No zone",P.deliveryDay&&`  ${P.deliveryDay}`]}),(()=>{const{count:B,uniqueAddresses:ne,contacts:oe}=I(P);return s.jsx("div",{className:"mt-2",children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("span",{className:"text-purple-600 font-medium",children:[s.jsx(nr,{size:14,className:"inline mr-1"}),B," contact",B!==1?"s":"","  ",ne," delivery stop",ne!==1?"s":""]}),s.jsx("div",{className:"mt-1 space-y-1",children:oe.map((G,K)=>s.jsxs("div",{className:"text-gray-500 pl-4 border-l-2",style:{borderColor:"#d9a87a"},children:[s.jsx("span",{className:"font-medium",children:G.fullName||G.displayName||`Contact ${K+1}`}),G.displayName&&G.displayName!==G.fullName&&s.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:['"',G.displayName,'"']}),G.address&&s.jsx("span",{className:"block text-xs",children:G.address})]},K))})]})})})(),P.billingNotes&&s.jsxs("p",{className:"text-sm text-amber-700 mt-2 bg-amber-50 px-2 py-1 rounded",children:["Billing: ",P.billingNotes]}),P.dietaryRestrictions&&s.jsxs("p",{className:"text-sm text-red-700 mt-2 bg-red-50 px-2 py-1 rounded",children:["Diet: ",P.dietaryRestrictions]}),(()=>{const B=P.subscriptionId||P.displayName||L,ne=P.displayName||P.name,oe=f(ne),G=U[B];return oe.length===0?null:s.jsxs("div",{className:"mt-3",children:[s.jsxs("button",{onClick:K=>{K.stopPropagation(),z(B)},className:"flex items-center gap-1 text-sm text-gray-600 hover:text-gray-800",children:[s.jsx(as,{size:14}),s.jsxs("span",{children:["Recent Deliveries (",oe.length,")"]}),G?s.jsx(Io,{size:14}):s.jsx(Oo,{size:14})]}),G&&s.jsx("div",{className:"mt-2 pl-4 border-l-2 space-y-2",style:{borderColor:"#3d59ab"},children:oe.map((K,ce)=>s.jsxs("div",{className:"text-sm p-2 rounded",style:{backgroundColor:"#f9f9ed"},children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:new Date(K.date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})}),K.status==="problem"&&s.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-red-100 text-red-700",children:K.problem}),K.status==="delivered"&&!K.problem&&s.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-green-100 text-green-700",children:"Delivered"}),K.bagsReturned===!1&&s.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-100 text-amber-700",children:"No bags"})]}),K.dishes&&K.dishes.length>0&&s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:K.dishes.join(", ")})]},ce))})]})})()]}),s.jsxs("div",{className:"flex gap-2 self-start ml-4",children:[s.jsx("button",{onClick:()=>H(P),className:"text-purple-600",title:"Copy portal link",children:s.jsx(_0,{size:18})}),s.jsx("button",{onClick:()=>h(L),className:"text-blue-600",title:"Edit",children:s.jsx(ur,{size:18})}),s.jsx("button",{onClick:()=>l(L),className:"text-red-600",title:"Delete",children:s.jsx($s,{size:18})})]})]})})},P.subscriptionId||L)})})]})]})}function Uv({client:e,clientPortalData:t={},onSave:n,onClose:r}){var p;const[l,a]=g.useState((e==null?void 0:e.deliveryDates)||[]),[o,c]=g.useState((e==null?void 0:e.billDueDate)||""),[i,d]=g.useState(""),m=((p=t[e==null?void 0:e.name])==null?void 0:p.selectedDates)||[],y=m.length>0;g.useEffect(()=>{var h;((h=e==null?void 0:e.deliveryDates)==null?void 0:h.length)>0?a(e.deliveryDates):y&&a(m),c((e==null?void 0:e.billDueDate)||"")},[e]);const x=()=>{if(!i)return;if(l.includes(i)){alert("This date is already added");return}if(l.length>=4){alert("Maximum 4 delivery dates allowed");return}const h=[...l,i].sort();a(h),d("")},C=h=>{a(l.filter(M=>M!==h))},U=()=>{m.length>0&&a([...m].sort())},N=()=>{n({...e,deliveryDates:l.sort(),billDueDate:o}),r()},z=h=>h?new Date(h+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",f=(e==null?void 0:e.displayName)||(e==null?void 0:e.name)||"Unknown";return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"p-4 border-b flex items-center justify-between",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("h2",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:f}),s.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-200 rounded",children:s.jsx(wt,{size:24})})]}),s.jsxs("div",{className:"p-6 space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"font-bold flex items-center gap-2",style:{color:"#3d59ab"},children:[s.jsx(xs,{size:20}),"Next Delivery Dates"]}),y&&s.jsxs("button",{onClick:U,className:"text-sm flex items-center gap-1 px-2 py-1 rounded bg-purple-100 text-purple-700 hover:bg-purple-200",children:[s.jsx(mr,{size:14}),"Sync from Portal"]})]}),y&&s.jsxs("p",{className:"text-xs text-purple-600 mb-2",children:["Client selected dates in portal: ",m.map(h=>z(h)).join(", ")]}),s.jsx("div",{className:"space-y-2 mb-3",children:l.length===0?s.jsx("p",{className:"text-gray-400 text-sm italic",children:"No delivery dates set"}):l.map((h,M)=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded border",style:{borderColor:"#ebb582",backgroundColor:"#fff"},children:[s.jsxs("span",{children:[s.jsxs("span",{className:"text-gray-400 text-sm mr-2",children:["#",M+1]}),z(h)]}),s.jsx("button",{onClick:()=>C(h),className:"text-red-500 hover:text-red-700 p-1",children:s.jsx($s,{size:16})})]},h))}),l.length<4&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"date",value:i,onChange:h=>d(h.target.value),min:new Date().toISOString().split("T")[0],className:"flex-1 p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}}),s.jsx("button",{onClick:x,disabled:!i,className:"px-4 py-2 rounded-lg text-white disabled:opacity-50",style:{backgroundColor:"#3d59ab"},children:s.jsx(gs,{size:20})})]})]}),s.jsxs("div",{children:[s.jsxs("h3",{className:"font-bold flex items-center gap-2 mb-3",style:{color:"#3d59ab"},children:[s.jsx(Lo,{size:20}),"Bill Due Date"]}),s.jsx("input",{type:"date",value:o,onChange:h=>c(h.target.value),className:"w-full p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}}),o&&s.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Due: ",z(o),new Date(o+"T12:00:00")<new Date&&s.jsx("span",{className:"text-red-600 ml-2 font-medium",children:"OVERDUE"})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Subscription Summary"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Plan:"})," ",s.jsxs("span",{className:"font-medium",children:["$",(e==null?void 0:e.planPrice)||0]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Service Fee:"})," ",s.jsxs("span",{className:"font-medium",children:["$",(e==null?void 0:e.serviceFee)||0]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Frequency:"})," ",s.jsx("span",{className:"font-medium capitalize",children:(e==null?void 0:e.frequency)||"weekly"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Meals/Week:"})," ",s.jsx("span",{className:"font-medium",children:(e==null?void 0:e.mealsPerWeek)||0})]})]})]})]}),s.jsxs("div",{className:"p-4 border-t flex justify-end gap-3",children:[s.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg border-2 hover:bg-gray-50",style:{borderColor:"#ebb582"},children:"Cancel"}),s.jsx("button",{onClick:N,className:"px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:"Save Changes"})]})]})})}const ul="goldfinchChefData";function Bv(){const[e,t]=g.useState([]),[n,r]=g.useState([]),[l,a]=g.useState([]),[o,c]=g.useState([]),[i,d]=g.useState([]),[m,y]=g.useState({}),[x,C]=g.useState([]),[U,N]=g.useState({routeStartAddress:""}),[z,f]=g.useState([]),[p,h]=g.useState({}),[M,T]=g.useState({protein:[],veg:[],starch:[],sauces:[],breakfast:[],soups:[]}),[F,R]=g.useState([]),[u,b]=g.useState([]),[S,j]=g.useState({}),[k,H]=g.useState(!1);g.useEffect(()=>{const le=()=>{const _=localStorage.getItem(ul);if(_)try{const V=JSON.parse(_);V.clients&&t(V.clients),V.drivers&&r(V.drivers),V.menuItems&&a(V.menuItems),V.deliveryLog&&c(V.deliveryLog),V.readyForDelivery&&d(V.readyForDelivery),V.clientPortalData&&y(V.clientPortalData),V.blockedDates&&C(V.blockedDates),V.adminSettings&&N(V.adminSettings),V.customTasks&&f(V.customTasks),V.weeklyTasks&&h(V.weeklyTasks),V.recipes&&T(V.recipes),V.masterIngredients&&R(V.masterIngredients),V.groceryBills&&b(V.groceryBills),V.weeks&&j(V.weeks)}catch(V){console.error("Error loading saved data:",V)}H(!0)};le();const W=_=>{_.key===ul&&le()};return window.addEventListener("storage",W),()=>window.removeEventListener("storage",W)},[]);const I=g.useCallback(le=>{const W=localStorage.getItem(ul);let _={};if(W)try{_=JSON.parse(W)}catch(Z){console.error("Error parsing saved data:",Z)}const V={..._,...le,lastSaved:new Date().toISOString()};localStorage.setItem(ul,JSON.stringify(V)),window.dispatchEvent(new CustomEvent("goldfinchDataUpdated"))},[]),ue=g.useCallback(le=>{r(le),I({drivers:le})},[I]),E=g.useCallback(le=>{C(le),I({blockedDates:le})},[I]),L=g.useCallback(le=>{N(le),I({adminSettings:le})},[I]),P=g.useCallback(le=>{f(le),I({customTasks:le})},[I]),A=g.useCallback(le=>{if(typeof le=="function"){const W=localStorage.getItem(ul);let _=[];if(W)try{_=JSON.parse(W).menuItems||[]}catch(Z){console.error("Error parsing saved data:",Z)}const V=le(_);a(V),I({menuItems:V})}else a(le),I({menuItems:le})},[I]),B=g.useCallback(le=>{h(le),I({weeklyTasks:le})},[I]),ne=g.useCallback(le=>{T(le),I({recipes:le})},[I]),oe=g.useCallback(le=>{R(le),I({masterIngredients:le})},[I]),G=g.useCallback(le=>{t(le),I({clients:le})},[I]),K=g.useCallback(le=>{b(le),I({groceryBills:le})},[I]),ce=g.useCallback(le=>{j(le),I({weeks:le})},[I]),ee=g.useCallback(le=>{const W=S[le]||En(le);if(W.status==="locked")return W;const _=Kh(W,l,e),V={...S,[le]:_};return j(V),I({weeks:V}),_},[S,l,e,I]);return{clients:e,drivers:n,menuItems:l,deliveryLog:o,readyForDelivery:i,clientPortalData:m,blockedDates:x,adminSettings:U,customTasks:z,weeklyTasks:p,recipes:M,masterIngredients:F,groceryBills:u,isLoaded:k,updateDrivers:ue,updateBlockedDates:E,updateAdminSettings:L,updateMenuItems:A,updateWeeklyTasks:B,updateRecipes:ne,updateMasterIngredients:oe,updateCustomTasks:P,updateClients:G,updateGroceryBills:K,weeks:S,updateWeeks:ce,lockWeekWithSnapshot:ee}}const Vt=({label:e,children:t})=>s.jsxs("div",{className:"flex flex-col",children:[s.jsx("label",{className:"text-sm font-medium mb-1",style:{color:"#423d3c"},children:e}),t]}),qt="p-2 border-2 rounded-lg",Gt={borderColor:"#ebb582"};function Wv(e=new Date){const t=new Date(e);t.setDate(t.getDate()-t.getDay()),t.setHours(0,0,0,0);const n=new Date(t);return n.setDate(n.getDate()+6),n.setHours(23,59,59,999),{start:t,end:n}}function Mr(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function Hv({weekStart:e,weekEnd:t,thisWeekDeliveries:n,thisWeekCompleted:r,renewalsThisWeek:l,problemsThisWeek:a,autoTasks:o,customTasks:c,updateCustomTasks:i,newTask:d,setNewTask:m,addCustomTask:y,toggleTaskComplete:x,deleteCustomTask:C,groceryBills:U,newGroceryBill:N,setNewGroceryBill:z,addGroceryBill:f,deleteGroceryBill:p,menuItems:h,recipes:M,getRecipeCost:T,clients:F,clientPortalData:R}){const[u,b]=g.useState(!1),[S,j]=g.useState(!1),k=()=>{let K=0;return h.filter(ee=>ee.approved).forEach(ee=>{const le=ee.portions||1;["protein","veg","starch"].forEach(W=>{var _;if(ee[W]){const V=(_=M[W])==null?void 0:_.find(Z=>Z.name===ee[W]);V&&(K+=T(V)*le)}}),ee.extras&&ee.extras.forEach(W=>{const _=["sauces","breakfast","soups"].find(V=>{var Z;return(Z=M[V])==null?void 0:Z.find(X=>X.name===W)});if(_){const V=M[_].find(Z=>Z.name===W);V&&(K+=T(V)*le)}})}),K},H=()=>{const K=new Date(e),ce=new Date(t);return U.filter(ee=>{const le=new Date(ee.date);return le>=K&&le<=ce}).reduce((ee,le)=>ee+(le.amount||0),0)},I=()=>{const K={};return U.forEach(ce=>{const ee=new Date(ce.date),le=`${ee.getFullYear()}-${String(ee.getMonth()+1).padStart(2,"0")}`;K[le]||(K[le]={spending:0,calculated:0}),K[le].spending+=ce.amount||0}),K},ue=k(),E=H(),L=E-ue,P=ue>0?(L/ue*100).toFixed(1):0,A=()=>{const K={},ce=(ee,le,W)=>{K[ee]||(K[ee]=[]);const _=c.some(V=>V.id===`${ee}-${le}`&&V.completed);K[ee].push({id:`${ee}-${le}`,clientName:ee,type:le,completed:_})};return o.forEach(ee=>{var W;const le=((W=ee.category)==null?void 0:W.toLowerCase())||"";le.includes("billing")||le.includes("renewal")?(ee.details||[]).forEach(_=>{ce(_,"Invoice prepared"),ce(_,"Paste Honeybook link")}):le.includes("menu")?(ee.details||[]).forEach(_=>{ce(_,"Plan menu")}):le.includes("dish picks")||le.includes("client picks")?(ee.details||[]).forEach(_=>{ce(_,"Review dish picks")}):le.includes("substitution")?(ee.details||[]).forEach(_=>{var Z;const V=(Z=_.split(":")[0])==null?void 0:Z.trim();V&&ce(V,"Review substitution request")}):le.includes("bags")?(ee.details||[]).forEach(_=>{ce(_,"Follow up on bags")}):le.includes("grocery")&&(ee.details||[]).forEach(_=>{ce(_,"Add grocery costs")})}),c.forEach(ee=>{ee.clientName&&(K[ee.clientName]||(K[ee.clientName]=[]),K[ee.clientName].push({id:ee.id,clientName:ee.clientName,type:ee.title,completed:ee.completed,isCustom:!0}))}),K},B=()=>c.filter(K=>!K.clientName).map(K=>({...K,isCustom:!0})),ne=A(),oe=B(),G=Object.keys(ne).length>0||oe.length>0;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",style:{color:"#3d59ab"},children:"This Week at a Glance"}),s.jsxs("p",{className:"text-gray-500 mb-6",children:[Mr(e)," - ",Mr(t)]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#dbeafe"},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(as,{size:24,style:{color:"#3d59ab"}}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Pending"})]}),s.jsx("p",{className:"text-3xl font-bold",style:{color:"#3d59ab"},children:n.length}),s.jsx("p",{className:"text-sm text-gray-500",children:"deliveries"})]}),s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#dcfce7"},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Fe,{size:24,className:"text-green-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Completed"})]}),s.jsx("p",{className:"text-3xl font-bold text-green-600",children:r.length}),s.jsx("p",{className:"text-sm text-gray-500",children:"deliveries"})]}),s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#fef3c7"},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(mr,{size:24,className:"text-amber-600"}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Renewals"})]}),s.jsx("p",{className:"text-3xl font-bold text-amber-600",children:l.length}),s.jsx("p",{className:"text-sm text-gray-500",children:"due"})]}),s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:a.length>0?"#fee2e2":"#f3f4f6"},children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(bt,{size:24,className:a.length>0?"text-red-600":"text-gray-400"}),s.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Problems"})]}),s.jsx("p",{className:`text-3xl font-bold ${a.length>0?"text-red-600":"text-gray-400"}`,children:a.length}),s.jsx("p",{className:"text-sm text-gray-500",children:"flagged"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",style:{color:"#3d59ab"},children:[s.jsx(Ih,{size:28}),"To Do This Week"]}),s.jsxs("button",{onClick:()=>b(!u),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[s.jsx(gs,{size:18}),"Add Task"]})]}),u&&s.jsx("div",{className:"mb-4 p-4 rounded-lg border-2",style:{borderColor:"#ebb582",backgroundColor:"#f9f9ed"},children:s.jsxs("div",{className:"flex flex-wrap gap-3",children:[s.jsxs("select",{value:d.clientName||"",onChange:K=>m({...d,clientName:K.target.value||void 0}),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:[s.jsx("option",{value:"",children:"Select client (optional)"}),F.filter(K=>K.status==="active").map((K,ce)=>s.jsx("option",{value:K.displayName||K.name,children:K.displayName||K.name},ce))]}),s.jsx("input",{type:"text",value:d.title,onChange:K=>m({...d,title:K.target.value}),placeholder:"Task description...",className:"flex-1 p-2 border-2 rounded-lg min-w-48",style:{borderColor:"#ebb582"}}),s.jsx("button",{onClick:()=>{y(),b(!1)},className:"px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:"Add"}),s.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 rounded-lg border-2",style:{borderColor:"#ebb582"},children:"Cancel"})]})}),s.jsx("div",{className:"space-y-4",children:G?s.jsxs(s.Fragment,{children:[Object.entries(ne).map(([K,ce])=>{const ee=ce.every(le=>le.completed);return s.jsxs("div",{className:`rounded-lg border-2 overflow-hidden ${ee?"opacity-60":""}`,style:{borderColor:"#ebb582"},children:[s.jsx("div",{className:"px-4 py-2 font-bold",style:{backgroundColor:"#3d59ab",color:"white"},children:K}),s.jsx("div",{className:"p-3 space-y-2",style:{backgroundColor:"#f9f9ed"},children:ce.map(le=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>{le.isCustom||c.find(_=>_.id===le.id)?x(le.id):i([...c,{...le,completed:!0}])},className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${le.completed?"bg-green-500 border-green-500":"border-gray-300 bg-white hover:border-green-400"}`,children:le.completed&&s.jsx(Fe,{size:12,className:"text-white"})}),s.jsx("span",{className:`text-sm ${le.completed?"line-through text-gray-400":""}`,children:le.type}),le.isCustom&&s.jsx("button",{onClick:()=>C(le.id),className:"text-red-400 hover:text-red-600 p-1 ml-auto",children:s.jsx(wt,{size:14})})]},le.id))})]},K)}),oe.length>0&&s.jsxs("div",{className:"rounded-lg border-2 overflow-hidden",style:{borderColor:"#ebb582"},children:[s.jsx("div",{className:"px-4 py-2 font-bold",style:{backgroundColor:"#6b7280",color:"white"},children:"Other Tasks"}),s.jsx("div",{className:"p-3 space-y-2",style:{backgroundColor:"#f9f9ed"},children:oe.map(K=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{onClick:()=>x(K.id),className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${K.completed?"bg-green-500 border-green-500":"border-gray-300 bg-white hover:border-green-400"}`,children:K.completed&&s.jsx(Fe,{size:12,className:"text-white"})}),s.jsx("span",{className:`text-sm ${K.completed?"line-through text-gray-400":""}`,children:K.title}),s.jsx("button",{onClick:()=>C(K.id),className:"text-red-400 hover:text-red-600 p-1 ml-auto",children:s.jsx(wt,{size:14})})]},K.id))})]})]}):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"All caught up! No tasks for this week."})})]}),s.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",style:{color:"#3d59ab"},children:[s.jsx(Uh,{size:24}),"Grocery Input"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsx("input",{type:"date",value:N.date,onChange:K=>z({...N,date:K.target.value}),className:"p-2 border-2 rounded-lg text-sm",style:{borderColor:"#ebb582"}}),s.jsx("input",{type:"number",value:N.amount,onChange:K=>z({...N,amount:K.target.value}),placeholder:"Amount",className:"p-2 border-2 rounded-lg text-sm",style:{borderColor:"#ebb582"}}),s.jsx("input",{type:"text",value:N.store||"",onChange:K=>z({...N,store:K.target.value}),placeholder:"Store",className:"p-2 border-2 rounded-lg text-sm",style:{borderColor:"#ebb582"}})]}),s.jsx("button",{onClick:f,className:"w-full py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:"Add Bill"}),U.length>0&&s.jsxs("div",{className:"mt-4 pt-4 border-t",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Recent Bills"}),s.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:U.slice(-5).reverse().map(K=>{var ce;return s.jsxs("div",{className:"flex justify-between items-center text-sm p-2 rounded",style:{backgroundColor:"#f9f9ed"},children:[s.jsxs("span",{children:[Mr(K.date)," - ",K.store||"N/A"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"font-medium",children:["$",(ce=K.amount)==null?void 0:ce.toFixed(2)]}),s.jsx("button",{onClick:()=>p(K.id),className:"text-red-500 hover:text-red-700",children:s.jsx(wt,{size:14})})]})]},K.id)})})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",style:{color:"#3d59ab"},children:[s.jsx(Lo,{size:24}),"Weekly Food Cost"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Calculated from Menu"}),s.jsxs("p",{className:"text-3xl font-bold",style:{color:"#3d59ab"},children:["$",ue.toFixed(2)]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Based on approved menu items  portions"})]}),s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:E>0?"#dcfce7":"#f3f4f6"},children:[s.jsx("p",{className:"text-sm text-gray-600",children:"This Week's Spending"}),s.jsxs("p",{className:`text-3xl font-bold ${E>0?"text-green-600":"text-gray-400"}`,children:["$",E.toFixed(2)]})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsxs("button",{onClick:()=>j(!S),className:"w-full p-4 flex justify-between items-center hover:bg-gray-50",children:[s.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",style:{color:"#3d59ab"},children:[s.jsx(Hh,{size:24}),"Grocery Analysis"]}),s.jsx("span",{className:"text-2xl text-gray-400",children:S?"":"+"})]}),S&&s.jsxs("div",{className:"p-6 pt-0 border-t",children:[s.jsxs("div",{className:"grid md:grid-cols-4 gap-4 mb-6",children:[s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Actual Spending"}),s.jsxs("p",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:["$",E.toFixed(2)]})]}),s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Calculated Cost"}),s.jsxs("p",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:["$",ue.toFixed(2)]})]}),s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:L>0?"#fee2e2":"#dcfce7"},children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Difference"}),s.jsxs("p",{className:`text-2xl font-bold ${L>0?"text-red-600":"text-green-600"}`,children:[L>0?"+":"","$",L.toFixed(2)]})]}),s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:parseFloat(P)>10?"#fee2e2":"#dcfce7"},children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Waste %"}),s.jsxs("p",{className:`text-2xl font-bold ${parseFloat(P)>10?"text-red-600":"text-green-600"}`,children:[P,"%"]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-bold mb-3",style:{color:"#3d59ab"},children:"Monthly Trend"}),s.jsxs("div",{className:"space-y-2",children:[Object.entries(I()).sort((K,ce)=>ce[0].localeCompare(K[0])).slice(0,6).map(([K,ce])=>{const le=new Date(K+"-01").toLocaleDateString("en-US",{month:"short",year:"numeric"});return s.jsxs("div",{className:"flex items-center gap-4 p-2 rounded",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("span",{className:"w-24 text-sm font-medium",children:le}),s.jsx("div",{className:"flex-1 h-4 bg-gray-200 rounded overflow-hidden",children:s.jsx("div",{className:"h-full rounded",style:{width:`${Math.min(ce.spending/1e3*100,100)}%`,backgroundColor:"#3d59ab"}})}),s.jsxs("span",{className:"w-24 text-right font-bold",children:["$",ce.spending.toFixed(0)]})]},K)}),Object.keys(I()).length===0&&s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No grocery data yet"})]})]})]})]})]})}function Vv({clients:e,updateClients:t,blockedDates:n,updateBlockedDates:r}){const[l,a]=g.useState(new Date),[o,c]=g.useState(!1),i=new Date,d=e.filter(h=>h.status==="active"),m=e.filter(h=>h.status==="paused"),y=(h,M,T)=>{const F=e.map(R=>R.name===h?{...R,[M]:T}:R);t(F)},x=(h,M,T)=>{const R=[...e.find(b=>b.name===h).deliveryDates||["","","",""]];for(;R.length<4;)R.push("");R[M]=T;const u=R.filter(b=>b).sort();for(;u.length<4;)u.push("");y(h,"deliveryDates",u)},C=(h,M)=>{const T=e.map(F=>F.name===h?M?{...F,invoicePaid:!0,honeyBookLink:""}:{...F,invoicePaid:!1}:F);t(T)},U=h=>{const M=h.getFullYear(),T=h.getMonth(),F=new Date(M,T,1),R=new Date(M,T+1,0),u=[];for(let b=0;b<F.getDay();b++)u.push(null);for(let b=1;b<=R.getDate();b++)u.push(new Date(M,T,b));return u},N=h=>{const M=h.toISOString().split("T")[0];n.includes(M)?r(n.filter(T=>T!==M)):r([...n,M])},z=()=>{a(new Date(l.getFullYear(),l.getMonth()-1,1))},f=()=>{a(new Date(l.getFullYear(),l.getMonth()+1,1))},p=h=>new Date(h+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-2",style:{color:"#3d59ab"},children:[s.jsx(xs,{className:"inline mr-2",size:28}),"Client Billing & Dates"]}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Set delivery dates, bill due dates, and invoice links for each client"}),s.jsx("div",{className:"space-y-4",children:d.map((h,M)=>{const F=[...h.deliveryDates||["","","",""]];for(;F.length<4;)F.push("");return s.jsxs("div",{className:"p-4 rounded-lg border-2",style:{borderColor:"#ebb582",backgroundColor:"#f9f9ed"},children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h3",{className:"font-bold text-lg",style:{color:"#3d59ab"},children:h.displayName||h.name}),s.jsxs("span",{className:"text-sm text-gray-500",children:[h.mealsPerWeek," meals/week  ",h.portions||1," portions"]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next 4 Delivery Dates"}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:F.slice(0,4).map((R,u)=>s.jsx("input",{type:"date",value:R||"",onChange:b=>x(h.name,u,b.target.value),className:"px-3 py-2 border-2 rounded-lg text-sm",style:{borderColor:"#ebb582"}},u))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bill Due Date"}),s.jsx("input",{type:"date",value:h.billDueDate||"",onChange:R=>y(h.name,"billDueDate",R.target.value),className:"w-full px-3 py-2 border-2 rounded-lg text-sm",style:{borderColor:"#ebb582"}})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice Link (Honeybook)"}),s.jsx("input",{type:"url",value:h.honeyBookLink||"",onChange:R=>y(h.name,"honeyBookLink",R.target.value),placeholder:"Paste invoice link...",className:"w-full px-3 py-2 border-2 rounded-lg text-sm",style:{borderColor:"#ebb582"}})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 rounded-lg hover:bg-white",children:[s.jsx("input",{type:"checkbox",checked:h.invoicePaid||!1,onChange:R=>C(h.name,R.target.checked),className:"w-5 h-5 rounded border-2",style:{accentColor:"#22c55e"}}),s.jsx("span",{className:"text-sm font-medium",children:h.invoicePaid?s.jsxs("span",{className:"text-green-600 flex items-center gap-1",children:[s.jsx(Fe,{size:16})," Invoice Paid"]}):s.jsx("span",{className:"text-gray-600",children:"Mark as Paid"})})]})})]}),h.billDueDate&&new Date(h.billDueDate+"T12:00:00")<i&&!h.invoicePaid&&s.jsxs("div",{className:"mt-2 p-2 rounded bg-red-100 text-red-700 text-sm flex items-center gap-2",children:[s.jsx(bt,{size:16}),"Invoice overdue!"]})]},M)})})]}),m.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("h2",{className:"text-xl font-bold mb-2",style:{color:"#3d59ab"},children:["Paused Clients (",m.length,")"]}),s.jsx("div",{className:"space-y-2",children:m.map((h,M)=>s.jsxs("div",{className:"p-3 rounded-lg flex items-center justify-between bg-gray-50 border border-gray-200",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium",children:h.displayName||h.name}),h.pausedDate&&s.jsxs("p",{className:"text-sm text-gray-500",children:["Paused: ",new Date(h.pausedDate+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),h.billingNotes&&s.jsx("p",{className:"text-sm text-gray-500",children:h.billingNotes})]}),s.jsx("span",{className:"text-xs px-2 py-1 rounded bg-gray-200 text-gray-600",children:"Paused"})]},M))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsxs("button",{onClick:()=>c(!o),className:"w-full p-4 flex items-center justify-between hover:bg-gray-50",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xs,{size:24,style:{color:"#3d59ab"}}),s.jsx("span",{className:"text-lg font-bold",style:{color:"#3d59ab"},children:"Availability Calendar"}),n.length>0&&s.jsxs("span",{className:"text-sm px-2 py-1 rounded bg-red-100 text-red-700",children:[n.length," blocked"]})]}),o?s.jsx(Io,{size:24}):s.jsx(Oo,{size:24})]}),o&&s.jsxs("div",{className:"p-6 border-t",children:[s.jsx("p",{className:"text-gray-600 mb-4",children:"Click dates to block them from client selection"}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("button",{onClick:z,className:"p-2 rounded hover:bg-gray-100",children:s.jsx(qr,{size:20})}),s.jsx("span",{className:"font-bold",children:l.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:f,className:"p-2 rounded hover:bg-gray-100",children:s.jsx(ql,{size:20})})]}),s.jsxs("div",{className:"grid grid-cols-7 gap-1 mb-4",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(h=>s.jsx("div",{className:"text-center text-sm font-medium text-gray-500 py-2",children:h},h)),U(l).map((h,M)=>{if(!h)return s.jsx("div",{},`empty-${M}`);const T=h.toISOString().split("T")[0],F=n.includes(T),R=h<new Date(i.toISOString().split("T")[0]),u=T===i.toISOString().split("T")[0];return s.jsx("button",{onClick:()=>!R&&N(h),disabled:R,className:`p-2 rounded-lg text-center transition-colors ${R?"text-gray-300 cursor-not-allowed":F?"bg-red-500 text-white hover:bg-red-600":u?"bg-blue-100 hover:bg-blue-200":"hover:bg-gray-100"}`,children:h.getDate()},T)})]}),n.length>0&&s.jsxs("div",{className:"p-3 rounded-lg bg-red-50 border border-red-200",children:[s.jsxs("p",{className:"text-sm font-medium text-red-700 mb-2",children:[n.length," date",n.length>1?"s":""," blocked:"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:n.sort().map(h=>s.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-red-100 text-red-700 flex items-center gap-1",children:[p(h),s.jsx("button",{onClick:()=>r(n.filter(M=>M!==h)),children:s.jsx(wt,{size:12})})]},h))})]})]})]})]})}function qv({client:e,date:t,menuItems:n}){const r=new Date(t+"T12:00:00").toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}).toUpperCase(),l=[];n.forEach(o=>{const c={protein:o.protein,sides:[o.veg,o.starch].filter(Boolean)};(c.protein||c.sides.length>0)&&l.push(c),o.extras&&o.extras.forEach(i=>{l.push({protein:i,sides:[],isExtra:!0})})});const a=e.displayName||e.name;return s.jsxs("div",{className:"overflow-hidden shadow-lg",style:{backgroundColor:"#fff"},children:[s.jsxs("div",{className:"relative px-4 pt-6 pb-8",style:{backgroundColor:"#f9f9ed",backgroundImage:"url(/pattern4.png)",backgroundSize:"cover",backgroundPosition:"center"},children:[s.jsx("p",{className:"text-center mb-2",style:{fontFamily:'"Glacial Indifference", sans-serif',fontSize:"12px",letterSpacing:"0.3em",color:"#5a5a5a"},children:"GOLDFINCH CHEF SERVICES"}),s.jsxs("h2",{className:"text-center mb-3",style:{color:"#3d59ab",fontFamily:'"Poller One", cursive',fontSize:"18px",textTransform:"uppercase",letterSpacing:"0.05em",textDecoration:"underline",textDecorationColor:"#3d59ab",textUnderlineOffset:"4px"},children:[a,"'s Menu"]}),s.jsx("p",{className:"text-center mb-4",style:{color:"#5a5a5a",fontFamily:'"Beth Ellen", cursive',fontSize:"12px"},children:"here's what to expect on your plate!"}),s.jsxs("div",{className:"flex items-center justify-center gap-3",children:[s.jsx("img",{src:"/goldfinch5.png",alt:"Goldfinch",className:"w-12 h-12 object-contain"}),s.jsx("p",{style:{fontFamily:'"Glacial Indifference", sans-serif',fontSize:"14px",letterSpacing:"0.2em",color:"#5a5a5a"},children:r})]})]}),s.jsx("div",{className:"px-6 py-8",style:{backgroundColor:"#d9a87a"},children:s.jsx("div",{className:"space-y-8",children:l.map((o,c)=>s.jsxs("div",{className:"text-center",children:[o.protein&&s.jsx("h3",{style:{color:"#ffffff",fontFamily:'"Glacial Indifference", sans-serif',fontSize:"1.1rem",fontWeight:"bold",letterSpacing:"0.15em",textTransform:"uppercase",marginBottom:o.sides.length>0?"0.5rem":0},children:o.protein}),o.sides.length>0&&s.jsx("p",{style:{color:"#f5e6d3",fontFamily:'"Glacial Indifference", sans-serif',fontSize:"0.85rem",letterSpacing:"0.1em",textTransform:"uppercase"},children:o.sides.join(", ")})]},c))})}),s.jsxs("div",{className:"relative px-6 py-6",style:{backgroundColor:"#f9f9ed",fontFamily:'"Glacial Indifference", sans-serif'},children:[s.jsx("h4",{className:"mb-3",style:{color:"#3d59ab",fontFamily:'"Poller One", cursive',fontSize:"1.1rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Get Ready!"}),s.jsx("p",{className:"mb-4 pr-20",style:{color:"#5a5a5a",fontSize:"0.9rem",lineHeight:"1.5"},children:"Remember to put out bags, containers, and ice packs. And get excited  great food is on the way!"}),s.jsx("img",{src:"/stemflower.png",alt:"",className:"absolute right-4 bottom-4 h-20 object-contain"})]})]})}function Gv({clients:e,menuItems:t,updateMenuItems:n,lockWeekWithSnapshot:r,weeklyTasks:l={},clientPortalData:a={},recipes:o={}}){const c=To(),i=new Date().toISOString().split("T")[0],[d,m]=g.useState({}),x=(()=>{const E=new Date,L=E.getDay(),P=E.getDate()-L+(L===0?-6:1);return E.setDate(P),E.toISOString().split("T")[0]})(),C=l[x]||{},U=E=>{const L=C[E]||{};return L.menusPlanned&&L.menusSent},N=E=>{const L=C[E]||{};return{menusPlanned:!!L.menusPlanned,menusSent:!!L.menusSent,complete:L.menusPlanned&&L.menusSent}},z=E=>{const L=e.find(B=>B.name===E);if(!L)return{status:"unknown",daysOverdue:0,hasDates:!1,canApprove:!1,warning:null,blocked:!0};const P=L.deliveryDates&&L.deliveryDates.length>0;if(L.status==="paused")return{status:"paused",daysOverdue:0,hasDates:P,canApprove:!1,warning:null,blocked:!0,message:"Subscription paused  cannot send menu"};let A=0;if(L.billDueDate){const B=new Date(L.billDueDate+"T12:00:00"),oe=new Date-B;A=Math.floor(oe/(1e3*60*60*24))}return A>=8?{status:"paused",daysOverdue:A,hasDates:P,canApprove:!1,warning:null,blocked:!0,message:"Subscription paused  cannot send menu"}:A>=1?{status:"grace",daysOverdue:A,hasDates:P,canApprove:!0,warning:`Invoice overdue (${A} day${A>1?"s":""})`,blocked:!1}:P?{status:"active",daysOverdue:0,hasDates:!0,canApprove:!0,warning:null,blocked:!1}:{status:"active",daysOverdue:0,hasDates:!1,canApprove:!0,warning:"Delivery dates not set",blocked:!1}},f=()=>e.filter(E=>{var P;if(E.status!=="active"||E.chefChoice!==!1)return!1;const L=a[E.name];return(P=L==null?void 0:L.ingredientPicks)==null?void 0:P.submittedAt}).map(E=>{var P;const L=((P=a[E.name])==null?void 0:P.ingredientPicks)||{};return{client:E,picks:L,mealsPerWeek:L.mealsPerWeek||E.mealsPerWeek||3}}),p=(E,L)=>{if(d[E])return;const P=Array(L).fill(null).map(()=>({protein:"",veg:"",starch:""}));m(A=>({...A,[E]:P}))},h=(E,L,P,A)=>{m(B=>{const ne=[...B[E]||[]];return ne[L]={...ne[L],[P]:A},{...B,[E]:ne}})},M=E=>{const L=d[E];return L?L.every(P=>P.protein&&P.veg&&P.starch):!1},T=(E,L,P,A)=>{const B=d[E]||[],oe=L[{protein:"proteins",veg:"veggies",veggie:"veggies",starch:"starches"}[P]]||[],G=B.filter((K,ce)=>ce!==A).map(K=>K[P==="veggie"?"veg":P]).filter(Boolean);return oe.filter(K=>!G.includes(K))},F=(E,L,P)=>{const A=E.portions||E.persons||1;return L.map((B,ne)=>({id:`${E.name}-${P}-${ne}-${Date.now()}`,clientName:E.name,date:P,portions:A,protein:B.protein,veg:B.veg,starch:B.starch,extras:[],approved:!1,fromClientPicks:!0}))},R=E=>{var oe;const L=d[E.name];if(!L||!M(E.name)){alert("Please pair all meals before approving.");return}const P=((oe=a[E.name])==null?void 0:oe.selectedDates)||[],B=(P.length>0?P:E.deliveryDates||[]).find(G=>G>=i);if(!B){alert("No upcoming delivery date found for this client.");return}const ne=F(E,L,B);n([...t,...ne]),m(G=>{const K={...G};return delete K[E.name],K}),alert(`Menu created for ${E.displayName||E.name}! It will appear in the approval queue below.`)},u=f(),b=()=>{const E=t.filter(P=>!P.approved&&P.date>=i),L={};return E.forEach(P=>{L[P.date]||(L[P.date]={}),L[P.date][P.clientName]||(L[P.date][P.clientName]=[]),L[P.date][P.clientName].push(P)}),Object.entries(L).sort(([P],[A])=>P.localeCompare(A)).map(([P,A])=>({date:P,weekId:Ys(P),menus:Object.entries(A).sort(([B],[ne])=>B.localeCompare(ne)).map(([B,ne])=>({clientName:B,items:ne}))}))},S=(E,L)=>{const P=Ys(L),A=t.map(B=>B.clientName===E&&B.date===L&&!B.approved?{...B,approved:!0}:B);n(A),r(P)},j=()=>{const E=[],L=[],P=[],A=[];if(H.forEach(({menus:G})=>{G.forEach(({clientName:K})=>{const ce=z(K),ee=U(K);ce.blocked?P.push(K):ee?(E.push(K),ce.warning&&A.push({clientName:K,warning:ce.warning})):L.push(K)})}),E.length===0){let G="No menus ready to approve.";P.length>0&&(G+=`

${P.length} client(s) have paused subscriptions.`),L.length>0&&(G+=`

${L.length} client(s) have incomplete tasks.`),alert(G);return}let B=`Approve ${E.length} menu(s) and push to client portals?

This will lock the week and menus will appear in KDS for cooking.`;if(A.length>0&&(B+=`

 Warnings for ${A.length} client(s):`,A.slice(0,3).forEach(({clientName:G,warning:K})=>{B+=`
 ${G}: ${K}`}),A.length>3&&(B+=`
 ...and ${A.length-3} more`)),(L.length>0||P.length>0)&&(B+=`

Will NOT be approved:`,L.length>0&&(B+=`
 ${L.length} with incomplete tasks`),P.length>0&&(B+=`
 ${P.length} with paused subscriptions`)),!window.confirm(B))return;const ne=new Set,oe=t.map(G=>{if(!G.approved&&G.date>=i){const K=z(G.clientName);if(U(G.clientName)&&K.canApprove)return ne.add(Ys(G.date)),{...G,approved:!0}}return G});n(oe),ne.forEach(G=>{r(G)}),alert(`${E.length} menu(s) approved and pushed to client portals!`)},k=(E,L)=>{if(!window.confirm(`Send ${E}'s menu back for editing?

This will remove it from the approval queue. You can recreate it in Menu Planner.`))return;const P=t.filter(A=>!(A.clientName===E&&A.date===L&&!A.approved));n(P),c("/?tab=menu")},H=b(),I=H.reduce((E,L)=>E+L.menus.length,0),ue=H.reduce((E,L)=>E+L.menus.filter(P=>{const A=z(P.clientName);return U(P.clientName)&&A.canApprove}).length,0);return H.reduce((E,L)=>E+L.menus.filter(P=>z(P.clientName).blocked).length,0),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold mb-2",style:{color:"#3d59ab"},children:"Menu Approval"}),s.jsx("p",{className:"text-gray-600",children:"Review all menus before pushing to client portals. Approving will lock the week and send menus to KDS."})]}),I>0&&s.jsxs("button",{onClick:j,disabled:ue===0,className:`flex items-center gap-2 px-6 py-3 rounded-lg text-white font-medium transition-opacity ${ue>0?"hover:opacity-90":"opacity-50 cursor-not-allowed"}`,style:{backgroundColor:"#10b981"},title:ue===0?"Complete weekly tasks to enable approval":"",children:[s.jsx(Fe,{size:20}),"Approve & Push Ready (",ue,"/",I,")"]})]}),H.length===0&&u.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Fe,{size:48,className:"mx-auto mb-4 text-green-500"}),s.jsx("p",{className:"text-gray-600",children:"All menus have been approved!"}),s.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Create new menus in the Menu tab, then come back here to approve them."}),s.jsxs(Vr,{to:"/?tab=menu",className:"inline-flex items-center gap-2 mt-4 px-4 py-2 rounded-lg border-2 hover:bg-gray-50",style:{borderColor:"#ebb582"},children:[s.jsx(Zn,{size:18}),"Go to Menu Planner"]})]}):s.jsxs("p",{className:"text-sm text-gray-500",children:[I>0&&`${I} menu${I>1?"s":""} pending approval`,I>0&&u.length>0&&"  ",u.length>0&&`${u.length} client${u.length>1?"s":""} with ingredient picks to pair`]})]}),u.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",style:{color:"#3d59ab"},children:[s.jsx(Wh,{size:24}),"Client Ingredient Picks"]}),s.jsx("p",{className:"text-gray-600 mb-6",children:"These clients picked their ingredients. Pair them into meals, then create their menu."}),s.jsx("div",{className:"space-y-6",children:u.map(({client:E,picks:L,mealsPerWeek:P})=>{var ne,oe,G;d[E.name]||p(E.name,P);const A=d[E.name]||[],B=M(E.name);return s.jsxs("div",{className:"border-2 rounded-lg overflow-hidden",style:{borderColor:"#ebb582"},children:[s.jsxs("div",{className:"p-4",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("h4",{className:"font-bold text-lg",style:{color:"#3d59ab"},children:E.displayName||E.name}),s.jsxs("p",{className:"text-sm text-gray-600",children:[P," meals  ",E.portions||E.persons||1," portions"]}),L.notes&&s.jsxs("p",{className:"text-sm text-amber-700 mt-2 bg-amber-50 p-2 rounded",children:["Note: ",L.notes]})]}),s.jsxs("div",{className:"p-4 border-t grid grid-cols-3 gap-4 text-sm",style:{borderColor:"#ebb582"},children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-red-600 mb-1",children:"Proteins"}),(ne=L.proteins)==null?void 0:ne.map((K,ce)=>s.jsx("p",{className:"text-gray-700",children:K},ce))]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-green-600 mb-1",children:"Veggies"}),(oe=L.veggies)==null?void 0:oe.map((K,ce)=>s.jsx("p",{className:"text-gray-700",children:K},ce))]}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-amber-600 mb-1",children:"Starches"}),(G=L.starches)==null?void 0:G.map((K,ce)=>s.jsx("p",{className:"text-gray-700",children:K},ce))]})]}),s.jsxs("div",{className:"p-4 border-t",style:{borderColor:"#ebb582"},children:[s.jsx("p",{className:"font-medium mb-3",style:{color:"#3d59ab"},children:"Pair into Meals:"}),s.jsx("div",{className:"space-y-3",children:A.map((K,ce)=>s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-500 w-16",children:["Meal ",ce+1,":"]}),s.jsxs("select",{value:K.protein,onChange:ee=>h(E.name,ce,"protein",ee.target.value),className:"flex-1 min-w-[120px] p-2 border rounded text-sm",style:{borderColor:K.protein?"#22c55e":"#ebb582"},children:[s.jsx("option",{value:"",children:"Protein"}),T(E.name,L,"protein",ce).map(ee=>s.jsx("option",{value:ee,children:ee},ee))]}),s.jsxs("select",{value:K.veg,onChange:ee=>h(E.name,ce,"veg",ee.target.value),className:"flex-1 min-w-[120px] p-2 border rounded text-sm",style:{borderColor:K.veg?"#22c55e":"#ebb582"},children:[s.jsx("option",{value:"",children:"Veggie"}),T(E.name,L,"veggie",ce).map(ee=>s.jsx("option",{value:ee,children:ee},ee))]}),s.jsxs("select",{value:K.starch,onChange:ee=>h(E.name,ce,"starch",ee.target.value),className:"flex-1 min-w-[120px] p-2 border rounded text-sm",style:{borderColor:K.starch?"#22c55e":"#ebb582"},children:[s.jsx("option",{value:"",children:"Starch"}),T(E.name,L,"starch",ce).map(ee=>s.jsx("option",{value:ee,children:ee},ee))]})]},ce))})]}),s.jsx("div",{className:"p-4 border-t flex justify-end",style:{borderColor:"#ebb582"},children:s.jsxs("button",{onClick:()=>R(E),disabled:!B,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${B?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[s.jsx(gs,{size:16}),"Create Menu"]})})]},E.name)})})]}),H.map(({date:E,weekId:L,menus:P})=>s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h3",{className:"text-lg font-bold",style:{color:"#3d59ab"},children:new Date(E+"T12:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),s.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-600",children:["Week ",L]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(({clientName:A,items:B})=>{const ne=e.find(ee=>ee.name===A)||{name:A},oe=N(A),G=z(A),K=oe.complete&&G.canApprove,ce=G.blocked;return s.jsxs("div",{className:`bg-white rounded-lg shadow-lg overflow-hidden ${ce?"opacity-60":""}`,children:[s.jsx(qv,{client:ne,date:E,menuItems:B}),(G.warning||G.blocked)&&s.jsx("div",{className:"px-3 py-2 border-t",style:{borderColor:"#ebb582",backgroundColor:ce?"#fef2f2":G.status==="grace"?"#fef3c7":"#fffbeb"},children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(bt,{size:14,className:ce?"text-red-600":"text-amber-600"}),s.jsx("span",{className:`text-xs font-medium ${ce?"text-red-700":"text-amber-700"}`,children:G.message||G.warning})]})}),s.jsxs("div",{className:"px-3 py-2 border-t",style:{borderColor:"#ebb582",backgroundColor:oe.complete?"#f0fdf4":"#fef3c7"},children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-xs font-medium",style:{color:oe.complete?"#15803d":"#92400e"},children:"Weekly Tasks"}),!oe.complete&&s.jsxs(Vr,{to:"/admin?section=subscriptions",className:"text-xs text-blue-600 hover:underline flex items-center gap-1",children:["Complete Tasks",s.jsx(ps,{size:10})]})]}),s.jsxs("div",{className:"flex gap-3 mt-1",children:[s.jsxs("span",{className:`text-xs flex items-center gap-1 ${oe.menusPlanned?"text-green-600":"text-gray-400"}`,children:[oe.menusPlanned?s.jsx(Fe,{size:12}):s.jsx(wt,{size:12}),"Menu Planned"]}),s.jsxs("span",{className:`text-xs flex items-center gap-1 ${oe.menusSent?"text-green-600":"text-gray-400"}`,children:[oe.menusSent?s.jsx(Fe,{size:12}):s.jsx(wt,{size:12}),"Menu Sent"]})]})]}),s.jsxs("div",{className:"p-3 border-t flex justify-between gap-2",style:{borderColor:"#ebb582"},children:[s.jsxs("button",{onClick:()=>k(A,E),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium border-2 hover:bg-red-50 transition-colors",style:{borderColor:"#dc2626",color:"#dc2626"},children:[s.jsx(Ah,{size:16}),"Edit"]}),ce?s.jsxs("span",{className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium bg-gray-100 text-gray-500",children:[s.jsx(wt,{size:16}),"Blocked"]}):s.jsxs("button",{onClick:()=>K&&S(A,E),disabled:!K,className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${K?"bg-green-500 text-white hover:bg-green-600":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,title:ce?"Subscription paused":oe.complete?"Approve and push to client portal":"Complete weekly tasks first",children:[s.jsx(Fe,{size:16}),"Approve"]})]})]},`${A}-${E}`)})})]},E)),I>0&&ue>0&&s.jsx("div",{className:"sticky bottom-4 flex justify-center",children:s.jsxs("button",{onClick:j,className:"flex items-center gap-2 px-8 py-4 rounded-lg text-white font-medium shadow-lg hover:opacity-90 transition-opacity",style:{backgroundColor:"#10b981"},children:[s.jsx(Fe,{size:24}),"Approve & Push Ready Menus (",ue,"/",I,")"]})})]})}function Kv(){const{clients:e,drivers:t,menuItems:n,deliveryLog:r,readyForDelivery:l,clientPortalData:a,blockedDates:o,adminSettings:c,customTasks:i,weeklyTasks:d,recipes:m,masterIngredients:y,groceryBills:x,isLoaded:C,updateDrivers:U,updateBlockedDates:N,updateAdminSettings:z,updateCustomTasks:f,updateMenuItems:p,updateWeeklyTasks:h,updateRecipes:M,updateMasterIngredients:T,updateClients:F,updateGroceryBills:R,weeks:u,updateWeeks:b,lockWeekWithSnapshot:S}=Bv(),[j]=_h(),[k,H]=g.useState("overview"),[I,ue]=g.useState(Lr);g.useEffect(()=>{const v=j.get("section");v==="menu-approval"||v==="approvals"||v==="dashboard"||v==="tasks"?H("overview"):v&&H(v)},[j]);const[E,L]=g.useState(null),[P,A]=g.useState(null),[B,ne]=g.useState(new Date),[oe,G]=g.useState({title:"",notes:"",dueDate:""}),[K,ce]=g.useState(new Date().toISOString().split("T")[0]),[ee,le]=g.useState([]),[W,_]=g.useState(fc),[V,Z]=g.useState(()=>Ys(new Date().toISOString().split("T")[0])),X=v=>{if(!u[v])return;const q={...u[v],status:"unlocked"};b({...u,[v]:q})},[ae,ye]=g.useState(po),[D,O]=g.useState(null),de=yl.useRef(),[ie,be]=g.useState(xc),[ve,He]=g.useState(null),[Ae,Oe]=g.useState(null),[Pe,st]=g.useState([]),qe=yl.useRef(),rt=v=>{const q=v.target.files[0];q&&(Jh(q,Q=>{const me=new Set(y.map(we=>we.name.toLowerCase())),Ee=Q.filter(we=>!me.has(we.name.toLowerCase()));T([...y,...Ee]),alert(`Imported ${Ee.length} new ingredient(s). ${Q.length-Ee.length} duplicate(s) skipped.`)},Q=>alert("Error parsing CSV: "+Q.message)),v.target.value="")},pt=yl.useRef(),[Pt,Ct]=g.useState(null),[It,jt]=g.useState({name:"",displayName:"",persons:1,contacts:[{name:"",email:"",phone:"",address:""}],notes:"",mealsPerWeek:0,frequency:"weekly",status:"active",pausedDate:"",honeyBookLink:"",billingNotes:"",deliveryDay:"",zone:"",pickup:!1,planPrice:0,serviceFee:0,prepayDiscount:!1,newClientFeePaid:!1,paysOwnGroceries:!1}),[lt,ut]=g.useState({date:new Date().toISOString().split("T")[0],amount:"",store:"",notes:""}),Ge=new Date,{start:Lt,end:Qt}=Wv(Ge),Ws=()=>l.filter(v=>{const q=new Date(v.date+"T12:00:00");return q>=Lt&&q<=Qt}),js=()=>r.filter(v=>{const q=new Date(v.date+"T12:00:00");return q>=Lt&&q<=Qt}),Hs=()=>r.filter(v=>{const q=new Date(v.date+"T12:00:00");return q>=Lt&&q<=Qt&&v.problem}),Ns=()=>{const v=new Date,q=new Date(v);return q.setDate(q.getDate()+7),e.filter(Q=>Q.status!=="active"||!Q.billDueDate?!1:new Date(Q.billDueDate+"T12:00:00")<=q).sort((Q,me)=>new Date(Q.billDueDate)-new Date(me.billDueDate))},Vs=()=>Object.entries(a).filter(([v,q])=>q.substitutionRequest).map(([v,q])=>({clientName:v,...q.substitutionRequest})),se=()=>(Ge.toISOString().split("T")[0],e.filter(v=>{if(v.status!=="active"||!v.deliveryDay)return!1;const q={Monday:1,Tuesday:2,Thursday:4}[v.deliveryDay];if(!q)return!1;for(let Q=new Date(Lt);Q<=Qt;Q.setDate(Q.getDate()+1))if(Q.getDay()===q&&Q>=Ge){const me=Q.toISOString().split("T")[0];if(!l.some(we=>we.clientName===v.name&&we.date===me))return!0}return!1})),w=()=>{const v=Ge.toISOString().split("T")[0],q=n.filter(me=>!me.approved&&me.date>=v);return new Set(q.map(me=>`${me.clientName}-${me.date}`)).size},Y=()=>r.filter(v=>{const q=new Date(v.date+"T12:00:00"),Q=(Ge-q)/(1e3*60*60*24);return Q>=3&&Q<=10&&!v.bagsReturned}),re=()=>{const v=[],q=Ns(),Q=se(),me=Vs(),Ee=Y(),we=Ws();q.length>0&&v.push({id:"renewals",category:"Billing & Renewals",title:`${q.length} client${q.length>1?"s":""} due for renewal`,details:q.map(Ye=>Ye.displayName||Ye.name),icon:rs,color:"#f59e0b"}),Q.length>0&&v.push({id:"menus",category:"Menu Planning",title:`Plan menus for ${Q.length} client${Q.length>1?"s":""}`,details:Q.map(Ye=>Ye.displayName||Ye.name),icon:gd,color:"#3d59ab"}),me.length>0&&v.push({id:"substitutions",category:"Substitution Requests",title:`${me.length} substitution request${me.length>1?"s":""} to review`,details:me.map(Ye=>`${Ye.clientName}: ${Ye.originalDish}  ${Ye.requestedSubstitution}`),icon:mr,color:"#8b5cf6"}),we.length>0&&v.push({id:"delivery-prep",category:"Delivery Prep",title:`${we.length} order${we.length>1?"s":""} ready for delivery`,details:we.map(Ye=>`${Ye.clientName} - ${Mr(Ye.date)}`),icon:hn,color:"#10b981"}),Ee.length>0&&v.push({id:"bags",category:"Bags Follow-up",title:`Follow up on ${Ee.length} bag return${Ee.length>1?"s":""}`,details:Ee.map(Ye=>Ye.clientName),icon:In,color:"#ec4899"});const We=e.filter(Ye=>Ye.paysOwnGroceries&&Ye.status==="active").filter(Ye=>we.some(_s=>_s.clientName===Ye.name));We.length>0&&v.push({id:"own-groceries",category:"Grocery Costs",title:`Add grocery costs for ${We.length} client${We.length>1?"s":""}`,details:We.map(Ye=>Ye.displayName||Ye.name),icon:Lo,color:"#059669",action:"groceries"});const Cn=e.filter(Ye=>Ye.chefChoice===!1&&Ye.status==="active").filter(Ye=>{const _s=a[Ye.name],Ao=(_s==null?void 0:_s.ingredientPicks)||(_s==null?void 0:_s.dateIngredientPicks)&&Object.keys(_s.dateIngredientPicks).length>0,uf=n.some(mf=>mf.clientName===(Ye.displayName||Ye.name));return Ao&&!uf});return Cn.length>0&&v.push({id:"client-dish-picks",category:"Client Dish Picks",title:`${Cn.length} client${Cn.length>1?"s":""} submitted dish picks`,details:Cn.map(Ye=>Ye.displayName||Ye.name),icon:nr,color:"#8b5cf6"}),v},$=()=>{if(!I.name){alert("Please enter a driver name");return}U([...t,{...I,id:Date.now()}]),ue(Lr)},J=v=>{window.confirm("Delete this driver?")&&U(t.filter((q,Q)=>Q!==v))},te=v=>{L(v),A({...t[v]})},pe=()=>{const v=[...t];v[E]=P,U(v),L(null),A(null)},he=v=>!v||v.length<2?[]:y.filter(q=>{const Q=ho(v,q.name);return Q>.7&&Q<1}),ge=v=>y.find(q=>Qs(q.name)===Qs(v)),Te=()=>{const v=new Set;return y.forEach(q=>{q.source&&q.source.trim()&&v.add(q.source.trim())}),Array.from(v).sort()},ze=(v,q)=>{const Q=ge(v);return Q&&q?(T(y.map(me=>me.id===Q.id?{...me,cost:q}:me)),!0):!1},Me=()=>{let v=0,q=0;const Q={...m};return Object.keys(Q).forEach(me=>{Q[me]=Q[me].map(Ee=>{const we=Ee.ingredients.map(Le=>{const We=ge(Le.name);if(We){const wn={...Le};return We.cost&&We.cost!==Le.cost&&(wn.cost=We.cost,q++),We.source&&We.source!==Le.source&&(wn.source=We.source),We.section&&We.section!=="Other"&&We.section!==Le.section&&(wn.section=We.section),We.unit&&We.unit!==Le.unit&&(wn.unit=We.unit),wn}else if(Le.name)return v++,Le;return Le});return{...Ee,ingredients:we}})}),Object.values(Q).forEach(me=>{me.forEach(Ee=>{Ee.ingredients.forEach(we=>{we.name&&!ge(we.name)&&ts(we)})})}),M(Q),{ingredientsAdded:v,costsUpdated:q}},ts=v=>{if(!v.name)return;const q=ge(v.name);if(q){(v.cost||v.source||v.section!=="Other")&&T(y.map(Q=>Q.id===q.id?{...Q,cost:v.cost||Q.cost,source:v.source||Q.source,section:v.section!=="Other"?v.section:Q.section}:Q));return}T([...y,{id:Date.now()+Math.random(),name:v.name,cost:v.cost||"",unit:v.unit||"oz",source:v.source||"",section:v.section||"Other"}])},ke=v=>v!=null&&v.ingredients?v.ingredients.reduce((q,Q)=>{const me=ge(Q.name),Ee=parseFloat((me==null?void 0:me.cost)||Q.cost||0),we=parseFloat(Q.quantity||0);return q+Ee*we},0):0,De=()=>{const v={};let q=0;return Object.entries(m).forEach(([Q,me])=>{v[Q]=me.length,q+=me.length}),v.total=q,v},$e=()=>{if(!W.protein&&!W.veg&&!W.starch&&W.extras.length===0){alert("Please select at least one dish");return}if(ee.length===0){alert("Please select at least one client");return}const v=ee.map(q=>{const Q=e.find(Ee=>Ee.name===q),me=Q&&(Q.portions||Q.persons)||1;return{...W,clientName:q,date:K,portions:me,id:Date.now()+Math.random(),approved:!1}});p([...n,...v]),_(fc)},Ue=v=>p(n.filter(q=>q.id!==v)),Ke=()=>{window.confirm("Clear all menu items?")&&(p([]),le([]))},Nt=()=>{const v={};return n.forEach(q=>{v[q.clientName]||(v[q.clientName]=[]),v[q.clientName].push(q)}),v},Ce=()=>{if(!ae.name){alert("Please enter a recipe name");return}const v=ae.ingredients.filter(q=>q.name&&q.quantity);if(v.length===0){alert("Please add at least one ingredient with name and quantity");return}v.forEach(q=>ts(q)),M({...m,[ae.category]:[...m[ae.category],{name:ae.name,instructions:ae.instructions,ingredients:v}]}),ye(po),alert("Recipe saved!")},Be=(v,q)=>{window.confirm("Delete this recipe?")&&M({...m,[v]:m[v].filter((Q,me)=>me!==q)})},Qe=(v,q)=>{const Q=m[v][q];O({category:v,index:q,recipe:{...Q,ingredients:Q.ingredients.map(me=>({name:me.name||"",quantity:me.quantity||"",unit:me.unit||"oz",cost:me.cost||"",source:me.source||"",section:me.section||"Other"}))}})},ss=(v,q,Q)=>{const me=[...D.recipe.ingredients];me[v][q]=Q,O({...D,recipe:{...D.recipe,ingredients:me}})},Mt=()=>{O({...D,recipe:{...D.recipe,ingredients:[...D.recipe.ingredients,{name:"",quantity:"",unit:"oz",cost:"",source:"",section:"Other"}]}})},Rt=v=>{O({...D,recipe:{...D.recipe,ingredients:D.recipe.ingredients.filter((q,Q)=>Q!==v)}})},at=()=>{const{category:v,index:q,recipe:Q}=D,me=Q.ingredients.filter(we=>we.name&&we.quantity);me.forEach(we=>ts(we));const Ee={...m};Ee[v][q]={...Q,ingredients:me},M(Ee),O(null),alert("Recipe updated!")},ds=()=>{if(!ie.name){alert("Please enter an ingredient name");return}const v=he(ie.name),q=ge(ie.name);if(q){alert(`"${ie.name}" already exists as "${q.name}"`);return}v.length>0&&!window.confirm(`Similar ingredients found: ${v.map(Q=>Q.name).join(", ")}

Add "${ie.name}" anyway?`)||(T([...y,{...ie,id:Date.now()}]),be(xc),alert("Ingredient added!"))},jn=v=>{window.confirm("Delete this ingredient?")&&T(y.filter(q=>q.id!==v))},xe=v=>{He(v.id),Oe({...v})},Ne=()=>{T(y.map(v=>v.id===ve?{...Ae}:v)),He(null),Oe(null)},je=()=>{He(null),Oe(null)},Ie=()=>{const v=[],q=new Set;y.forEach((Q,me)=>{y.forEach((Ee,we)=>{if(me>=we)return;const Le=[Q.id,Ee.id].sort().join("-");if(q.has(Le))return;q.add(Le);const We=ho(Q.name,Ee.name);We>.7&&We<1&&v.push({ing1:Q,ing2:Ee,similarity:We})})}),st(v),v.length===0&&alert("No duplicate ingredients found!")},_e=(v,q)=>{const Q=y.find(we=>we.id===v),me=y.find(we=>we.id===q);if(!Q||!me)return;const Ee={...m};Object.keys(Ee).forEach(we=>{Ee[we]=Ee[we].map(Le=>({...Le,ingredients:Le.ingredients.map(We=>Qs(We.name)===Qs(me.name)?{...We,name:Q.name}:We)}))}),M(Ee),T(y.filter(we=>we.id!==q)),st(Pe.filter(we=>we.ing1.id!==q&&we.ing2.id!==q)),alert(`Merged "${me.name}" into "${Q.name}"`)},Ze=v=>{const q=v.getFullYear(),Q=v.getMonth(),me=new Date(q,Q,1),Ee=new Date(q,Q+1,0),we=[];for(let Le=0;Le<me.getDay();Le++)we.push(null);for(let Le=1;Le<=Ee.getDate();Le++)we.push(new Date(q,Q,Le));return we},Ft=v=>{const q=v.toISOString().split("T")[0];o.includes(q)?N(o.filter(Q=>Q!==q)):N([...o,q])},zt=()=>{ne(new Date(B.getFullYear(),B.getMonth()-1,1))},ks=()=>{ne(new Date(B.getFullYear(),B.getMonth()+1,1))},us=()=>{if(!oe.title){alert("Please enter a task title");return}f([...i,{...oe,id:Date.now(),completed:!1}]),G({title:"",notes:"",dueDate:""})},Nn=v=>{f(i.map(q=>q.id===v?{...q,completed:!q.completed}:q))},Ts=v=>{f(i.filter(q=>q.id!==v))},Tt=()=>{if(!It.name){alert("Please enter a client name");return}F([...e,{...It,id:Date.now()}]),jt({name:"",displayName:"",persons:1,contacts:[{name:"",email:"",phone:"",address:""}],notes:"",mealsPerWeek:0,frequency:"weekly",status:"active",pausedDate:"",honeyBookLink:"",billingNotes:"",deliveryDay:"",zone:"",pickup:!1,planPrice:0,serviceFee:0,prepayDiscount:!1,newClientFeePaid:!1,paysOwnGroceries:!1})},Bt=v=>{window.confirm("Delete this client?")&&F(e.filter((q,Q)=>Q!==v))},Xr=()=>{const v=["name","displayName","persons","address","email","phone","mealsPerWeek","frequency","status","zone","deliveryDay","pickup","planPrice","serviceFee","prepayDiscount","newClientFeePaid","paysOwnGroceries","billingNotes"],q=[v.join(","),...e.map(we=>v.map(Le=>`"${(we[Le]||"").toString().replace(/"/g,'""')}"`).join(","))].join(`
`),Q=new Blob([q],{type:"text/csv"}),me=URL.createObjectURL(Q),Ee=document.createElement("a");Ee.href=me,Ee.download="clients.csv",Ee.click()},el=()=>{if(!lt.amount){alert("Please enter an amount");return}R([...x,{...lt,id:Date.now(),amount:parseFloat(lt.amount)}]),ut({date:new Date().toISOString().split("T")[0],amount:"",store:"",notes:""})},kn=v=>{window.confirm("Delete this bill?")&&R(x.filter(q=>q.id!==v))},jd=.11,sf=v=>{const q=new Date(v);return`${q.getFullYear()}-${String(q.getMonth()+1).padStart(2,"0")}`},tn=v=>{const q=parseFloat(v.planPrice)||0,Q=v.pickup?0:parseFloat(v.serviceFee)||0,me=q+Q,Ee=v.prepayDiscount?me*.1:0,we=me-Ee,Le=we*jd;return{basePlan:q,serviceFee:Q,discount:Ee,tax:Le,total:we+Le}},tl=(v,q)=>x.filter(Q=>Q.date>=v&&Q.date<=q).reduce((Q,me)=>Q+(parseFloat(me.amount)||0),0),nf=(v,q,Q)=>r.filter(me=>me.clientName===v&&me.date>=q&&me.date<=Q).reduce((me,Ee)=>{const we=e.find(Le=>Le.name===v);return me+((we==null?void 0:we.persons)||1)},0),rf=(v,q)=>e.filter(me=>!me.paysOwnGroceries&&me.status==="active").reduce((me,Ee)=>{const we=r.filter(Le=>Le.clientName===Ee.name&&Le.date>=v&&Le.date<=q);return me+we.length*(Ee.portions||Ee.persons||1)},0),lf=(v,q,Q)=>{const me=e.find(We=>We.name===v);if(!me||me.paysOwnGroceries)return 0;const Ee=tl(q,Q),we=rf(q,Q);if(we===0)return 0;const Le=nf(v,q,Q);return Ee/we*Le};if(!C)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#f9f9ed"},children:s.jsxs("div",{className:"text-center",children:[s.jsx(Xs,{size:48,className:"mx-auto mb-4 animate-pulse",style:{color:"#ffd700"}}),s.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});const Fo=re(),af=Ws(),of=js(),cf=Hs(),df=Ns();return w(),s.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("input",{type:"file",ref:qe,onChange:rt,accept:".csv",className:"hidden"}),s.jsx("header",{className:"text-white p-4",style:{backgroundColor:"#3d59ab"},children:s.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Xs,{size:32,style:{color:"#ffd700"}}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"}),s.jsx("p",{className:"text-sm opacity-80",children:"Goldfinch Chef"})]})]}),s.jsxs(Vr,{to:"/",className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition-colors",children:[s.jsx(hc,{size:20}),"Back to App"]})]})}),s.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[s.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto",children:[{id:"overview",label:"Dashboard",icon:T0},{id:"menu",label:"Menu Planner",icon:Zn},{id:"billing",label:"Billing & Dates",icon:rs},{id:"clients",label:"Clients",icon:nr},{id:"ingredients",label:"Ingredients",icon:hn}].map(v=>s.jsxs("button",{onClick:()=>H(v.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium whitespace-nowrap ${k===v.id?"text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,style:k===v.id?{backgroundColor:"#3d59ab"}:{},children:[s.jsx(v.icon,{size:20}),v.label]},v.id))}),k==="overview"&&s.jsx(Hv,{weekStart:Lt,weekEnd:Qt,thisWeekDeliveries:af,thisWeekCompleted:of,renewalsThisWeek:df,problemsThisWeek:cf,autoTasks:Fo,customTasks:i,updateCustomTasks:f,newTask:oe,setNewTask:G,addCustomTask:us,toggleTaskComplete:Nn,deleteCustomTask:Ts,groceryBills:x,newGroceryBill:lt,setNewGroceryBill:ut,addGroceryBill:el,deleteGroceryBill:kn,menuItems:n,recipes:m,getRecipeCost:ke,clients:e,clientPortalData:a}),k==="menu"&&s.jsx(Fv,{menuDate:K,setMenuDate:ce,clients:e.filter(v=>v.status==="active"),allClients:e,selectedClients:ee,setSelectedClients:le,recipes:m,newMenuItem:W,setNewMenuItem:_,menuItems:n,setMenuItems:p,addMenuItem:$e,clearMenu:Ke,deleteMenuItem:Ue,getOrdersByClient:Nt,clientPortalData:a,weeklyTasks:d,weeks:u,selectedWeekId:V,setSelectedWeekId:Z,lockWeekAndSnapshot:S,unlockWeekById:X}),k==="approvals"&&s.jsx(Gv,{clients:e,menuItems:n,updateMenuItems:p,lockWeekWithSnapshot:S,weeklyTasks:d,clientPortalData:a,recipes:m}),k==="recipes"&&s.jsx(Xh,{recipes:m,newRecipe:ae,setNewRecipe:ye,editingRecipe:D,setEditingRecipe:O,masterIngredients:y,recipesFileRef:de,findExactMatch:ge,findSimilarIngredients:he,getRecipeCost:ke,getRecipeCounts:De,saveRecipe:Ce,deleteRecipe:Be,startEditingRecipe:Qe,saveEditingRecipe:at,updateEditingIngredient:ss,addEditingIngredient:Mt,removeEditingIngredient:Rt,exportRecipesCSV:()=>Qh(m),getUniqueVendors:Te,updateMasterIngredientCost:ze,syncRecipeIngredientsFromMaster:Me}),k==="ingredients"&&s.jsx(Av,{masterIngredients:y,newIngredient:ie,setNewIngredient:be,editingIngredientId:ve,editingIngredientData:Ae,setEditingIngredientData:Oe,duplicateWarnings:Pe,setDuplicateWarnings:st,scanForDuplicates:Ie,mergeIngredients:_e,addMasterIngredient:ds,deleteMasterIngredient:jn,startEditingMasterIngredient:xe,saveEditingMasterIngredient:Ne,cancelEditingMasterIngredient:je,ingredientsFileRef:qe,exportIngredientsCSV:()=>nv(y)}),k==="clients"&&s.jsx($v,{clients:e,newClient:It,setNewClient:jt,addClient:Tt,deleteClient:Bt,clientsFileRef:pt,exportClientsCSV:Xr,setClients:F}),k==="billing"&&s.jsx(Vv,{clients:e,updateClients:F,blockedDates:o,updateBlockedDates:N}),k==="subscriptions"&&s.jsx(Mv,{clients:e,weeklyTasks:d,setWeeklyTasks:h,clientPortalData:a}),k==="groceries"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-2",style:{color:"#3d59ab"},children:[s.jsx(Uh,{size:24,className:"inline mr-2"}),"Grocery Tracking"]}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Track weekly grocery expenses for cost analysis."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 p-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx(Vt,{label:"Date",children:s.jsx("input",{type:"date",value:lt.date,onChange:v=>ut({...lt,date:v.target.value}),className:qt,style:Gt})}),s.jsx(Vt,{label:"Amount ($)",children:s.jsx("input",{type:"number",step:"0.01",value:lt.amount,onChange:v=>ut({...lt,amount:v.target.value}),placeholder:"0.00",className:qt,style:Gt})}),s.jsx(Vt,{label:"Store",children:s.jsx("input",{type:"text",value:lt.store,onChange:v=>ut({...lt,store:v.target.value}),placeholder:"Store name",className:qt,style:Gt})}),s.jsx(Vt,{label:"Notes",children:s.jsx("input",{type:"text",value:lt.notes,onChange:v=>ut({...lt,notes:v.target.value}),placeholder:"Optional notes",className:qt,style:Gt})})]}),s.jsxs("button",{onClick:el,className:"px-6 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[s.jsx(gs,{size:20,className:"inline mr-2"}),"Add Bill"]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:["Recent Bills (",x.length,")"]}),x.length>0?s.jsx("div",{className:"space-y-2",children:x.sort((v,q)=>new Date(q.date)-new Date(v.date)).map(v=>s.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border-2",style:{borderColor:"#ebb582"},children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{className:"font-bold text-lg",style:{color:"#3d59ab"},children:["$",parseFloat(v.amount).toFixed(2)]}),s.jsx("span",{className:"text-gray-600",children:new Date(v.date+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),v.store&&s.jsx("span",{className:"text-sm px-2 py-1 rounded bg-gray-100",children:v.store})]}),v.notes&&s.jsx("p",{className:"text-sm text-gray-500 mt-1",children:v.notes})]}),s.jsx("button",{onClick:()=>kn(v.id),className:"text-red-600 hover:text-red-800",children:s.jsx($s,{size:18})})]},v.id))}):s.jsx("p",{className:"text-gray-500 text-center py-8",children:"No grocery bills recorded. Add your first bill above."}),x.length>0&&s.jsxs("div",{className:"mt-6 pt-6 border-t-2",style:{borderColor:"#ebb582"},children:[s.jsx("h4",{className:"font-bold mb-3",children:"Monthly Totals"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{const v={};return x.forEach(q=>{const Q=sf(q.date);v[Q]=(v[Q]||0)+parseFloat(q.amount)}),Object.entries(v).sort((q,Q)=>Q[0].localeCompare(q[0])).slice(0,4).map(([q,Q])=>s.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("p",{className:"text-sm text-gray-500",children:new Date(q+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})}),s.jsxs("p",{className:"font-bold text-lg",style:{color:"#3d59ab"},children:["$",Q.toFixed(2)]})]},q))})()})]})]})]}),k==="analytics"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-2",style:{color:"#3d59ab"},children:[s.jsx(Hh,{size:24,className:"inline mr-2"}),"Analytics Dashboard"]}),s.jsxs("p",{className:"text-gray-600 mb-6",children:["Revenue, costs, and margins at a glance. Tax rate: ",(jd*100).toFixed(0),"%"]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:"This Week"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{const v=Lt.toISOString().split("T")[0],q=Qt.toISOString().split("T")[0],Q=tl(v,q),me=e.filter(Le=>Le.status==="active"),Ee=me.reduce((Le,We)=>Le+tn(We).total,0),we=Ee-Q;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#dbeafe"},children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Active Clients"}),s.jsx("p",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:me.length})]}),s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#dcfce7"},children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Weekly Revenue"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",Ee.toFixed(2)]})]}),s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#fef3c7"},children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Weekly Groceries"}),s.jsxs("p",{className:"text-2xl font-bold text-amber-600",children:["$",Q.toFixed(2)]})]}),s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:we>=0?"#dcfce7":"#fee2e2"},children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Weekly Margin"}),s.jsxs("p",{className:`text-2xl font-bold ${we>=0?"text-green-600":"text-red-600"}`,children:["$",we.toFixed(2)]})]})]})})()})]}),s.jsxs("div",{className:"mb-8",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:"This Month"}),s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{const v=new Date(Ge.getFullYear(),Ge.getMonth(),1),q=new Date(Ge.getFullYear(),Ge.getMonth()+1,0),Q=v.toISOString().split("T")[0],me=q.toISOString().split("T")[0],Ee=tl(Q,me),Le=e.filter(Cn=>Cn.status==="active").reduce((Cn,Ye)=>{const _s=tn(Ye).total,Ao=Ye.frequency==="biweekly"?2:4;return Cn+_s*Ao},0),We=Le-Ee,wn=Le>0?We/Le*100:0;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#dcfce7"},children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Monthly Revenue (Est.)"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",Le.toFixed(2)]})]}),s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#fef3c7"},children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Monthly Groceries"}),s.jsxs("p",{className:"text-2xl font-bold text-amber-600",children:["$",Ee.toFixed(2)]})]}),s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:We>=0?"#dcfce7":"#fee2e2"},children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Monthly Profit"}),s.jsxs("p",{className:`text-2xl font-bold ${We>=0?"text-green-600":"text-red-600"}`,children:["$",We.toFixed(2)]})]}),s.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#ede9fe"},children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Profit Margin"}),s.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[wn.toFixed(1),"%"]})]})]})})()})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:[s.jsx(nr,{size:20,className:"inline mr-2"}),"Per-Client Analysis"]}),s.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Revenue breakdown and food cost allocation per client."}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b-2",style:{borderColor:"#ebb582"},children:[s.jsx("th",{className:"text-left py-2 px-3",children:"Client"}),s.jsx("th",{className:"text-right py-2 px-3",children:"Plan"}),s.jsx("th",{className:"text-right py-2 px-3",children:"Service"}),s.jsx("th",{className:"text-right py-2 px-3",children:"Discount"}),s.jsx("th",{className:"text-right py-2 px-3",children:"Tax"}),s.jsx("th",{className:"text-right py-2 px-3",children:"Total"}),s.jsx("th",{className:"text-right py-2 px-3",children:"Food Cost"}),s.jsx("th",{className:"text-right py-2 px-3",children:"Margin"})]})}),s.jsx("tbody",{children:e.filter(v=>v.status==="active").sort((v,q)=>(q.planPrice||0)-(v.planPrice||0)).map((v,q)=>{const Q=tn(v),me=new Date(Ge.getFullYear(),Ge.getMonth(),1).toISOString().split("T")[0],Ee=new Date(Ge.getFullYear(),Ge.getMonth()+1,0).toISOString().split("T")[0],we=lf(v.name,me,Ee),Le=Q.total-we,We=Q.total>0?Le/Q.total*100:0;return s.jsxs("tr",{className:"border-b hover:bg-gray-50",style:{borderColor:"#f0f0f0"},children:[s.jsxs("td",{className:"py-2 px-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"font-medium",children:v.displayName||v.name}),v.paysOwnGroceries&&s.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-100 text-blue-700",children:"Own Groceries"}),v.prepayDiscount&&s.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-green-100 text-green-700",children:"Prepay"})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:[v.portions||v.persons||1," portions  ",v.frequency]})]}),s.jsxs("td",{className:"py-2 px-3 text-right",children:["$",Q.basePlan.toFixed(2)]}),s.jsxs("td",{className:"py-2 px-3 text-right",children:["$",Q.serviceFee.toFixed(2)]}),s.jsx("td",{className:"py-2 px-3 text-right text-green-600",children:Q.discount>0?`-$${Q.discount.toFixed(2)}`:"-"}),s.jsxs("td",{className:"py-2 px-3 text-right text-gray-500",children:["$",Q.tax.toFixed(2)]}),s.jsxs("td",{className:"py-2 px-3 text-right font-bold",children:["$",Q.total.toFixed(2)]}),s.jsx("td",{className:"py-2 px-3 text-right text-amber-600",children:v.paysOwnGroceries?"-":`$${we.toFixed(2)}`}),s.jsxs("td",{className:"py-2 px-3 text-right",children:[s.jsxs("span",{className:`font-bold ${Le>=0?"text-green-600":"text-red-600"}`,children:["$",Le.toFixed(2)]}),s.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:["(",We.toFixed(0),"%)"]})]})]},v.id||q)})}),s.jsx("tfoot",{children:s.jsxs("tr",{className:"border-t-2 font-bold",style:{borderColor:"#ebb582"},children:[s.jsxs("td",{className:"py-2 px-3",children:["Total (",e.filter(v=>v.status==="active").length," active)"]}),s.jsxs("td",{className:"py-2 px-3 text-right",children:["$",e.filter(v=>v.status==="active").reduce((v,q)=>v+tn(q).basePlan,0).toFixed(2)]}),s.jsxs("td",{className:"py-2 px-3 text-right",children:["$",e.filter(v=>v.status==="active").reduce((v,q)=>v+tn(q).serviceFee,0).toFixed(2)]}),s.jsxs("td",{className:"py-2 px-3 text-right text-green-600",children:["-$",e.filter(v=>v.status==="active").reduce((v,q)=>v+tn(q).discount,0).toFixed(2)]}),s.jsxs("td",{className:"py-2 px-3 text-right text-gray-500",children:["$",e.filter(v=>v.status==="active").reduce((v,q)=>v+tn(q).tax,0).toFixed(2)]}),s.jsxs("td",{className:"py-2 px-3 text-right",style:{color:"#3d59ab"},children:["$",e.filter(v=>v.status==="active").reduce((v,q)=>v+tn(q).total,0).toFixed(2)]}),s.jsx("td",{className:"py-2 px-3 text-right text-amber-600",children:(()=>{const v=new Date(Ge.getFullYear(),Ge.getMonth(),1).toISOString().split("T")[0],q=new Date(Ge.getFullYear(),Ge.getMonth()+1,0).toISOString().split("T")[0];return`$${tl(v,q).toFixed(2)}`})()}),s.jsx("td",{className:"py-2 px-3 text-right",children:(()=>{const v=new Date(Ge.getFullYear(),Ge.getMonth(),1).toISOString().split("T")[0],q=new Date(Ge.getFullYear(),Ge.getMonth()+1,0).toISOString().split("T")[0],Q=e.filter(we=>we.status==="active").reduce((we,Le)=>we+tn(Le).total,0),me=tl(v,q),Ee=Q-me;return s.jsxs("span",{className:Ee>=0?"text-green-600":"text-red-600",children:["$",Ee.toFixed(2)]})})()})]})})]})})]})]}),k==="tasks"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("h2",{className:"text-2xl font-bold mb-4",style:{color:"#3d59ab"},children:"Weekly Tasks"}),Fo.length>0?s.jsx("div",{className:"space-y-4",children:Fo.map(v=>s.jsxs("div",{className:`border-l-4 p-4 rounded-r-lg ${v.action?"cursor-pointer hover:shadow-md transition-shadow":""}`,style:{borderColor:v.color,backgroundColor:"#f9f9ed"},onClick:()=>v.action&&H(v.action),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(v.icon,{size:20,style:{color:v.color}}),s.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded",style:{backgroundColor:v.color+"20",color:v.color},children:v.category})]}),v.action&&s.jsx("span",{className:"text-xs px-2 py-1 rounded bg-gray-200 text-gray-600",children:"Click to add "})]}),s.jsx("h4",{className:"font-bold mb-2",children:v.title}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[v.details.slice(0,5).map((q,Q)=>s.jsxs("li",{children:[" ",q]},Q)),v.details.length>5&&s.jsxs("li",{className:"text-gray-400",children:["...and ",v.details.length-5," more"]})]})]},v.id))}):s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Fe,{size:48,className:"mx-auto mb-4 text-green-500"}),s.jsx("p",{children:"All caught up! No pending tasks this week."})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:"Custom Tasks"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 p-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx(Vt,{label:"Task Title",children:s.jsx("input",{type:"text",value:oe.title,onChange:v=>G({...oe,title:v.target.value}),placeholder:"Enter task title",className:qt,style:Gt})}),s.jsx(Vt,{label:"Notes (optional)",children:s.jsx("input",{type:"text",value:oe.notes,onChange:v=>G({...oe,notes:v.target.value}),placeholder:"Additional notes",className:qt,style:Gt})}),s.jsx(Vt,{label:"Due Date (optional)",children:s.jsx("input",{type:"date",value:oe.dueDate,onChange:v=>G({...oe,dueDate:v.target.value}),className:qt,style:Gt})})]}),s.jsxs("button",{onClick:us,className:"px-6 py-2 rounded-lg text-white mb-6",style:{backgroundColor:"#3d59ab"},children:[s.jsx(gs,{size:20,className:"inline mr-2"}),"Add Task"]}),i.length>0?s.jsx("div",{className:"space-y-2",children:i.map(v=>s.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border-2 ${v.completed?"bg-gray-50 border-gray-200":"border-gray-200"}`,children:[s.jsx("button",{onClick:()=>Nn(v.id),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 ${v.completed?"bg-green-500 border-green-500":"border-gray-300"}`,children:v.completed&&s.jsx(Fe,{size:14,className:"text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:`font-medium ${v.completed?"line-through text-gray-400":""}`,children:v.title}),v.notes&&s.jsx("p",{className:"text-sm text-gray-500",children:v.notes}),v.dueDate&&s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Due: ",Mr(v.dueDate)]})]}),s.jsx("button",{onClick:()=>Ts(v.id),className:"text-red-500 hover:text-red-700",children:s.jsx($s,{size:18})})]},v.id))}):s.jsx("p",{className:"text-gray-500 text-center py-4",children:"No custom tasks. Add one above."})]})]}),k==="settings"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-4",style:{color:"#3d59ab"},children:[s.jsx(xs,{size:24,className:"inline mr-2"}),"Availability Calendar"]}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Click dates to block them from client date selection."}),s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("button",{onClick:zt,className:"p-2 hover:bg-gray-100 rounded",children:s.jsx(qr,{size:24})}),s.jsx("h3",{className:"text-lg font-bold",children:B.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:ks,className:"p-2 hover:bg-gray-100 rounded",children:s.jsx(ql,{size:24})})]}),s.jsxs("div",{className:"grid grid-cols-7 gap-1 mb-4",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(v=>s.jsx("div",{className:"text-center text-sm font-medium text-gray-500 py-2",children:v},v)),Ze(B).map((v,q)=>{if(!v)return s.jsx("div",{},`empty-${q}`);const Q=v.toISOString().split("T")[0],me=o.includes(Q),Ee=v<new Date(Ge.toISOString().split("T")[0]),we=Q===Ge.toISOString().split("T")[0];return s.jsx("button",{onClick:()=>!Ee&&Ft(v),disabled:Ee,className:`p-2 rounded-lg text-center transition-colors ${Ee?"text-gray-300 cursor-not-allowed":me?"bg-red-500 text-white hover:bg-red-600":we?"bg-blue-100 hover:bg-blue-200":"hover:bg-gray-100"}`,children:v.getDate()},Q)})]}),o.length>0&&s.jsxs("div",{className:"p-3 rounded-lg bg-red-50 border border-red-200",children:[s.jsxs("p",{className:"text-sm font-medium text-red-700 mb-2",children:[o.length," date",o.length>1?"s":""," blocked:"]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:o.sort().map(v=>s.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-red-100 text-red-700 flex items-center gap-1",children:[Mr(v),s.jsx("button",{onClick:()=>N(o.filter(q=>q!==v)),children:s.jsx(wt,{size:12})})]},v))})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-4",style:{color:"#3d59ab"},children:[s.jsx(un,{size:24,className:"inline mr-2"}),"Route Starting Address"]}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Set the starting address for delivery route optimization."}),s.jsx(Vt,{label:"Starting Address",children:s.jsx("input",{type:"text",value:c.routeStartAddress,onChange:v=>z({...c,routeStartAddress:v.target.value}),placeholder:"Enter your starting address",className:`${qt} w-full`,style:Gt})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("h2",{className:"text-2xl font-bold mb-4",style:{color:"#3d59ab"},children:[s.jsx(nr,{size:24,className:"inline mr-2"}),"Drivers"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4 p-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx(Vt,{label:"Driver Name",children:s.jsx("input",{type:"text",value:I.name,onChange:v=>ue({...I,name:v.target.value}),placeholder:"Enter driver name",className:qt,style:Gt})}),s.jsx(Vt,{label:"Phone",children:s.jsx("input",{type:"tel",value:I.phone,onChange:v=>ue({...I,phone:v.target.value}),placeholder:"Phone number",className:qt,style:Gt})}),s.jsx(Vt,{label:"Zone",children:s.jsxs("select",{value:I.zone,onChange:v=>ue({...I,zone:v.target.value}),className:qt,style:Gt,children:[s.jsx("option",{value:"",children:"Unassigned"}),ws.map(v=>s.jsxs("option",{value:v,children:["Zone ",v]},v))]})}),s.jsx(Vt,{label:"Access Code",children:s.jsx("input",{type:"text",value:I.accessCode,onChange:v=>ue({...I,accessCode:v.target.value}),placeholder:"Access code",className:qt,style:Gt})})]}),s.jsxs("button",{onClick:$,className:"px-6 py-2 rounded-lg text-white mb-6",style:{backgroundColor:"#3d59ab"},children:[s.jsx(gs,{size:20,className:"inline mr-2"}),"Add Driver"]}),t.length>0?s.jsx("div",{className:"space-y-3",children:t.map((v,q)=>s.jsx("div",{children:E===q?s.jsxs("div",{className:"border-2 rounded-lg p-4",style:{borderColor:"#3d59ab",backgroundColor:"#f9f9ed"},children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(Vt,{label:"Driver Name",children:s.jsx("input",{type:"text",value:P.name,onChange:Q=>A({...P,name:Q.target.value}),className:qt,style:Gt})}),s.jsx(Vt,{label:"Phone",children:s.jsx("input",{type:"tel",value:P.phone||"",onChange:Q=>A({...P,phone:Q.target.value}),className:qt,style:Gt})}),s.jsx(Vt,{label:"Zone",children:s.jsxs("select",{value:P.zone||"",onChange:Q=>A({...P,zone:Q.target.value}),className:qt,style:Gt,children:[s.jsx("option",{value:"",children:"Unassigned"}),ws.map(Q=>s.jsxs("option",{value:Q,children:["Zone ",Q]},Q))]})}),s.jsx(Vt,{label:"Access Code",children:s.jsx("input",{type:"text",value:P.accessCode||"",onChange:Q=>A({...P,accessCode:Q.target.value}),className:qt,style:Gt})})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsxs("button",{onClick:pe,className:"flex items-center gap-1 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[s.jsx(Fe,{size:18}),"Save"]}),s.jsxs("button",{onClick:()=>{L(null),A(null)},className:"flex items-center gap-1 px-4 py-2 rounded-lg bg-gray-200",children:[s.jsx(wt,{size:18}),"Cancel"]})]})]}):s.jsxs("div",{className:"border-2 rounded-lg p-4",style:{borderColor:"#ebb582"},children:[s.jsxs("div",{className:"flex justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("h3",{className:"font-bold text-lg",children:v.name}),v.zone&&s.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-purple-100 text-purple-700",children:["Zone ",v.zone]})]}),v.phone&&s.jsxs("p",{className:"text-sm text-gray-600",children:["Phone: ",v.phone]})]}),s.jsxs("div",{className:"flex gap-2 self-start ml-4",children:[s.jsx("button",{onClick:()=>te(q),className:"text-blue-600",children:s.jsx(ur,{size:18})}),s.jsx("button",{onClick:()=>J(q),className:"text-red-600",children:s.jsx($s,{size:18})})]})]}),v.accessCode&&s.jsxs("div",{className:"mb-3 p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[s.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Access Code"}),s.jsx("p",{className:"font-mono font-bold text-lg",style:{color:"#3d59ab"},children:v.accessCode})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs("button",{onClick:()=>window.open(`/driver?admin_driver=${encodeURIComponent(v.name)}`,"_blank"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-white text-sm",style:{backgroundColor:"#3d59ab"},children:[s.jsx(ps,{size:16}),"Preview Driver View"]}),s.jsxs("button",{onClick:()=>{const Q=`${window.location.origin}/driver`;navigator.clipboard.writeText(Q),alert("Driver login link copied to clipboard!")},className:"flex items-center gap-2 px-3 py-2 rounded-lg border-2 text-sm",style:{borderColor:"#ebb582"},children:[s.jsx(Lh,{size:16}),"Copy Login Link"]})]})]})},v.id||q))}):s.jsx("p",{className:"text-gray-500",children:"No drivers yet. Add your first driver above."})]})]})]}),Pt&&s.jsx(Uv,{client:Pt,clientPortalData:a,onSave:v=>{const q=e.findIndex(Q=>Q.subscriptionId===v.subscriptionId||Q.name===v.name||Q.displayName===v.displayName);if(q>=0){const Q=[...e];Q[q]={...Q[q],...v},F(Q)}},onClose:()=>Ct(null)}),s.jsx("input",{type:"file",ref:pt,accept:".csv",style:{display:"none"},onChange:v=>{var Q;const q=(Q=v.target.files)==null?void 0:Q[0];q&&(Zh(q,me=>{if(me.length===0){alert(`No subscriptions found in CSV. Please check the file format.

Expected columns: Name, Display Name, Address, Email, Phone, Portions, Meals, etc.`);return}const Ee=me.reduce((we,Le)=>{var We;return we+(((We=Le.contacts)==null?void 0:We.length)||0)},0);F(me),alert(`Import successful!

${me.length} subscription(s) imported
${Ee} contact(s) total`)},me=>alert("Error parsing CSV: "+(me.message||me))),v.target.value="")}})]})}gi.createRoot(document.getElementById("root")).render(s.jsx(yl.StrictMode,{children:s.jsx(m0,{children:s.jsxs($y,{children:[s.jsx(xl,{path:"/",element:s.jsx(pv,{})}),s.jsx(xl,{path:"/driver",element:s.jsx(fv,{})}),s.jsx(xl,{path:"/client/:id",element:s.jsx(gv,{})}),s.jsx(xl,{path:"/admin",element:s.jsx(Kv,{})})]})})}));
