(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))r(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerPolicy&&(a.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?a.credentials="include":l.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(l){if(l.ep)return;l.ep=!0;const a=s(l);fetch(l.href,a)}})();var Kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bu={exports:{}},Qa={},Wu={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yl=Symbol.for("react.element"),Qh=Symbol.for("react.portal"),Zh=Symbol.for("react.fragment"),Jh=Symbol.for("react.strict_mode"),Xh=Symbol.for("react.profiler"),ef=Symbol.for("react.provider"),tf=Symbol.for("react.context"),nf=Symbol.for("react.forward_ref"),sf=Symbol.for("react.suspense"),rf=Symbol.for("react.memo"),lf=Symbol.for("react.lazy"),gd=Symbol.iterator;function af(e){return e===null||typeof e!="object"?null:(e=gd&&e[gd]||e["@@iterator"],typeof e=="function"?e:null)}var Hu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Vu=Object.assign,qu={};function yr(e,t,s){this.props=e,this.context=t,this.refs=qu,this.updater=s||Hu}yr.prototype.isReactComponent={};yr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};yr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Gu(){}Gu.prototype=yr.prototype;function dc(e,t,s){this.props=e,this.context=t,this.refs=qu,this.updater=s||Hu}var uc=dc.prototype=new Gu;uc.constructor=dc;Vu(uc,yr.prototype);uc.isPureReactComponent=!0;var xd=Array.isArray,Yu=Object.prototype.hasOwnProperty,mc={current:null},Ku={key:!0,ref:!0,__self:!0,__source:!0};function Qu(e,t,s){var r,l={},a=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)Yu.call(t,r)&&!Ku.hasOwnProperty(r)&&(l[r]=t[r]);var i=arguments.length-2;if(i===1)l.children=s;else if(1<i){for(var c=Array(i),d=0;d<i;d++)c[d]=arguments[d+2];l.children=c}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)l[r]===void 0&&(l[r]=i[r]);return{$$typeof:yl,type:e,key:a,ref:o,props:l,_owner:mc.current}}function of(e,t){return{$$typeof:yl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function pc(e){return typeof e=="object"&&e!==null&&e.$$typeof===yl}function cf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var yd=/\/+/g;function Lo(e,t){return typeof e=="object"&&e!==null&&e.key!=null?cf(""+e.key):t.toString(36)}function sa(e,t,s,r,l){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case yl:case Qh:o=!0}}if(o)return o=e,l=l(o),e=r===""?"."+Lo(o,0):r,xd(l)?(s="",e!=null&&(s=e.replace(yd,"$&/")+"/"),sa(l,t,s,"",function(d){return d})):l!=null&&(pc(l)&&(l=of(l,s+(!l.key||o&&o.key===l.key?"":(""+l.key).replace(yd,"$&/")+"/")+e)),t.push(l)),1;if(o=0,r=r===""?".":r+":",xd(e))for(var i=0;i<e.length;i++){a=e[i];var c=r+Lo(a,i);o+=sa(a,t,s,c,l)}else if(c=af(e),typeof c=="function")for(e=c.call(e),i=0;!(a=e.next()).done;)a=a.value,c=r+Lo(a,i++),o+=sa(a,t,s,c,l);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ll(e,t,s){if(e==null)return e;var r=[],l=0;return sa(e,r,"","",function(a){return t.call(s,a,l++)}),r}function df(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ft={current:null},ra={transition:null},uf={ReactCurrentDispatcher:Ft,ReactCurrentBatchConfig:ra,ReactCurrentOwner:mc};function Zu(){throw Error("act(...) is not supported in production builds of React.")}Fe.Children={map:Ll,forEach:function(e,t,s){Ll(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Ll(e,function(){t++}),t},toArray:function(e){return Ll(e,function(t){return t})||[]},only:function(e){if(!pc(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Fe.Component=yr;Fe.Fragment=Zh;Fe.Profiler=Xh;Fe.PureComponent=dc;Fe.StrictMode=Jh;Fe.Suspense=sf;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uf;Fe.act=Zu;Fe.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Vu({},e.props),l=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=mc.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(c in t)Yu.call(t,c)&&!Ku.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&i!==void 0?i[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=s;else if(1<c){i=Array(c);for(var d=0;d<c;d++)i[d]=arguments[d+2];r.children=i}return{$$typeof:yl,type:e.type,key:l,ref:a,props:r,_owner:o}};Fe.createContext=function(e){return e={$$typeof:tf,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:ef,_context:e},e.Consumer=e};Fe.createElement=Qu;Fe.createFactory=function(e){var t=Qu.bind(null,e);return t.type=e,t};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(e){return{$$typeof:nf,render:e}};Fe.isValidElement=pc;Fe.lazy=function(e){return{$$typeof:lf,_payload:{_status:-1,_result:e},_init:df}};Fe.memo=function(e,t){return{$$typeof:rf,type:e,compare:t===void 0?null:t}};Fe.startTransition=function(e){var t=ra.transition;ra.transition={};try{e()}finally{ra.transition=t}};Fe.unstable_act=Zu;Fe.useCallback=function(e,t){return Ft.current.useCallback(e,t)};Fe.useContext=function(e){return Ft.current.useContext(e)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(e){return Ft.current.useDeferredValue(e)};Fe.useEffect=function(e,t){return Ft.current.useEffect(e,t)};Fe.useId=function(){return Ft.current.useId()};Fe.useImperativeHandle=function(e,t,s){return Ft.current.useImperativeHandle(e,t,s)};Fe.useInsertionEffect=function(e,t){return Ft.current.useInsertionEffect(e,t)};Fe.useLayoutEffect=function(e,t){return Ft.current.useLayoutEffect(e,t)};Fe.useMemo=function(e,t){return Ft.current.useMemo(e,t)};Fe.useReducer=function(e,t,s){return Ft.current.useReducer(e,t,s)};Fe.useRef=function(e){return Ft.current.useRef(e)};Fe.useState=function(e){return Ft.current.useState(e)};Fe.useSyncExternalStore=function(e,t,s){return Ft.current.useSyncExternalStore(e,t,s)};Fe.useTransition=function(){return Ft.current.useTransition()};Fe.version="18.3.1";Wu.exports=Fe;var x=Wu.exports;const Br=Uu(x);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mf=x,pf=Symbol.for("react.element"),hf=Symbol.for("react.fragment"),ff=Object.prototype.hasOwnProperty,gf=mf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xf={key:!0,ref:!0,__self:!0,__source:!0};function Ju(e,t,s){var r,l={},a=null,o=null;s!==void 0&&(a=""+s),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)ff.call(t,r)&&!xf.hasOwnProperty(r)&&(l[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)l[r]===void 0&&(l[r]=t[r]);return{$$typeof:pf,type:e,key:a,ref:o,props:l,_owner:gf.current}}Qa.Fragment=hf;Qa.jsx=Ju;Qa.jsxs=Ju;Bu.exports=Qa;var n=Bu.exports,ui={},Xu={exports:{}},Jt={},em={exports:{}},tm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(j,P){var R=j.length;j.push(P);e:for(;0<R;){var H=R-1>>>1,V=j[H];if(0<l(V,P))j[H]=P,j[R]=V,R=H;else break e}}function s(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var P=j[0],R=j.pop();if(R!==P){j[0]=R;e:for(var H=0,V=j.length,B=V>>>1;H<B;){var G=2*(H+1)-1,$=j[G],Y=G+1,q=j[Y];if(0>l($,R))Y<V&&0>l(q,$)?(j[H]=q,j[Y]=R,H=Y):(j[H]=$,j[G]=R,H=G);else if(Y<V&&0>l(q,R))j[H]=q,j[Y]=R,H=Y;else break e}}return P}function l(j,P){var R=j.sortIndex-P.sortIndex;return R!==0?R:j.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,i=o.now();e.unstable_now=function(){return o.now()-i}}var c=[],d=[],h=1,f=null,p=3,k=!1,L=!1,C=!1,F=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,u=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(j){for(var P=s(d);P!==null;){if(P.callback===null)r(d);else if(P.startTime<=j)r(d),P.sortIndex=P.expirationTime,t(c,P);else break;P=s(d)}}function I(j){if(C=!1,v(j),!L)if(s(c)!==null)L=!0,E(D);else{var P=s(d);P!==null&&_(I,P.startTime-j)}}function D(j,P){L=!1,C&&(C=!1,g(y),y=-1),k=!0;var R=p;try{for(v(P),f=s(c);f!==null&&(!(f.expirationTime>P)||j&&!N());){var H=f.callback;if(typeof H=="function"){f.callback=null,p=f.priorityLevel;var V=H(f.expirationTime<=P);P=e.unstable_now(),typeof V=="function"?f.callback=V:f===s(c)&&r(c),v(P)}else r(c);f=s(c)}if(f!==null)var B=!0;else{var G=s(d);G!==null&&_(I,G.startTime-P),B=!1}return B}finally{f=null,p=R,k=!1}}var A=!1,z=null,y=-1,b=5,w=-1;function N(){return!(e.unstable_now()-w<b)}function S(){if(z!==null){var j=e.unstable_now();w=j;var P=!0;try{P=z(!0,j)}finally{P?O():(A=!1,z=null)}}else A=!1}var O;if(typeof u=="function")O=function(){u(S)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,le=W.port2;W.port1.onmessage=S,O=function(){le.postMessage(null)}}else O=function(){F(S,0)};function E(j){z=j,A||(A=!0,O())}function _(j,P){y=F(function(){j(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){L||k||(L=!0,E(D))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return s(c)},e.unstable_next=function(j){switch(p){case 1:case 2:case 3:var P=3;break;default:P=p}var R=p;p=P;try{return j()}finally{p=R}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,P){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var R=p;p=j;try{return P()}finally{p=R}},e.unstable_scheduleCallback=function(j,P,R){var H=e.unstable_now();switch(typeof R=="object"&&R!==null?(R=R.delay,R=typeof R=="number"&&0<R?H+R:H):R=H,j){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=R+V,j={id:h++,callback:P,priorityLevel:j,startTime:R,expirationTime:V,sortIndex:-1},R>H?(j.sortIndex=R,t(d,j),s(c)===null&&j===s(d)&&(C?(g(y),y=-1):C=!0,_(I,R-H))):(j.sortIndex=V,t(c,j),L||k||(L=!0,E(D))),j},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(j){var P=p;return function(){var R=p;p=P;try{return j.apply(this,arguments)}finally{p=R}}}})(tm);em.exports=tm;var yf=em.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vf=x,Zt=yf;function ne(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nm=new Set,Jr={};function Fs(e,t){ur(e,t),ur(e+"Capture",t)}function ur(e,t){for(Jr[e]=t,e=0;e<t.length;e++)nm.add(t[e])}var Fn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mi=Object.prototype.hasOwnProperty,bf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vd={},bd={};function jf(e){return mi.call(bd,e)?!0:mi.call(vd,e)?!1:bf.test(e)?bd[e]=!0:(vd[e]=!0,!1)}function Nf(e,t,s,r){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function kf(e,t,s,r){if(t===null||typeof t>"u"||Nf(e,t,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function At(e,t,s,r,l,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=l,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Et[e]=new At(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Et[t]=new At(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Et[e]=new At(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Et[e]=new At(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Et[e]=new At(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Et[e]=new At(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Et[e]=new At(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Et[e]=new At(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Et[e]=new At(e,5,!1,e.toLowerCase(),null,!1,!1)});var hc=/[\-:]([a-z])/g;function fc(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(hc,fc);Et[t]=new At(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(hc,fc);Et[t]=new At(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(hc,fc);Et[t]=new At(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Et[e]=new At(e,1,!1,e.toLowerCase(),null,!1,!1)});Et.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Et[e]=new At(e,1,!1,e.toLowerCase(),null,!0,!0)});function gc(e,t,s,r){var l=Et.hasOwnProperty(t)?Et[t]:null;(l!==null?l.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(kf(t,s,l,r)&&(s=null),r||l===null?jf(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):l.mustUseProperty?e[l.propertyName]=s===null?l.type===3?!1:"":s:(t=l.attributeName,r=l.attributeNamespace,s===null?e.removeAttribute(t):(l=l.type,s=l===3||l===4&&s===!0?"":""+s,r?e.setAttributeNS(r,t,s):e.setAttribute(t,s))))}var Vn=vf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ol=Symbol.for("react.element"),qs=Symbol.for("react.portal"),Gs=Symbol.for("react.fragment"),xc=Symbol.for("react.strict_mode"),pi=Symbol.for("react.profiler"),sm=Symbol.for("react.provider"),rm=Symbol.for("react.context"),yc=Symbol.for("react.forward_ref"),hi=Symbol.for("react.suspense"),fi=Symbol.for("react.suspense_list"),vc=Symbol.for("react.memo"),Xn=Symbol.for("react.lazy"),lm=Symbol.for("react.offscreen"),jd=Symbol.iterator;function Er(e){return e===null||typeof e!="object"?null:(e=jd&&e[jd]||e["@@iterator"],typeof e=="function"?e:null)}var pt=Object.assign,Oo;function Ir(e){if(Oo===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);Oo=t&&t[1]||""}return`
`+Oo+e}var Mo=!1;function Io(e,t){if(!e||Mo)return"";Mo=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var r=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){r=d}e.call(t.prototype)}else{try{throw Error()}catch(d){r=d}e()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var l=d.stack.split(`
`),a=r.stack.split(`
`),o=l.length-1,i=a.length-1;1<=o&&0<=i&&l[o]!==a[i];)i--;for(;1<=o&&0<=i;o--,i--)if(l[o]!==a[i]){if(o!==1||i!==1)do if(o--,i--,0>i||l[o]!==a[i]){var c=`
`+l[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=i);break}}}finally{Mo=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Ir(e):""}function wf(e){switch(e.tag){case 5:return Ir(e.type);case 16:return Ir("Lazy");case 13:return Ir("Suspense");case 19:return Ir("SuspenseList");case 0:case 2:case 15:return e=Io(e.type,!1),e;case 11:return e=Io(e.type.render,!1),e;case 1:return e=Io(e.type,!0),e;default:return""}}function gi(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Gs:return"Fragment";case qs:return"Portal";case pi:return"Profiler";case xc:return"StrictMode";case hi:return"Suspense";case fi:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rm:return(e.displayName||"Context")+".Consumer";case sm:return(e._context.displayName||"Context")+".Provider";case yc:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case vc:return t=e.displayName||null,t!==null?t:gi(e.type)||"Memo";case Xn:t=e._payload,e=e._init;try{return gi(e(t))}catch{}}return null}function Cf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gi(t);case 8:return t===xc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function xs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function am(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Sf(e){var t=am(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var l=s.get,a=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(o){r=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ml(e){e._valueTracker||(e._valueTracker=Sf(e))}function om(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),r="";return e&&(r=am(e)?e.checked?"true":"false":e.value),e=r,e!==s?(t.setValue(e),!0):!1}function xa(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xi(e,t){var s=t.checked;return pt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Nd(e,t){var s=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;s=xs(t.value!=null?t.value:s),e._wrapperState={initialChecked:r,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function im(e,t){t=t.checked,t!=null&&gc(e,"checked",t,!1)}function yi(e,t){im(e,t);var s=xs(t.value),r=t.type;if(s!=null)r==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?vi(e,t.type,s):t.hasOwnProperty("defaultValue")&&vi(e,t.type,xs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function kd(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function vi(e,t,s){(t!=="number"||xa(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Fr=Array.isArray;function rr(e,t,s,r){if(e=e.options,t){t={};for(var l=0;l<s.length;l++)t["$"+s[l]]=!0;for(s=0;s<e.length;s++)l=t.hasOwnProperty("$"+e[s].value),e[s].selected!==l&&(e[s].selected=l),l&&r&&(e[s].defaultSelected=!0)}else{for(s=""+xs(s),t=null,l=0;l<e.length;l++){if(e[l].value===s){e[l].selected=!0,r&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function bi(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ne(91));return pt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wd(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(ne(92));if(Fr(s)){if(1<s.length)throw Error(ne(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:xs(s)}}function cm(e,t){var s=xs(t.value),r=xs(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),r!=null&&(e.defaultValue=""+r)}function Cd(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ji(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Il,um=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,r,l){MSApp.execUnsafeLocalFunction(function(){return e(t,s,r,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Il=Il||document.createElement("div"),Il.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Il.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Xr(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Wr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Df=["Webkit","ms","Moz","O"];Object.keys(Wr).forEach(function(e){Df.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Wr[t]=Wr[e]})});function mm(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Wr.hasOwnProperty(e)&&Wr[e]?(""+t).trim():t+"px"}function pm(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var r=s.indexOf("--")===0,l=mm(s,t[s],r);s==="float"&&(s="cssFloat"),r?e.setProperty(s,l):e[s]=l}}var Ef=pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ni(e,t){if(t){if(Ef[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ne(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ne(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ne(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ne(62))}}function ki(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wi=null;function bc(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ci=null,lr=null,ar=null;function Sd(e){if(e=jl(e)){if(typeof Ci!="function")throw Error(ne(280));var t=e.stateNode;t&&(t=to(t),Ci(e.stateNode,e.type,t))}}function hm(e){lr?ar?ar.push(e):ar=[e]:lr=e}function fm(){if(lr){var e=lr,t=ar;if(ar=lr=null,Sd(e),t)for(e=0;e<t.length;e++)Sd(t[e])}}function gm(e,t){return e(t)}function xm(){}var Fo=!1;function ym(e,t,s){if(Fo)return e(t,s);Fo=!0;try{return gm(e,t,s)}finally{Fo=!1,(lr!==null||ar!==null)&&(xm(),fm())}}function el(e,t){var s=e.stateNode;if(s===null)return null;var r=to(s);if(r===null)return null;s=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(ne(231,t,typeof s));return s}var Si=!1;if(Fn)try{var Pr={};Object.defineProperty(Pr,"passive",{get:function(){Si=!0}}),window.addEventListener("test",Pr,Pr),window.removeEventListener("test",Pr,Pr)}catch{Si=!1}function Pf(e,t,s,r,l,a,o,i,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(h){this.onError(h)}}var Hr=!1,ya=null,va=!1,Di=null,Rf={onError:function(e){Hr=!0,ya=e}};function zf(e,t,s,r,l,a,o,i,c){Hr=!1,ya=null,Pf.apply(Rf,arguments)}function _f(e,t,s,r,l,a,o,i,c){if(zf.apply(this,arguments),Hr){if(Hr){var d=ya;Hr=!1,ya=null}else throw Error(ne(198));va||(va=!0,Di=d)}}function As(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function vm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Dd(e){if(As(e)!==e)throw Error(ne(188))}function Tf(e){var t=e.alternate;if(!t){if(t=As(e),t===null)throw Error(ne(188));return t!==e?null:e}for(var s=e,r=t;;){var l=s.return;if(l===null)break;var a=l.alternate;if(a===null){if(r=l.return,r!==null){s=r;continue}break}if(l.child===a.child){for(a=l.child;a;){if(a===s)return Dd(l),e;if(a===r)return Dd(l),t;a=a.sibling}throw Error(ne(188))}if(s.return!==r.return)s=l,r=a;else{for(var o=!1,i=l.child;i;){if(i===s){o=!0,s=l,r=a;break}if(i===r){o=!0,r=l,s=a;break}i=i.sibling}if(!o){for(i=a.child;i;){if(i===s){o=!0,s=a,r=l;break}if(i===r){o=!0,r=a,s=l;break}i=i.sibling}if(!o)throw Error(ne(189))}}if(s.alternate!==r)throw Error(ne(190))}if(s.tag!==3)throw Error(ne(188));return s.stateNode.current===s?e:t}function bm(e){return e=Tf(e),e!==null?jm(e):null}function jm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=jm(e);if(t!==null)return t;e=e.sibling}return null}var Nm=Zt.unstable_scheduleCallback,Ed=Zt.unstable_cancelCallback,Lf=Zt.unstable_shouldYield,Of=Zt.unstable_requestPaint,gt=Zt.unstable_now,Mf=Zt.unstable_getCurrentPriorityLevel,jc=Zt.unstable_ImmediatePriority,km=Zt.unstable_UserBlockingPriority,ba=Zt.unstable_NormalPriority,If=Zt.unstable_LowPriority,wm=Zt.unstable_IdlePriority,Za=null,Dn=null;function Ff(e){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(Za,e,void 0,(e.current.flags&128)===128)}catch{}}var xn=Math.clz32?Math.clz32:Uf,Af=Math.log,$f=Math.LN2;function Uf(e){return e>>>=0,e===0?32:31-(Af(e)/$f|0)|0}var Fl=64,Al=4194304;function Ar(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ja(e,t){var s=e.pendingLanes;if(s===0)return 0;var r=0,l=e.suspendedLanes,a=e.pingedLanes,o=s&268435455;if(o!==0){var i=o&~l;i!==0?r=Ar(i):(a&=o,a!==0&&(r=Ar(a)))}else o=s&~l,o!==0?r=Ar(o):a!==0&&(r=Ar(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&l)&&(l=r&-r,a=t&-t,l>=a||l===16&&(a&4194240)!==0))return t;if(r&4&&(r|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)s=31-xn(t),l=1<<s,r|=e[s],t&=~l;return r}function Bf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Wf(e,t){for(var s=e.suspendedLanes,r=e.pingedLanes,l=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-xn(a),i=1<<o,c=l[o];c===-1?(!(i&s)||i&r)&&(l[o]=Bf(i,t)):c<=t&&(e.expiredLanes|=i),a&=~i}}function Ei(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Cm(){var e=Fl;return Fl<<=1,!(Fl&4194240)&&(Fl=64),e}function Ao(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function vl(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-xn(t),e[t]=s}function Hf(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<s;){var l=31-xn(s),a=1<<l;t[l]=0,r[l]=-1,e[l]=-1,s&=~a}}function Nc(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var r=31-xn(s),l=1<<r;l&t|e[r]&t&&(e[r]|=t),s&=~l}}var Xe=0;function Sm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Dm,kc,Em,Pm,Rm,Pi=!1,$l=[],os=null,is=null,cs=null,tl=new Map,nl=new Map,ts=[],Vf="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pd(e,t){switch(e){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":cs=null;break;case"pointerover":case"pointerout":tl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":nl.delete(t.pointerId)}}function Rr(e,t,s,r,l,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:s,eventSystemFlags:r,nativeEvent:a,targetContainers:[l]},t!==null&&(t=jl(t),t!==null&&kc(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function qf(e,t,s,r,l){switch(t){case"focusin":return os=Rr(os,e,t,s,r,l),!0;case"dragenter":return is=Rr(is,e,t,s,r,l),!0;case"mouseover":return cs=Rr(cs,e,t,s,r,l),!0;case"pointerover":var a=l.pointerId;return tl.set(a,Rr(tl.get(a)||null,e,t,s,r,l)),!0;case"gotpointercapture":return a=l.pointerId,nl.set(a,Rr(nl.get(a)||null,e,t,s,r,l)),!0}return!1}function zm(e){var t=Ss(e.target);if(t!==null){var s=As(t);if(s!==null){if(t=s.tag,t===13){if(t=vm(s),t!==null){e.blockedOn=t,Rm(e.priority,function(){Em(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function la(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Ri(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var r=new s.constructor(s.type,s);wi=r,s.target.dispatchEvent(r),wi=null}else return t=jl(s),t!==null&&kc(t),e.blockedOn=s,!1;t.shift()}return!0}function Rd(e,t,s){la(e)&&s.delete(t)}function Gf(){Pi=!1,os!==null&&la(os)&&(os=null),is!==null&&la(is)&&(is=null),cs!==null&&la(cs)&&(cs=null),tl.forEach(Rd),nl.forEach(Rd)}function zr(e,t){e.blockedOn===t&&(e.blockedOn=null,Pi||(Pi=!0,Zt.unstable_scheduleCallback(Zt.unstable_NormalPriority,Gf)))}function sl(e){function t(l){return zr(l,e)}if(0<$l.length){zr($l[0],e);for(var s=1;s<$l.length;s++){var r=$l[s];r.blockedOn===e&&(r.blockedOn=null)}}for(os!==null&&zr(os,e),is!==null&&zr(is,e),cs!==null&&zr(cs,e),tl.forEach(t),nl.forEach(t),s=0;s<ts.length;s++)r=ts[s],r.blockedOn===e&&(r.blockedOn=null);for(;0<ts.length&&(s=ts[0],s.blockedOn===null);)zm(s),s.blockedOn===null&&ts.shift()}var or=Vn.ReactCurrentBatchConfig,Na=!0;function Yf(e,t,s,r){var l=Xe,a=or.transition;or.transition=null;try{Xe=1,wc(e,t,s,r)}finally{Xe=l,or.transition=a}}function Kf(e,t,s,r){var l=Xe,a=or.transition;or.transition=null;try{Xe=4,wc(e,t,s,r)}finally{Xe=l,or.transition=a}}function wc(e,t,s,r){if(Na){var l=Ri(e,t,s,r);if(l===null)Ko(e,t,r,ka,s),Pd(e,r);else if(qf(l,e,t,s,r))r.stopPropagation();else if(Pd(e,r),t&4&&-1<Vf.indexOf(e)){for(;l!==null;){var a=jl(l);if(a!==null&&Dm(a),a=Ri(e,t,s,r),a===null&&Ko(e,t,r,ka,s),a===l)break;l=a}l!==null&&r.stopPropagation()}else Ko(e,t,r,null,s)}}var ka=null;function Ri(e,t,s,r){if(ka=null,e=bc(r),e=Ss(e),e!==null)if(t=As(e),t===null)e=null;else if(s=t.tag,s===13){if(e=vm(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ka=e,null}function _m(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mf()){case jc:return 1;case km:return 4;case ba:case If:return 16;case wm:return 536870912;default:return 16}default:return 16}}var ss=null,Cc=null,aa=null;function Tm(){if(aa)return aa;var e,t=Cc,s=t.length,r,l="value"in ss?ss.value:ss.textContent,a=l.length;for(e=0;e<s&&t[e]===l[e];e++);var o=s-e;for(r=1;r<=o&&t[s-r]===l[a-r];r++);return aa=l.slice(e,1<r?1-r:void 0)}function oa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ul(){return!0}function zd(){return!1}function Xt(e){function t(s,r,l,a,o){this._reactName=s,this._targetInst=l,this.type=r,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(s=e[i],this[i]=s?s(a):a[i]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Ul:zd,this.isPropagationStopped=zd,this}return pt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Ul)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Ul)},persist:function(){},isPersistent:Ul}),t}var vr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sc=Xt(vr),bl=pt({},vr,{view:0,detail:0}),Qf=Xt(bl),$o,Uo,_r,Ja=pt({},bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dc,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==_r&&(_r&&e.type==="mousemove"?($o=e.screenX-_r.screenX,Uo=e.screenY-_r.screenY):Uo=$o=0,_r=e),$o)},movementY:function(e){return"movementY"in e?e.movementY:Uo}}),_d=Xt(Ja),Zf=pt({},Ja,{dataTransfer:0}),Jf=Xt(Zf),Xf=pt({},bl,{relatedTarget:0}),Bo=Xt(Xf),eg=pt({},vr,{animationName:0,elapsedTime:0,pseudoElement:0}),tg=Xt(eg),ng=pt({},vr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),sg=Xt(ng),rg=pt({},vr,{data:0}),Td=Xt(rg),lg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ag={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},og={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ig(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=og[e])?!!t[e]:!1}function Dc(){return ig}var cg=pt({},bl,{key:function(e){if(e.key){var t=lg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=oa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?ag[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dc,charCode:function(e){return e.type==="keypress"?oa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),dg=Xt(cg),ug=pt({},Ja,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ld=Xt(ug),mg=pt({},bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dc}),pg=Xt(mg),hg=pt({},vr,{propertyName:0,elapsedTime:0,pseudoElement:0}),fg=Xt(hg),gg=pt({},Ja,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xg=Xt(gg),yg=[9,13,27,32],Ec=Fn&&"CompositionEvent"in window,Vr=null;Fn&&"documentMode"in document&&(Vr=document.documentMode);var vg=Fn&&"TextEvent"in window&&!Vr,Lm=Fn&&(!Ec||Vr&&8<Vr&&11>=Vr),Od=String.fromCharCode(32),Md=!1;function Om(e,t){switch(e){case"keyup":return yg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mm(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ys=!1;function bg(e,t){switch(e){case"compositionend":return Mm(t);case"keypress":return t.which!==32?null:(Md=!0,Od);case"textInput":return e=t.data,e===Od&&Md?null:e;default:return null}}function jg(e,t){if(Ys)return e==="compositionend"||!Ec&&Om(e,t)?(e=Tm(),aa=Cc=ss=null,Ys=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lm&&t.locale!=="ko"?null:t.data;default:return null}}var Ng={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Id(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Ng[e.type]:t==="textarea"}function Im(e,t,s,r){hm(r),t=wa(t,"onChange"),0<t.length&&(s=new Sc("onChange","change",null,s,r),e.push({event:s,listeners:t}))}var qr=null,rl=null;function kg(e){Ym(e,0)}function Xa(e){var t=Zs(e);if(om(t))return e}function wg(e,t){if(e==="change")return t}var Fm=!1;if(Fn){var Wo;if(Fn){var Ho="oninput"in document;if(!Ho){var Fd=document.createElement("div");Fd.setAttribute("oninput","return;"),Ho=typeof Fd.oninput=="function"}Wo=Ho}else Wo=!1;Fm=Wo&&(!document.documentMode||9<document.documentMode)}function Ad(){qr&&(qr.detachEvent("onpropertychange",Am),rl=qr=null)}function Am(e){if(e.propertyName==="value"&&Xa(rl)){var t=[];Im(t,rl,e,bc(e)),ym(kg,t)}}function Cg(e,t,s){e==="focusin"?(Ad(),qr=t,rl=s,qr.attachEvent("onpropertychange",Am)):e==="focusout"&&Ad()}function Sg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xa(rl)}function Dg(e,t){if(e==="click")return Xa(t)}function Eg(e,t){if(e==="input"||e==="change")return Xa(t)}function Pg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bn=typeof Object.is=="function"?Object.is:Pg;function ll(e,t){if(bn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var l=s[r];if(!mi.call(t,l)||!bn(e[l],t[l]))return!1}return!0}function $d(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ud(e,t){var s=$d(e);e=0;for(var r;s;){if(s.nodeType===3){if(r=e+s.textContent.length,e<=t&&r>=t)return{node:s,offset:t-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=$d(s)}}function $m(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?$m(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Um(){for(var e=window,t=xa();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=xa(e.document)}return t}function Pc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Rg(e){var t=Um(),s=e.focusedElem,r=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&$m(s.ownerDocument.documentElement,s)){if(r!==null&&Pc(s)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=s.textContent.length,a=Math.min(r.start,l);r=r.end===void 0?a:Math.min(r.end,l),!e.extend&&a>r&&(l=r,r=a,a=l),l=Ud(s,a);var o=Ud(s,r);l&&o&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var zg=Fn&&"documentMode"in document&&11>=document.documentMode,Ks=null,zi=null,Gr=null,_i=!1;function Bd(e,t,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;_i||Ks==null||Ks!==xa(r)||(r=Ks,"selectionStart"in r&&Pc(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Gr&&ll(Gr,r)||(Gr=r,r=wa(zi,"onSelect"),0<r.length&&(t=new Sc("onSelect","select",null,t,s),e.push({event:t,listeners:r}),t.target=Ks)))}function Bl(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Qs={animationend:Bl("Animation","AnimationEnd"),animationiteration:Bl("Animation","AnimationIteration"),animationstart:Bl("Animation","AnimationStart"),transitionend:Bl("Transition","TransitionEnd")},Vo={},Bm={};Fn&&(Bm=document.createElement("div").style,"AnimationEvent"in window||(delete Qs.animationend.animation,delete Qs.animationiteration.animation,delete Qs.animationstart.animation),"TransitionEvent"in window||delete Qs.transitionend.transition);function eo(e){if(Vo[e])return Vo[e];if(!Qs[e])return e;var t=Qs[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in Bm)return Vo[e]=t[s];return e}var Wm=eo("animationend"),Hm=eo("animationiteration"),Vm=eo("animationstart"),qm=eo("transitionend"),Gm=new Map,Wd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function vs(e,t){Gm.set(e,t),Fs(t,[e])}for(var qo=0;qo<Wd.length;qo++){var Go=Wd[qo],_g=Go.toLowerCase(),Tg=Go[0].toUpperCase()+Go.slice(1);vs(_g,"on"+Tg)}vs(Wm,"onAnimationEnd");vs(Hm,"onAnimationIteration");vs(Vm,"onAnimationStart");vs("dblclick","onDoubleClick");vs("focusin","onFocus");vs("focusout","onBlur");vs(qm,"onTransitionEnd");ur("onMouseEnter",["mouseout","mouseover"]);ur("onMouseLeave",["mouseout","mouseover"]);ur("onPointerEnter",["pointerout","pointerover"]);ur("onPointerLeave",["pointerout","pointerover"]);Fs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $r="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lg=new Set("cancel close invalid load scroll toggle".split(" ").concat($r));function Hd(e,t,s){var r=e.type||"unknown-event";e.currentTarget=s,_f(r,t,void 0,e),e.currentTarget=null}function Ym(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var r=e[s],l=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var i=r[o],c=i.instance,d=i.currentTarget;if(i=i.listener,c!==a&&l.isPropagationStopped())break e;Hd(l,i,d),a=c}else for(o=0;o<r.length;o++){if(i=r[o],c=i.instance,d=i.currentTarget,i=i.listener,c!==a&&l.isPropagationStopped())break e;Hd(l,i,d),a=c}}}if(va)throw e=Di,va=!1,Di=null,e}function st(e,t){var s=t[Ii];s===void 0&&(s=t[Ii]=new Set);var r=e+"__bubble";s.has(r)||(Km(t,e,2,!1),s.add(r))}function Yo(e,t,s){var r=0;t&&(r|=4),Km(s,e,r,t)}var Wl="_reactListening"+Math.random().toString(36).slice(2);function al(e){if(!e[Wl]){e[Wl]=!0,nm.forEach(function(s){s!=="selectionchange"&&(Lg.has(s)||Yo(s,!1,e),Yo(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Wl]||(t[Wl]=!0,Yo("selectionchange",!1,t))}}function Km(e,t,s,r){switch(_m(t)){case 1:var l=Yf;break;case 4:l=Kf;break;default:l=wc}s=l.bind(null,t,s,e),l=void 0,!Si||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),r?l!==void 0?e.addEventListener(t,s,{capture:!0,passive:l}):e.addEventListener(t,s,!0):l!==void 0?e.addEventListener(t,s,{passive:l}):e.addEventListener(t,s,!1)}function Ko(e,t,s,r,l){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var i=r.stateNode.containerInfo;if(i===l||i.nodeType===8&&i.parentNode===l)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===l||c.nodeType===8&&c.parentNode===l))return;o=o.return}for(;i!==null;){if(o=Ss(i),o===null)return;if(c=o.tag,c===5||c===6){r=a=o;continue e}i=i.parentNode}}r=r.return}ym(function(){var d=a,h=bc(s),f=[];e:{var p=Gm.get(e);if(p!==void 0){var k=Sc,L=e;switch(e){case"keypress":if(oa(s)===0)break e;case"keydown":case"keyup":k=dg;break;case"focusin":L="focus",k=Bo;break;case"focusout":L="blur",k=Bo;break;case"beforeblur":case"afterblur":k=Bo;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=_d;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=Jf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=pg;break;case Wm:case Hm:case Vm:k=tg;break;case qm:k=fg;break;case"scroll":k=Qf;break;case"wheel":k=xg;break;case"copy":case"cut":case"paste":k=sg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=Ld}var C=(t&4)!==0,F=!C&&e==="scroll",g=C?p!==null?p+"Capture":null:p;C=[];for(var u=d,v;u!==null;){v=u;var I=v.stateNode;if(v.tag===5&&I!==null&&(v=I,g!==null&&(I=el(u,g),I!=null&&C.push(ol(u,I,v)))),F)break;u=u.return}0<C.length&&(p=new k(p,L,null,s,h),f.push({event:p,listeners:C}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",k=e==="mouseout"||e==="pointerout",p&&s!==wi&&(L=s.relatedTarget||s.fromElement)&&(Ss(L)||L[An]))break e;if((k||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,k?(L=s.relatedTarget||s.toElement,k=d,L=L?Ss(L):null,L!==null&&(F=As(L),L!==F||L.tag!==5&&L.tag!==6)&&(L=null)):(k=null,L=d),k!==L)){if(C=_d,I="onMouseLeave",g="onMouseEnter",u="mouse",(e==="pointerout"||e==="pointerover")&&(C=Ld,I="onPointerLeave",g="onPointerEnter",u="pointer"),F=k==null?p:Zs(k),v=L==null?p:Zs(L),p=new C(I,u+"leave",k,s,h),p.target=F,p.relatedTarget=v,I=null,Ss(h)===d&&(C=new C(g,u+"enter",L,s,h),C.target=v,C.relatedTarget=F,I=C),F=I,k&&L)t:{for(C=k,g=L,u=0,v=C;v;v=Ws(v))u++;for(v=0,I=g;I;I=Ws(I))v++;for(;0<u-v;)C=Ws(C),u--;for(;0<v-u;)g=Ws(g),v--;for(;u--;){if(C===g||g!==null&&C===g.alternate)break t;C=Ws(C),g=Ws(g)}C=null}else C=null;k!==null&&Vd(f,p,k,C,!1),L!==null&&F!==null&&Vd(f,F,L,C,!0)}}e:{if(p=d?Zs(d):window,k=p.nodeName&&p.nodeName.toLowerCase(),k==="select"||k==="input"&&p.type==="file")var D=wg;else if(Id(p))if(Fm)D=Eg;else{D=Sg;var A=Cg}else(k=p.nodeName)&&k.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=Dg);if(D&&(D=D(e,d))){Im(f,D,s,h);break e}A&&A(e,p,d),e==="focusout"&&(A=p._wrapperState)&&A.controlled&&p.type==="number"&&vi(p,"number",p.value)}switch(A=d?Zs(d):window,e){case"focusin":(Id(A)||A.contentEditable==="true")&&(Ks=A,zi=d,Gr=null);break;case"focusout":Gr=zi=Ks=null;break;case"mousedown":_i=!0;break;case"contextmenu":case"mouseup":case"dragend":_i=!1,Bd(f,s,h);break;case"selectionchange":if(zg)break;case"keydown":case"keyup":Bd(f,s,h)}var z;if(Ec)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ys?Om(e,s)&&(y="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(y="onCompositionStart");y&&(Lm&&s.locale!=="ko"&&(Ys||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ys&&(z=Tm()):(ss=h,Cc="value"in ss?ss.value:ss.textContent,Ys=!0)),A=wa(d,y),0<A.length&&(y=new Td(y,e,null,s,h),f.push({event:y,listeners:A}),z?y.data=z:(z=Mm(s),z!==null&&(y.data=z)))),(z=vg?bg(e,s):jg(e,s))&&(d=wa(d,"onBeforeInput"),0<d.length&&(h=new Td("onBeforeInput","beforeinput",null,s,h),f.push({event:h,listeners:d}),h.data=z))}Ym(f,t)})}function ol(e,t,s){return{instance:e,listener:t,currentTarget:s}}function wa(e,t){for(var s=t+"Capture",r=[];e!==null;){var l=e,a=l.stateNode;l.tag===5&&a!==null&&(l=a,a=el(e,s),a!=null&&r.unshift(ol(e,a,l)),a=el(e,t),a!=null&&r.push(ol(e,a,l))),e=e.return}return r}function Ws(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Vd(e,t,s,r,l){for(var a=t._reactName,o=[];s!==null&&s!==r;){var i=s,c=i.alternate,d=i.stateNode;if(c!==null&&c===r)break;i.tag===5&&d!==null&&(i=d,l?(c=el(s,a),c!=null&&o.unshift(ol(s,c,i))):l||(c=el(s,a),c!=null&&o.push(ol(s,c,i)))),s=s.return}o.length!==0&&e.push({event:t,listeners:o})}var Og=/\r\n?/g,Mg=/\u0000|\uFFFD/g;function qd(e){return(typeof e=="string"?e:""+e).replace(Og,`
`).replace(Mg,"")}function Hl(e,t,s){if(t=qd(t),qd(e)!==t&&s)throw Error(ne(425))}function Ca(){}var Ti=null,Li=null;function Oi(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Mi=typeof setTimeout=="function"?setTimeout:void 0,Ig=typeof clearTimeout=="function"?clearTimeout:void 0,Gd=typeof Promise=="function"?Promise:void 0,Fg=typeof queueMicrotask=="function"?queueMicrotask:typeof Gd<"u"?function(e){return Gd.resolve(null).then(e).catch(Ag)}:Mi;function Ag(e){setTimeout(function(){throw e})}function Qo(e,t){var s=t,r=0;do{var l=s.nextSibling;if(e.removeChild(s),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(r===0){e.removeChild(l),sl(t);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=l}while(s);sl(t)}function ds(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Yd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var br=Math.random().toString(36).slice(2),Cn="__reactFiber$"+br,il="__reactProps$"+br,An="__reactContainer$"+br,Ii="__reactEvents$"+br,$g="__reactListeners$"+br,Ug="__reactHandles$"+br;function Ss(e){var t=e[Cn];if(t)return t;for(var s=e.parentNode;s;){if(t=s[An]||s[Cn]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Yd(e);e!==null;){if(s=e[Cn])return s;e=Yd(e)}return t}e=s,s=e.parentNode}return null}function jl(e){return e=e[Cn]||e[An],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Zs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ne(33))}function to(e){return e[il]||null}var Fi=[],Js=-1;function bs(e){return{current:e}}function rt(e){0>Js||(e.current=Fi[Js],Fi[Js]=null,Js--)}function tt(e,t){Js++,Fi[Js]=e.current,e.current=t}var ys={},Ot=bs(ys),Ht=bs(!1),zs=ys;function mr(e,t){var s=e.type.contextTypes;if(!s)return ys;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var l={},a;for(a in s)l[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function Vt(e){return e=e.childContextTypes,e!=null}function Sa(){rt(Ht),rt(Ot)}function Kd(e,t,s){if(Ot.current!==ys)throw Error(ne(168));tt(Ot,t),tt(Ht,s)}function Qm(e,t,s){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var l in r)if(!(l in t))throw Error(ne(108,Cf(e)||"Unknown",l));return pt({},s,r)}function Da(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ys,zs=Ot.current,tt(Ot,e),tt(Ht,Ht.current),!0}function Qd(e,t,s){var r=e.stateNode;if(!r)throw Error(ne(169));s?(e=Qm(e,t,zs),r.__reactInternalMemoizedMergedChildContext=e,rt(Ht),rt(Ot),tt(Ot,e)):rt(Ht),tt(Ht,s)}var zn=null,no=!1,Zo=!1;function Zm(e){zn===null?zn=[e]:zn.push(e)}function Bg(e){no=!0,Zm(e)}function js(){if(!Zo&&zn!==null){Zo=!0;var e=0,t=Xe;try{var s=zn;for(Xe=1;e<s.length;e++){var r=s[e];do r=r(!0);while(r!==null)}zn=null,no=!1}catch(l){throw zn!==null&&(zn=zn.slice(e+1)),Nm(jc,js),l}finally{Xe=t,Zo=!1}}return null}var Xs=[],er=0,Ea=null,Pa=0,tn=[],nn=0,_s=null,_n=1,Tn="";function ws(e,t){Xs[er++]=Pa,Xs[er++]=Ea,Ea=e,Pa=t}function Jm(e,t,s){tn[nn++]=_n,tn[nn++]=Tn,tn[nn++]=_s,_s=e;var r=_n;e=Tn;var l=32-xn(r)-1;r&=~(1<<l),s+=1;var a=32-xn(t)+l;if(30<a){var o=l-l%5;a=(r&(1<<o)-1).toString(32),r>>=o,l-=o,_n=1<<32-xn(t)+l|s<<l|r,Tn=a+e}else _n=1<<a|s<<l|r,Tn=e}function Rc(e){e.return!==null&&(ws(e,1),Jm(e,1,0))}function zc(e){for(;e===Ea;)Ea=Xs[--er],Xs[er]=null,Pa=Xs[--er],Xs[er]=null;for(;e===_s;)_s=tn[--nn],tn[nn]=null,Tn=tn[--nn],tn[nn]=null,_n=tn[--nn],tn[nn]=null}var Kt=null,Yt=null,it=!1,fn=null;function Xm(e,t){var s=sn(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Zd(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Kt=e,Yt=ds(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Kt=e,Yt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=_s!==null?{id:_n,overflow:Tn}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=sn(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,Kt=e,Yt=null,!0):!1;default:return!1}}function Ai(e){return(e.mode&1)!==0&&(e.flags&128)===0}function $i(e){if(it){var t=Yt;if(t){var s=t;if(!Zd(e,t)){if(Ai(e))throw Error(ne(418));t=ds(s.nextSibling);var r=Kt;t&&Zd(e,t)?Xm(r,s):(e.flags=e.flags&-4097|2,it=!1,Kt=e)}}else{if(Ai(e))throw Error(ne(418));e.flags=e.flags&-4097|2,it=!1,Kt=e}}}function Jd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Kt=e}function Vl(e){if(e!==Kt)return!1;if(!it)return Jd(e),it=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Oi(e.type,e.memoizedProps)),t&&(t=Yt)){if(Ai(e))throw ep(),Error(ne(418));for(;t;)Xm(e,t),t=ds(t.nextSibling)}if(Jd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ne(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){Yt=ds(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}Yt=null}}else Yt=Kt?ds(e.stateNode.nextSibling):null;return!0}function ep(){for(var e=Yt;e;)e=ds(e.nextSibling)}function pr(){Yt=Kt=null,it=!1}function _c(e){fn===null?fn=[e]:fn.push(e)}var Wg=Vn.ReactCurrentBatchConfig;function Tr(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(ne(309));var r=s.stateNode}if(!r)throw Error(ne(147,e));var l=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var i=l.refs;o===null?delete i[a]:i[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(ne(284));if(!s._owner)throw Error(ne(290,e))}return e}function ql(e,t){throw e=Object.prototype.toString.call(t),Error(ne(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xd(e){var t=e._init;return t(e._payload)}function tp(e){function t(g,u){if(e){var v=g.deletions;v===null?(g.deletions=[u],g.flags|=16):v.push(u)}}function s(g,u){if(!e)return null;for(;u!==null;)t(g,u),u=u.sibling;return null}function r(g,u){for(g=new Map;u!==null;)u.key!==null?g.set(u.key,u):g.set(u.index,u),u=u.sibling;return g}function l(g,u){return g=hs(g,u),g.index=0,g.sibling=null,g}function a(g,u,v){return g.index=v,e?(v=g.alternate,v!==null?(v=v.index,v<u?(g.flags|=2,u):v):(g.flags|=2,u)):(g.flags|=1048576,u)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function i(g,u,v,I){return u===null||u.tag!==6?(u=ri(v,g.mode,I),u.return=g,u):(u=l(u,v),u.return=g,u)}function c(g,u,v,I){var D=v.type;return D===Gs?h(g,u,v.props.children,I,v.key):u!==null&&(u.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Xn&&Xd(D)===u.type)?(I=l(u,v.props),I.ref=Tr(g,u,v),I.return=g,I):(I=ha(v.type,v.key,v.props,null,g.mode,I),I.ref=Tr(g,u,v),I.return=g,I)}function d(g,u,v,I){return u===null||u.tag!==4||u.stateNode.containerInfo!==v.containerInfo||u.stateNode.implementation!==v.implementation?(u=li(v,g.mode,I),u.return=g,u):(u=l(u,v.children||[]),u.return=g,u)}function h(g,u,v,I,D){return u===null||u.tag!==7?(u=Rs(v,g.mode,I,D),u.return=g,u):(u=l(u,v),u.return=g,u)}function f(g,u,v){if(typeof u=="string"&&u!==""||typeof u=="number")return u=ri(""+u,g.mode,v),u.return=g,u;if(typeof u=="object"&&u!==null){switch(u.$$typeof){case Ol:return v=ha(u.type,u.key,u.props,null,g.mode,v),v.ref=Tr(g,null,u),v.return=g,v;case qs:return u=li(u,g.mode,v),u.return=g,u;case Xn:var I=u._init;return f(g,I(u._payload),v)}if(Fr(u)||Er(u))return u=Rs(u,g.mode,v,null),u.return=g,u;ql(g,u)}return null}function p(g,u,v,I){var D=u!==null?u.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return D!==null?null:i(g,u,""+v,I);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ol:return v.key===D?c(g,u,v,I):null;case qs:return v.key===D?d(g,u,v,I):null;case Xn:return D=v._init,p(g,u,D(v._payload),I)}if(Fr(v)||Er(v))return D!==null?null:h(g,u,v,I,null);ql(g,v)}return null}function k(g,u,v,I,D){if(typeof I=="string"&&I!==""||typeof I=="number")return g=g.get(v)||null,i(u,g,""+I,D);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Ol:return g=g.get(I.key===null?v:I.key)||null,c(u,g,I,D);case qs:return g=g.get(I.key===null?v:I.key)||null,d(u,g,I,D);case Xn:var A=I._init;return k(g,u,v,A(I._payload),D)}if(Fr(I)||Er(I))return g=g.get(v)||null,h(u,g,I,D,null);ql(u,I)}return null}function L(g,u,v,I){for(var D=null,A=null,z=u,y=u=0,b=null;z!==null&&y<v.length;y++){z.index>y?(b=z,z=null):b=z.sibling;var w=p(g,z,v[y],I);if(w===null){z===null&&(z=b);break}e&&z&&w.alternate===null&&t(g,z),u=a(w,u,y),A===null?D=w:A.sibling=w,A=w,z=b}if(y===v.length)return s(g,z),it&&ws(g,y),D;if(z===null){for(;y<v.length;y++)z=f(g,v[y],I),z!==null&&(u=a(z,u,y),A===null?D=z:A.sibling=z,A=z);return it&&ws(g,y),D}for(z=r(g,z);y<v.length;y++)b=k(z,g,y,v[y],I),b!==null&&(e&&b.alternate!==null&&z.delete(b.key===null?y:b.key),u=a(b,u,y),A===null?D=b:A.sibling=b,A=b);return e&&z.forEach(function(N){return t(g,N)}),it&&ws(g,y),D}function C(g,u,v,I){var D=Er(v);if(typeof D!="function")throw Error(ne(150));if(v=D.call(v),v==null)throw Error(ne(151));for(var A=D=null,z=u,y=u=0,b=null,w=v.next();z!==null&&!w.done;y++,w=v.next()){z.index>y?(b=z,z=null):b=z.sibling;var N=p(g,z,w.value,I);if(N===null){z===null&&(z=b);break}e&&z&&N.alternate===null&&t(g,z),u=a(N,u,y),A===null?D=N:A.sibling=N,A=N,z=b}if(w.done)return s(g,z),it&&ws(g,y),D;if(z===null){for(;!w.done;y++,w=v.next())w=f(g,w.value,I),w!==null&&(u=a(w,u,y),A===null?D=w:A.sibling=w,A=w);return it&&ws(g,y),D}for(z=r(g,z);!w.done;y++,w=v.next())w=k(z,g,y,w.value,I),w!==null&&(e&&w.alternate!==null&&z.delete(w.key===null?y:w.key),u=a(w,u,y),A===null?D=w:A.sibling=w,A=w);return e&&z.forEach(function(S){return t(g,S)}),it&&ws(g,y),D}function F(g,u,v,I){if(typeof v=="object"&&v!==null&&v.type===Gs&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Ol:e:{for(var D=v.key,A=u;A!==null;){if(A.key===D){if(D=v.type,D===Gs){if(A.tag===7){s(g,A.sibling),u=l(A,v.props.children),u.return=g,g=u;break e}}else if(A.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Xn&&Xd(D)===A.type){s(g,A.sibling),u=l(A,v.props),u.ref=Tr(g,A,v),u.return=g,g=u;break e}s(g,A);break}else t(g,A);A=A.sibling}v.type===Gs?(u=Rs(v.props.children,g.mode,I,v.key),u.return=g,g=u):(I=ha(v.type,v.key,v.props,null,g.mode,I),I.ref=Tr(g,u,v),I.return=g,g=I)}return o(g);case qs:e:{for(A=v.key;u!==null;){if(u.key===A)if(u.tag===4&&u.stateNode.containerInfo===v.containerInfo&&u.stateNode.implementation===v.implementation){s(g,u.sibling),u=l(u,v.children||[]),u.return=g,g=u;break e}else{s(g,u);break}else t(g,u);u=u.sibling}u=li(v,g.mode,I),u.return=g,g=u}return o(g);case Xn:return A=v._init,F(g,u,A(v._payload),I)}if(Fr(v))return L(g,u,v,I);if(Er(v))return C(g,u,v,I);ql(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,u!==null&&u.tag===6?(s(g,u.sibling),u=l(u,v),u.return=g,g=u):(s(g,u),u=ri(v,g.mode,I),u.return=g,g=u),o(g)):s(g,u)}return F}var hr=tp(!0),np=tp(!1),Ra=bs(null),za=null,tr=null,Tc=null;function Lc(){Tc=tr=za=null}function Oc(e){var t=Ra.current;rt(Ra),e._currentValue=t}function Ui(e,t,s){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===s)break;e=e.return}}function ir(e,t){za=e,Tc=tr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Wt=!0),e.firstContext=null)}function an(e){var t=e._currentValue;if(Tc!==e)if(e={context:e,memoizedValue:t,next:null},tr===null){if(za===null)throw Error(ne(308));tr=e,za.dependencies={lanes:0,firstContext:e}}else tr=tr.next=e;return t}var Ds=null;function Mc(e){Ds===null?Ds=[e]:Ds.push(e)}function sp(e,t,s,r){var l=t.interleaved;return l===null?(s.next=s,Mc(t)):(s.next=l.next,l.next=s),t.interleaved=s,$n(e,r)}function $n(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var es=!1;function Ic(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rp(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ln(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function us(e,t,s){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,We&2){var l=r.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),r.pending=t,$n(e,s)}return l=r.interleaved,l===null?(t.next=t,Mc(r)):(t.next=l.next,l.next=t),r.interleaved=t,$n(e,s)}function ia(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,Nc(e,s)}}function eu(e,t){var s=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var l=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?l=a=o:a=a.next=o,s=s.next}while(s!==null);a===null?l=a=t:a=a.next=t}else l=a=t;s={baseState:r.baseState,firstBaseUpdate:l,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function _a(e,t,s,r){var l=e.updateQueue;es=!1;var a=l.firstBaseUpdate,o=l.lastBaseUpdate,i=l.shared.pending;if(i!==null){l.shared.pending=null;var c=i,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var h=e.alternate;h!==null&&(h=h.updateQueue,i=h.lastBaseUpdate,i!==o&&(i===null?h.firstBaseUpdate=d:i.next=d,h.lastBaseUpdate=c))}if(a!==null){var f=l.baseState;o=0,h=d=c=null,i=a;do{var p=i.lane,k=i.eventTime;if((r&p)===p){h!==null&&(h=h.next={eventTime:k,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var L=e,C=i;switch(p=t,k=s,C.tag){case 1:if(L=C.payload,typeof L=="function"){f=L.call(k,f,p);break e}f=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=C.payload,p=typeof L=="function"?L.call(k,f,p):L,p==null)break e;f=pt({},f,p);break e;case 2:es=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,p=l.effects,p===null?l.effects=[i]:p.push(i))}else k={eventTime:k,lane:p,tag:i.tag,payload:i.payload,callback:i.callback,next:null},h===null?(d=h=k,c=f):h=h.next=k,o|=p;if(i=i.next,i===null){if(i=l.shared.pending,i===null)break;p=i,i=p.next,p.next=null,l.lastBaseUpdate=p,l.shared.pending=null}}while(1);if(h===null&&(c=f),l.baseState=c,l.firstBaseUpdate=d,l.lastBaseUpdate=h,t=l.shared.interleaved,t!==null){l=t;do o|=l.lane,l=l.next;while(l!==t)}else a===null&&(l.shared.lanes=0);Ls|=o,e.lanes=o,e.memoizedState=f}}function tu(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],l=r.callback;if(l!==null){if(r.callback=null,r=s,typeof l!="function")throw Error(ne(191,l));l.call(r)}}}var Nl={},En=bs(Nl),cl=bs(Nl),dl=bs(Nl);function Es(e){if(e===Nl)throw Error(ne(174));return e}function Fc(e,t){switch(tt(dl,t),tt(cl,e),tt(En,Nl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ji(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ji(t,e)}rt(En),tt(En,t)}function fr(){rt(En),rt(cl),rt(dl)}function lp(e){Es(dl.current);var t=Es(En.current),s=ji(t,e.type);t!==s&&(tt(cl,e),tt(En,s))}function Ac(e){cl.current===e&&(rt(En),rt(cl))}var dt=bs(0);function Ta(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Jo=[];function $c(){for(var e=0;e<Jo.length;e++)Jo[e]._workInProgressVersionPrimary=null;Jo.length=0}var ca=Vn.ReactCurrentDispatcher,Xo=Vn.ReactCurrentBatchConfig,Ts=0,ut=null,vt=null,Nt=null,La=!1,Yr=!1,ul=0,Hg=0;function Pt(){throw Error(ne(321))}function Uc(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!bn(e[s],t[s]))return!1;return!0}function Bc(e,t,s,r,l,a){if(Ts=a,ut=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ca.current=e===null||e.memoizedState===null?Yg:Kg,e=s(r,l),Yr){a=0;do{if(Yr=!1,ul=0,25<=a)throw Error(ne(301));a+=1,Nt=vt=null,t.updateQueue=null,ca.current=Qg,e=s(r,l)}while(Yr)}if(ca.current=Oa,t=vt!==null&&vt.next!==null,Ts=0,Nt=vt=ut=null,La=!1,t)throw Error(ne(300));return e}function Wc(){var e=ul!==0;return ul=0,e}function kn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?ut.memoizedState=Nt=e:Nt=Nt.next=e,Nt}function on(){if(vt===null){var e=ut.alternate;e=e!==null?e.memoizedState:null}else e=vt.next;var t=Nt===null?ut.memoizedState:Nt.next;if(t!==null)Nt=t,vt=e;else{if(e===null)throw Error(ne(310));vt=e,e={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Nt===null?ut.memoizedState=Nt=e:Nt=Nt.next=e}return Nt}function ml(e,t){return typeof t=="function"?t(e):t}function ei(e){var t=on(),s=t.queue;if(s===null)throw Error(ne(311));s.lastRenderedReducer=e;var r=vt,l=r.baseQueue,a=s.pending;if(a!==null){if(l!==null){var o=l.next;l.next=a.next,a.next=o}r.baseQueue=l=a,s.pending=null}if(l!==null){a=l.next,r=r.baseState;var i=o=null,c=null,d=a;do{var h=d.lane;if((Ts&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(i=c=f,o=r):c=c.next=f,ut.lanes|=h,Ls|=h}d=d.next}while(d!==null&&d!==a);c===null?o=r:c.next=i,bn(r,t.memoizedState)||(Wt=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,s.lastRenderedState=r}if(e=s.interleaved,e!==null){l=e;do a=l.lane,ut.lanes|=a,Ls|=a,l=l.next;while(l!==e)}else l===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function ti(e){var t=on(),s=t.queue;if(s===null)throw Error(ne(311));s.lastRenderedReducer=e;var r=s.dispatch,l=s.pending,a=t.memoizedState;if(l!==null){s.pending=null;var o=l=l.next;do a=e(a,o.action),o=o.next;while(o!==l);bn(a,t.memoizedState)||(Wt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),s.lastRenderedState=a}return[a,r]}function ap(){}function op(e,t){var s=ut,r=on(),l=t(),a=!bn(r.memoizedState,l);if(a&&(r.memoizedState=l,Wt=!0),r=r.queue,Hc(dp.bind(null,s,r,e),[e]),r.getSnapshot!==t||a||Nt!==null&&Nt.memoizedState.tag&1){if(s.flags|=2048,pl(9,cp.bind(null,s,r,l,t),void 0,null),wt===null)throw Error(ne(349));Ts&30||ip(s,t,l)}return l}function ip(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=ut.updateQueue,t===null?(t={lastEffect:null,stores:null},ut.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function cp(e,t,s,r){t.value=s,t.getSnapshot=r,up(t)&&mp(e)}function dp(e,t,s){return s(function(){up(t)&&mp(e)})}function up(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!bn(e,s)}catch{return!0}}function mp(e){var t=$n(e,1);t!==null&&yn(t,e,1,-1)}function nu(e){var t=kn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ml,lastRenderedState:e},t.queue=e,e=e.dispatch=Gg.bind(null,ut,e),[t.memoizedState,e]}function pl(e,t,s,r){return e={tag:e,create:t,destroy:s,deps:r,next:null},t=ut.updateQueue,t===null?(t={lastEffect:null,stores:null},ut.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,t.lastEffect=e)),e}function pp(){return on().memoizedState}function da(e,t,s,r){var l=kn();ut.flags|=e,l.memoizedState=pl(1|t,s,void 0,r===void 0?null:r)}function so(e,t,s,r){var l=on();r=r===void 0?null:r;var a=void 0;if(vt!==null){var o=vt.memoizedState;if(a=o.destroy,r!==null&&Uc(r,o.deps)){l.memoizedState=pl(t,s,a,r);return}}ut.flags|=e,l.memoizedState=pl(1|t,s,a,r)}function su(e,t){return da(8390656,8,e,t)}function Hc(e,t){return so(2048,8,e,t)}function hp(e,t){return so(4,2,e,t)}function fp(e,t){return so(4,4,e,t)}function gp(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xp(e,t,s){return s=s!=null?s.concat([e]):null,so(4,4,gp.bind(null,t,e),s)}function Vc(){}function yp(e,t){var s=on();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&Uc(t,r[1])?r[0]:(s.memoizedState=[e,t],e)}function vp(e,t){var s=on();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&Uc(t,r[1])?r[0]:(e=e(),s.memoizedState=[e,t],e)}function bp(e,t,s){return Ts&21?(bn(s,t)||(s=Cm(),ut.lanes|=s,Ls|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Wt=!0),e.memoizedState=s)}function Vg(e,t){var s=Xe;Xe=s!==0&&4>s?s:4,e(!0);var r=Xo.transition;Xo.transition={};try{e(!1),t()}finally{Xe=s,Xo.transition=r}}function jp(){return on().memoizedState}function qg(e,t,s){var r=ps(e);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},Np(e))kp(t,s);else if(s=sp(e,t,s,r),s!==null){var l=It();yn(s,e,r,l),wp(s,t,r)}}function Gg(e,t,s){var r=ps(e),l={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(Np(e))kp(t,l);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,i=a(o,s);if(l.hasEagerState=!0,l.eagerState=i,bn(i,o)){var c=t.interleaved;c===null?(l.next=l,Mc(t)):(l.next=c.next,c.next=l),t.interleaved=l;return}}catch{}finally{}s=sp(e,t,l,r),s!==null&&(l=It(),yn(s,e,r,l),wp(s,t,r))}}function Np(e){var t=e.alternate;return e===ut||t!==null&&t===ut}function kp(e,t){Yr=La=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function wp(e,t,s){if(s&4194240){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,Nc(e,s)}}var Oa={readContext:an,useCallback:Pt,useContext:Pt,useEffect:Pt,useImperativeHandle:Pt,useInsertionEffect:Pt,useLayoutEffect:Pt,useMemo:Pt,useReducer:Pt,useRef:Pt,useState:Pt,useDebugValue:Pt,useDeferredValue:Pt,useTransition:Pt,useMutableSource:Pt,useSyncExternalStore:Pt,useId:Pt,unstable_isNewReconciler:!1},Yg={readContext:an,useCallback:function(e,t){return kn().memoizedState=[e,t===void 0?null:t],e},useContext:an,useEffect:su,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,da(4194308,4,gp.bind(null,t,e),s)},useLayoutEffect:function(e,t){return da(4194308,4,e,t)},useInsertionEffect:function(e,t){return da(4,2,e,t)},useMemo:function(e,t){var s=kn();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var r=kn();return t=s!==void 0?s(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qg.bind(null,ut,e),[r.memoizedState,e]},useRef:function(e){var t=kn();return e={current:e},t.memoizedState=e},useState:nu,useDebugValue:Vc,useDeferredValue:function(e){return kn().memoizedState=e},useTransition:function(){var e=nu(!1),t=e[0];return e=Vg.bind(null,e[1]),kn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var r=ut,l=kn();if(it){if(s===void 0)throw Error(ne(407));s=s()}else{if(s=t(),wt===null)throw Error(ne(349));Ts&30||ip(r,t,s)}l.memoizedState=s;var a={value:s,getSnapshot:t};return l.queue=a,su(dp.bind(null,r,a,e),[e]),r.flags|=2048,pl(9,cp.bind(null,r,a,s,t),void 0,null),s},useId:function(){var e=kn(),t=wt.identifierPrefix;if(it){var s=Tn,r=_n;s=(r&~(1<<32-xn(r)-1)).toString(32)+s,t=":"+t+"R"+s,s=ul++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=Hg++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Kg={readContext:an,useCallback:yp,useContext:an,useEffect:Hc,useImperativeHandle:xp,useInsertionEffect:hp,useLayoutEffect:fp,useMemo:vp,useReducer:ei,useRef:pp,useState:function(){return ei(ml)},useDebugValue:Vc,useDeferredValue:function(e){var t=on();return bp(t,vt.memoizedState,e)},useTransition:function(){var e=ei(ml)[0],t=on().memoizedState;return[e,t]},useMutableSource:ap,useSyncExternalStore:op,useId:jp,unstable_isNewReconciler:!1},Qg={readContext:an,useCallback:yp,useContext:an,useEffect:Hc,useImperativeHandle:xp,useInsertionEffect:hp,useLayoutEffect:fp,useMemo:vp,useReducer:ti,useRef:pp,useState:function(){return ti(ml)},useDebugValue:Vc,useDeferredValue:function(e){var t=on();return vt===null?t.memoizedState=e:bp(t,vt.memoizedState,e)},useTransition:function(){var e=ti(ml)[0],t=on().memoizedState;return[e,t]},useMutableSource:ap,useSyncExternalStore:op,useId:jp,unstable_isNewReconciler:!1};function pn(e,t){if(e&&e.defaultProps){t=pt({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function Bi(e,t,s,r){t=e.memoizedState,s=s(r,t),s=s==null?t:pt({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var ro={isMounted:function(e){return(e=e._reactInternals)?As(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var r=It(),l=ps(e),a=Ln(r,l);a.payload=t,s!=null&&(a.callback=s),t=us(e,a,l),t!==null&&(yn(t,e,l,r),ia(t,e,l))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var r=It(),l=ps(e),a=Ln(r,l);a.tag=1,a.payload=t,s!=null&&(a.callback=s),t=us(e,a,l),t!==null&&(yn(t,e,l,r),ia(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=It(),r=ps(e),l=Ln(s,r);l.tag=2,t!=null&&(l.callback=t),t=us(e,l,r),t!==null&&(yn(t,e,r,s),ia(t,e,r))}};function ru(e,t,s,r,l,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,o):t.prototype&&t.prototype.isPureReactComponent?!ll(s,r)||!ll(l,a):!0}function Cp(e,t,s){var r=!1,l=ys,a=t.contextType;return typeof a=="object"&&a!==null?a=an(a):(l=Vt(t)?zs:Ot.current,r=t.contextTypes,a=(r=r!=null)?mr(e,l):ys),t=new t(s,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=a),t}function lu(e,t,s,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function Wi(e,t,s,r){var l=e.stateNode;l.props=s,l.state=e.memoizedState,l.refs={},Ic(e);var a=t.contextType;typeof a=="object"&&a!==null?l.context=an(a):(a=Vt(t)?zs:Ot.current,l.context=mr(e,a)),l.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Bi(e,t,a,s),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&ro.enqueueReplaceState(l,l.state,null),_a(e,s,l,r),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function gr(e,t){try{var s="",r=t;do s+=wf(r),r=r.return;while(r);var l=s}catch(a){l=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:l,digest:null}}function ni(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Hi(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var Zg=typeof WeakMap=="function"?WeakMap:Map;function Sp(e,t,s){s=Ln(-1,s),s.tag=3,s.payload={element:null};var r=t.value;return s.callback=function(){Ia||(Ia=!0,ec=r),Hi(e,t)},s}function Dp(e,t,s){s=Ln(-1,s),s.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var l=t.value;s.payload=function(){return r(l)},s.callback=function(){Hi(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){Hi(e,t),typeof r!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),s}function au(e,t,s){var r=e.pingCache;if(r===null){r=e.pingCache=new Zg;var l=new Set;r.set(t,l)}else l=r.get(t),l===void 0&&(l=new Set,r.set(t,l));l.has(s)||(l.add(s),e=ux.bind(null,e,t,s),t.then(e,e))}function ou(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function iu(e,t,s,r,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Ln(-1,1),t.tag=2,us(s,t,1))),s.lanes|=1),e)}var Jg=Vn.ReactCurrentOwner,Wt=!1;function Mt(e,t,s,r){t.child=e===null?np(t,null,s,r):hr(t,e.child,s,r)}function cu(e,t,s,r,l){s=s.render;var a=t.ref;return ir(t,l),r=Bc(e,t,s,r,a,l),s=Wc(),e!==null&&!Wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Un(e,t,l)):(it&&s&&Rc(t),t.flags|=1,Mt(e,t,r,l),t.child)}function du(e,t,s,r,l){if(e===null){var a=s.type;return typeof a=="function"&&!Xc(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=a,Ep(e,t,a,r,l)):(e=ha(s.type,null,r,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&l)){var o=a.memoizedProps;if(s=s.compare,s=s!==null?s:ll,s(o,r)&&e.ref===t.ref)return Un(e,t,l)}return t.flags|=1,e=hs(a,r),e.ref=t.ref,e.return=t,t.child=e}function Ep(e,t,s,r,l){if(e!==null){var a=e.memoizedProps;if(ll(a,r)&&e.ref===t.ref)if(Wt=!1,t.pendingProps=r=a,(e.lanes&l)!==0)e.flags&131072&&(Wt=!0);else return t.lanes=e.lanes,Un(e,t,l)}return Vi(e,t,s,r,l)}function Pp(e,t,s){var r=t.pendingProps,l=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(sr,Gt),Gt|=s;else{if(!(s&1073741824))return e=a!==null?a.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,tt(sr,Gt),Gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:s,tt(sr,Gt),Gt|=r}else a!==null?(r=a.baseLanes|s,t.memoizedState=null):r=s,tt(sr,Gt),Gt|=r;return Mt(e,t,l,s),t.child}function Rp(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Vi(e,t,s,r,l){var a=Vt(s)?zs:Ot.current;return a=mr(t,a),ir(t,l),s=Bc(e,t,s,r,a,l),r=Wc(),e!==null&&!Wt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Un(e,t,l)):(it&&r&&Rc(t),t.flags|=1,Mt(e,t,s,l),t.child)}function uu(e,t,s,r,l){if(Vt(s)){var a=!0;Da(t)}else a=!1;if(ir(t,l),t.stateNode===null)ua(e,t),Cp(t,s,r),Wi(t,s,r,l),r=!0;else if(e===null){var o=t.stateNode,i=t.memoizedProps;o.props=i;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=an(d):(d=Vt(s)?zs:Ot.current,d=mr(t,d));var h=s.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==r||c!==d)&&lu(t,o,r,d),es=!1;var p=t.memoizedState;o.state=p,_a(t,r,o,l),c=t.memoizedState,i!==r||p!==c||Ht.current||es?(typeof h=="function"&&(Bi(t,s,h,r),c=t.memoizedState),(i=es||ru(t,s,i,r,p,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=d,r=i):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,rp(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:pn(t.type,i),o.props=d,f=t.pendingProps,p=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=an(c):(c=Vt(s)?zs:Ot.current,c=mr(t,c));var k=s.getDerivedStateFromProps;(h=typeof k=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(i!==f||p!==c)&&lu(t,o,r,c),es=!1,p=t.memoizedState,o.state=p,_a(t,r,o,l);var L=t.memoizedState;i!==f||p!==L||Ht.current||es?(typeof k=="function"&&(Bi(t,s,k,r),L=t.memoizedState),(d=es||ru(t,s,d,r,p,L,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,L,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,L,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=L),o.props=r,o.state=L,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return qi(e,t,s,r,a,l)}function qi(e,t,s,r,l,a){Rp(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return l&&Qd(t,s,!1),Un(e,t,a);r=t.stateNode,Jg.current=t;var i=o&&typeof s.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=hr(t,e.child,null,a),t.child=hr(t,null,i,a)):Mt(e,t,i,a),t.memoizedState=r.state,l&&Qd(t,s,!0),t.child}function zp(e){var t=e.stateNode;t.pendingContext?Kd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Kd(e,t.context,!1),Fc(e,t.containerInfo)}function mu(e,t,s,r,l){return pr(),_c(l),t.flags|=256,Mt(e,t,s,r),t.child}var Gi={dehydrated:null,treeContext:null,retryLane:0};function Yi(e){return{baseLanes:e,cachePool:null,transitions:null}}function _p(e,t,s){var r=t.pendingProps,l=dt.current,a=!1,o=(t.flags&128)!==0,i;if((i=o)||(i=e!==null&&e.memoizedState===null?!1:(l&2)!==0),i?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),tt(dt,l&1),e===null)return $i(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,a?(r=t.mode,a=t.child,o={mode:"hidden",children:o},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=oo(o,r,0,null),e=Rs(e,r,s,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Yi(s),t.memoizedState=Gi,e):qc(t,o));if(l=e.memoizedState,l!==null&&(i=l.dehydrated,i!==null))return Xg(e,t,o,r,i,l,s);if(a){a=r.fallback,o=t.mode,l=e.child,i=l.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==l?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=hs(l,c),r.subtreeFlags=l.subtreeFlags&14680064),i!==null?a=hs(i,a):(a=Rs(a,o,s,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,o=e.child.memoizedState,o=o===null?Yi(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~s,t.memoizedState=Gi,r}return a=e.child,e=a.sibling,r=hs(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=s),r.return=t,r.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=r,t.memoizedState=null,r}function qc(e,t){return t=oo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Gl(e,t,s,r){return r!==null&&_c(r),hr(t,e.child,null,s),e=qc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xg(e,t,s,r,l,a,o){if(s)return t.flags&256?(t.flags&=-257,r=ni(Error(ne(422))),Gl(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,l=t.mode,r=oo({mode:"visible",children:r.children},l,0,null),a=Rs(a,l,o,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&hr(t,e.child,null,o),t.child.memoizedState=Yi(o),t.memoizedState=Gi,a);if(!(t.mode&1))return Gl(e,t,o,null);if(l.data==="$!"){if(r=l.nextSibling&&l.nextSibling.dataset,r)var i=r.dgst;return r=i,a=Error(ne(419)),r=ni(a,r,void 0),Gl(e,t,o,r)}if(i=(o&e.childLanes)!==0,Wt||i){if(r=wt,r!==null){switch(o&-o){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(r.suspendedLanes|o)?0:l,l!==0&&l!==a.retryLane&&(a.retryLane=l,$n(e,l),yn(r,e,l,-1))}return Jc(),r=ni(Error(ne(421))),Gl(e,t,o,r)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=mx.bind(null,e),l._reactRetry=t,null):(e=a.treeContext,Yt=ds(l.nextSibling),Kt=t,it=!0,fn=null,e!==null&&(tn[nn++]=_n,tn[nn++]=Tn,tn[nn++]=_s,_n=e.id,Tn=e.overflow,_s=t),t=qc(t,r.children),t.flags|=4096,t)}function pu(e,t,s){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ui(e.return,t,s)}function si(e,t,s,r,l){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:l}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=s,a.tailMode=l)}function Tp(e,t,s){var r=t.pendingProps,l=r.revealOrder,a=r.tail;if(Mt(e,t,r.children,s),r=dt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pu(e,s,t);else if(e.tag===19)pu(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(tt(dt,r),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(s=t.child,l=null;s!==null;)e=s.alternate,e!==null&&Ta(e)===null&&(l=s),s=s.sibling;s=l,s===null?(l=t.child,t.child=null):(l=s.sibling,s.sibling=null),si(t,!1,l,s,a);break;case"backwards":for(s=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Ta(e)===null){t.child=l;break}e=l.sibling,l.sibling=s,s=l,l=e}si(t,!0,s,null,a);break;case"together":si(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ua(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Un(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ls|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ne(153));if(t.child!==null){for(e=t.child,s=hs(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=hs(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function ex(e,t,s){switch(t.tag){case 3:zp(t),pr();break;case 5:lp(t);break;case 1:Vt(t.type)&&Da(t);break;case 4:Fc(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,l=t.memoizedProps.value;tt(Ra,r._currentValue),r._currentValue=l;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(tt(dt,dt.current&1),t.flags|=128,null):s&t.child.childLanes?_p(e,t,s):(tt(dt,dt.current&1),e=Un(e,t,s),e!==null?e.sibling:null);tt(dt,dt.current&1);break;case 19:if(r=(s&t.childLanes)!==0,e.flags&128){if(r)return Tp(e,t,s);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),tt(dt,dt.current),r)break;return null;case 22:case 23:return t.lanes=0,Pp(e,t,s)}return Un(e,t,s)}var Lp,Ki,Op,Mp;Lp=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Ki=function(){};Op=function(e,t,s,r){var l=e.memoizedProps;if(l!==r){e=t.stateNode,Es(En.current);var a=null;switch(s){case"input":l=xi(e,l),r=xi(e,r),a=[];break;case"select":l=pt({},l,{value:void 0}),r=pt({},r,{value:void 0}),a=[];break;case"textarea":l=bi(e,l),r=bi(e,r),a=[];break;default:typeof l.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ca)}Ni(s,r);var o;s=null;for(d in l)if(!r.hasOwnProperty(d)&&l.hasOwnProperty(d)&&l[d]!=null)if(d==="style"){var i=l[d];for(o in i)i.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Jr.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(i=l!=null?l[d]:void 0,r.hasOwnProperty(d)&&c!==i&&(c!=null||i!=null))if(d==="style")if(i){for(o in i)!i.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&i[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(a||(a=[]),a.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,i=i?i.__html:void 0,c!=null&&i!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Jr.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&st("scroll",e),a||i===c||(a=[])):(a=a||[]).push(d,c))}s&&(a=a||[]).push("style",s);var d=a;(t.updateQueue=d)&&(t.flags|=4)}};Mp=function(e,t,s,r){s!==r&&(t.flags|=4)};function Lr(e,t){if(!it)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Rt(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,r=0;if(t)for(var l=e.child;l!==null;)s|=l.lanes|l.childLanes,r|=l.subtreeFlags&14680064,r|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)s|=l.lanes|l.childLanes,r|=l.subtreeFlags,r|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=r,e.childLanes=s,t}function tx(e,t,s){var r=t.pendingProps;switch(zc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(t),null;case 1:return Vt(t.type)&&Sa(),Rt(t),null;case 3:return r=t.stateNode,fr(),rt(Ht),rt(Ot),$c(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Vl(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,fn!==null&&(sc(fn),fn=null))),Ki(e,t),Rt(t),null;case 5:Ac(t);var l=Es(dl.current);if(s=t.type,e!==null&&t.stateNode!=null)Op(e,t,s,r,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ne(166));return Rt(t),null}if(e=Es(En.current),Vl(t)){r=t.stateNode,s=t.type;var a=t.memoizedProps;switch(r[Cn]=t,r[il]=a,e=(t.mode&1)!==0,s){case"dialog":st("cancel",r),st("close",r);break;case"iframe":case"object":case"embed":st("load",r);break;case"video":case"audio":for(l=0;l<$r.length;l++)st($r[l],r);break;case"source":st("error",r);break;case"img":case"image":case"link":st("error",r),st("load",r);break;case"details":st("toggle",r);break;case"input":Nd(r,a),st("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},st("invalid",r);break;case"textarea":wd(r,a),st("invalid",r)}Ni(s,a),l=null;for(var o in a)if(a.hasOwnProperty(o)){var i=a[o];o==="children"?typeof i=="string"?r.textContent!==i&&(a.suppressHydrationWarning!==!0&&Hl(r.textContent,i,e),l=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(a.suppressHydrationWarning!==!0&&Hl(r.textContent,i,e),l=["children",""+i]):Jr.hasOwnProperty(o)&&i!=null&&o==="onScroll"&&st("scroll",r)}switch(s){case"input":Ml(r),kd(r,a,!0);break;case"textarea":Ml(r),Cd(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Ca)}r=l,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dm(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(s,{is:r.is}):(e=o.createElement(s),s==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,s),e[Cn]=t,e[il]=r,Lp(e,t,!1,!1),t.stateNode=e;e:{switch(o=ki(s,r),s){case"dialog":st("cancel",e),st("close",e),l=r;break;case"iframe":case"object":case"embed":st("load",e),l=r;break;case"video":case"audio":for(l=0;l<$r.length;l++)st($r[l],e);l=r;break;case"source":st("error",e),l=r;break;case"img":case"image":case"link":st("error",e),st("load",e),l=r;break;case"details":st("toggle",e),l=r;break;case"input":Nd(e,r),l=xi(e,r),st("invalid",e);break;case"option":l=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},l=pt({},r,{value:void 0}),st("invalid",e);break;case"textarea":wd(e,r),l=bi(e,r),st("invalid",e);break;default:l=r}Ni(s,l),i=l;for(a in i)if(i.hasOwnProperty(a)){var c=i[a];a==="style"?pm(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&um(e,c)):a==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Xr(e,c):typeof c=="number"&&Xr(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Jr.hasOwnProperty(a)?c!=null&&a==="onScroll"&&st("scroll",e):c!=null&&gc(e,a,c,o))}switch(s){case"input":Ml(e),kd(e,r,!1);break;case"textarea":Ml(e),Cd(e);break;case"option":r.value!=null&&e.setAttribute("value",""+xs(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?rr(e,!!r.multiple,a,!1):r.defaultValue!=null&&rr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Ca)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Rt(t),null;case 6:if(e&&t.stateNode!=null)Mp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ne(166));if(s=Es(dl.current),Es(En.current),Vl(t)){if(r=t.stateNode,s=t.memoizedProps,r[Cn]=t,(a=r.nodeValue!==s)&&(e=Kt,e!==null))switch(e.tag){case 3:Hl(r.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Hl(r.nodeValue,s,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[Cn]=t,t.stateNode=r}return Rt(t),null;case 13:if(rt(dt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(it&&Yt!==null&&t.mode&1&&!(t.flags&128))ep(),pr(),t.flags|=98560,a=!1;else if(a=Vl(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(ne(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ne(317));a[Cn]=t}else pr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Rt(t),a=!1}else fn!==null&&(sc(fn),fn=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||dt.current&1?bt===0&&(bt=3):Jc())),t.updateQueue!==null&&(t.flags|=4),Rt(t),null);case 4:return fr(),Ki(e,t),e===null&&al(t.stateNode.containerInfo),Rt(t),null;case 10:return Oc(t.type._context),Rt(t),null;case 17:return Vt(t.type)&&Sa(),Rt(t),null;case 19:if(rt(dt),a=t.memoizedState,a===null)return Rt(t),null;if(r=(t.flags&128)!==0,o=a.rendering,o===null)if(r)Lr(a,!1);else{if(bt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Ta(e),o!==null){for(t.flags|=128,Lr(a,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=s,s=t.child;s!==null;)a=s,e=r,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return tt(dt,dt.current&1|2),t.child}e=e.sibling}a.tail!==null&&gt()>xr&&(t.flags|=128,r=!0,Lr(a,!1),t.lanes=4194304)}else{if(!r)if(e=Ta(o),e!==null){if(t.flags|=128,r=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Lr(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!it)return Rt(t),null}else 2*gt()-a.renderingStartTime>xr&&s!==1073741824&&(t.flags|=128,r=!0,Lr(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(s=a.last,s!==null?s.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=gt(),t.sibling=null,s=dt.current,tt(dt,r?s&1|2:s&1),t):(Rt(t),null);case 22:case 23:return Zc(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Gt&1073741824&&(Rt(t),t.subtreeFlags&6&&(t.flags|=8192)):Rt(t),null;case 24:return null;case 25:return null}throw Error(ne(156,t.tag))}function nx(e,t){switch(zc(t),t.tag){case 1:return Vt(t.type)&&Sa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fr(),rt(Ht),rt(Ot),$c(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ac(t),null;case 13:if(rt(dt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ne(340));pr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return rt(dt),null;case 4:return fr(),null;case 10:return Oc(t.type._context),null;case 22:case 23:return Zc(),null;case 24:return null;default:return null}}var Yl=!1,Lt=!1,sx=typeof WeakSet=="function"?WeakSet:Set,me=null;function nr(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){ft(e,t,r)}else s.current=null}function Qi(e,t,s){try{s()}catch(r){ft(e,t,r)}}var hu=!1;function rx(e,t){if(Ti=Na,e=Um(),Pc(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var l=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var o=0,i=-1,c=-1,d=0,h=0,f=e,p=null;t:for(;;){for(var k;f!==s||l!==0&&f.nodeType!==3||(i=o+l),f!==a||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(k=f.firstChild)!==null;)p=f,f=k;for(;;){if(f===e)break t;if(p===s&&++d===l&&(i=o),p===a&&++h===r&&(c=o),(k=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=k}s=i===-1||c===-1?null:{start:i,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Li={focusedElem:e,selectionRange:s},Na=!1,me=t;me!==null;)if(t=me,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,me=e;else for(;me!==null;){t=me;try{var L=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var C=L.memoizedProps,F=L.memoizedState,g=t.stateNode,u=g.getSnapshotBeforeUpdate(t.elementType===t.type?C:pn(t.type,C),F);g.__reactInternalSnapshotBeforeUpdate=u}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(I){ft(t,t.return,I)}if(e=t.sibling,e!==null){e.return=t.return,me=e;break}me=t.return}return L=hu,hu=!1,L}function Kr(e,t,s){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var l=r=r.next;do{if((l.tag&e)===e){var a=l.destroy;l.destroy=void 0,a!==void 0&&Qi(t,s,a)}l=l.next}while(l!==r)}}function lo(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var r=s.create;s.destroy=r()}s=s.next}while(s!==t)}}function Zi(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function Ip(e){var t=e.alternate;t!==null&&(e.alternate=null,Ip(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Cn],delete t[il],delete t[Ii],delete t[$g],delete t[Ug])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Fp(e){return e.tag===5||e.tag===3||e.tag===4}function fu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Fp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ji(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=Ca));else if(r!==4&&(e=e.child,e!==null))for(Ji(e,t,s),e=e.sibling;e!==null;)Ji(e,t,s),e=e.sibling}function Xi(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Xi(e,t,s),e=e.sibling;e!==null;)Xi(e,t,s),e=e.sibling}var St=null,hn=!1;function Gn(e,t,s){for(s=s.child;s!==null;)Ap(e,t,s),s=s.sibling}function Ap(e,t,s){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(Za,s)}catch{}switch(s.tag){case 5:Lt||nr(s,t);case 6:var r=St,l=hn;St=null,Gn(e,t,s),St=r,hn=l,St!==null&&(hn?(e=St,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):St.removeChild(s.stateNode));break;case 18:St!==null&&(hn?(e=St,s=s.stateNode,e.nodeType===8?Qo(e.parentNode,s):e.nodeType===1&&Qo(e,s),sl(e)):Qo(St,s.stateNode));break;case 4:r=St,l=hn,St=s.stateNode.containerInfo,hn=!0,Gn(e,t,s),St=r,hn=l;break;case 0:case 11:case 14:case 15:if(!Lt&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){l=r=r.next;do{var a=l,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Qi(s,t,o),l=l.next}while(l!==r)}Gn(e,t,s);break;case 1:if(!Lt&&(nr(s,t),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(i){ft(s,t,i)}Gn(e,t,s);break;case 21:Gn(e,t,s);break;case 22:s.mode&1?(Lt=(r=Lt)||s.memoizedState!==null,Gn(e,t,s),Lt=r):Gn(e,t,s);break;default:Gn(e,t,s)}}function gu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new sx),t.forEach(function(r){var l=px.bind(null,e,r);s.has(r)||(s.add(r),r.then(l,l))})}}function mn(e,t){var s=t.deletions;if(s!==null)for(var r=0;r<s.length;r++){var l=s[r];try{var a=e,o=t,i=o;e:for(;i!==null;){switch(i.tag){case 5:St=i.stateNode,hn=!1;break e;case 3:St=i.stateNode.containerInfo,hn=!0;break e;case 4:St=i.stateNode.containerInfo,hn=!0;break e}i=i.return}if(St===null)throw Error(ne(160));Ap(a,o,l),St=null,hn=!1;var c=l.alternate;c!==null&&(c.return=null),l.return=null}catch(d){ft(l,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)$p(t,e),t=t.sibling}function $p(e,t){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(mn(t,e),Nn(e),r&4){try{Kr(3,e,e.return),lo(3,e)}catch(C){ft(e,e.return,C)}try{Kr(5,e,e.return)}catch(C){ft(e,e.return,C)}}break;case 1:mn(t,e),Nn(e),r&512&&s!==null&&nr(s,s.return);break;case 5:if(mn(t,e),Nn(e),r&512&&s!==null&&nr(s,s.return),e.flags&32){var l=e.stateNode;try{Xr(l,"")}catch(C){ft(e,e.return,C)}}if(r&4&&(l=e.stateNode,l!=null)){var a=e.memoizedProps,o=s!==null?s.memoizedProps:a,i=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{i==="input"&&a.type==="radio"&&a.name!=null&&im(l,a),ki(i,o);var d=ki(i,a);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?pm(l,f):h==="dangerouslySetInnerHTML"?um(l,f):h==="children"?Xr(l,f):gc(l,h,f,d)}switch(i){case"input":yi(l,a);break;case"textarea":cm(l,a);break;case"select":var p=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!a.multiple;var k=a.value;k!=null?rr(l,!!a.multiple,k,!1):p!==!!a.multiple&&(a.defaultValue!=null?rr(l,!!a.multiple,a.defaultValue,!0):rr(l,!!a.multiple,a.multiple?[]:"",!1))}l[il]=a}catch(C){ft(e,e.return,C)}}break;case 6:if(mn(t,e),Nn(e),r&4){if(e.stateNode===null)throw Error(ne(162));l=e.stateNode,a=e.memoizedProps;try{l.nodeValue=a}catch(C){ft(e,e.return,C)}}break;case 3:if(mn(t,e),Nn(e),r&4&&s!==null&&s.memoizedState.isDehydrated)try{sl(t.containerInfo)}catch(C){ft(e,e.return,C)}break;case 4:mn(t,e),Nn(e);break;case 13:mn(t,e),Nn(e),l=e.child,l.flags&8192&&(a=l.memoizedState!==null,l.stateNode.isHidden=a,!a||l.alternate!==null&&l.alternate.memoizedState!==null||(Kc=gt())),r&4&&gu(e);break;case 22:if(h=s!==null&&s.memoizedState!==null,e.mode&1?(Lt=(d=Lt)||h,mn(t,e),Lt=d):mn(t,e),Nn(e),r&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!h&&e.mode&1)for(me=e,h=e.child;h!==null;){for(f=me=h;me!==null;){switch(p=me,k=p.child,p.tag){case 0:case 11:case 14:case 15:Kr(4,p,p.return);break;case 1:nr(p,p.return);var L=p.stateNode;if(typeof L.componentWillUnmount=="function"){r=p,s=p.return;try{t=r,L.props=t.memoizedProps,L.state=t.memoizedState,L.componentWillUnmount()}catch(C){ft(r,s,C)}}break;case 5:nr(p,p.return);break;case 22:if(p.memoizedState!==null){yu(f);continue}}k!==null?(k.return=p,me=k):yu(f)}h=h.sibling}e:for(h=null,f=e;;){if(f.tag===5){if(h===null){h=f;try{l=f.stateNode,d?(a=l.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(i=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,i.style.display=mm("display",o))}catch(C){ft(e,e.return,C)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(C){ft(e,e.return,C)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:mn(t,e),Nn(e),r&4&&gu(e);break;case 21:break;default:mn(t,e),Nn(e)}}function Nn(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(Fp(s)){var r=s;break e}s=s.return}throw Error(ne(160))}switch(r.tag){case 5:var l=r.stateNode;r.flags&32&&(Xr(l,""),r.flags&=-33);var a=fu(e);Xi(e,a,l);break;case 3:case 4:var o=r.stateNode.containerInfo,i=fu(e);Ji(e,i,o);break;default:throw Error(ne(161))}}catch(c){ft(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function lx(e,t,s){me=e,Up(e)}function Up(e,t,s){for(var r=(e.mode&1)!==0;me!==null;){var l=me,a=l.child;if(l.tag===22&&r){var o=l.memoizedState!==null||Yl;if(!o){var i=l.alternate,c=i!==null&&i.memoizedState!==null||Lt;i=Yl;var d=Lt;if(Yl=o,(Lt=c)&&!d)for(me=l;me!==null;)o=me,c=o.child,o.tag===22&&o.memoizedState!==null?vu(l):c!==null?(c.return=o,me=c):vu(l);for(;a!==null;)me=a,Up(a),a=a.sibling;me=l,Yl=i,Lt=d}xu(e)}else l.subtreeFlags&8772&&a!==null?(a.return=l,me=a):xu(e)}}function xu(e){for(;me!==null;){var t=me;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Lt||lo(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Lt)if(s===null)r.componentDidMount();else{var l=t.elementType===t.type?s.memoizedProps:pn(t.type,s.memoizedProps);r.componentDidUpdate(l,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&tu(t,a,r);break;case 3:var o=t.updateQueue;if(o!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}tu(t,o,s)}break;case 5:var i=t.stateNode;if(s===null&&t.flags&4){s=i;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&sl(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}Lt||t.flags&512&&Zi(t)}catch(p){ft(t,t.return,p)}}if(t===e){me=null;break}if(s=t.sibling,s!==null){s.return=t.return,me=s;break}me=t.return}}function yu(e){for(;me!==null;){var t=me;if(t===e){me=null;break}var s=t.sibling;if(s!==null){s.return=t.return,me=s;break}me=t.return}}function vu(e){for(;me!==null;){var t=me;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{lo(4,t)}catch(c){ft(t,s,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var l=t.return;try{r.componentDidMount()}catch(c){ft(t,l,c)}}var a=t.return;try{Zi(t)}catch(c){ft(t,a,c)}break;case 5:var o=t.return;try{Zi(t)}catch(c){ft(t,o,c)}}}catch(c){ft(t,t.return,c)}if(t===e){me=null;break}var i=t.sibling;if(i!==null){i.return=t.return,me=i;break}me=t.return}}var ax=Math.ceil,Ma=Vn.ReactCurrentDispatcher,Gc=Vn.ReactCurrentOwner,ln=Vn.ReactCurrentBatchConfig,We=0,wt=null,yt=null,Dt=0,Gt=0,sr=bs(0),bt=0,hl=null,Ls=0,ao=0,Yc=0,Qr=null,Bt=null,Kc=0,xr=1/0,Rn=null,Ia=!1,ec=null,ms=null,Kl=!1,rs=null,Fa=0,Zr=0,tc=null,ma=-1,pa=0;function It(){return We&6?gt():ma!==-1?ma:ma=gt()}function ps(e){return e.mode&1?We&2&&Dt!==0?Dt&-Dt:Wg.transition!==null?(pa===0&&(pa=Cm()),pa):(e=Xe,e!==0||(e=window.event,e=e===void 0?16:_m(e.type)),e):1}function yn(e,t,s,r){if(50<Zr)throw Zr=0,tc=null,Error(ne(185));vl(e,s,r),(!(We&2)||e!==wt)&&(e===wt&&(!(We&2)&&(ao|=s),bt===4&&ns(e,Dt)),qt(e,r),s===1&&We===0&&!(t.mode&1)&&(xr=gt()+500,no&&js()))}function qt(e,t){var s=e.callbackNode;Wf(e,t);var r=ja(e,e===wt?Dt:0);if(r===0)s!==null&&Ed(s),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(s!=null&&Ed(s),t===1)e.tag===0?Bg(bu.bind(null,e)):Zm(bu.bind(null,e)),Fg(function(){!(We&6)&&js()}),s=null;else{switch(Sm(r)){case 1:s=jc;break;case 4:s=km;break;case 16:s=ba;break;case 536870912:s=wm;break;default:s=ba}s=Kp(s,Bp.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Bp(e,t){if(ma=-1,pa=0,We&6)throw Error(ne(327));var s=e.callbackNode;if(cr()&&e.callbackNode!==s)return null;var r=ja(e,e===wt?Dt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Aa(e,r);else{t=r;var l=We;We|=2;var a=Hp();(wt!==e||Dt!==t)&&(Rn=null,xr=gt()+500,Ps(e,t));do try{cx();break}catch(i){Wp(e,i)}while(1);Lc(),Ma.current=a,We=l,yt!==null?t=0:(wt=null,Dt=0,t=bt)}if(t!==0){if(t===2&&(l=Ei(e),l!==0&&(r=l,t=nc(e,l))),t===1)throw s=hl,Ps(e,0),ns(e,r),qt(e,gt()),s;if(t===6)ns(e,r);else{if(l=e.current.alternate,!(r&30)&&!ox(l)&&(t=Aa(e,r),t===2&&(a=Ei(e),a!==0&&(r=a,t=nc(e,a))),t===1))throw s=hl,Ps(e,0),ns(e,r),qt(e,gt()),s;switch(e.finishedWork=l,e.finishedLanes=r,t){case 0:case 1:throw Error(ne(345));case 2:Cs(e,Bt,Rn);break;case 3:if(ns(e,r),(r&130023424)===r&&(t=Kc+500-gt(),10<t)){if(ja(e,0)!==0)break;if(l=e.suspendedLanes,(l&r)!==r){It(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Mi(Cs.bind(null,e,Bt,Rn),t);break}Cs(e,Bt,Rn);break;case 4:if(ns(e,r),(r&4194240)===r)break;for(t=e.eventTimes,l=-1;0<r;){var o=31-xn(r);a=1<<o,o=t[o],o>l&&(l=o),r&=~a}if(r=l,r=gt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ax(r/1960))-r,10<r){e.timeoutHandle=Mi(Cs.bind(null,e,Bt,Rn),r);break}Cs(e,Bt,Rn);break;case 5:Cs(e,Bt,Rn);break;default:throw Error(ne(329))}}}return qt(e,gt()),e.callbackNode===s?Bp.bind(null,e):null}function nc(e,t){var s=Qr;return e.current.memoizedState.isDehydrated&&(Ps(e,t).flags|=256),e=Aa(e,t),e!==2&&(t=Bt,Bt=s,t!==null&&sc(t)),e}function sc(e){Bt===null?Bt=e:Bt.push.apply(Bt,e)}function ox(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var l=s[r],a=l.getSnapshot;l=l.value;try{if(!bn(a(),l))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ns(e,t){for(t&=~Yc,t&=~ao,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-xn(t),r=1<<s;e[s]=-1,t&=~r}}function bu(e){if(We&6)throw Error(ne(327));cr();var t=ja(e,0);if(!(t&1))return qt(e,gt()),null;var s=Aa(e,t);if(e.tag!==0&&s===2){var r=Ei(e);r!==0&&(t=r,s=nc(e,r))}if(s===1)throw s=hl,Ps(e,0),ns(e,t),qt(e,gt()),s;if(s===6)throw Error(ne(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Cs(e,Bt,Rn),qt(e,gt()),null}function Qc(e,t){var s=We;We|=1;try{return e(t)}finally{We=s,We===0&&(xr=gt()+500,no&&js())}}function Os(e){rs!==null&&rs.tag===0&&!(We&6)&&cr();var t=We;We|=1;var s=ln.transition,r=Xe;try{if(ln.transition=null,Xe=1,e)return e()}finally{Xe=r,ln.transition=s,We=t,!(We&6)&&js()}}function Zc(){Gt=sr.current,rt(sr)}function Ps(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Ig(s)),yt!==null)for(s=yt.return;s!==null;){var r=s;switch(zc(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Sa();break;case 3:fr(),rt(Ht),rt(Ot),$c();break;case 5:Ac(r);break;case 4:fr();break;case 13:rt(dt);break;case 19:rt(dt);break;case 10:Oc(r.type._context);break;case 22:case 23:Zc()}s=s.return}if(wt=e,yt=e=hs(e.current,null),Dt=Gt=t,bt=0,hl=null,Yc=ao=Ls=0,Bt=Qr=null,Ds!==null){for(t=0;t<Ds.length;t++)if(s=Ds[t],r=s.interleaved,r!==null){s.interleaved=null;var l=r.next,a=s.pending;if(a!==null){var o=a.next;a.next=l,r.next=o}s.pending=r}Ds=null}return e}function Wp(e,t){do{var s=yt;try{if(Lc(),ca.current=Oa,La){for(var r=ut.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}La=!1}if(Ts=0,Nt=vt=ut=null,Yr=!1,ul=0,Gc.current=null,s===null||s.return===null){bt=1,hl=t,yt=null;break}e:{var a=e,o=s.return,i=s,c=t;if(t=Dt,i.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=i,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var k=ou(o);if(k!==null){k.flags&=-257,iu(k,o,i,a,t),k.mode&1&&au(a,d,t),t=k,c=d;var L=t.updateQueue;if(L===null){var C=new Set;C.add(c),t.updateQueue=C}else L.add(c);break e}else{if(!(t&1)){au(a,d,t),Jc();break e}c=Error(ne(426))}}else if(it&&i.mode&1){var F=ou(o);if(F!==null){!(F.flags&65536)&&(F.flags|=256),iu(F,o,i,a,t),_c(gr(c,i));break e}}a=c=gr(c,i),bt!==4&&(bt=2),Qr===null?Qr=[a]:Qr.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var g=Sp(a,c,t);eu(a,g);break e;case 1:i=c;var u=a.type,v=a.stateNode;if(!(a.flags&128)&&(typeof u.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ms===null||!ms.has(v)))){a.flags|=65536,t&=-t,a.lanes|=t;var I=Dp(a,i,t);eu(a,I);break e}}a=a.return}while(a!==null)}qp(s)}catch(D){t=D,yt===s&&s!==null&&(yt=s=s.return);continue}break}while(1)}function Hp(){var e=Ma.current;return Ma.current=Oa,e===null?Oa:e}function Jc(){(bt===0||bt===3||bt===2)&&(bt=4),wt===null||!(Ls&268435455)&&!(ao&268435455)||ns(wt,Dt)}function Aa(e,t){var s=We;We|=2;var r=Hp();(wt!==e||Dt!==t)&&(Rn=null,Ps(e,t));do try{ix();break}catch(l){Wp(e,l)}while(1);if(Lc(),We=s,Ma.current=r,yt!==null)throw Error(ne(261));return wt=null,Dt=0,bt}function ix(){for(;yt!==null;)Vp(yt)}function cx(){for(;yt!==null&&!Lf();)Vp(yt)}function Vp(e){var t=Yp(e.alternate,e,Gt);e.memoizedProps=e.pendingProps,t===null?qp(e):yt=t,Gc.current=null}function qp(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=nx(s,t),s!==null){s.flags&=32767,yt=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{bt=6,yt=null;return}}else if(s=tx(s,t,Gt),s!==null){yt=s;return}if(t=t.sibling,t!==null){yt=t;return}yt=t=e}while(t!==null);bt===0&&(bt=5)}function Cs(e,t,s){var r=Xe,l=ln.transition;try{ln.transition=null,Xe=1,dx(e,t,s,r)}finally{ln.transition=l,Xe=r}return null}function dx(e,t,s,r){do cr();while(rs!==null);if(We&6)throw Error(ne(327));s=e.finishedWork;var l=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(ne(177));e.callbackNode=null,e.callbackPriority=0;var a=s.lanes|s.childLanes;if(Hf(e,a),e===wt&&(yt=wt=null,Dt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Kl||(Kl=!0,Kp(ba,function(){return cr(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=ln.transition,ln.transition=null;var o=Xe;Xe=1;var i=We;We|=4,Gc.current=null,rx(e,s),$p(s,e),Rg(Li),Na=!!Ti,Li=Ti=null,e.current=s,lx(s),Of(),We=i,Xe=o,ln.transition=a}else e.current=s;if(Kl&&(Kl=!1,rs=e,Fa=l),a=e.pendingLanes,a===0&&(ms=null),Ff(s.stateNode),qt(e,gt()),t!==null)for(r=e.onRecoverableError,s=0;s<t.length;s++)l=t[s],r(l.value,{componentStack:l.stack,digest:l.digest});if(Ia)throw Ia=!1,e=ec,ec=null,e;return Fa&1&&e.tag!==0&&cr(),a=e.pendingLanes,a&1?e===tc?Zr++:(Zr=0,tc=e):Zr=0,js(),null}function cr(){if(rs!==null){var e=Sm(Fa),t=ln.transition,s=Xe;try{if(ln.transition=null,Xe=16>e?16:e,rs===null)var r=!1;else{if(e=rs,rs=null,Fa=0,We&6)throw Error(ne(331));var l=We;for(We|=4,me=e.current;me!==null;){var a=me,o=a.child;if(me.flags&16){var i=a.deletions;if(i!==null){for(var c=0;c<i.length;c++){var d=i[c];for(me=d;me!==null;){var h=me;switch(h.tag){case 0:case 11:case 15:Kr(8,h,a)}var f=h.child;if(f!==null)f.return=h,me=f;else for(;me!==null;){h=me;var p=h.sibling,k=h.return;if(Ip(h),h===d){me=null;break}if(p!==null){p.return=k,me=p;break}me=k}}}var L=a.alternate;if(L!==null){var C=L.child;if(C!==null){L.child=null;do{var F=C.sibling;C.sibling=null,C=F}while(C!==null)}}me=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,me=o;else e:for(;me!==null;){if(a=me,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Kr(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,me=g;break e}me=a.return}}var u=e.current;for(me=u;me!==null;){o=me;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,me=v;else e:for(o=u;me!==null;){if(i=me,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:lo(9,i)}}catch(D){ft(i,i.return,D)}if(i===o){me=null;break e}var I=i.sibling;if(I!==null){I.return=i.return,me=I;break e}me=i.return}}if(We=l,js(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(Za,e)}catch{}r=!0}return r}finally{Xe=s,ln.transition=t}}return!1}function ju(e,t,s){t=gr(s,t),t=Sp(e,t,1),e=us(e,t,1),t=It(),e!==null&&(vl(e,1,t),qt(e,t))}function ft(e,t,s){if(e.tag===3)ju(e,e,s);else for(;t!==null;){if(t.tag===3){ju(t,e,s);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ms===null||!ms.has(r))){e=gr(s,e),e=Dp(t,e,1),t=us(t,e,1),e=It(),t!==null&&(vl(t,1,e),qt(t,e));break}}t=t.return}}function ux(e,t,s){var r=e.pingCache;r!==null&&r.delete(t),t=It(),e.pingedLanes|=e.suspendedLanes&s,wt===e&&(Dt&s)===s&&(bt===4||bt===3&&(Dt&130023424)===Dt&&500>gt()-Kc?Ps(e,0):Yc|=s),qt(e,t)}function Gp(e,t){t===0&&(e.mode&1?(t=Al,Al<<=1,!(Al&130023424)&&(Al=4194304)):t=1);var s=It();e=$n(e,t),e!==null&&(vl(e,t,s),qt(e,s))}function mx(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Gp(e,s)}function px(e,t){var s=0;switch(e.tag){case 13:var r=e.stateNode,l=e.memoizedState;l!==null&&(s=l.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ne(314))}r!==null&&r.delete(t),Gp(e,s)}var Yp;Yp=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ht.current)Wt=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Wt=!1,ex(e,t,s);Wt=!!(e.flags&131072)}else Wt=!1,it&&t.flags&1048576&&Jm(t,Pa,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ua(e,t),e=t.pendingProps;var l=mr(t,Ot.current);ir(t,s),l=Bc(null,t,r,e,l,s);var a=Wc();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Vt(r)?(a=!0,Da(t)):a=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Ic(t),l.updater=ro,t.stateNode=l,l._reactInternals=t,Wi(t,r,e,s),t=qi(null,t,r,!0,a,s)):(t.tag=0,it&&a&&Rc(t),Mt(null,t,l,s),t=t.child),t;case 16:r=t.elementType;e:{switch(ua(e,t),e=t.pendingProps,l=r._init,r=l(r._payload),t.type=r,l=t.tag=fx(r),e=pn(r,e),l){case 0:t=Vi(null,t,r,e,s);break e;case 1:t=uu(null,t,r,e,s);break e;case 11:t=cu(null,t,r,e,s);break e;case 14:t=du(null,t,r,pn(r.type,e),s);break e}throw Error(ne(306,r,""))}return t;case 0:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:pn(r,l),Vi(e,t,r,l,s);case 1:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:pn(r,l),uu(e,t,r,l,s);case 3:e:{if(zp(t),e===null)throw Error(ne(387));r=t.pendingProps,a=t.memoizedState,l=a.element,rp(e,t),_a(t,r,null,s);var o=t.memoizedState;if(r=o.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){l=gr(Error(ne(423)),t),t=mu(e,t,r,s,l);break e}else if(r!==l){l=gr(Error(ne(424)),t),t=mu(e,t,r,s,l);break e}else for(Yt=ds(t.stateNode.containerInfo.firstChild),Kt=t,it=!0,fn=null,s=np(t,null,r,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(pr(),r===l){t=Un(e,t,s);break e}Mt(e,t,r,s)}t=t.child}return t;case 5:return lp(t),e===null&&$i(t),r=t.type,l=t.pendingProps,a=e!==null?e.memoizedProps:null,o=l.children,Oi(r,l)?o=null:a!==null&&Oi(r,a)&&(t.flags|=32),Rp(e,t),Mt(e,t,o,s),t.child;case 6:return e===null&&$i(t),null;case 13:return _p(e,t,s);case 4:return Fc(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=hr(t,null,r,s):Mt(e,t,r,s),t.child;case 11:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:pn(r,l),cu(e,t,r,l,s);case 7:return Mt(e,t,t.pendingProps,s),t.child;case 8:return Mt(e,t,t.pendingProps.children,s),t.child;case 12:return Mt(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(r=t.type._context,l=t.pendingProps,a=t.memoizedProps,o=l.value,tt(Ra,r._currentValue),r._currentValue=o,a!==null)if(bn(a.value,o)){if(a.children===l.children&&!Ht.current){t=Un(e,t,s);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var i=a.dependencies;if(i!==null){o=a.child;for(var c=i.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Ln(-1,s&-s),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}a.lanes|=s,c=a.alternate,c!==null&&(c.lanes|=s),Ui(a.return,s,t),i.lanes|=s;break}c=c.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ne(341));o.lanes|=s,i=o.alternate,i!==null&&(i.lanes|=s),Ui(o,s,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Mt(e,t,l.children,s),t=t.child}return t;case 9:return l=t.type,r=t.pendingProps.children,ir(t,s),l=an(l),r=r(l),t.flags|=1,Mt(e,t,r,s),t.child;case 14:return r=t.type,l=pn(r,t.pendingProps),l=pn(r.type,l),du(e,t,r,l,s);case 15:return Ep(e,t,t.type,t.pendingProps,s);case 17:return r=t.type,l=t.pendingProps,l=t.elementType===r?l:pn(r,l),ua(e,t),t.tag=1,Vt(r)?(e=!0,Da(t)):e=!1,ir(t,s),Cp(t,r,l),Wi(t,r,l,s),qi(null,t,r,!0,e,s);case 19:return Tp(e,t,s);case 22:return Pp(e,t,s)}throw Error(ne(156,t.tag))};function Kp(e,t){return Nm(e,t)}function hx(e,t,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(e,t,s,r){return new hx(e,t,s,r)}function Xc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fx(e){if(typeof e=="function")return Xc(e)?1:0;if(e!=null){if(e=e.$$typeof,e===yc)return 11;if(e===vc)return 14}return 2}function hs(e,t){var s=e.alternate;return s===null?(s=sn(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function ha(e,t,s,r,l,a){var o=2;if(r=e,typeof e=="function")Xc(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Gs:return Rs(s.children,l,a,t);case xc:o=8,l|=8;break;case pi:return e=sn(12,s,t,l|2),e.elementType=pi,e.lanes=a,e;case hi:return e=sn(13,s,t,l),e.elementType=hi,e.lanes=a,e;case fi:return e=sn(19,s,t,l),e.elementType=fi,e.lanes=a,e;case lm:return oo(s,l,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case sm:o=10;break e;case rm:o=9;break e;case yc:o=11;break e;case vc:o=14;break e;case Xn:o=16,r=null;break e}throw Error(ne(130,e==null?e:typeof e,""))}return t=sn(o,s,t,l),t.elementType=e,t.type=r,t.lanes=a,t}function Rs(e,t,s,r){return e=sn(7,e,r,t),e.lanes=s,e}function oo(e,t,s,r){return e=sn(22,e,r,t),e.elementType=lm,e.lanes=s,e.stateNode={isHidden:!1},e}function ri(e,t,s){return e=sn(6,e,null,t),e.lanes=s,e}function li(e,t,s){return t=sn(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gx(e,t,s,r,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ao(0),this.expirationTimes=Ao(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ao(0),this.identifierPrefix=r,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function ed(e,t,s,r,l,a,o,i,c){return e=new gx(e,t,s,i,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=sn(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ic(a),e}function xx(e,t,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qs,key:r==null?null:""+r,children:e,containerInfo:t,implementation:s}}function Qp(e){if(!e)return ys;e=e._reactInternals;e:{if(As(e)!==e||e.tag!==1)throw Error(ne(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Vt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ne(171))}if(e.tag===1){var s=e.type;if(Vt(s))return Qm(e,s,t)}return t}function Zp(e,t,s,r,l,a,o,i,c){return e=ed(s,r,!0,e,l,a,o,i,c),e.context=Qp(null),s=e.current,r=It(),l=ps(s),a=Ln(r,l),a.callback=t??null,us(s,a,l),e.current.lanes=l,vl(e,l,r),qt(e,r),e}function io(e,t,s,r){var l=t.current,a=It(),o=ps(l);return s=Qp(s),t.context===null?t.context=s:t.pendingContext=s,t=Ln(a,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=us(l,t,o),e!==null&&(yn(e,l,o,a),ia(e,l,o)),o}function $a(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Nu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function td(e,t){Nu(e,t),(e=e.alternate)&&Nu(e,t)}function yx(){return null}var Jp=typeof reportError=="function"?reportError:function(e){console.error(e)};function nd(e){this._internalRoot=e}co.prototype.render=nd.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ne(409));io(e,t,null,null)};co.prototype.unmount=nd.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Os(function(){io(null,e,null,null)}),t[An]=null}};function co(e){this._internalRoot=e}co.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pm();e={blockedOn:null,target:e,priority:t};for(var s=0;s<ts.length&&t!==0&&t<ts[s].priority;s++);ts.splice(s,0,e),s===0&&zm(e)}};function sd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function uo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function ku(){}function vx(e,t,s,r,l){if(l){if(typeof r=="function"){var a=r;r=function(){var d=$a(o);a.call(d)}}var o=Zp(t,r,e,0,null,!1,!1,"",ku);return e._reactRootContainer=o,e[An]=o.current,al(e.nodeType===8?e.parentNode:e),Os(),o}for(;l=e.lastChild;)e.removeChild(l);if(typeof r=="function"){var i=r;r=function(){var d=$a(c);i.call(d)}}var c=ed(e,0,!1,null,null,!1,!1,"",ku);return e._reactRootContainer=c,e[An]=c.current,al(e.nodeType===8?e.parentNode:e),Os(function(){io(t,c,s,r)}),c}function mo(e,t,s,r,l){var a=s._reactRootContainer;if(a){var o=a;if(typeof l=="function"){var i=l;l=function(){var c=$a(o);i.call(c)}}io(t,o,e,l)}else o=vx(s,t,e,l,r);return $a(o)}Dm=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Ar(t.pendingLanes);s!==0&&(Nc(t,s|1),qt(t,gt()),!(We&6)&&(xr=gt()+500,js()))}break;case 13:Os(function(){var r=$n(e,1);if(r!==null){var l=It();yn(r,e,1,l)}}),td(e,1)}};kc=function(e){if(e.tag===13){var t=$n(e,134217728);if(t!==null){var s=It();yn(t,e,134217728,s)}td(e,134217728)}};Em=function(e){if(e.tag===13){var t=ps(e),s=$n(e,t);if(s!==null){var r=It();yn(s,e,t,r)}td(e,t)}};Pm=function(){return Xe};Rm=function(e,t){var s=Xe;try{return Xe=e,t()}finally{Xe=s}};Ci=function(e,t,s){switch(t){case"input":if(yi(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==e&&r.form===e.form){var l=to(r);if(!l)throw Error(ne(90));om(r),yi(r,l)}}}break;case"textarea":cm(e,s);break;case"select":t=s.value,t!=null&&rr(e,!!s.multiple,t,!1)}};gm=Qc;xm=Os;var bx={usingClientEntryPoint:!1,Events:[jl,Zs,to,hm,fm,Qc]},Or={findFiberByHostInstance:Ss,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jx={bundleType:Or.bundleType,version:Or.version,rendererPackageName:Or.rendererPackageName,rendererConfig:Or.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=bm(e),e===null?null:e.stateNode},findFiberByHostInstance:Or.findFiberByHostInstance||yx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ql.isDisabled&&Ql.supportsFiber)try{Za=Ql.inject(jx),Dn=Ql}catch{}}Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bx;Jt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sd(t))throw Error(ne(200));return xx(e,t,null,s)};Jt.createRoot=function(e,t){if(!sd(e))throw Error(ne(299));var s=!1,r="",l=Jp;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=ed(e,1,!1,null,null,s,!1,r,l),e[An]=t.current,al(e.nodeType===8?e.parentNode:e),new nd(t)};Jt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ne(188)):(e=Object.keys(e).join(","),Error(ne(268,e)));return e=bm(t),e=e===null?null:e.stateNode,e};Jt.flushSync=function(e){return Os(e)};Jt.hydrate=function(e,t,s){if(!uo(t))throw Error(ne(200));return mo(null,e,t,!0,s)};Jt.hydrateRoot=function(e,t,s){if(!sd(e))throw Error(ne(405));var r=s!=null&&s.hydratedSources||null,l=!1,a="",o=Jp;if(s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),t=Zp(t,null,e,1,s??null,l,!1,a,o),e[An]=t.current,al(e),r)for(e=0;e<r.length;e++)s=r[e],l=s._getVersion,l=l(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,l]:t.mutableSourceEagerHydrationData.push(s,l);return new co(t)};Jt.render=function(e,t,s){if(!uo(t))throw Error(ne(200));return mo(null,e,t,!1,s)};Jt.unmountComponentAtNode=function(e){if(!uo(e))throw Error(ne(40));return e._reactRootContainer?(Os(function(){mo(null,null,e,!1,function(){e._reactRootContainer=null,e[An]=null})}),!0):!1};Jt.unstable_batchedUpdates=Qc;Jt.unstable_renderSubtreeIntoContainer=function(e,t,s,r){if(!uo(s))throw Error(ne(200));if(e==null||e._reactInternals===void 0)throw Error(ne(38));return mo(e,t,s,!1,r)};Jt.version="18.3.1-next-f1338f8080-20240426";function Xp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xp)}catch(e){console.error(e)}}Xp(),Xu.exports=Jt;var Nx=Xu.exports,wu=Nx;ui.createRoot=wu.createRoot,ui.hydrateRoot=wu.hydrateRoot;const kx="modulepreload",wx=function(e){return"/"+e},Cu={},Cx=function(t,s,r){if(!s||s.length===0)return t();const l=document.getElementsByTagName("link");return Promise.all(s.map(a=>{if(a=wx(a),a in Cu)return;Cu[a]=!0;const o=a.endsWith(".css"),i=o?'[rel="stylesheet"]':"";if(!!r)for(let h=l.length-1;h>=0;h--){const f=l[h];if(f.href===a&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${i}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":kx,o||(d.as="script",d.crossOrigin=""),d.href=a,document.head.appendChild(d),o)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};var Su="popstate";function Sx(e={}){function t(r,l){let{pathname:a,search:o,hash:i}=r.location;return rc("",{pathname:a,search:o,hash:i},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function s(r,l){return typeof l=="string"?l:fl(l)}return Ex(t,s,null,e)}function mt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function jn(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Dx(){return Math.random().toString(36).substring(2,10)}function Du(e,t){return{usr:e.state,key:e.key,idx:t}}function rc(e,t,s=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?jr(t):t,state:s,key:t&&t.key||r||Dx()}}function fl({pathname:e="/",search:t="",hash:s=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function jr(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substring(s),e=e.substring(0,s));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Ex(e,t,s,r={}){let{window:l=document.defaultView,v5Compat:a=!1}=r,o=l.history,i="POP",c=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function f(){i="POP";let F=h(),g=F==null?null:F-d;d=F,c&&c({action:i,location:C.location,delta:g})}function p(F,g){i="PUSH";let u=rc(C.location,F,g);s&&s(u,F),d=h()+1;let v=Du(u,d),I=C.createHref(u);try{o.pushState(v,"",I)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;l.location.assign(I)}a&&c&&c({action:i,location:C.location,delta:1})}function k(F,g){i="REPLACE";let u=rc(C.location,F,g);s&&s(u,F),d=h();let v=Du(u,d),I=C.createHref(u);o.replaceState(v,"",I),a&&c&&c({action:i,location:C.location,delta:0})}function L(F){return Px(F)}let C={get action(){return i},get location(){return e(l,o)},listen(F){if(c)throw new Error("A history only accepts one active listener");return l.addEventListener(Su,f),c=F,()=>{l.removeEventListener(Su,f),c=null}},createHref(F){return t(l,F)},createURL:L,encodeLocation(F){let g=L(F);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:p,replace:k,go(F){return o.go(F)}};return C}function Px(e,t=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),mt(s,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:fl(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=s+r),new URL(r,s)}function eh(e,t,s="/"){return Rx(e,t,s,!1)}function Rx(e,t,s,r){let l=typeof t=="string"?jr(t):t,a=Bn(l.pathname||"/",s);if(a==null)return null;let o=th(e);zx(o);let i=null;for(let c=0;i==null&&c<o.length;++c){let d=Bx(a);i=$x(o[c],d,r)}return i}function th(e,t=[],s=[],r="",l=!1){let a=(o,i,c=l,d)=>{let h={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:i,route:o};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(r)&&c)return;mt(h.relativePath.startsWith(r),`Absolute route path "${h.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(r.length)}let f=On([r,h.relativePath]),p=s.concat(h);o.children&&o.children.length>0&&(mt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),th(o.children,t,p,f,c)),!(o.path==null&&!o.index)&&t.push({path:f,score:Fx(f,o.index),routesMeta:p})};return e.forEach((o,i)=>{var c;if(o.path===""||!((c=o.path)!=null&&c.includes("?")))a(o,i);else for(let d of nh(o.path))a(o,i,!0,d)}),t}function nh(e){let t=e.split("/");if(t.length===0)return[];let[s,...r]=t,l=s.endsWith("?"),a=s.replace(/\?$/,"");if(r.length===0)return l?[a,""]:[a];let o=nh(r.join("/")),i=[];return i.push(...o.map(c=>c===""?a:[a,c].join("/"))),l&&i.push(...o),i.map(c=>e.startsWith("/")&&c===""?"/":c)}function zx(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:Ax(t.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}var _x=/^:[\w-]+$/,Tx=3,Lx=2,Ox=1,Mx=10,Ix=-2,Eu=e=>e==="*";function Fx(e,t){let s=e.split("/"),r=s.length;return s.some(Eu)&&(r+=Ix),t&&(r+=Lx),s.filter(l=>!Eu(l)).reduce((l,a)=>l+(_x.test(a)?Tx:a===""?Ox:Mx),r)}function Ax(e,t){return e.length===t.length&&e.slice(0,-1).every((r,l)=>r===t[l])?e[e.length-1]-t[t.length-1]:0}function $x(e,t,s=!1){let{routesMeta:r}=e,l={},a="/",o=[];for(let i=0;i<r.length;++i){let c=r[i],d=i===r.length-1,h=a==="/"?t:t.slice(a.length)||"/",f=Ua({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),p=c.route;if(!f&&d&&s&&!r[r.length-1].route.index&&(f=Ua({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(l,f.params),o.push({params:l,pathname:On([a,f.pathname]),pathnameBase:qx(On([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=On([a,f.pathnameBase]))}return o}function Ua(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,r]=Ux(e.path,e.caseSensitive,e.end),l=t.match(s);if(!l)return null;let a=l[0],o=a.replace(/(.)\/+$/,"$1"),i=l.slice(1);return{params:r.reduce((d,{paramName:h,isOptional:f},p)=>{if(h==="*"){let L=i[p]||"";o=a.slice(0,a.length-L.length).replace(/(.)\/+$/,"$1")}const k=i[p];return f&&!k?d[h]=void 0:d[h]=(k||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:e}}function Ux(e,t=!1,s=!0){jn(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,i,c)=>(r.push({paramName:i,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),r]}function Bx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return jn(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Bn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,r=e.charAt(s);return r&&r!=="/"?null:e.slice(s)||"/"}var Wx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Hx(e,t="/"){let{pathname:s,search:r="",hash:l=""}=typeof e=="string"?jr(e):e,a;return s?(s=s.replace(/\/\/+/g,"/"),s.startsWith("/")?a=Pu(s.substring(1),"/"):a=Pu(s,t)):a=t,{pathname:a,search:Gx(r),hash:Yx(l)}}function Pu(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?s.length>1&&s.pop():l!=="."&&s.push(l)}),s.length>1?s.join("/"):"/"}function ai(e,t,s,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Vx(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function sh(e){let t=Vx(e);return t.map((s,r)=>r===t.length-1?s.pathname:s.pathnameBase)}function rh(e,t,s,r=!1){let l;typeof e=="string"?l=jr(e):(l={...e},mt(!l.pathname||!l.pathname.includes("?"),ai("?","pathname","search",l)),mt(!l.pathname||!l.pathname.includes("#"),ai("#","pathname","hash",l)),mt(!l.search||!l.search.includes("#"),ai("#","search","hash",l)));let a=e===""||l.pathname==="",o=a?"/":l.pathname,i;if(o==null)i=s;else{let f=t.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;l.pathname=p.join("/")}i=f>=0?t[f]:"/"}let c=Hx(l,i),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}var On=e=>e.join("/").replace(/\/\/+/g,"/"),qx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Gx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Yx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Kx=class{constructor(e,t,s,r=!1){this.status=e,this.statusText=t||"",this.internal=r,s instanceof Error?(this.data=s.toString(),this.error=s):this.data=s}};function Qx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function Zx(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var lh=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ah(e,t){let s=e;if(typeof s!="string"||!Wx.test(s))return{absoluteURL:void 0,isExternal:!1,to:s};let r=s,l=!1;if(lh)try{let a=new URL(window.location.href),o=s.startsWith("//")?new URL(a.protocol+s):new URL(s),i=Bn(o.pathname,t);o.origin===a.origin&&i!=null?s=i+o.search+o.hash:l=!0}catch{jn(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:l,to:s}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var oh=["POST","PUT","PATCH","DELETE"];new Set(oh);var Jx=["GET",...oh];new Set(Jx);var Nr=x.createContext(null);Nr.displayName="DataRouter";var po=x.createContext(null);po.displayName="DataRouterState";var Xx=x.createContext(!1),ih=x.createContext({isTransitioning:!1});ih.displayName="ViewTransition";var ey=x.createContext(new Map);ey.displayName="Fetchers";var ty=x.createContext(null);ty.displayName="Await";var dn=x.createContext(null);dn.displayName="Navigation";var kl=x.createContext(null);kl.displayName="Location";var Pn=x.createContext({outlet:null,matches:[],isDataRoute:!1});Pn.displayName="Route";var rd=x.createContext(null);rd.displayName="RouteError";var ch="REACT_ROUTER_ERROR",ny="REDIRECT",sy="ROUTE_ERROR_RESPONSE";function ry(e){if(e.startsWith(`${ch}:${ny}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function ly(e){if(e.startsWith(`${ch}:${sy}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new Kx(t.status,t.statusText,t.data)}catch{}}function ay(e,{relative:t}={}){mt(wl(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:r}=x.useContext(dn),{hash:l,pathname:a,search:o}=Cl(e,{relative:t}),i=a;return s!=="/"&&(i=a==="/"?s:On([s,a])),r.createHref({pathname:i,search:o,hash:l})}function wl(){return x.useContext(kl)!=null}function Ns(){return mt(wl(),"useLocation() may be used only in the context of a <Router> component."),x.useContext(kl).location}var dh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uh(e){x.useContext(dn).static||x.useLayoutEffect(e)}function ho(){let{isDataRoute:e}=x.useContext(Pn);return e?by():oy()}function oy(){mt(wl(),"useNavigate() may be used only in the context of a <Router> component.");let e=x.useContext(Nr),{basename:t,navigator:s}=x.useContext(dn),{matches:r}=x.useContext(Pn),{pathname:l}=Ns(),a=JSON.stringify(sh(r)),o=x.useRef(!1);return uh(()=>{o.current=!0}),x.useCallback((c,d={})=>{if(jn(o.current,dh),!o.current)return;if(typeof c=="number"){s.go(c);return}let h=rh(c,JSON.parse(a),l,d.relative==="path");e==null&&t!=="/"&&(h.pathname=h.pathname==="/"?t:On([t,h.pathname])),(d.replace?s.replace:s.push)(h,d.state,d)},[t,s,a,l,e])}x.createContext(null);function iy(){let{matches:e}=x.useContext(Pn),t=e[e.length-1];return t?t.params:{}}function Cl(e,{relative:t}={}){let{matches:s}=x.useContext(Pn),{pathname:r}=Ns(),l=JSON.stringify(sh(s));return x.useMemo(()=>rh(e,JSON.parse(l),r,t==="path"),[e,l,r,t])}function cy(e,t){return mh(e,t)}function mh(e,t,s,r,l){var u;mt(wl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=x.useContext(dn),{matches:o}=x.useContext(Pn),i=o[o.length-1],c=i?i.params:{},d=i?i.pathname:"/",h=i?i.pathnameBase:"/",f=i&&i.route;{let v=f&&f.path||"";hh(d,!f||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let p=Ns(),k;if(t){let v=typeof t=="string"?jr(t):t;mt(h==="/"||((u=v.pathname)==null?void 0:u.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${v.pathname}" was given in the \`location\` prop.`),k=v}else k=p;let L=k.pathname||"/",C=L;if(h!=="/"){let v=h.replace(/^\//,"").split("/");C="/"+L.replace(/^\//,"").split("/").slice(v.length).join("/")}let F=eh(e,{pathname:C});jn(f||F!=null,`No routes matched location "${k.pathname}${k.search}${k.hash}" `),jn(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${k.pathname}${k.search}${k.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=hy(F&&F.map(v=>Object.assign({},v,{params:Object.assign({},c,v.params),pathname:On([h,a.encodeLocation?a.encodeLocation(v.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?h:On([h,a.encodeLocation?a.encodeLocation(v.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:v.pathnameBase])})),o,s,r,l);return t&&g?x.createElement(kl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...k},navigationType:"POP"}},g):g}function dy(){let e=vy(),t=Qx(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=x.createElement(x.Fragment,null,x.createElement("p",null," Hey developer "),x.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",x.createElement("code",{style:a},"ErrorBoundary")," or"," ",x.createElement("code",{style:a},"errorElement")," prop on your route.")),x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),s?x.createElement("pre",{style:l},s):null,o)}var uy=x.createElement(dy,null),ph=class extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const s=ly(e.digest);s&&(e=s)}let t=e!==void 0?x.createElement(Pn.Provider,{value:this.props.routeContext},x.createElement(rd.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?x.createElement(my,{error:e},t):t}};ph.contextType=Xx;var oi=new WeakMap;function my({children:e,error:t}){let{basename:s}=x.useContext(dn);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let r=ry(t.digest);if(r){let l=oi.get(t);if(l)throw l;let a=ah(r.location,s);if(lh&&!oi.get(t))if(a.isExternal||r.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const o=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:r.replace}));throw oi.set(t,o),o}return x.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return e}function py({routeContext:e,match:t,children:s}){let r=x.useContext(Nr);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),x.createElement(Pn.Provider,{value:e},s)}function hy(e,t=[],s=null,r=null,l=null){if(e==null){if(!s)return null;if(s.errors)e=s.matches;else if(t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let a=e,o=s==null?void 0:s.errors;if(o!=null){let h=a.findIndex(f=>f.route.id&&(o==null?void 0:o[f.route.id])!==void 0);mt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let i=!1,c=-1;if(s)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:p,errors:k}=s,L=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!k||k[f.route.id]===void 0);if(f.route.lazy||L){i=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let d=s&&r?(h,f)=>{var p,k;r(h,{location:s.location,params:((k=(p=s.matches)==null?void 0:p[0])==null?void 0:k.params)??{},unstable_pattern:Zx(s.matches),errorInfo:f})}:void 0;return a.reduceRight((h,f,p)=>{let k,L=!1,C=null,F=null;s&&(k=o&&f.route.id?o[f.route.id]:void 0,C=f.route.errorElement||uy,i&&(c<0&&p===0?(hh("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,F=null):c===p&&(L=!0,F=f.route.hydrateFallbackElement||null)));let g=t.concat(a.slice(0,p+1)),u=()=>{let v;return k?v=C:L?v=F:f.route.Component?v=x.createElement(f.route.Component,null):f.route.element?v=f.route.element:v=h,x.createElement(py,{match:f,routeContext:{outlet:h,matches:g,isDataRoute:s!=null},children:v})};return s&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?x.createElement(ph,{location:s.location,revalidation:s.revalidation,component:C,error:k,children:u(),routeContext:{outlet:null,matches:g,isDataRoute:!0},onError:d}):u()},null)}function ld(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fy(e){let t=x.useContext(Nr);return mt(t,ld(e)),t}function gy(e){let t=x.useContext(po);return mt(t,ld(e)),t}function xy(e){let t=x.useContext(Pn);return mt(t,ld(e)),t}function ad(e){let t=xy(e),s=t.matches[t.matches.length-1];return mt(s.route.id,`${e} can only be used on routes that contain a unique "id"`),s.route.id}function yy(){return ad("useRouteId")}function vy(){var r;let e=x.useContext(rd),t=gy("useRouteError"),s=ad("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[s]}function by(){let{router:e}=fy("useNavigate"),t=ad("useNavigate"),s=x.useRef(!1);return uh(()=>{s.current=!0}),x.useCallback(async(l,a={})=>{jn(s.current,dh),s.current&&(typeof l=="number"?await e.navigate(l):await e.navigate(l,{fromRouteId:t,...a}))},[e,t])}var Ru={};function hh(e,t,s){!t&&!Ru[e]&&(Ru[e]=!0,jn(!1,s))}x.memo(jy);function jy({routes:e,future:t,state:s,onError:r}){return mh(e,void 0,s,r,t)}function Ur(e){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ny({basename:e="/",children:t=null,location:s,navigationType:r="POP",navigator:l,static:a=!1,unstable_useTransitions:o}){mt(!wl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),c=x.useMemo(()=>({basename:i,navigator:l,static:a,unstable_useTransitions:o,future:{}}),[i,l,a,o]);typeof s=="string"&&(s=jr(s));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:k="default"}=s,L=x.useMemo(()=>{let C=Bn(d,i);return C==null?null:{location:{pathname:C,search:h,hash:f,state:p,key:k},navigationType:r}},[i,d,h,f,p,k,r]);return jn(L!=null,`<Router basename="${i}"> is not able to match the URL "${d}${h}${f}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:x.createElement(dn.Provider,{value:c},x.createElement(kl.Provider,{children:t,value:L}))}function ky({children:e,location:t}){return cy(lc(e),t)}function lc(e,t=[]){let s=[];return x.Children.forEach(e,(r,l)=>{if(!x.isValidElement(r))return;let a=[...t,l];if(r.type===x.Fragment){s.push.apply(s,lc(r.props.children,a));return}mt(r.type===Ur,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let o={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=lc(r.props.children,a)),s.push(o)}),s}var fa="get",ga="application/x-www-form-urlencoded";function fo(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function wy(e){return fo(e)&&e.tagName.toLowerCase()==="button"}function Cy(e){return fo(e)&&e.tagName.toLowerCase()==="form"}function Sy(e){return fo(e)&&e.tagName.toLowerCase()==="input"}function Dy(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Ey(e,t){return e.button===0&&(!t||t==="_self")&&!Dy(e)}function ac(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let r=e[s];return t.concat(Array.isArray(r)?r.map(l=>[s,l]):[[s,r]])},[]))}function Py(e,t){let s=ac(e);return t&&t.forEach((r,l)=>{s.has(l)||t.getAll(l).forEach(a=>{s.append(l,a)})}),s}var Zl=null;function Ry(){if(Zl===null)try{new FormData(document.createElement("form"),0),Zl=!1}catch{Zl=!0}return Zl}var zy=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ii(e){return e!=null&&!zy.has(e)?(jn(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ga}"`),null):e}function _y(e,t){let s,r,l,a,o;if(Cy(e)){let i=e.getAttribute("action");r=i?Bn(i,t):null,s=e.getAttribute("method")||fa,l=ii(e.getAttribute("enctype"))||ga,a=new FormData(e)}else if(wy(e)||Sy(e)&&(e.type==="submit"||e.type==="image")){let i=e.form;if(i==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||i.getAttribute("action");if(r=c?Bn(c,t):null,s=e.getAttribute("formmethod")||i.getAttribute("method")||fa,l=ii(e.getAttribute("formenctype"))||ii(i.getAttribute("enctype"))||ga,a=new FormData(i,e),!Ry()){let{name:d,type:h,value:f}=e;if(h==="image"){let p=d?`${d}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else d&&a.append(d,f)}}else{if(fo(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=fa,r=null,l=ga,o=e}return a&&l==="text/plain"&&(o=a,a=void 0),{action:r,method:s.toLowerCase(),encType:l,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function od(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ty(e,t,s,r){let l=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return s?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${r}`:l.pathname=`${l.pathname}.${r}`:l.pathname==="/"?l.pathname=`_root.${r}`:t&&Bn(l.pathname,t)==="/"?l.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${r}`,l}async function Ly(e,t){if(e.id in t)return t[e.id];try{let s=await Cx(()=>import(e.module),[]);return t[e.id]=s,s}catch(s){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Oy(e){return e!=null&&typeof e.page=="string"}function My(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Iy(e,t,s){let r=await Promise.all(e.map(async l=>{let a=t.routes[l.route.id];if(a){let o=await Ly(a,s);return o.links?o.links():[]}return[]}));return Uy(r.flat(1).filter(My).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function zu(e,t,s,r,l,a){let o=(c,d)=>s[d]?c.route.id!==s[d].route.id:!0,i=(c,d)=>{var h;return s[d].pathname!==c.pathname||((h=s[d].route.path)==null?void 0:h.endsWith("*"))&&s[d].params["*"]!==c.params["*"]};return a==="assets"?t.filter((c,d)=>o(c,d)||i(c,d)):a==="data"?t.filter((c,d)=>{var f;let h=r.routes[c.route.id];if(!h||!h.hasLoader)return!1;if(o(c,d)||i(c,d))return!0;if(c.route.shouldRevalidate){let p=c.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:((f=s[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function Fy(e,t,{includeHydrateFallback:s}={}){return Ay(e.map(r=>{let l=t.routes[r.route.id];if(!l)return[];let a=[l.module];return l.clientActionModule&&(a=a.concat(l.clientActionModule)),l.clientLoaderModule&&(a=a.concat(l.clientLoaderModule)),s&&l.hydrateFallbackModule&&(a=a.concat(l.hydrateFallbackModule)),l.imports&&(a=a.concat(l.imports)),a}).flat(1))}function Ay(e){return[...new Set(e)]}function $y(e){let t={},s=Object.keys(e).sort();for(let r of s)t[r]=e[r];return t}function Uy(e,t){let s=new Set,r=new Set(t);return e.reduce((l,a)=>{if(t&&!Oy(a)&&a.as==="script"&&a.href&&r.has(a.href))return l;let i=JSON.stringify($y(a));return s.has(i)||(s.add(i),l.push({key:i,link:a})),l},[])}function fh(){let e=x.useContext(Nr);return od(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function By(){let e=x.useContext(po);return od(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var id=x.createContext(void 0);id.displayName="FrameworkContext";function gh(){let e=x.useContext(id);return od(e,"You must render this element inside a <HydratedRouter> element"),e}function Wy(e,t){let s=x.useContext(id),[r,l]=x.useState(!1),[a,o]=x.useState(!1),{onFocus:i,onBlur:c,onMouseEnter:d,onMouseLeave:h,onTouchStart:f}=t,p=x.useRef(null);x.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let C=g=>{g.forEach(u=>{o(u.isIntersecting)})},F=new IntersectionObserver(C,{threshold:.5});return p.current&&F.observe(p.current),()=>{F.disconnect()}}},[e]),x.useEffect(()=>{if(r){let C=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(C)}}},[r]);let k=()=>{l(!0)},L=()=>{l(!1),o(!1)};return s?e!=="intent"?[a,p,{}]:[a,p,{onFocus:Mr(i,k),onBlur:Mr(c,L),onMouseEnter:Mr(d,k),onMouseLeave:Mr(h,L),onTouchStart:Mr(f,k)}]:[!1,p,{}]}function Mr(e,t){return s=>{e&&e(s),s.defaultPrevented||t(s)}}function Hy({page:e,...t}){let{router:s}=fh(),r=x.useMemo(()=>eh(s.routes,e,s.basename),[s.routes,e,s.basename]);return r?x.createElement(qy,{page:e,matches:r,...t}):null}function Vy(e){let{manifest:t,routeModules:s}=gh(),[r,l]=x.useState([]);return x.useEffect(()=>{let a=!1;return Iy(e,t,s).then(o=>{a||l(o)}),()=>{a=!0}},[e,t,s]),r}function qy({page:e,matches:t,...s}){let r=Ns(),{future:l,manifest:a,routeModules:o}=gh(),{basename:i}=fh(),{loaderData:c,matches:d}=By(),h=x.useMemo(()=>zu(e,t,d,a,r,"data"),[e,t,d,a,r]),f=x.useMemo(()=>zu(e,t,d,a,r,"assets"),[e,t,d,a,r]),p=x.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let C=new Set,F=!1;if(t.forEach(u=>{var I;let v=a.routes[u.route.id];!v||!v.hasLoader||(!h.some(D=>D.route.id===u.route.id)&&u.route.id in c&&((I=o[u.route.id])!=null&&I.shouldRevalidate)||v.hasClientLoader?F=!0:C.add(u.route.id))}),C.size===0)return[];let g=Ty(e,i,l.unstable_trailingSlashAwareDataRequests,"data");return F&&C.size>0&&g.searchParams.set("_routes",t.filter(u=>C.has(u.route.id)).map(u=>u.route.id).join(",")),[g.pathname+g.search]},[i,l.unstable_trailingSlashAwareDataRequests,c,r,a,h,t,e,o]),k=x.useMemo(()=>Fy(f,a),[f,a]),L=Vy(f);return x.createElement(x.Fragment,null,p.map(C=>x.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...s})),k.map(C=>x.createElement("link",{key:C,rel:"modulepreload",href:C,...s})),L.map(({key:C,link:F})=>x.createElement("link",{key:C,nonce:s.nonce,...F,crossOrigin:F.crossOrigin??s.crossOrigin})))}function Gy(...e){return t=>{e.forEach(s=>{typeof s=="function"?s(t):s!=null&&(s.current=t)})}}var Yy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Yy&&(window.__reactRouterVersion="7.13.0")}catch{}function Ky({basename:e,children:t,unstable_useTransitions:s,window:r}){let l=x.useRef();l.current==null&&(l.current=Sx({window:r,v5Compat:!0}));let a=l.current,[o,i]=x.useState({action:a.action,location:a.location}),c=x.useCallback(d=>{s===!1?i(d):x.startTransition(()=>i(d))},[s]);return x.useLayoutEffect(()=>a.listen(c),[a,c]),x.createElement(Ny,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:s})}var xh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mn=x.forwardRef(function({onClick:t,discover:s="render",prefetch:r="none",relative:l,reloadDocument:a,replace:o,state:i,target:c,to:d,preventScrollReset:h,viewTransition:f,unstable_defaultShouldRevalidate:p,...k},L){let{basename:C,unstable_useTransitions:F}=x.useContext(dn),g=typeof d=="string"&&xh.test(d),u=ah(d,C);d=u.to;let v=ay(d,{relative:l}),[I,D,A]=Wy(r,k),z=Xy(d,{replace:o,state:i,target:c,preventScrollReset:h,relative:l,viewTransition:f,unstable_defaultShouldRevalidate:p,unstable_useTransitions:F});function y(w){t&&t(w),w.defaultPrevented||z(w)}let b=x.createElement("a",{...k,...A,href:u.absoluteURL||v,onClick:u.isExternal||a?t:y,ref:Gy(L,D),target:c,"data-discover":!g&&s==="render"?"true":void 0});return I&&!g?x.createElement(x.Fragment,null,b,x.createElement(Hy,{page:v})):b});Mn.displayName="Link";var Qy=x.forwardRef(function({"aria-current":t="page",caseSensitive:s=!1,className:r="",end:l=!1,style:a,to:o,viewTransition:i,children:c,...d},h){let f=Cl(o,{relative:d.relative}),p=Ns(),k=x.useContext(po),{navigator:L,basename:C}=x.useContext(dn),F=k!=null&&r0(f)&&i===!0,g=L.encodeLocation?L.encodeLocation(f).pathname:f.pathname,u=p.pathname,v=k&&k.navigation&&k.navigation.location?k.navigation.location.pathname:null;s||(u=u.toLowerCase(),v=v?v.toLowerCase():null,g=g.toLowerCase()),v&&C&&(v=Bn(v,C)||v);const I=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let D=u===g||!l&&u.startsWith(g)&&u.charAt(I)==="/",A=v!=null&&(v===g||!l&&v.startsWith(g)&&v.charAt(g.length)==="/"),z={isActive:D,isPending:A,isTransitioning:F},y=D?t:void 0,b;typeof r=="function"?b=r(z):b=[r,D?"active":null,A?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let w=typeof a=="function"?a(z):a;return x.createElement(Mn,{...d,"aria-current":y,className:b,ref:h,style:w,to:o,viewTransition:i},typeof c=="function"?c(z):c)});Qy.displayName="NavLink";var Zy=x.forwardRef(({discover:e="render",fetcherKey:t,navigate:s,reloadDocument:r,replace:l,state:a,method:o=fa,action:i,onSubmit:c,relative:d,preventScrollReset:h,viewTransition:f,unstable_defaultShouldRevalidate:p,...k},L)=>{let{unstable_useTransitions:C}=x.useContext(dn),F=n0(),g=s0(i,{relative:d}),u=o.toLowerCase()==="get"?"get":"post",v=typeof i=="string"&&xh.test(i),I=D=>{if(c&&c(D),D.defaultPrevented)return;D.preventDefault();let A=D.nativeEvent.submitter,z=(A==null?void 0:A.getAttribute("formmethod"))||o,y=()=>F(A||D.currentTarget,{fetcherKey:t,method:z,navigate:s,replace:l,state:a,relative:d,preventScrollReset:h,viewTransition:f,unstable_defaultShouldRevalidate:p});C&&s!==!1?x.startTransition(()=>y()):y()};return x.createElement("form",{ref:L,method:u,action:g,onSubmit:r?c:I,...k,"data-discover":!v&&e==="render"?"true":void 0})});Zy.displayName="Form";function Jy(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function yh(e){let t=x.useContext(Nr);return mt(t,Jy(e)),t}function Xy(e,{target:t,replace:s,state:r,preventScrollReset:l,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:i,unstable_useTransitions:c}={}){let d=ho(),h=Ns(),f=Cl(e,{relative:a});return x.useCallback(p=>{if(Ey(p,t)){p.preventDefault();let k=s!==void 0?s:fl(h)===fl(f),L=()=>d(e,{replace:k,state:r,preventScrollReset:l,relative:a,viewTransition:o,unstable_defaultShouldRevalidate:i});c?x.startTransition(()=>L()):L()}},[h,d,f,s,r,t,e,l,a,o,i,c])}function vh(e){jn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=x.useRef(ac(e)),s=x.useRef(!1),r=Ns(),l=x.useMemo(()=>Py(r.search,s.current?null:t.current),[r.search]),a=ho(),o=x.useCallback((i,c)=>{const d=ac(typeof i=="function"?i(new URLSearchParams(l)):i);s.current=!0,a("?"+d,c)},[a,l]);return[l,o]}var e0=0,t0=()=>`__${String(++e0)}__`;function n0(){let{router:e}=yh("useSubmit"),{basename:t}=x.useContext(dn),s=yy(),r=e.fetch,l=e.navigate;return x.useCallback(async(a,o={})=>{let{action:i,method:c,encType:d,formData:h,body:f}=_y(a,t);if(o.navigate===!1){let p=o.fetcherKey||t0();await r(p,s,o.action||i,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:h,body:f,formMethod:o.method||c,formEncType:o.encType||d,flushSync:o.flushSync})}else await l(o.action||i,{unstable_defaultShouldRevalidate:o.unstable_defaultShouldRevalidate,preventScrollReset:o.preventScrollReset,formData:h,body:f,formMethod:o.method||c,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:s,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,l,t,s])}function s0(e,{relative:t}={}){let{basename:s}=x.useContext(dn),r=x.useContext(Pn);mt(r,"useFormAction must be used inside a RouteContext");let[l]=r.matches.slice(-1),a={...Cl(e||".",{relative:t})},o=Ns();if(e==null){a.search=o.search;let i=new URLSearchParams(a.search),c=i.getAll("index");if(c.some(h=>h==="")){i.delete("index"),c.filter(f=>f).forEach(f=>i.append("index",f));let h=i.toString();a.search=h?`?${h}`:""}}return(!e||e===".")&&l.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(a.pathname=a.pathname==="/"?s:On([s,a.pathname])),fl(a)}function r0(e,{relative:t}={}){let s=x.useContext(ih);mt(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=yh("useViewTransitionState"),l=Cl(e,{relative:t});if(!s.isTransitioning)return!1;let a=Bn(s.currentLocation.pathname,r)||s.currentLocation.pathname,o=Bn(s.nextLocation.pathname,r)||s.nextLocation.pathname;return Ua(l.pathname,o)!=null||Ua(l.pathname,a)!=null}var l0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const a0=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o0=(e,t)=>{const s=x.forwardRef(({color:r="currentColor",size:l=24,strokeWidth:a=2,absoluteStrokeWidth:o,children:i,...c},d)=>x.createElement("svg",{ref:d,...l0,width:l,height:l,stroke:r,strokeWidth:o?Number(a)*24/Number(l):a,className:`lucide lucide-${a0(e)}`,...c},[...t.map(([h,f])=>x.createElement(h,f)),...(Array.isArray(i)?i:[i])||[]]));return s.displayName=`${e}`,s};var ve=o0;const i0=ve("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),bh=ve("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),kt=ve("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),c0=ve("Archive",[["rect",{width:"20",height:"5",x:"2",y:"4",rx:"2",key:"uhwcea"}],["path",{d:"M4 9v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9",key:"shkvi4"}],["path",{d:"M10 13h4",key:"ytezjc"}]]),d0=ve("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),u0=ve("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),Wn=ve("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),jh=ve("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),m0=ve("Car",[["path",{d:"M14 16H9m10 0h3v-3.15a1 1 0 0 0-.84-.99L16 11l-2.7-3.6a1 1 0 0 0-.8-.4H5.24a2 2 0 0 0-1.8 1.1l-.8 1.63A6 6 0 0 0 2 12.42V16h2",key:"l5np60"}],["circle",{cx:"6.5",cy:"16.5",r:"2.5",key:"ae40ju"}],["circle",{cx:"16.5",cy:"16.5",r:"2.5",key:"1smtlt"}]]),p0=ve("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Ue=ve("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),In=ve("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]),cd=ve("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Ba=ve("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Wa=ve("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),dd=ve("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),ci=ve("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Nh=ve("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]),fs=ve("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),h0=ve("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),gn=ve("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),ud=ve("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),go=ve("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Hn=ve("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),kh=ve("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),oc=ve("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),f0=ve("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),g0=ve("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),wh=ve("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),x0=ve("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),y0=ve("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),md=ve("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),v0=ve("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Ch=ve("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Ms=ve("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),b0=ve("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),j0=ve("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),Is=ve("Package",[["path",{d:"M16.5 9.4 7.55 4.24",key:"10qotr"}],["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]),N0=ve("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),Sh=ve("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Sl=ve("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),_u=ve("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),k0=ve("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),vn=ve("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),w0=ve("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),gl=ve("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Tu=ve("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]),C0=ve("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),ic=ve("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ls=ve("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]),Dh=ve("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),rn=ve("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),S0=ve("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),cn=ve("Truck",[["path",{d:"M10 17h4V5H2v12h3",key:"1jq12e"}],["path",{d:"M20 17h2v-3.34a4 4 0 0 0-1.17-2.83L19 9h-5",key:"1xb3ft"}],["path",{d:"M14 17h1",key:"nufu4t"}],["circle",{cx:"7.5",cy:"17.5",r:"2.5",key:"a7aife"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),D0=ve("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),pd=ve("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Ha=ve("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),gs=ve("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),$s=ve("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),Qt=ve("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Va=["Produce","Meat & Seafood","Dairy & Eggs","Pantry & Dry Goods","Spices & Seasonings","Other"],Lu=["oz","lb","g","kg","each"],wn=["A","B","C"],E0=["Not home","Wrong address","Refused delivery","House hard to find","Other"],Ou=["Monday","Tuesday","Thursday"],P0=["protein","veg","starch","sauces","breakfast","soups"],R0=[{id:"menu",label:"Menu",icon:$s},{id:"recipes",label:"Recipes",icon:u0},{id:"kds",label:"KDS",icon:j0},{id:"prep",label:"Shop",icon:md},{id:"clients",label:"Clients",icon:gs},{id:"deliveries",label:"Deliveries",icon:cn},{id:"ingredients",label:"Ingredients",icon:Dh}],z0={protein:[],veg:[],starch:[],sauces:[],breakfast:[],soups:[]},_0=[{name:"Tim Brown",displayName:"",persons:7,address:"10590 Canterberry Rd, Fairfax Station, VA 22039",email:"",phone:"",notes:"",mealsPerWeek:4,frequency:"weekly",status:"active",pausedDate:"",honeyBookLink:"",billingNotes:"",deliveryDay:"",zone:"",pickup:!1},{name:"Scott Inman",displayName:"",persons:4,address:"3418 Putnam Rd, Falls Church, VA 22042",email:"",phone:"",notes:"",mealsPerWeek:4,frequency:"weekly",status:"active",pausedDate:"",honeyBookLink:"",billingNotes:"",deliveryDay:"",zone:"",pickup:!1}],Vs={fullName:"",displayName:"",email:"",phone:"",address:""},T0={subscriptionId:"",displayName:"",portions:1,mealsPerWeek:0,frequency:"weekly",status:"active",zone:"",deliveryDay:"",pickup:!1,planPrice:0,serviceFee:0,prepayDiscount:!1,newClientFeePaid:!1,paysOwnGroceries:!1,billingNotes:"",accessCode:"",honeyBookLink:"",contacts:[{...Vs}],deliveryDates:[],billDueDate:"",chefChoice:!0},Eh=T0,dr={name:"",phone:"",zone:"",accessCode:""},qa={category:"protein",name:"",instructions:"",ingredients:[{name:"",quantity:"",unit:"oz",cost:"",source:"",section:"Other"}]},Ga={protein:"",veg:"",starch:"",extras:[],portions:1},Ya={name:"",cost:"",unit:"oz",source:"",section:"Produce"};function L0({activeTab:e,setActiveTab:t}){return n.jsx(n.Fragment,{children:R0.map(s=>n.jsxs("button",{onClick:()=>t(s.id),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors ${e===s.id?"border-b-2 text-blue-700":"text-gray-600 hover:text-gray-900"}`,style:e===s.id?{borderColor:"#3d59ab",color:"#3d59ab"}:{},children:[n.jsx(s.icon,{size:18}),s.label]},s.id))})}const Mu=[{id:"menu",label:"Menu Planned",icon:Nh},{id:"cooking",label:"Cooking",icon:In},{id:"ready",label:"Ready for Delivery",icon:Is},{id:"delivering",label:"Out for Delivery",icon:cn},{id:"delivered",label:"Delivered",icon:p0},{id:"history",label:"History",icon:c0}],O0={menu:"menu",cooking:"kds",ready:"deliveries",delivering:"deliveries",delivered:"history",history:"history"};function M0({menuItems:e=[],completedDishes:t={},readyForDelivery:s=[],deliveryLog:r=[],orderHistory:l=[],selectedDate:a,onNavigate:o}){const i=e.filter(z=>!z.approved),c=e.filter(z=>z.approved),h=(()=>{const z=new Set;c.forEach(w=>{["protein","veg","starch"].forEach(N=>{w[N]&&z.add(w[N])}),(w.extras||[]).forEach(N=>z.add(N))});const y=z.size,b=[...z].filter(w=>t[w]).length;return{total:y,completed:b}})(),f=i.length,p=c.length,k=s.length,L=r.filter(z=>z.date===a),C=L.length>0&&k>0?L.length:0,g=l.filter(z=>{const y=r.find(b=>b.clientName===z.clientName&&b.date===z.date);return y&&y.date===a}).length,u=l.length,v={menu:f,cooking:p,ready:k,delivering:C,delivered:g,history:u},I={menu:f>0,cooking:p>0,ready:k>0,delivering:C>0&&k>0,delivered:g>0,history:u>0},A=(()=>C>0&&k>0?"delivering":k>0?"ready":p>0&&h.completed<h.total?"cooking":f>0?"menu":null)();return n.jsx("div",{className:"bg-white rounded-lg shadow-lg p-4 mb-6",children:n.jsx("div",{className:"flex items-center justify-between overflow-x-auto",children:Mu.map((z,y)=>{const b=z.icon,w=v[z.id],N=I[z.id],S=A===z.id;return n.jsxs(Br.Fragment,{children:[y>0&&n.jsx("div",{className:"flex-shrink-0 h-1 w-8 mx-1",style:{backgroundColor:I[Mu[y-1].id]?"#3d59ab":"#e5e7eb"}}),n.jsxs("div",{className:"flex flex-col items-center flex-shrink-0 px-2",children:[n.jsxs("div",{className:"relative w-12 h-12 rounded-full flex items-center justify-center transition-all cursor-pointer",style:{backgroundColor:N?"#3d59ab":"#e5e7eb",color:N?"white":"#9ca3af",boxShadow:S?"0 0 0 3px white, 0 0 0 6px #ffd700":"none"},onClick:()=>o&&o(O0[z.id]),children:[n.jsx(b,{size:24}),w>0&&n.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full text-xs font-bold flex items-center justify-center",style:{backgroundColor:S?"#ffd700":"#22c55e",color:S?"#423d3c":"white"},children:w>99?"99+":w})]}),n.jsx("span",{className:`text-xs mt-2 text-center whitespace-nowrap font-medium ${N?"":"text-gray-400"}`,style:{color:N?"#3d59ab":void 0},children:z.label})]})]},z.id)})})})}function xl(e=new Date){const t=new Date(e);t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);const s=new Date(t.getFullYear(),0,4),r=1+Math.round(((t-s)/864e5-3+(s.getDay()+6)%7)/7);return`${t.getFullYear()}-W${String(r).padStart(2,"0")}`}function xo(e){const[t,s]=e.split("-W"),r=parseInt(s,10),l=new Date(parseInt(t,10),0,4),a=l.getDay()||7,o=new Date(l);o.setDate(l.getDate()-a+1);const i=new Date(o);return i.setDate(o.getDate()+(r-1)*7),i.toISOString().split("T")[0]}function Ph(e){const t=xo(e),s=new Date(t+"T12:00:00");return s.setDate(s.getDate()+6),s.toISOString().split("T")[0]}function as(e){return xl(new Date(e+"T12:00:00"))}function di(e){const t=new Date(xo(e)+"T12:00:00"),s=new Date(Ph(e)+"T12:00:00"),r=t.toLocaleDateString("en-US",{month:"short"}),l=s.toLocaleDateString("en-US",{month:"short"}),a=t.getDate(),o=s.getDate(),i=s.getFullYear();return r===l?`${r} ${a} - ${o}, ${i}`:`${r} ${a} - ${l} ${o}, ${i}`}function I0(e,t){return as(e)===t}function Jn(e){return{weekId:e,startDate:xo(e),endDate:Ph(e),status:"draft",createdAt:new Date().toISOString(),lockedAt:null,snapshot:{menu:{},stops:[],subscriptions:{}},kdsStatus:{},readyForDelivery:[],deliveryLog:[],groceryBills:[]}}function F0(e){if(e.subscriptionId)return e;const t=e.contacts&&e.contacts.length>0?e.contacts.map(s=>({fullName:s.fullName||s.name||"",displayName:s.displayName||"",email:s.email||"",phone:s.phone||"",address:s.address||""})):[{fullName:e.name||"",displayName:"",email:e.email||"",phone:e.phone||"",address:e.address||""}];return{subscriptionId:e.id||Date.now().toString(),displayName:e.displayName||e.name||"",portions:e.portions||e.persons||1,mealsPerWeek:e.mealsPerWeek||0,frequency:e.frequency||"weekly",status:e.status||"active",zone:e.zone||"",deliveryDay:e.deliveryDay||"",pickup:e.pickup||!1,contacts:t}}function A0(e,t,s){const r={},l=new Set;t.forEach(i=>{I0(i.date,e)&&i.approved&&(r[i.clientName]||(r[i.clientName]=[]),r[i.clientName].push({id:i.id,date:i.date,protein:i.protein,veg:i.veg,starch:i.starch,extras:i.extras||[],portions:i.portions}),l.add(i.clientName))});const a=[],o={};return l.forEach(i=>{const c=s.find(p=>p.name===i||p.displayName===i);if(!c)return;const d=F0(c);if(o[i]=d,d.pickup)return;const h=d.contacts||[],f={};h.forEach((p,k)=>{if(!p.address)return;const L=p.address.toLowerCase().trim();f[L]||(f[L]={address:p.address,contacts:[],zone:d.zone}),f[L].contacts.push({fullName:p.fullName,displayName:p.displayName,phone:p.phone,email:p.email})}),Object.values(f).forEach((p,k)=>{a.push({subscriptionId:d.subscriptionId,clientName:i,displayName:d.displayName,portions:d.portions,zone:p.zone,deliveryDay:d.deliveryDay,address:p.address,contacts:p.contacts,stopIndex:k})})}),{menu:r,stops:a,subscriptions:o}}function Rh(e,t,s){const r=A0(e.weekId,t,s);return{...e,status:"locked",lockedAt:new Date().toISOString(),snapshot:r}}function $0(e){return{...e,status:"draft",unlockedAt:new Date().toISOString()}}function Iu(e,t=1){const s=new Date(xo(e)+"T12:00:00");return s.setDate(s.getDate()+t*7),xl(s)}function zh({selectedWeekId:e,setSelectedWeekId:t,weeks:s={},compact:r=!1,onLockWeek:l,onUnlockWeek:a}){const o=xl(),i=s[e],c=(i==null?void 0:i.status)==="locked",d=()=>{t(Iu(e,-1))},h=()=>{t(Iu(e,1))},f=()=>{t(o)},p=()=>{c&&a?a(e):!c&&l&&l(e)},k=[],L=Object.keys(s).sort().reverse();return L.includes(o)||k.push({id:o,label:`${di(o)} (Current)`,isCurrent:!0}),L.forEach(C=>{const F=s[C],g=C===o,u=(F==null?void 0:F.status)==="locked"?" [Locked]":"";k.push({id:C,label:`${di(C)}${g?" (Current)":""}${u}`,isCurrent:g,isLocked:(F==null?void 0:F.status)==="locked"})}),k.sort((C,F)=>F.id.localeCompare(C.id)),r?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:d,className:"p-1 rounded hover:bg-gray-100",title:"Previous week",children:n.jsx(Ba,{size:20})}),n.jsx("select",{value:e,onChange:C=>t(C.target.value),className:"p-2 border-2 rounded-lg text-sm",style:{borderColor:"#ebb582"},children:k.map(C=>n.jsx("option",{value:C.id,children:C.label},C.id))}),n.jsx("button",{onClick:h,className:"p-1 rounded hover:bg-gray-100",title:"Next week",children:n.jsx(Wa,{size:20})}),e!==o&&n.jsx("button",{onClick:f,className:"text-xs px-2 py-1 rounded bg-blue-100 text-blue-700",children:"Today"})]}):n.jsx("div",{className:"bg-white rounded-lg shadow-lg p-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:d,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Previous week",children:n.jsx(Ba,{size:24})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Wn,{size:20,style:{color:"#3d59ab"}}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg",style:{color:"#3d59ab"},children:di(e)}),n.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"text-gray-500",children:e}),e===o&&n.jsx("span",{className:"px-2 py-0.5 rounded-full text-xs bg-green-100 text-green-700",children:"Current Week"})]})]})]}),n.jsx("button",{onClick:h,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Next week",children:n.jsx(Wa,{size:24})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[e!==o&&n.jsx("button",{onClick:f,className:"px-4 py-2 rounded-lg text-sm font-medium",style:{backgroundColor:"#3d59ab",color:"white"},children:"Go to Current Week"}),(l||a)&&n.jsx("button",{onClick:p,className:`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ${c?"bg-amber-100 text-amber-700 hover:bg-amber-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:c?n.jsxs(n.Fragment,{children:[n.jsx(v0,{size:16}),"Locked"]}):n.jsxs(n.Fragment,{children:[n.jsx(D0,{size:16}),"Unlocked"]})}),n.jsx("select",{value:e,onChange:C=>t(C.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:k.map(C=>n.jsx("option",{value:C.id,children:C.label},C.id))})]})]})})}var _h={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/(function(e,t){((s,r)=>{e.exports=r()})(Kh,function s(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},l,a=!r.document&&!!r.postMessage,o=r.IS_PAPA_WORKER||!1,i={},c=0,d={};function h(y){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(b){var w=D(b);w.chunkSize=parseInt(w.chunkSize),b.step||b.chunk||(w.chunkSize=null),this._handle=new C(w),(this._handle.streamer=this)._config=w}).call(this,y),this.parseChunk=function(b,w){var N=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<N){let O=this._config.newline;O||(S=this._config.quoteChar||'"',O=this._handle.guessLineEndings(b,S)),b=[...b.split(O).slice(N)].join(O)}this.isFirstChunk&&z(this._config.beforeFirstChunk)&&(S=this._config.beforeFirstChunk(b))!==void 0&&(b=S),this.isFirstChunk=!1,this._halted=!1;var N=this._partialLine+b,S=(this._partialLine="",this._handle.parse(N,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(b=S.meta.cursor,N=(this._finished||(this._partialLine=N.substring(b-this._baseIndex),this._baseIndex=b),S&&S.data&&(this._rowCount+=S.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)r.postMessage({results:S,workerId:d.WORKER_ID,finished:N});else if(z(this._config.chunk)&&!w){if(this._config.chunk(S,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=S=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(S.data),this._completeResults.errors=this._completeResults.errors.concat(S.errors),this._completeResults.meta=S.meta),this._completed||!N||!z(this._config.complete)||S&&S.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),N||S&&S.meta.paused||this._nextChunk(),S}this._halted=!0},this._sendError=function(b){z(this._config.error)?this._config.error(b):o&&this._config.error&&r.postMessage({workerId:d.WORKER_ID,error:b,finished:!1})}}function f(y){var b;(y=y||{}).chunkSize||(y.chunkSize=d.RemoteChunkSize),h.call(this,y),this._nextChunk=a?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(w){this._input=w,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(b=new XMLHttpRequest,this._config.withCredentials&&(b.withCredentials=this._config.withCredentials),a||(b.onload=A(this._chunkLoaded,this),b.onerror=A(this._chunkError,this)),b.open(this._config.downloadRequestBody?"POST":"GET",this._input,!a),this._config.downloadRequestHeaders){var w,N=this._config.downloadRequestHeaders;for(w in N)b.setRequestHeader(w,N[w])}var S;this._config.chunkSize&&(S=this._start+this._config.chunkSize-1,b.setRequestHeader("Range","bytes="+this._start+"-"+S));try{b.send(this._config.downloadRequestBody)}catch(O){this._chunkError(O.message)}a&&b.status===0&&this._chunkError()}},this._chunkLoaded=function(){b.readyState===4&&(b.status<200||400<=b.status?this._chunkError():(this._start+=this._config.chunkSize||b.responseText.length,this._finished=!this._config.chunkSize||this._start>=(w=>(w=w.getResponseHeader("Content-Range"))!==null?parseInt(w.substring(w.lastIndexOf("/")+1)):-1)(b),this.parseChunk(b.responseText)))},this._chunkError=function(w){w=b.statusText||w,this._sendError(new Error(w))}}function p(y){(y=y||{}).chunkSize||(y.chunkSize=d.LocalChunkSize),h.call(this,y);var b,w,N=typeof FileReader<"u";this.stream=function(S){this._input=S,w=S.slice||S.webkitSlice||S.mozSlice,N?((b=new FileReader).onload=A(this._chunkLoaded,this),b.onerror=A(this._chunkError,this)):b=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var S=this._input,O=(this._config.chunkSize&&(O=Math.min(this._start+this._config.chunkSize,this._input.size),S=w.call(S,this._start,O)),b.readAsText(S,this._config.encoding));N||this._chunkLoaded({target:{result:O}})},this._chunkLoaded=function(S){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(S.target.result)},this._chunkError=function(){this._sendError(b.error)}}function k(y){var b;h.call(this,y=y||{}),this.stream=function(w){return b=w,this._nextChunk()},this._nextChunk=function(){var w,N;if(!this._finished)return w=this._config.chunkSize,b=w?(N=b.substring(0,w),b.substring(w)):(N=b,""),this._finished=!b,this.parseChunk(N)}}function L(y){h.call(this,y=y||{});var b=[],w=!0,N=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(S){this._input=S,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){N&&b.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),b.length?this.parseChunk(b.shift()):w=!0},this._streamData=A(function(S){try{b.push(typeof S=="string"?S:S.toString(this._config.encoding)),w&&(w=!1,this._checkIsFinished(),this.parseChunk(b.shift()))}catch(O){this._streamError(O)}},this),this._streamError=A(function(S){this._streamCleanUp(),this._sendError(S)},this),this._streamEnd=A(function(){this._streamCleanUp(),N=!0,this._streamData("")},this),this._streamCleanUp=A(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function C(y){var b,w,N,S,O=Math.pow(2,53),W=-O,le=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,E=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,_=this,j=0,P=0,R=!1,H=!1,V=[],B={data:[],errors:[],meta:{}};function G(Q){return y.skipEmptyLines==="greedy"?Q.join("").trim()==="":Q.length===1&&Q[0].length===0}function $(){if(B&&N&&(q("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),N=!1),y.skipEmptyLines&&(B.data=B.data.filter(function(ke){return!G(ke)})),Y()){let ke=function(Pe,Ee){z(y.transformHeader)&&(Pe=y.transformHeader(Pe,Ee)),V.push(Pe)};var be=ke;if(B)if(Array.isArray(B.data[0])){for(var Q=0;Y()&&Q<B.data.length;Q++)B.data[Q].forEach(ke);B.data.splice(0,1)}else B.data.forEach(ke)}function pe(ke,Pe){for(var Ee=y.header?{}:[],Ce=0;Ce<ke.length;Ce++){var fe=Ce,qe=ke[Ce],qe=((je,Se)=>(Me=>(y.dynamicTypingFunction&&y.dynamicTyping[Me]===void 0&&(y.dynamicTyping[Me]=y.dynamicTypingFunction(Me)),(y.dynamicTyping[Me]||y.dynamicTyping)===!0))(je)?Se==="true"||Se==="TRUE"||Se!=="false"&&Se!=="FALSE"&&((Me=>{if(le.test(Me)&&(Me=parseFloat(Me),W<Me&&Me<O))return 1})(Se)?parseFloat(Se):E.test(Se)?new Date(Se):Se===""?null:Se):Se)(fe=y.header?Ce>=V.length?"__parsed_extra":V[Ce]:fe,qe=y.transform?y.transform(qe,fe):qe);fe==="__parsed_extra"?(Ee[fe]=Ee[fe]||[],Ee[fe].push(qe)):Ee[fe]=qe}return y.header&&(Ce>V.length?q("FieldMismatch","TooManyFields","Too many fields: expected "+V.length+" fields but parsed "+Ce,P+Pe):Ce<V.length&&q("FieldMismatch","TooFewFields","Too few fields: expected "+V.length+" fields but parsed "+Ce,P+Pe)),Ee}var te;B&&(y.header||y.dynamicTyping||y.transform)&&(te=1,!B.data.length||Array.isArray(B.data[0])?(B.data=B.data.map(pe),te=B.data.length):B.data=pe(B.data,0),y.header&&B.meta&&(B.meta.fields=V),P+=te)}function Y(){return y.header&&V.length===0}function q(Q,pe,te,be){Q={type:Q,code:pe,message:te},be!==void 0&&(Q.row=be),B.errors.push(Q)}z(y.step)&&(S=y.step,y.step=function(Q){B=Q,Y()?$():($(),B.data.length!==0&&(j+=Q.data.length,y.preview&&j>y.preview?w.abort():(B.data=B.data[0],S(B,_))))}),this.parse=function(Q,pe,te){var be=y.quoteChar||'"',be=(y.newline||(y.newline=this.guessLineEndings(Q,be)),N=!1,y.delimiter?z(y.delimiter)&&(y.delimiter=y.delimiter(Q),B.meta.delimiter=y.delimiter):((be=((ke,Pe,Ee,Ce,fe)=>{var qe,je,Se,Me;fe=fe||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var Ct=0;Ct<fe.length;Ct++){for(var lt,ht=fe[Ct],Je=0,ct=0,Ge=0,se=(Se=void 0,new g({comments:Ce,delimiter:ht,newline:Pe,preview:10}).parse(ke)),ge=0;ge<se.data.length;ge++)Ee&&G(se.data[ge])?Ge++:(lt=se.data[ge].length,ct+=lt,Se===void 0?Se=lt:0<lt&&(Je+=Math.abs(lt-Se),Se=lt));0<se.data.length&&(ct/=se.data.length-Ge),(je===void 0||Je<=je)&&(Me===void 0||Me<ct)&&1.99<ct&&(je=Je,qe=ht,Me=ct)}return{successful:!!(y.delimiter=qe),bestDelimiter:qe}})(Q,y.newline,y.skipEmptyLines,y.comments,y.delimitersToGuess)).successful?y.delimiter=be.bestDelimiter:(N=!0,y.delimiter=d.DefaultDelimiter),B.meta.delimiter=y.delimiter),D(y));return y.preview&&y.header&&be.preview++,b=Q,w=new g(be),B=w.parse(b,pe,te),$(),R?{meta:{paused:!0}}:B||{meta:{paused:!1}}},this.paused=function(){return R},this.pause=function(){R=!0,w.abort(),b=z(y.chunk)?"":b.substring(w.getCharIndex())},this.resume=function(){_.streamer._halted?(R=!1,_.streamer.parseChunk(b,!0)):setTimeout(_.resume,3)},this.aborted=function(){return H},this.abort=function(){H=!0,w.abort(),B.meta.aborted=!0,z(y.complete)&&y.complete(B),b=""},this.guessLineEndings=function(ke,be){ke=ke.substring(0,1048576);var be=new RegExp(F(be)+"([^]*?)"+F(be),"gm"),te=(ke=ke.replace(be,"")).split("\r"),be=ke.split(`
`),ke=1<be.length&&be[0].length<te[0].length;if(te.length===1||ke)return`
`;for(var Pe=0,Ee=0;Ee<te.length;Ee++)te[Ee][0]===`
`&&Pe++;return Pe>=te.length/2?`\r
`:"\r"}}function F(y){return y.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(y){var b=(y=y||{}).delimiter,w=y.newline,N=y.comments,S=y.step,O=y.preview,W=y.fastMode,le=null,E=!1,_=y.quoteChar==null?'"':y.quoteChar,j=_;if(y.escapeChar!==void 0&&(j=y.escapeChar),(typeof b!="string"||-1<d.BAD_DELIMITERS.indexOf(b))&&(b=","),N===b)throw new Error("Comment character same as delimiter");N===!0?N="#":(typeof N!="string"||-1<d.BAD_DELIMITERS.indexOf(N))&&(N=!1),w!==`
`&&w!=="\r"&&w!==`\r
`&&(w=`
`);var P=0,R=!1;this.parse=function(H,V,B){if(typeof H!="string")throw new Error("Input must be a string");var G=H.length,$=b.length,Y=w.length,q=N.length,Q=z(S),pe=[],te=[],be=[],ke=P=0;if(!H)return Je();if(W||W!==!1&&H.indexOf(_)===-1){for(var Pe=H.split(w),Ee=0;Ee<Pe.length;Ee++){if(be=Pe[Ee],P+=be.length,Ee!==Pe.length-1)P+=w.length;else if(B)return Je();if(!N||be.substring(0,q)!==N){if(Q){if(pe=[],Me(be.split(b)),ct(),R)return Je()}else Me(be.split(b));if(O&&O<=Ee)return pe=pe.slice(0,O),Je(!0)}}return Je()}for(var Ce=H.indexOf(b,P),fe=H.indexOf(w,P),qe=new RegExp(F(j)+F(_),"g"),je=H.indexOf(_,P);;)if(H[P]===_)for(je=P,P++;;){if((je=H.indexOf(_,je+1))===-1)return B||te.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:pe.length,index:P}),lt();if(je===G-1)return lt(H.substring(P,je).replace(qe,_));if(_===j&&H[je+1]===j)je++;else if(_===j||je===0||H[je-1]!==j){Ce!==-1&&Ce<je+1&&(Ce=H.indexOf(b,je+1));var Se=Ct((fe=fe!==-1&&fe<je+1?H.indexOf(w,je+1):fe)===-1?Ce:Math.min(Ce,fe));if(H.substr(je+1+Se,$)===b){be.push(H.substring(P,je).replace(qe,_)),H[P=je+1+Se+$]!==_&&(je=H.indexOf(_,P)),Ce=H.indexOf(b,P),fe=H.indexOf(w,P);break}if(Se=Ct(fe),H.substring(je+1+Se,je+1+Se+Y)===w){if(be.push(H.substring(P,je).replace(qe,_)),ht(je+1+Se+Y),Ce=H.indexOf(b,P),je=H.indexOf(_,P),Q&&(ct(),R))return Je();if(O&&pe.length>=O)return Je(!0);break}te.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:pe.length,index:P}),je++}}else if(N&&be.length===0&&H.substring(P,P+q)===N){if(fe===-1)return Je();P=fe+Y,fe=H.indexOf(w,P),Ce=H.indexOf(b,P)}else if(Ce!==-1&&(Ce<fe||fe===-1))be.push(H.substring(P,Ce)),P=Ce+$,Ce=H.indexOf(b,P);else{if(fe===-1)break;if(be.push(H.substring(P,fe)),ht(fe+Y),Q&&(ct(),R))return Je();if(O&&pe.length>=O)return Je(!0)}return lt();function Me(Ge){pe.push(Ge),ke=P}function Ct(Ge){var se=0;return se=Ge!==-1&&(Ge=H.substring(je+1,Ge))&&Ge.trim()===""?Ge.length:se}function lt(Ge){return B||(Ge===void 0&&(Ge=H.substring(P)),be.push(Ge),P=G,Me(be),Q&&ct()),Je()}function ht(Ge){P=Ge,Me(be),be=[],fe=H.indexOf(w,P)}function Je(Ge){if(y.header&&!V&&pe.length&&!E){var se=pe[0],ge=Object.create(null),ze=new Set(se);let _e=!1;for(let De=0;De<se.length;De++){let M=se[De];if(ge[M=z(y.transformHeader)?y.transformHeader(M,De):M]){let Z,oe=ge[M];for(;Z=M+"_"+oe,oe++,ze.has(Z););ze.add(Z),se[De]=Z,ge[M]++,_e=!0,(le=le===null?{}:le)[Z]=M}else ge[M]=1,se[De]=M;ze.add(M)}_e&&console.warn("Duplicate headers found and renamed."),E=!0}return{data:pe,errors:te,meta:{delimiter:b,linebreak:w,aborted:R,truncated:!!Ge,cursor:ke+(V||0),renamedHeaders:le}}}function ct(){S(Je()),pe=[],te=[]}},this.abort=function(){R=!0},this.getCharIndex=function(){return P}}function u(y){var b=y.data,w=i[b.workerId],N=!1;if(b.error)w.userError(b.error,b.file);else if(b.results&&b.results.data){var S={abort:function(){N=!0,v(b.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:I,resume:I};if(z(w.userStep)){for(var O=0;O<b.results.data.length&&(w.userStep({data:b.results.data[O],errors:b.results.errors,meta:b.results.meta},S),!N);O++);delete b.results}else z(w.userChunk)&&(w.userChunk(b.results,S,b.file),delete b.results)}b.finished&&!N&&v(b.workerId,b.results)}function v(y,b){var w=i[y];z(w.userComplete)&&w.userComplete(b),w.terminate(),delete i[y]}function I(){throw new Error("Not implemented.")}function D(y){if(typeof y!="object"||y===null)return y;var b,w=Array.isArray(y)?[]:{};for(b in y)w[b]=D(y[b]);return w}function A(y,b){return function(){y.apply(b,arguments)}}function z(y){return typeof y=="function"}return d.parse=function(y,b){var w=(b=b||{}).dynamicTyping||!1;if(z(w)&&(b.dynamicTypingFunction=w,w={}),b.dynamicTyping=w,b.transform=!!z(b.transform)&&b.transform,!b.worker||!d.WORKERS_SUPPORTED)return w=null,d.NODE_STREAM_INPUT,typeof y=="string"?(y=(N=>N.charCodeAt(0)!==65279?N:N.slice(1))(y),w=new(b.download?f:k)(b)):y.readable===!0&&z(y.read)&&z(y.on)?w=new L(b):(r.File&&y instanceof File||y instanceof Object)&&(w=new p(b)),w.stream(y);(w=(()=>{var N;return!!d.WORKERS_SUPPORTED&&(N=(()=>{var S=r.URL||r.webkitURL||null,O=s.toString();return d.BLOB_URL||(d.BLOB_URL=S.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",O,")();"],{type:"text/javascript"})))})(),(N=new r.Worker(N)).onmessage=u,N.id=c++,i[N.id]=N)})()).userStep=b.step,w.userChunk=b.chunk,w.userComplete=b.complete,w.userError=b.error,b.step=z(b.step),b.chunk=z(b.chunk),b.complete=z(b.complete),b.error=z(b.error),delete b.worker,w.postMessage({input:y,config:b,workerId:w.id})},d.unparse=function(y,b){var w=!1,N=!0,S=",",O=`\r
`,W='"',le=W+W,E=!1,_=null,j=!1,P=((()=>{if(typeof b=="object"){if(typeof b.delimiter!="string"||d.BAD_DELIMITERS.filter(function(V){return b.delimiter.indexOf(V)!==-1}).length||(S=b.delimiter),typeof b.quotes!="boolean"&&typeof b.quotes!="function"&&!Array.isArray(b.quotes)||(w=b.quotes),typeof b.skipEmptyLines!="boolean"&&typeof b.skipEmptyLines!="string"||(E=b.skipEmptyLines),typeof b.newline=="string"&&(O=b.newline),typeof b.quoteChar=="string"&&(W=b.quoteChar),typeof b.header=="boolean"&&(N=b.header),Array.isArray(b.columns)){if(b.columns.length===0)throw new Error("Option columns is empty");_=b.columns}b.escapeChar!==void 0&&(le=b.escapeChar+W),b.escapeFormulae instanceof RegExp?j=b.escapeFormulae:typeof b.escapeFormulae=="boolean"&&b.escapeFormulae&&(j=/^[=+\-@\t\r].*$/)}})(),new RegExp(F(W),"g"));if(typeof y=="string"&&(y=JSON.parse(y)),Array.isArray(y)){if(!y.length||Array.isArray(y[0]))return R(null,y,E);if(typeof y[0]=="object")return R(_||Object.keys(y[0]),y,E)}else if(typeof y=="object")return typeof y.data=="string"&&(y.data=JSON.parse(y.data)),Array.isArray(y.data)&&(y.fields||(y.fields=y.meta&&y.meta.fields||_),y.fields||(y.fields=Array.isArray(y.data[0])?y.fields:typeof y.data[0]=="object"?Object.keys(y.data[0]):[]),Array.isArray(y.data[0])||typeof y.data[0]=="object"||(y.data=[y.data])),R(y.fields||[],y.data||[],E);throw new Error("Unable to serialize unrecognized input");function R(V,B,G){var $="",Y=(typeof V=="string"&&(V=JSON.parse(V)),typeof B=="string"&&(B=JSON.parse(B)),Array.isArray(V)&&0<V.length),q=!Array.isArray(B[0]);if(Y&&N){for(var Q=0;Q<V.length;Q++)0<Q&&($+=S),$+=H(V[Q],Q);0<B.length&&($+=O)}for(var pe=0;pe<B.length;pe++){var te=(Y?V:B[pe]).length,be=!1,ke=Y?Object.keys(B[pe]).length===0:B[pe].length===0;if(G&&!Y&&(be=G==="greedy"?B[pe].join("").trim()==="":B[pe].length===1&&B[pe][0].length===0),G==="greedy"&&Y){for(var Pe=[],Ee=0;Ee<te;Ee++){var Ce=q?V[Ee]:Ee;Pe.push(B[pe][Ce])}be=Pe.join("").trim()===""}if(!be){for(var fe=0;fe<te;fe++){0<fe&&!ke&&($+=S);var qe=Y&&q?V[fe]:fe;$+=H(B[pe][qe],fe)}pe<B.length-1&&(!G||0<te&&!ke)&&($+=O)}}return $}function H(V,B){var G,$;return V==null?"":V.constructor===Date?JSON.stringify(V).slice(1,25):($=!1,j&&typeof V=="string"&&j.test(V)&&(V="'"+V,$=!0),G=V.toString().replace(P,le),($=$||w===!0||typeof w=="function"&&w(V,B)||Array.isArray(w)&&w[B]||((Y,q)=>{for(var Q=0;Q<q.length;Q++)if(-1<Y.indexOf(q[Q]))return!0;return!1})(G,d.BAD_DELIMITERS)||-1<G.indexOf(S)||G.charAt(0)===" "||G.charAt(G.length-1)===" ")?W+G+W:G)}},d.RECORD_SEP=String.fromCharCode(30),d.UNIT_SEP=String.fromCharCode(31),d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!a&&!!r.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=g,d.ParserHandle=C,d.NetworkStreamer=f,d.FileStreamer=p,d.StringStreamer=k,d.ReadableStreamStreamer=L,r.jQuery&&((l=r.jQuery).fn.parse=function(y){var b=y.config||{},w=[];return this.each(function(O){if(!(l(this).prop("tagName").toUpperCase()==="INPUT"&&l(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var W=0;W<this.files.length;W++)w.push({file:this.files[W],inputElem:this,instanceConfig:l.extend({},b)})}),N(),this;function N(){if(w.length===0)z(y.complete)&&y.complete();else{var O,W,le,E,_=w[0];if(z(y.before)){var j=y.before(_.file,_.inputElem);if(typeof j=="object"){if(j.action==="abort")return O="AbortError",W=_.file,le=_.inputElem,E=j.reason,void(z(y.error)&&y.error({name:O},W,le,E));if(j.action==="skip")return void S();typeof j.config=="object"&&(_.instanceConfig=l.extend(_.instanceConfig,j.config))}else if(j==="skip")return void S()}var P=_.instanceConfig.complete;_.instanceConfig.complete=function(R){z(P)&&P(R,_.file,_.inputElem),S()},d.parse(_.file,_.instanceConfig)}}function S(){w.splice(0,1),N()}}),o&&(r.onmessage=function(y){y=y.data,d.WORKER_ID===void 0&&y&&(d.WORKER_ID=y.workerId),typeof y.input=="string"?r.postMessage({workerId:d.WORKER_ID,results:d.parse(y.input,y.config),finished:!0}):(r.File&&y.input instanceof File||y.input instanceof Object)&&(y=d.parse(y.input,y.config))&&r.postMessage({workerId:d.WORKER_ID,results:y,finished:!0})}),(f.prototype=Object.create(h.prototype)).constructor=f,(p.prototype=Object.create(h.prototype)).constructor=p,(k.prototype=Object.create(k.prototype)).constructor=k,(L.prototype=Object.create(h.prototype)).constructor=L,d})})(_h);var U0=_h.exports;const Us=Uu(U0),Sn=e=>e.toLowerCase().trim().replace(/s$/,"").replace(/es$/,"").replace(/ies$/,"y").replace(/[^a-z0-9]/g,""),Ka=(e,t)=>{const s=Sn(e),r=Sn(t);if(s===r)return 1;if(s.includes(r)||r.includes(s))return .9;const l=s.length>r.length?s:r;if(s.length>r.length,l.length===0)return 1;const a=[];for(let o=0;o<=s.length;o++){let i=o;for(let c=0;c<=r.length;c++)if(o===0)a[c]=c;else if(c>0){let d=a[c-1];s.charAt(o-1)!==r.charAt(c-1)&&(d=Math.min(Math.min(d,i),a[c])+1),a[c-1]=i,i=d}o>0&&(a[r.length]=i)}return(l.length-a[r.length])/l.length},yo=(e,t)=>{const s=new Blob([e],{type:"text/csv"}),r=URL.createObjectURL(s),l=document.createElement("a");l.href=r,l.download=t,l.click(),URL.revokeObjectURL(r)},B0=e=>{const t=e.toLowerCase();return["lettuce","cucumber","tomato","onion","garlic","carrot","potato","cauliflower","broccoli","spinach","pepper","celery","mushroom","zucchini","squash","asparagus","lemon","lime","ginger","cilantro","parsley"].some(s=>t.includes(s))?"Produce":["chicken","beef","pork","salmon","fish","shrimp","turkey","lamb","bacon","sausage","steak","thigh","breast"].some(s=>t.includes(s))?"Meat & Seafood":["milk","cheese","butter","egg","cream","yogurt"].some(s=>t.includes(s))?"Dairy & Eggs":["salt","pepper","spice","cumin","paprika","oregano","thyme","cinnamon","cayenne","curry"].some(s=>t.includes(s))?"Spices & Seasonings":["rice","pasta","flour","sugar","oil","vinegar","sauce","honey","bread","stock","broth"].some(s=>t.includes(s))?"Pantry & Dry Goods":"Other"},W0=e=>{yo(Us.unparse(e,{columns:["name","persons","address","email","phone","notes","mealsPerWeek","status"]}),"clients.csv")},Th=e=>{yo(Us.unparse(e.map(t=>({name:t.name,cost:t.cost,unit:t.unit,source:t.source,section:t.section})),{columns:["name","cost","unit","source","section"]}),"ingredients.csv")},Lh=e=>{const t=[];Object.entries(e).forEach(([s,r])=>{r.forEach(l=>{var a;((a=l.ingredients)==null?void 0:a.length)>0?l.ingredients.forEach(o=>{t.push({"Recipe Name":l.name,Category:s,Instructions:l.instructions||"",Ingredient:o.name,"Portion Size (oz)":o.quantity,cost:o.cost||"",source:o.source||"",section:o.section||"Other"})}):t.push({"Recipe Name":l.name,Category:s,Instructions:l.instructions||"",Ingredient:"","Portion Size (oz)":"",cost:"",source:"",section:""})})}),yo(Us.unparse(t,{columns:["Recipe Name","Category","Instructions","Ingredient","Portion Size (oz)","cost","source","section"]}),"recipes.csv")},Yn=e=>e===!0||e==="true"||e==="yes"||e==="Yes"||e==="YES"||e==="1",Jl=e=>{if(!e)return 0;const t=String(e).replace(/[$,]/g,"").trim();return parseFloat(t)||0},Oh=(e,t,s)=>{Us.parse(e,{header:!0,skipEmptyLines:!0,complete:r=>{const l=r.meta.fields||[],a=l.includes("subscriptionId")||l.includes("subscriptionDisplayName");if(l.includes("Name")||l.includes("name"),l.includes("Display Name")||l.includes("displayName"),a){const o={};let i=null;r.data.forEach(d=>{if(d.subscriptionId||d.subscriptionDisplayName){const h=d.subscriptionId||Date.now().toString()+Math.random();i={subscriptionId:h,displayName:d.subscriptionDisplayName||"",portions:parseInt(d.portions)||1,mealsPerWeek:parseInt(d.mealsPerWeek)||0,frequency:(d.frequency||"weekly").toLowerCase(),status:(d.status||"active").toLowerCase(),zone:(d.zone||"").toUpperCase(),deliveryDay:d.deliveryDay||"",pickup:Yn(d.pickup),planPrice:Jl(d.planPrice),serviceFee:Jl(d.serviceFee),prepayDiscount:Yn(d.prepayDiscount),newClientFeePaid:Yn(d.newClientFeePaid),paysOwnGroceries:Yn(d.paysOwnGroceries),billingNotes:d.billingNotes||"",accessCode:d.accessCode||"",honeyBookLink:d.honeyBookLink||"",contacts:[]},o[h]=i}i&&(d.contactFullName||d.email||d.address)&&i.contacts.push({fullName:d.contactFullName||"",displayName:d.contactDisplayName||"",email:d.email||"",phone:d.phone||"",address:d.address||""})});const c=Object.values(o).filter(d=>d.displayName||d.contacts.length>0);t(c)}else{const o=r.data.filter(i=>i.Name||i.name||i["Display Name"]||i.displayName).map(i=>{const c=i.Name||i.name||"",d=i["Display Name"]||i.displayName||c,h=parseInt(i.Portions||i.portions||i.persons)||1,f=parseInt(i.Meals||i.mealsPerWeek||i.meals)||0,p=(i.zone||i.Zone||"").toUpperCase();return{subscriptionId:Date.now().toString()+Math.random(),displayName:d,name:c,portions:h,mealsPerWeek:f,frequency:(i.frequency||i.Frequency||"weekly").toLowerCase(),status:(i.status||i.Status||"active").toLowerCase(),zone:p==="UNASSIGNED"?"":p,deliveryDay:i.deliveryDay||i.DeliveryDay||"",pickup:Yn(i.pickup||i.Pickup),planPrice:Jl(i.planPrice||i.PlanPrice),serviceFee:Jl(i.serviceFee||i.ServiceFee),prepayDiscount:Yn(i.prepayDiscount||i.PrepayDiscount),newClientFeePaid:Yn(i.newClientFeePaid||i.NewClientFeePaid),paysOwnGroceries:Yn(i.paysOwnGroceries||i.PaysOwnGroceries),billingNotes:i.billingNotes||i.BillingNotes||i.notes||"",accessCode:i.accessCode||i.AccessCode||"",honeyBookLink:i.honeyBookLink||i.HoneyBookLink||"",contacts:[{fullName:c,displayName:"",email:i.Email||i.email||"",phone:i.Phone||i.phone||"",address:i.Address||i.address||""}]}});t(o)}},error:s})},H0=(e,t,s)=>{Us.parse(e,{header:!0,complete:r=>{const l=r.data.filter(a=>a.name).map(a=>({id:Date.now()+Math.random(),name:a.name||"",cost:a.cost||"",unit:a.unit||"oz",source:a.source||"",section:a.section||"Other"}));t(l)},error:s})},V0=(e,t,s)=>{Us.parse(e,{header:!0,complete:r=>{const l={protein:[],veg:[],starch:[],sauces:[],breakfast:[],soups:[]},a={},o=[];r.data.forEach(i=>{if(!i["Recipe Name"])return;const c=i["Recipe Name"],d=(i.Category||"protein").toLowerCase();if(a[c]||(a[c]={name:c,category:d,instructions:i.Instructions||"",ingredients:[]}),i.Ingredient){const h={name:i.Ingredient,quantity:i["Portion Size (oz)"]||"",unit:"oz",cost:i.cost||"",source:i.source||"",section:i.section||"Other"};a[c].ingredients.push(h),o.push(h)}}),Object.values(a).forEach(i=>{l[i.category]&&l[i.category].push({name:i.name,instructions:i.instructions,ingredients:i.ingredients})}),t(l,o)},error:s})};function q0(){const[e,t]=x.useState(z0),[s,r]=x.useState([]),[l,a]=x.useState([]),[o,i]=x.useState(new Date().toISOString().split("T")[0]),[c,d]=x.useState(_0),[h,f]=x.useState(Eh),[p,k]=x.useState(qa),[L,C]=x.useState(Ga),[F,g]=x.useState([]),[u,v]=x.useState(Ya),[I,D]=x.useState(null),[A,z]=x.useState(null),[y,b]=x.useState(null),[w,N]=x.useState([]),[S,O]=x.useState({}),[W,le]=x.useState([]),[E,_]=x.useState({}),[j,P]=x.useState([]),[R,H]=x.useState(dr),[V,B]=x.useState([]),[G,$]=x.useState({}),[Y,q]=x.useState([]),[Q,pe]=x.useState({}),[te,be]=x.useState([]),[ke,Pe]=x.useState({routeStartAddress:""}),[Ee,Ce]=x.useState([]),[fe,qe]=x.useState([]),[je,Se]=x.useState({}),[Me,Ct]=x.useState(xl());x.useEffect(()=>{const K=localStorage.getItem("goldfinchChefData");if(K)try{const ee=JSON.parse(K);ee.recipes&&t(ee.recipes),ee.clients&&d(ee.clients),ee.menuItems&&r(ee.menuItems),ee.masterIngredients&&g(ee.masterIngredients),ee.orderHistory&&le(ee.orderHistory),ee.weeklyTasks&&_(ee.weeklyTasks),ee.drivers&&P(ee.drivers),ee.deliveryLog&&B(ee.deliveryLog),ee.bagReminders&&$(ee.bagReminders),ee.readyForDelivery&&q(ee.readyForDelivery),ee.clientPortalData&&pe(ee.clientPortalData),ee.blockedDates&&be(ee.blockedDates),ee.adminSettings&&Pe(ee.adminSettings),ee.customTasks&&Ce(ee.customTasks),ee.groceryBills&&qe(ee.groceryBills),ee.weeks&&Se(ee.weeks)}catch(ee){console.error("Error loading saved data:",ee)}},[]),x.useEffect(()=>{const K={recipes:e,clients:c,menuItems:s,masterIngredients:F,orderHistory:W,weeklyTasks:E,drivers:j,deliveryLog:V,bagReminders:G,readyForDelivery:Y,clientPortalData:Q,blockedDates:te,adminSettings:ke,customTasks:Ee,groceryBills:fe,weeks:je,lastSaved:new Date().toISOString()};localStorage.setItem("goldfinchChefData",JSON.stringify(K))},[e,c,s,F,W,E,j,V,G,Y,Q,te,ke,Ee,fe,je]);const lt=K=>!K||K.length<2?[]:F.filter(ee=>{const ae=Ka(K,ee.name);return ae>.7&&ae<1}),ht=K=>F.find(ee=>Sn(ee.name)===Sn(K)),Je=()=>{const K=new Set;return F.forEach(ee=>{ee.source&&ee.source.trim()&&K.add(ee.source.trim())}),Array.from(K).sort()},ct=K=>{if(!K.name)return;const ee=ht(K.name);if(ee){(K.cost||K.source||K.section!=="Other")&&g(ae=>ae.map(ue=>ue.id===ee.id?{...ue,cost:K.cost||ue.cost,source:K.source||ue.source,section:K.section!=="Other"?K.section:ue.section}:ue));return}g(ae=>[...ae,{id:Date.now()+Math.random(),name:K.name,cost:K.cost||"",unit:K.unit||"oz",source:K.source||"",section:K.section||"Other"}])},Ge=(K,ee)=>{const ae=ht(K);return ae&&ee?(g(ue=>ue.map(Le=>Le.id===ae.id?{...Le,cost:ee}:Le)),!0):!1},se=()=>{let K=0,ee=0;const ae={...e};return Object.keys(ae).forEach(ue=>{ae[ue]=ae[ue].map(Le=>{const at=Le.ingredients.map(ot=>{const et=ht(ot.name);if(et){const un={...ot};return et.cost&&et.cost!==ot.cost&&(un.cost=et.cost,ee++),et.source&&et.source!==ot.source&&(un.source=et.source),et.section&&et.section!=="Other"&&et.section!==ot.section&&(un.section=et.section),et.unit&&et.unit!==ot.unit&&(un.unit=et.unit),un}else if(ot.name)return K++,ot;return ot});return{...Le,ingredients:at}})}),Object.values(ae).forEach(ue=>{ue.forEach(Le=>{Le.ingredients.forEach(at=>{at.name&&!ht(at.name)&&ct(at)})})}),t(ae),{ingredientsAdded:K,costsUpdated:ee}},ge=(K,ee)=>{const ae=F.find(at=>at.id===K),ue=F.find(at=>at.id===ee);if(!ae||!ue)return;const Le={...e};Object.keys(Le).forEach(at=>{Le[at]=Le[at].map(ot=>({...ot,ingredients:ot.ingredients.map(et=>Sn(et.name)===Sn(ue.name)?{...et,name:ae.name}:et)}))}),t(Le),g(at=>at.filter(ot=>ot.id!==ee)),N(at=>at.filter(ot=>ot.ing1.id!==ee&&ot.ing2.id!==ee)),alert(`Merged "${ue.name}" into "${ae.name}"`)},ze=()=>{const K=[],ee=new Set;F.forEach((ae,ue)=>{F.forEach((Le,at)=>{if(ue>=at)return;const ot=[ae.id,Le.id].sort().join("-");if(ee.has(ot))return;ee.add(ot);const et=Ka(ae.name,Le.name);et>.7&&et<1&&K.push({ing1:ae,ing2:Le,similarity:et})})}),N(K),K.length===0&&alert("No duplicate ingredients found!")},_e=K=>K!=null&&K.ingredients?K.ingredients.reduce((ee,ae)=>{const ue=ht(ae.name),Le=parseFloat((ue==null?void 0:ue.cost)||ae.cost||0),at=parseFloat(ae.quantity||0);return ee+Le*at},0):0,De=()=>{const K={};let ee=0;return Object.entries(e).forEach(([ae,ue])=>{K[ae]=ue.length,ee+=ue.length}),K.total=ee,K},M=x.useCallback(K=>{if(je[K])return je[K];const ee=Jn(K);return Se(ae=>({...ae,[K]:ee})),ee},[je]),Z=x.useCallback(()=>M(Me),[Me,M]),oe=x.useCallback(K=>{const ee=je[K]||Jn(K);if(ee.status==="locked")return ee;const ae=Rh(ee,s,c);return Se(ue=>({...ue,[K]:ae})),ae},[je,s,c]),J=x.useCallback(K=>{const ee=je[K];if(!ee||ee.status!=="locked")return null;const ae=$0(ee);return Se(ue=>({...ue,[K]:ae})),ae},[je]),Ae=x.useCallback((K,ee)=>{Se(ae=>{const ue=ae[K]||Jn(K);return{...ae,[K]:{...ue,...ee}}})},[]),xe=x.useCallback((K,ee,ae)=>{Se(ue=>{const Le=ue[K]||Jn(K);return{...ue,[K]:{...Le,kdsStatus:{...Le.kdsStatus,[ee]:{status:ae,completedAt:ae==="complete"?new Date().toISOString():null}}}}})},[]),Oe=x.useCallback((K,ee)=>{Se(ae=>{const ue=ae[K]||Jn(K);return{...ae,[K]:{...ue,readyForDelivery:[...ue.readyForDelivery,...ee]}}})},[]),ye=x.useCallback((K,ee)=>{Se(ae=>{const ue=ae[K]||Jn(K);return{...ae,[K]:{...ue,deliveryLog:[...ue.deliveryLog,ee]}}})},[]),$e=x.useCallback((K,ee)=>{Se(ae=>{const ue=ae[K];return ue?{...ae,[K]:{...ue,readyForDelivery:ue.readyForDelivery.filter(Le=>Le.id!==ee)}}:ae})},[]),Be=x.useCallback((K,ee)=>{Se(ae=>{const ue=ae[K]||Jn(K);return{...ae,[K]:{...ue,groceryBills:[...ue.groceryBills,ee]}}})},[]),Te=x.useCallback(K=>{const ee=je[K];if(!ee||ee.status!=="locked")return!1;const ae=xl();return K<ae},[je]),Ie=x.useCallback(()=>Object.keys(je).sort().reverse(),[je]);return{recipes:e,setRecipes:t,menuItems:s,setMenuItems:r,selectedClients:l,setSelectedClients:a,menuDate:o,setMenuDate:i,clients:c,setClients:d,newClient:h,setNewClient:f,newRecipe:p,setNewRecipe:k,newMenuItem:L,setNewMenuItem:C,masterIngredients:F,setMasterIngredients:g,newIngredient:u,setNewIngredient:v,editingRecipe:I,setEditingRecipe:D,editingIngredientId:A,setEditingIngredientId:z,editingIngredientData:y,setEditingIngredientData:b,duplicateWarnings:w,setDuplicateWarnings:N,completedDishes:S,setCompletedDishes:O,orderHistory:W,setOrderHistory:le,weeklyTasks:E,setWeeklyTasks:_,drivers:j,setDrivers:P,newDriver:R,setNewDriver:H,deliveryLog:V,setDeliveryLog:B,bagReminders:G,setBagReminders:$,readyForDelivery:Y,setReadyForDelivery:q,clientPortalData:Q,setClientPortalData:pe,blockedDates:te,setBlockedDates:be,adminSettings:ke,setAdminSettings:Pe,customTasks:Ee,setCustomTasks:Ce,groceryBills:fe,setGroceryBills:qe,weeks:je,setWeeks:Se,selectedWeekId:Me,setSelectedWeekId:Ct,findSimilarIngredients:lt,findExactMatch:ht,addToMasterIngredients:ct,updateMasterIngredientCost:Ge,syncRecipeIngredientsFromMaster:se,getUniqueVendors:Je,mergeIngredients:ge,scanForDuplicates:ze,getRecipeCost:_e,getRecipeCounts:De,getOrCreateWeek:M,getCurrentWeek:Z,lockWeekAndSnapshot:oe,unlockWeekById:J,updateWeekData:Ae,updateWeekKdsStatus:xe,addReadyForDeliveryToWeek:Oe,addDeliveryLogToWeek:ye,removeReadyForDeliveryFromWeek:$e,addGroceryBillToWeek:Be,isWeekReadOnly:Te,getWeekIds:Ie}}function G0({client:e,date:t,menuItems:s}){const r=new Date(t+"T12:00:00").toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}).toUpperCase(),l=[];s.forEach(o=>{const i={protein:o.protein,sides:[o.veg,o.starch].filter(Boolean)};(i.protein||i.sides.length>0)&&l.push(i),o.extras&&o.extras.forEach(c=>{l.push({protein:c,sides:[],isExtra:!0})})});const a=e.displayName||e.name;return n.jsxs("div",{className:"overflow-hidden shadow-lg rounded-lg",style:{backgroundColor:"#fff"},children:[n.jsxs("div",{className:"relative px-4 pt-6 pb-8",style:{backgroundColor:"#f9f9ed",backgroundImage:"url(/pattern4.png)",backgroundSize:"cover",backgroundPosition:"center"},children:[n.jsx("p",{className:"text-center mb-2",style:{fontFamily:'"Glacial Indifference", sans-serif',fontSize:"12px",letterSpacing:"0.3em",color:"#5a5a5a"},children:"GOLDFINCH CHEF SERVICES"}),n.jsxs("h2",{className:"text-center mb-3",style:{color:"#3d59ab",fontFamily:'"Poller One", cursive',fontSize:"18px",textTransform:"uppercase",letterSpacing:"0.05em",textDecoration:"underline",textDecorationColor:"#3d59ab",textUnderlineOffset:"4px"},children:[a,"'s Menu"]}),n.jsx("p",{className:"text-center mb-4",style:{color:"#5a5a5a",fontFamily:'"Beth Ellen", cursive',fontSize:"12px"},children:"here's what to expect on your plate!"}),n.jsxs("div",{className:"flex items-center justify-center gap-3",children:[n.jsx("img",{src:"/goldfinch5.png",alt:"Goldfinch",className:"w-12 h-12 object-contain"}),n.jsx("p",{style:{fontFamily:'"Glacial Indifference", sans-serif',fontSize:"14px",letterSpacing:"0.2em",color:"#5a5a5a"},children:r})]})]}),n.jsx("div",{className:"px-6 py-8",style:{backgroundColor:"#d9a87a"},children:n.jsxs("div",{className:"space-y-8",children:[l.map((o,i)=>n.jsxs("div",{className:"text-center",children:[o.protein&&n.jsx("h3",{style:{color:"#ffffff",fontFamily:'"Glacial Indifference", sans-serif',fontSize:"1.1rem",fontWeight:"bold",letterSpacing:"0.15em",textTransform:"uppercase",marginBottom:o.sides.length>0?"0.5rem":0},children:o.protein}),o.sides.length>0&&n.jsx("p",{style:{color:"#f5e6d3",fontFamily:'"Glacial Indifference", sans-serif',fontSize:"0.85rem",letterSpacing:"0.1em",textTransform:"uppercase"},children:o.sides.join(", ")})]},i)),l.length===0&&n.jsx("p",{className:"text-center text-white/70 italic",children:"No menu items yet"})]})}),n.jsxs("div",{className:"relative px-6 py-6",style:{backgroundColor:"#f9f9ed",fontFamily:'"Glacial Indifference", sans-serif'},children:[n.jsx("h4",{className:"mb-3",style:{color:"#3d59ab",fontFamily:'"Poller One", cursive',fontSize:"1.1rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Get Ready!"}),n.jsx("p",{className:"mb-4 pr-20",style:{color:"#5a5a5a",fontSize:"0.9rem",lineHeight:"1.5"},children:"Remember to put out bags, containers, and ice packs. And get excited  great food is on the way!"}),n.jsx("img",{src:"/stemflower.png",alt:"",className:"absolute right-4 bottom-4 h-20 object-contain"})]})]})}function Mh({menuDate:e,setMenuDate:t,clients:s,allClients:r,selectedClients:l,setSelectedClients:a,recipes:o,newMenuItem:i,setNewMenuItem:c,menuItems:d,setMenuItems:h,addMenuItem:f,clearMenu:p,deleteMenuItem:k,getOrdersByClient:L,clientPortalData:C={},weeklyTasks:F={},weeks:g={},selectedWeekId:u,setSelectedWeekId:v,lockWeekAndSnapshot:I,unlockWeekById:D}){const[A,z]=x.useState(null);x.useState(null);const[y,b]=x.useState(!0),w=(r||s||[]).filter($=>$.status==="active"),S=(()=>{const $=new Date,Y=$.getDay(),q=$.getDate()-Y+(Y===0?-6:1);return $.setDate(q),$.toISOString().split("T")[0]})();F[S];const O=$=>{const Y=$.displayName||$.name,q=d.filter(be=>be.clientName===Y),Q=q.length>0,pe=Q&&q.every(be=>be.approved);let te=null;if($.billDueDate){const be=new Date($.billDueDate+"T12:00:00"),Pe=Math.floor((new Date-be)/(1e3*60*60*24));Pe>=1&&(te=`Invoice overdue (${Pe} day${Pe>1?"s":""})`)}return(!$.deliveryDates||$.deliveryDates.length===0)&&(te=te||"Delivery dates not set"),Q?pe?{status:"approved",icon:Ue,color:"text-green-600",bg:"bg-green-50",warning:te}:te?{status:"warning",icon:kt,color:"text-amber-600",bg:"bg-amber-50",warning:te}:{status:"pending",icon:ci,color:"text-blue-600",bg:"bg-blue-50",warning:te}:{status:"none",icon:ci,color:"text-gray-400",bg:"bg-gray-50",warning:te}},W=()=>w.filter($=>d.some(q=>{const Q=$.displayName||$.name;return q.clientName===Q})),le=$=>{h(Y=>Y.map(q=>q.clientName===$?{...q,approved:!0}:q))},E=()=>{const $=w.filter(Y=>{Y.displayName||Y.name;const q=O(Y);return q.status==="pending"&&!q.warning});if($.length===0){alert("No menus ready to approve");return}$.forEach(Y=>{const q=Y.displayName||Y.name;le(q)}),alert(`Approved ${$.length} menu(s)`)},_=$=>{window.confirm(`Remove all menu items for ${$}?`)&&(h(Y=>Y.filter(q=>q.clientName!==$)),z(null))},j=$=>d.filter(Y=>Y.clientName===$),P=$=>{c(Y=>({...Y,extras:Y.extras.includes($)?Y.extras.filter(q=>q!==$):[...Y.extras,$]}))},R=[...o.sauces||[],...o.breakfast||[],...o.soups||[]],H=L(),V=W(),B={approved:w.filter($=>O($).status==="approved").length,pending:w.filter($=>O($).status==="pending").length,warning:w.filter($=>O($).warning).length,noMenu:w.filter($=>O($).status==="none").length},G=w.filter($=>$.chefChoice===!1);return n.jsxs("div",{className:"space-y-6",children:[g&&u&&v&&n.jsx(zh,{selectedWeekId:u,setSelectedWeekId:v,weeks:g,onLockWeek:I,onUnlockWeek:D}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Delivering This Week"}),n.jsxs("p",{className:"text-gray-600",children:[V.length," clients with menus"]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[n.jsxs("span",{className:"flex items-center gap-1 text-green-600",children:[n.jsx(Ue,{size:16})," ",B.approved," approved"]}),n.jsxs("span",{className:"flex items-center gap-1 text-blue-600",children:[n.jsx(ci,{size:16})," ",B.pending," pending"]}),B.warning>0&&n.jsxs("span",{className:"flex items-center gap-1 text-amber-600",children:[n.jsx(kt,{size:16})," ",B.warning," warnings"]})]})]}),B.pending>0&&n.jsxs("button",{onClick:E,className:"px-4 py-2 rounded-lg text-white font-medium",style:{backgroundColor:"#10b981"},children:["Approve All Ready (",B.pending-B.warning,")"]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Build Menu"}),n.jsxs("button",{onClick:()=>b(!y),className:"flex items-center gap-2 px-3 py-1 rounded-lg text-sm text-gray-600 hover:bg-gray-100",children:[y?n.jsx(dd,{size:16}):n.jsx(cd,{size:16}),y?"Collapse":"Expand"]})]}),y&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#423d3c"},children:"Menu Date"}),n.jsx("input",{type:"date",value:e,onChange:$=>t($.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#423d3c"},children:"Select Clients"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:w.map(($,Y)=>n.jsxs("button",{onClick:()=>a(q=>q.includes($.name)?q.filter(Q=>Q!==$.name):[...q,$.name]),className:`px-3 py-1 rounded-full border-2 transition-colors ${l.includes($.name)?"text-white":"bg-white"}`,style:l.includes($.name)?{backgroundColor:"#3d59ab",borderColor:"#3d59ab"}:{borderColor:"#ebb582",color:"#423d3c"},children:[$.displayName||$.name," (",$.portions||$.persons||1,"p)"]},Y))})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:["protein","veg","starch"].map($=>n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2 capitalize",style:{color:"#423d3c"},children:$==="veg"?"Vegetable":$}),n.jsxs("select",{value:i[$],onChange:Y=>c({...i,[$]:Y.target.value}),className:"w-full p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:[n.jsx("option",{value:"",children:"Select..."}),(o[$]||[]).map((Y,q)=>n.jsx("option",{value:Y.name,children:Y.name},q))]})]},$))}),R.length>0&&n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#423d3c"},children:"Extras (Sauces, Breakfast, Soups)"}),n.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(($,Y)=>n.jsx("button",{onClick:()=>P($.name),className:`px-3 py-1 rounded-full border-2 transition-colors text-sm ${i.extras.includes($.name)?"text-white":"bg-white"}`,style:i.extras.includes($.name)?{backgroundColor:"#ebb582",borderColor:"#ebb582"}:{borderColor:"#ebb582",color:"#423d3c"},children:$.name},Y))})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-6 py-2 rounded-lg hover:opacity-90",style:{backgroundColor:"#ffd700",color:"#423d3c"},children:[n.jsx(vn,{size:20}),"Add to Menu"]}),d.length>0&&n.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-6 py-2 rounded-lg bg-red-100 text-red-700",children:[n.jsx(rn,{size:20}),"Clear All"]})]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:"All Clients"}),n.jsx("div",{className:"space-y-2",children:w.map(($,Y)=>{const q=$.displayName||$.name,Q=O($),pe=Q.icon,te=j(q);return n.jsxs("div",{className:`border-2 rounded-lg p-3 flex items-center justify-between ${Q.bg}`,style:{borderColor:Q.status==="approved"?"#22c55e":"#ebb582"},children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(pe,{size:20,className:Q.color}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:q}),n.jsxs("span",{className:"text-sm text-gray-500",children:["(",$.portions||1,"p)"]}),$.chefChoice===!1&&n.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-purple-100 text-purple-700",children:"Client Picks"})]}),Q.warning&&n.jsxs("p",{className:"text-xs text-amber-600 flex items-center gap-1",children:[n.jsx(kt,{size:12})," ",Q.warning]}),te.length>0&&n.jsxs("p",{className:"text-xs text-gray-500",children:[te.length," item(s) "," ",te[0].protein||te[0].veg||"Menu",te.length>1&&` +${te.length-1} more`]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:te.length>0&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>z($),className:"flex items-center gap-1 px-3 py-1 rounded text-sm bg-white border",style:{borderColor:"#ebb582"},children:[n.jsx(kh,{size:14})," Preview"]}),Q.status!=="approved"&&n.jsxs("button",{onClick:()=>le(q),className:"flex items-center gap-1 px-3 py-1 rounded text-sm text-white",style:{backgroundColor:"#22c55e"},children:[n.jsx(Ue,{size:14})," Approve"]})]})})]},Y)})})]}),G.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:[n.jsx(gs,{size:20,className:"inline mr-2"}),"Client Ingredient Selections"]}),n.jsx("p",{className:"text-gray-600 mb-4",children:"These clients pick their own ingredients. Review their selections and pair with meals."}),n.jsx("div",{className:"space-y-3",children:G.map(($,Y)=>{const q=$.displayName||$.name,Q=C[q],pe=(Q==null?void 0:Q.selectedIngredients)||[];return n.jsx("div",{className:"border-2 rounded-lg p-4",style:{borderColor:"#ebb582"},children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-medium",children:q}),pe.length>0?n.jsxs("p",{className:"text-sm text-gray-600",children:["Selected: ",pe.join(", ")]}):n.jsx("p",{className:"text-sm text-gray-400 italic",children:"No ingredients selected yet"})]}),n.jsx("button",{onClick:()=>{a([$.name]),b(!0)},className:"px-3 py-1 rounded text-sm text-white",style:{backgroundColor:"#3d59ab"},children:"Create Menu"})]})},Y)})})]}),d.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-4",style:{color:"#3d59ab"},children:["Current Orders (",d.length,")"]}),n.jsx("div",{className:"space-y-4",children:Object.entries(H).map(([$,Y])=>n.jsxs("div",{className:"border-2 rounded-lg p-4",style:{borderColor:"#ebb582"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("h3",{className:"font-bold text-lg",style:{color:"#3d59ab"},children:$}),Y.every(q=>q.approved)&&n.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-green-100 text-green-700 flex items-center gap-1",children:[n.jsx(Ue,{size:12})," Approved"]})]}),n.jsx("div",{className:"space-y-2",children:Y.map(q=>n.jsxs("div",{className:"flex justify-between items-center p-2 rounded",style:{backgroundColor:"#f9f9ed"},children:[n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm text-gray-500",children:[q.date,"  ",q.portions," portions"]}),n.jsx("p",{className:"text-sm",children:[q.protein,q.veg,q.starch,...q.extras||[]].filter(Boolean).join("  ")})]}),n.jsx("button",{onClick:()=>k(q.id),className:"text-red-600",children:n.jsx(rn,{size:18})})]},q.id))})]},$))})]}),A&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-auto",children:[n.jsxs("div",{className:"p-4 border-b flex items-center justify-between sticky top-0 bg-white",children:[n.jsx("h3",{className:"text-lg font-bold",style:{color:"#3d59ab"},children:"Menu Preview"}),n.jsx("button",{onClick:()=>z(null),className:"p-1 rounded hover:bg-gray-100",children:n.jsx(Qt,{size:20})})]}),n.jsx("div",{className:"p-4",children:n.jsx(G0,{client:A,date:e,menuItems:j(A.displayName||A.name)})}),n.jsxs("div",{className:"p-4 border-t flex justify-end gap-2 sticky bottom-0 bg-white",children:[n.jsx("button",{onClick:()=>_(A.displayName||A.name),className:"px-4 py-2 rounded-lg bg-red-100 text-red-700",children:"Remove Menu"}),n.jsxs("button",{onClick:()=>{le(A.displayName||A.name),z(null)},className:"px-4 py-2 rounded-lg text-white flex items-center gap-2",style:{backgroundColor:"#22c55e"},children:[n.jsx(Ue,{size:18})," Approve"]})]})]})})]})}function Ih({recipes:e,newRecipe:t,setNewRecipe:s,editingRecipe:r,setEditingRecipe:l,masterIngredients:a,recipesFileRef:o,findExactMatch:i,findSimilarIngredients:c,getRecipeCost:d,getRecipeCounts:h,saveRecipe:f,deleteRecipe:p,startEditingRecipe:k,saveEditingRecipe:L,updateEditingIngredient:C,addEditingIngredient:F,removeEditingIngredient:g,exportRecipesCSV:u,getUniqueVendors:v,updateMasterIngredientCost:I,syncRecipeIngredientsFromMaster:D}){const[A,z]=x.useState({}),[y,b]=x.useState({}),w=h(),N=v?v():[],S=()=>s({...t,ingredients:[...t.ingredients,{name:"",quantity:"",unit:"oz",cost:"",source:"",section:"Other"}]}),O=(j,P,R)=>{const H=[...t.ingredients];if(H[j][P]=R,P==="name"&&R.length>2){const V=i(R);V&&(H[j]={...H[j],name:R,cost:V.cost||H[j].cost,source:V.source||H[j].source,section:V.section||H[j].section,unit:V.unit||H[j].unit})}P==="cost"&&R&&H[j].name&&I&&I(H[j].name,R),s({...t,ingredients:H})},W=j=>s({...t,ingredients:t.ingredients.filter((P,R)=>R!==j)}),le=(j,P)=>{const R=[...t.ingredients];R[j]={...R[j],name:P.name,cost:P.cost,source:P.source,section:P.section,unit:P.unit},s({...t,ingredients:R})},E=()=>{if(!D)return;const j=D();alert(`Sync complete!

${j.ingredientsAdded} ingredient(s) added to master list
${j.costsUpdated} cost(s) updated from master`)},_=({value:j,onChange:P,index:R,isEditing:H=!1})=>{const V=H?y[R]:A[R],B=H?G=>b($=>({...$,[R]:G})):G=>z($=>({...$,[R]:G}));return V?n.jsxs("div",{className:"flex gap-1",children:[n.jsx("input",{type:"text",value:j,onChange:G=>P(G.target.value),placeholder:"New vendor",className:H?"w-16 p-1 border rounded text-sm":"w-20 p-2 border-2 rounded-lg",style:H?{}:{borderColor:"#ebb582"},autoFocus:!0}),n.jsx("button",{onClick:()=>B(!1),className:"text-gray-500 hover:text-gray-700",type:"button",children:n.jsx(Qt,{size:H?14:16})})]}):n.jsxs("select",{value:N.includes(j)?j:"",onChange:G=>{G.target.value==="__new__"?(B(!0),P("")):P(G.target.value)},className:H?"w-20 p-1 border rounded text-sm":"w-24 p-2 border-2 rounded-lg",style:H?{}:{borderColor:"#ebb582"},children:[n.jsx("option",{value:"",children:"Vendor"}),N.map(G=>n.jsx("option",{value:G,children:G},G)),n.jsx("option",{value:"__new__",children:"+ Add new..."})]})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Recipes"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Total: ",w.total," | Protein: ",w.protein||0," | Veg: ",w.veg||0," | Starch: ",w.starch||0," | Sauces: ",w.sauces||0," | Breakfast: ",w.breakfast||0," | Soups: ",w.soups||0]})]}),n.jsxs("div",{className:"flex gap-2",children:[D&&n.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 rounded-lg border-2 border-green-500 text-green-600 hover:bg-green-50",children:[n.jsx(gl,{size:18}),"Sync Ingredients"]}),n.jsxs("button",{onClick:()=>o.current.click(),className:"flex items-center gap-2 px-4 py-2 rounded-lg border-2",style:{borderColor:"#3d59ab",color:"#3d59ab"},children:[n.jsx(pd,{size:18}),"Import"]}),n.jsxs("button",{onClick:u,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[n.jsx(go,{size:18}),"Export"]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsx("select",{value:t.category,onChange:j=>s({...t,category:j.target.value}),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:P0.map(j=>n.jsx("option",{value:j,children:j.charAt(0).toUpperCase()+j.slice(1)},j))}),n.jsx("input",{type:"text",value:t.name,onChange:j=>s({...t,name:j.target.value}),placeholder:"Recipe name",className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}})]}),n.jsx("textarea",{value:t.instructions,onChange:j=>s({...t,instructions:j.target.value}),placeholder:"Cooking instructions...",className:"w-full p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},rows:"2"}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#423d3c"},children:"Ingredients"}),t.ingredients.map((j,P)=>{const R=j.name.length>2?i(j.name):null,H=j.name.length>2&&!R?c(j.name):[];return n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"flex flex-wrap gap-2 p-2 rounded",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("input",{type:"text",value:j.name,onChange:V=>O(P,"name",V.target.value),placeholder:"Ingredient",className:"flex-1 min-w-[120px] p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},list:`ing-${P}`}),n.jsx("datalist",{id:`ing-${P}`,children:a.map((V,B)=>n.jsx("option",{value:V.name},B))}),n.jsx("input",{type:"text",value:j.quantity,onChange:V=>O(P,"quantity",V.target.value),placeholder:"Oz",className:"w-16 p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}}),n.jsx("input",{type:"text",value:j.cost,onChange:V=>O(P,"cost",V.target.value),placeholder:"$",className:"w-16 p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}}),n.jsx(_,{value:j.source,onChange:V=>O(P,"source",V),index:P}),n.jsx("select",{value:j.section,onChange:V=>O(P,"section",V.target.value),className:"w-28 p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:Va.map(V=>n.jsx("option",{value:V,children:V},V))}),t.ingredients.length>1&&n.jsx("button",{onClick:()=>W(P),className:"text-red-600 p-2",children:n.jsx(Qt,{size:20})})]}),R&&n.jsxs("button",{onClick:()=>le(P,R),className:"mt-1 text-xs px-2 py-1 rounded bg-green-100 text-green-700",children:['Auto-fill "',R.name,'"']}),H.length>0&&n.jsxs("div",{className:"mt-1 flex flex-wrap gap-1",children:[n.jsxs("span",{className:"text-xs text-orange-600",children:[n.jsx(bh,{size:12,className:"inline"})," Similar:"]}),H.slice(0,3).map((V,B)=>n.jsxs("button",{onClick:()=>le(P,V),className:"text-xs px-2 py-1 rounded bg-orange-100 text-orange-700",children:['"',V.name,'"']},B))]})]},P)}),n.jsx("button",{onClick:S,className:"text-sm px-3 py-1 rounded",style:{backgroundColor:"#ebb582"},children:"+ Add Ingredient"})]}),n.jsxs("button",{onClick:f,className:"px-6 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[n.jsx(C0,{size:20,className:"inline mr-2"}),"Save Recipe"]})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",style:{color:"#3d59ab"},children:"Recipe Library"}),Object.entries(e).map(([j,P])=>P.length>0&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("h3",{className:"text-lg font-bold capitalize mb-2",style:{color:"#ebb582"},children:[j," (",P.length,")"]}),n.jsx("div",{className:"space-y-2",children:P.map((R,H)=>{var B;const V=d(R);return n.jsx("div",{children:(r==null?void 0:r.category)===j&&(r==null?void 0:r.index)===H?n.jsxs("div",{className:"p-4 rounded-lg border-2",style:{borderColor:"#3d59ab",backgroundColor:"#f9f9ed"},children:[n.jsx("input",{type:"text",value:r.recipe.name,onChange:G=>l({...r,recipe:{...r.recipe,name:G.target.value}}),className:"w-full p-2 border-2 rounded-lg mb-2 font-bold",style:{borderColor:"#ebb582"}}),n.jsx("textarea",{value:r.recipe.instructions,onChange:G=>l({...r,recipe:{...r.recipe,instructions:G.target.value}}),placeholder:"Instructions...",className:"w-full p-2 border-2 rounded-lg mb-2",style:{borderColor:"#ebb582"},rows:"2"}),n.jsx("p",{className:"text-sm font-medium mb-2",children:"Ingredients:"}),r.recipe.ingredients.map((G,$)=>{const Y=G.name.length>2?i(G.name):null;return n.jsxs("div",{className:"mb-2",children:[n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsx("input",{type:"text",value:G.name,onChange:q=>{C($,"name",q.target.value);const Q=q.target.value.length>2?i(q.target.value):null;Q&&setTimeout(()=>{Q.cost&&C($,"cost",Q.cost),Q.source&&C($,"source",Q.source),Q.section&&C($,"section",Q.section),Q.unit&&C($,"unit",Q.unit)},0)},placeholder:"Name",className:"flex-1 min-w-[100px] p-1 border rounded text-sm",list:`edit-ing-${$}`}),n.jsx("datalist",{id:`edit-ing-${$}`,children:a.map((q,Q)=>n.jsx("option",{value:q.name},Q))}),n.jsx("input",{type:"text",value:G.quantity,onChange:q=>C($,"quantity",q.target.value),placeholder:"Oz",className:"w-12 p-1 border rounded text-sm"}),n.jsx("input",{type:"text",value:G.cost,onChange:q=>{C($,"cost",q.target.value),q.target.value&&G.name&&I&&I(G.name,q.target.value)},placeholder:"$",className:"w-12 p-1 border rounded text-sm"}),n.jsx(_,{value:G.source,onChange:q=>C($,"source",q),index:$,isEditing:!0}),n.jsx("select",{value:G.section,onChange:q=>C($,"section",q.target.value),className:"w-24 p-1 border rounded text-sm",children:Va.map(q=>n.jsx("option",{value:q,children:q},q))}),n.jsx("button",{onClick:()=>g($),className:"text-red-600",children:n.jsx(Qt,{size:16})})]}),Y&&n.jsxs("div",{className:"text-xs text-green-600 mt-1",children:["Master: $",Y.cost||"?","/",Y.unit,"  ",Y.source||"No vendor","  ",Y.section]})]},$)}),n.jsx("button",{onClick:F,className:"text-sm px-2 py-1 rounded mb-2",style:{backgroundColor:"#ebb582"},children:"+ Add"}),n.jsxs("div",{className:"flex gap-2 mt-2",children:[n.jsxs("button",{onClick:L,className:"flex items-center gap-1 px-3 py-1 rounded text-white text-sm",style:{backgroundColor:"#3d59ab"},children:[n.jsx(Ue,{size:16}),"Save"]}),n.jsx("button",{onClick:()=>l(null),className:"px-3 py-1 rounded bg-gray-200 text-sm",children:"Cancel"})]})]}):n.jsxs("div",{className:"flex justify-between items-start p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"font-medium",children:R.name}),V>0&&n.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-green-100 text-green-700",children:["$",V.toFixed(2),"/portion"]})]}),n.jsx("p",{className:"text-sm text-gray-600",children:(B=R.ingredients)==null?void 0:B.map(G=>`${G.name} (${G.quantity}oz)`).join(", ")}),R.instructions&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:R.instructions})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>k(j,H),className:"text-blue-600",children:n.jsx(Sl,{size:18})}),n.jsx("button",{onClick:()=>p(j,H),className:"text-red-600",children:n.jsx(rn,{size:18})})]})]})},H)})})]},j)),Object.values(e).flat().length===0&&n.jsx("p",{className:"text-gray-500",children:"No recipes yet."})]})]})}function Y0({menuItems:e,recipes:t,completedDishes:s,toggleDishComplete:r,allDishesComplete:l,completeAllOrders:a,getKDSView:o,pendingApprovalCount:i=0}){const[c,d]=x.useState({}),h=o(),f=p=>{d(k=>({...k,[p]:!k[p]}))};return n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Kitchen Display"}),e.length>0&&l()&&n.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#22c55e"},children:[n.jsx(Ue,{size:18}),"Complete All & Ready for Delivery"]})]}),i>0&&Object.keys(h).length===0&&n.jsx("div",{className:"mb-6 p-4 rounded-lg border-2 border-amber-300 bg-amber-50",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(fs,{size:24,className:"text-amber-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsxs("p",{className:"font-medium text-amber-800",children:[i," menu",i>1?"s":""," waiting for approval"]}),n.jsx("p",{className:"text-sm text-amber-700 mt-1",children:"Menus need to be approved before they appear here for cooking."}),n.jsx(Mn,{to:"/admin?section=menu-approval",className:"inline-flex items-center gap-2 mt-3 px-4 py-2 rounded-lg text-white text-sm font-medium",style:{backgroundColor:"#3d59ab"},children:"Go to Menu Approval"})]})]})}),Object.keys(h).length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(h).map(([p,k])=>{var g;const L=(g=t[k.category])==null?void 0:g.find(u=>u.name===p),C=s[p],F=c[p];return n.jsxs("div",{className:`border-2 rounded-lg overflow-hidden transition-all ${C?"opacity-60":""}`,style:{borderColor:C?"#22c55e":"#ebb582"},children:[n.jsx("div",{className:"p-4 cursor-pointer select-none",style:{backgroundColor:C?"#dcfce7":"#f9f9ed"},onClick:()=>f(p),children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"text-lg font-bold truncate",style:{color:"#3d59ab"},children:p}),n.jsxs("p",{className:"text-2xl font-bold",style:{color:C?"#22c55e":"#3d59ab"},children:[k.totalPortions," ",n.jsx("span",{className:"text-sm font-normal text-gray-500",children:"portions"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[C&&n.jsx(Ue,{size:20,className:"text-green-600"}),F?n.jsx(dd,{size:20,className:"text-gray-400"}):n.jsx(cd,{size:20,className:"text-gray-400"})]})]})}),F&&n.jsxs("div",{className:"p-4 border-t",style:{borderColor:"#ebb582"},children:[n.jsx("p",{className:"text-xs text-gray-500 mb-3",children:k.clients.map(u=>`${u.name} (${u.portions})`).join(", ")}),n.jsxs("button",{onClick:u=>{u.stopPropagation(),r(p)},className:`w-full mb-4 px-4 py-2 rounded-lg flex items-center justify-center gap-2 font-medium ${C?"bg-green-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:[n.jsx(Ue,{size:18}),C?"Completed":"Mark Complete"]}),(L==null?void 0:L.ingredients)&&L.ingredients.length>0&&n.jsxs("div",{className:"mb-3",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Ingredients:"}),n.jsx("div",{className:"space-y-1",children:L.ingredients.map((u,v)=>n.jsxs("div",{className:"flex justify-between text-sm p-2 rounded",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("span",{children:u.name}),n.jsxs("span",{className:"font-bold",children:[(parseFloat(u.quantity)*k.totalPortions).toFixed(1)," ",u.unit||"oz"]})]},v))})]}),(L==null?void 0:L.instructions)&&n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Instructions:"}),n.jsx("p",{className:"text-sm p-3 rounded",style:{backgroundColor:"#fff4e0"},children:L.instructions})]})]})]},p)})}):i===0&&n.jsx("p",{className:"text-gray-500",children:"No orders yet. Create menus in the Menu tab and approve them to see dishes here."})]})}const Fu="goldfinchShopCheckedItems";function K0({prepList:e,exportPrepList:t}){const[s,r]=x.useState(()=>{try{const c=localStorage.getItem(Fu);return c?JSON.parse(c):{}}catch{return{}}});x.useEffect(()=>{localStorage.setItem(Fu,JSON.stringify(s))},[s]);const l=c=>{r(d=>({...d,[c]:!d[c]}))},a=()=>{window.confirm("Clear all checked items?")&&r({})},o=c=>`${c.name}-${c.unit}-${c.source||"none"}`,i=e.filter(c=>s[o(c)]).length;return n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Shopping List"}),e.length>0&&n.jsxs("p",{className:"text-sm text-gray-500",children:[i," of ",e.length," items checked"]})]}),e.length>0&&n.jsxs("div",{className:"flex gap-2",children:[i>0&&n.jsxs("button",{onClick:a,className:"flex items-center gap-2 px-4 py-2 rounded-lg border-2 border-gray-300 text-gray-600 hover:bg-gray-50",children:[n.jsx(rn,{size:18}),"Clear Checked"]}),n.jsxs("button",{onClick:t,className:"px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[n.jsx(go,{size:18,className:"inline mr-2"}),"Export"]})]})]}),e.length>0?n.jsx("div",{className:"space-y-6",children:(()=>[...new Set(e.map(d=>d.source||"No Source"))].sort().map(d=>{const h=e.filter(k=>(k.source||"No Source")===d),f=[...new Set(h.map(k=>k.section))].sort(),p=h.filter(k=>s[o(k)]).length;return n.jsxs("div",{className:"border-2 rounded-lg p-4",style:{borderColor:"#3d59ab"},children:[n.jsxs("div",{className:"flex justify-between items-center mb-3",children:[n.jsx("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:d}),n.jsxs("span",{className:"text-sm text-gray-500",children:[p,"/",h.length]})]}),f.map(k=>{const L=h.filter(C=>C.section===k);return n.jsxs("div",{className:"mb-4",children:[n.jsx("h4",{className:"font-medium mb-2",style:{color:"#ebb582"},children:k}),L.map((C,F)=>{const g=o(C),u=s[g];return n.jsxs("div",{onClick:()=>l(g),className:`flex items-center gap-3 p-2 rounded mb-1 cursor-pointer transition-all ${u?"opacity-50":"hover:bg-amber-50"}`,style:{backgroundColor:"#f9f9ed"},children:[n.jsx("div",{className:`w-6 h-6 rounded border-2 flex items-center justify-center flex-shrink-0 transition-colors ${u?"bg-green-500 border-green-500":"border-gray-300 bg-white"}`,children:u&&n.jsx(Ue,{size:16,className:"text-white"})}),n.jsx("span",{className:`flex-1 ${u?"line-through text-gray-400":""}`,children:C.name}),n.jsxs("span",{className:`font-bold ${u?"line-through text-gray-400":""}`,children:[C.quantity.toFixed(1)," ",C.unit]})]},F)})]},k)})]},d)}))()}):n.jsx("p",{className:"text-gray-500",children:"No items. Add menu items first."})]})}const Ke=({label:e,children:t})=>n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-sm font-medium mb-1",style:{color:"#423d3c"},children:e}),t]}),Qe="p-2 border-2 rounded-lg",Ze={borderColor:"#ebb582"},Au=({contact:e,index:t,onChange:s,onRemove:r,canRemove:l})=>n.jsxs("div",{className:"p-4 rounded-lg border-2 relative",style:{borderColor:"#d9a87a",backgroundColor:"#fff"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("span",{className:"text-sm font-bold",style:{color:"#3d59ab"},children:["Contact ",t+1]}),l&&n.jsx("button",{type:"button",onClick:r,className:"text-red-500 hover:text-red-700 p-1",title:"Remove contact",children:n.jsx(b0,{size:18})})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsx(Ke,{label:"Full Name",children:n.jsx("input",{type:"text",value:e.fullName||"",onChange:a=>s(t,"fullName",a.target.value),placeholder:"Full name",className:Qe,style:Ze})}),n.jsx(Ke,{label:"Display Name (for greetings)",children:n.jsx("input",{type:"text",value:e.displayName||"",onChange:a=>s(t,"displayName",a.target.value),placeholder:"e.g., Jennifer",className:Qe,style:Ze})}),n.jsx(Ke,{label:"Email",children:n.jsx("input",{type:"email",value:e.email||"",onChange:a=>s(t,"email",a.target.value),placeholder:"Email address",className:Qe,style:Ze})}),n.jsx(Ke,{label:"Phone",children:n.jsx("input",{type:"tel",value:e.phone||"",onChange:a=>s(t,"phone",a.target.value),placeholder:"Phone number",className:Qe,style:Ze})}),n.jsx("div",{className:"md:col-span-2",children:n.jsx(Ke,{label:"Delivery Address",children:n.jsx("input",{type:"text",value:e.address||"",onChange:a=>s(t,"address",a.target.value),placeholder:"Street address",className:Qe,style:Ze})})})]})]}),Xl=e=>{if(e.subscriptionId)return e;const t=e.contacts&&e.contacts.length>0?e.contacts.map(s=>({fullName:s.fullName||s.name||"",displayName:s.displayName||"",email:s.email||"",phone:s.phone||"",address:s.address||""})):[{fullName:e.name||"",displayName:"",email:e.email||"",phone:e.phone||"",address:e.address||""}];return{subscriptionId:e.id||Date.now().toString(),displayName:e.displayName||e.name||"",portions:e.portions||e.persons||1,mealsPerWeek:e.mealsPerWeek||0,frequency:e.frequency||"weekly",status:e.status||"active",zone:e.zone||"",deliveryDay:e.deliveryDay||"",pickup:e.pickup||!1,planPrice:e.planPrice||0,serviceFee:e.serviceFee||0,prepayDiscount:e.prepayDiscount||!1,newClientFeePaid:e.newClientFeePaid||!1,paysOwnGroceries:e.paysOwnGroceries||!1,billingNotes:e.billingNotes||"",accessCode:e.accessCode||"",honeyBookLink:e.honeyBookLink||"",contacts:t}};function Fh({clients:e,newClient:t,setNewClient:s,addClient:r,deleteClient:l,clientsFileRef:a,exportClientsCSV:o,setClients:i,deliveryLog:c=[],orderHistory:d=[]}){const[h,f]=x.useState(null),[p,k]=x.useState(null),[L,C]=x.useState({}),F=E=>{C(_=>({..._,[E]:!_[E]}))},g=E=>{const _=c.filter(R=>R.clientName===E).map(R=>({date:R.date,dishes:[],status:R.problem?"problem":"delivered",problem:R.problem,bagsReturned:R.bagsReturned,source:"log"})),j=d.filter(R=>R.clientName===E).map(R=>({date:R.date,dishes:R.dishes||[],status:"completed",source:"history"})),P={};return[..._,...j].forEach(R=>{(!P[R.date]||R.dishes.length>0)&&(P[R.date]=R)}),Object.values(P).sort((R,H)=>new Date(H.date)-new Date(R.date)).slice(0,4)},u=E=>E.contacts&&E.contacts.length>0?E.contacts:[{...Vs}],v=E=>{const _=Xl(e[E]);f(E),k({..._,contacts:u(_)})},I=()=>{f(null),k(null)},D=()=>{const E=[...e];E[h]=p,i(E),f(null),k(null)},A=(E,_,j)=>{const P=[...t.contacts||[{...Vs}]];P[E]={...P[E],[_]:j},s({...t,contacts:P})},z=()=>{const E=[...t.contacts||[],{...Vs}];s({...t,contacts:E})},y=E=>{const _=(t.contacts||[]).filter((j,P)=>P!==E);s({...t,contacts:_})},b=(E,_,j)=>{const P=[...p.contacts];P[E]={...P[E],[_]:j},k({...p,contacts:P})},w=()=>{const E=[...p.contacts,{...Vs}];k({...p,contacts:E})},N=E=>{const _=p.contacts.filter((j,P)=>P!==E);k({...p,contacts:_})},S=E=>{const _=(E.subscriptionId||E.displayName||E.name||"").toString().toLowerCase().replace(/\s+/g,"-");return`${window.location.origin}/client/${_}`},O=E=>{const _=S(E);navigator.clipboard.writeText(_).then(()=>{alert(`Portal link copied!
${_}`)}).catch(()=>{prompt("Copy this link:",_)})},W=E=>{const _=u(Xl(E)),j=[...new Set(_.filter(P=>P.address).map(P=>P.address.toLowerCase().trim()))];return{count:_.length,uniqueAddresses:j.length,contacts:_,primaryContact:_[0]}},le=()=>{const E=["subscriptionId","subscriptionDisplayName","portions","mealsPerWeek","frequency","status","zone","deliveryDay","pickup","planPrice","serviceFee","prepayDiscount","newClientFeePaid","paysOwnGroceries","billingNotes","accessCode","contactFullName","contactDisplayName","email","phone","address"],_=[];e.forEach(V=>{const B=Xl(V);u(B).forEach(($,Y)=>{_.push([Y===0?B.subscriptionId:"",Y===0?B.displayName:"",Y===0?B.portions:"",Y===0?B.mealsPerWeek:"",Y===0?B.frequency:"",Y===0?B.status:"",Y===0?B.zone:"",Y===0?B.deliveryDay:"",Y===0?B.pickup:"",Y===0?B.planPrice:"",Y===0?B.serviceFee:"",Y===0?B.prepayDiscount:"",Y===0?B.newClientFeePaid:"",Y===0?B.paysOwnGroceries:"",Y===0?B.billingNotes:"",Y===0?B.accessCode:"",$.fullName||"",$.displayName||"",$.email||"",$.phone||"",$.address||""].map(q=>`"${(q||"").toString().replace(/"/g,'""')}"`).join(","))})});const j=[E.join(","),..._].join(`
`),P=new Blob([j],{type:"text/csv"}),R=URL.createObjectURL(P),H=document.createElement("a");H.href=R,H.download="subscriptions.csv",H.click()};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Add Subscription"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>{var E;return(E=a.current)==null?void 0:E.click()},className:"flex items-center gap-2 px-4 py-2 rounded-lg border-2",style:{borderColor:"#3d59ab",color:"#3d59ab"},children:[n.jsx(pd,{size:18}),"Import"]}),n.jsxs("button",{onClick:le,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[n.jsx(go,{size:18}),"Export"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsx(Ke,{label:"Subscription Name",children:n.jsx("input",{type:"text",value:t.displayName||"",onChange:E=>s({...t,displayName:E.target.value}),placeholder:"e.g., J.J. and Lauren",className:Qe,style:Ze})}),n.jsx(Ke,{label:"Portions",children:n.jsx("input",{type:"number",value:t.portions||1,onChange:E=>s({...t,portions:parseInt(E.target.value)||1}),placeholder:"Number of portions",className:Qe,style:Ze})}),n.jsx(Ke,{label:"Meals per Week",children:n.jsx("input",{type:"number",value:t.mealsPerWeek||0,onChange:E=>s({...t,mealsPerWeek:parseInt(E.target.value)||0}),placeholder:"Number of meals",className:Qe,style:Ze})}),n.jsx(Ke,{label:"Zone",children:n.jsxs("select",{value:t.zone||"",onChange:E=>s({...t,zone:E.target.value}),className:Qe,style:Ze,children:[n.jsx("option",{value:"",children:"Unassigned"}),wn.map(E=>n.jsxs("option",{value:E,children:["Zone ",E]},E))]})}),n.jsx(Ke,{label:"Delivery Day",children:n.jsxs("select",{value:t.deliveryDay||"",onChange:E=>s({...t,deliveryDay:E.target.value}),className:Qe,style:Ze,children:[n.jsx("option",{value:"",children:"Select day"}),Ou.map(E=>n.jsx("option",{value:E,children:E},E))]})}),n.jsx(Ke,{label:"Frequency",children:n.jsxs("select",{value:t.frequency||"weekly",onChange:E=>s({...t,frequency:E.target.value}),className:Qe,style:Ze,children:[n.jsx("option",{value:"weekly",children:"Weekly"}),n.jsx("option",{value:"biweekly",children:"Biweekly"})]})}),n.jsx(Ke,{label:"Status",children:n.jsxs("select",{value:t.status||"active",onChange:E=>s({...t,status:E.target.value}),className:Qe,style:Ze,children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"paused",children:"Paused"})]})}),n.jsx(Ke,{label:"Client Portal Access Code",children:n.jsx("input",{type:"text",value:t.accessCode||"",onChange:E=>s({...t,accessCode:E.target.value}),placeholder:"Optional access code",className:Qe,style:Ze})}),n.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[n.jsx("input",{type:"checkbox",id:"pickup",checked:t.pickup||!1,onChange:E=>s({...t,pickup:E.target.checked,serviceFee:E.target.checked?0:t.serviceFee}),className:"w-5 h-5 rounded border-2",style:{accentColor:"#3d59ab"}}),n.jsx("label",{htmlFor:"pickup",className:"text-sm font-medium",style:{color:"#423d3c"},children:"Pickup (exclude from delivery routes)"})]}),n.jsx(Ke,{label:"Menu Selection",children:n.jsxs("select",{value:t.chefChoice===!1?"client":"chef",onChange:E=>s({...t,chefChoice:E.target.value==="chef"}),className:Qe,style:Ze,children:[n.jsx("option",{value:"chef",children:"Chef Choice (Chef Paula picks)"}),n.jsx("option",{value:"client",children:"Client Picks (Client selects dishes)"})]})}),n.jsx(Ke,{label:"HoneyBook Invoice Link",children:n.jsx("input",{type:"url",value:t.honeyBookLink||"",onChange:E=>s({...t,honeyBookLink:E.target.value}),className:Qe,style:Ze,placeholder:"https://..."})})]}),n.jsxs("div",{className:"mt-6 pt-6 border-t-2",style:{borderColor:"#ebb582"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"text-lg font-bold flex items-center gap-2",style:{color:"#3d59ab"},children:[n.jsx(gs,{size:20}),"Contacts"]}),n.jsxs("button",{type:"button",onClick:z,className:"flex items-center gap-1 px-3 py-1 rounded-lg text-white text-sm",style:{backgroundColor:"#3d59ab"},children:[n.jsx(vn,{size:16}),"Add Contact"]})]}),n.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Each contact receives notifications. Different addresses = separate delivery stops."}),n.jsx("div",{className:"space-y-4",children:(t.contacts||[{...Vs}]).map((E,_)=>n.jsx(Au,{contact:E,index:_,onChange:A,onRemove:()=>y(_),canRemove:(t.contacts||[]).length>1},_))})]}),n.jsxs("div",{className:"mt-6 pt-6 border-t-2",style:{borderColor:"#ebb582"},children:[n.jsx("h3",{className:"text-lg font-bold mb-4",style:{color:"#3d59ab"},children:"Pricing"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Ke,{label:"Plan Price ($)",children:n.jsx("input",{type:"number",step:"0.01",value:t.planPrice||0,onChange:E=>s({...t,planPrice:parseFloat(E.target.value)||0}),placeholder:"0.00",className:Qe,style:Ze})}),n.jsx(Ke,{label:"Service Fee ($)",children:n.jsx("input",{type:"number",step:"0.01",value:t.pickup?0:t.serviceFee||0,onChange:E=>s({...t,serviceFee:parseFloat(E.target.value)||0}),placeholder:"0.00",className:Qe,style:Ze,disabled:t.pickup})}),n.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[n.jsx("input",{type:"checkbox",id:"prepayDiscount",checked:t.prepayDiscount||!1,onChange:E=>s({...t,prepayDiscount:E.target.checked}),className:"w-5 h-5 rounded border-2",style:{accentColor:"#3d59ab"}}),n.jsx("label",{htmlFor:"prepayDiscount",className:"text-sm font-medium",style:{color:"#423d3c"},children:"Pre-pay Discount (10% off)"})]}),n.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[n.jsx("input",{type:"checkbox",id:"newClientFeePaid",checked:t.newClientFeePaid||!1,onChange:E=>s({...t,newClientFeePaid:E.target.checked}),className:"w-5 h-5 rounded border-2",style:{accentColor:"#3d59ab"}}),n.jsx("label",{htmlFor:"newClientFeePaid",className:"text-sm font-medium",style:{color:"#423d3c"},children:"New Client Fee Paid"})]}),n.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[n.jsx("input",{type:"checkbox",id:"paysOwnGroceries",checked:t.paysOwnGroceries||!1,onChange:E=>s({...t,paysOwnGroceries:E.target.checked}),className:"w-5 h-5 rounded border-2",style:{accentColor:"#3d59ab"}}),n.jsx("label",{htmlFor:"paysOwnGroceries",className:"text-sm font-medium",style:{color:"#423d3c"},children:"Pays Own Groceries"})]})]}),n.jsx("div",{className:"mt-4",children:n.jsx(Ke,{label:"Billing Notes",children:n.jsx("textarea",{value:t.billingNotes||"",onChange:E=>s({...t,billingNotes:E.target.value}),placeholder:"Any billing notes",className:Qe+" w-full",style:Ze,rows:"2"})})})]}),n.jsxs("button",{onClick:r,className:"mt-6 px-6 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[n.jsx(vn,{size:20,className:"inline mr-2"}),"Add Subscription"]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-4",style:{color:"#3d59ab"},children:["Subscriptions (",e.length,")"]}),n.jsx("div",{className:"space-y-3",children:e.map((E,_)=>{var P;const j=Xl(E);return n.jsx("div",{children:h===_?n.jsxs("div",{className:"border-2 rounded-lg p-4",style:{borderColor:"#3d59ab",backgroundColor:"#f9f9ed"},children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsx(Ke,{label:"Subscription Name",children:n.jsx("input",{type:"text",value:p.displayName||"",onChange:R=>k({...p,displayName:R.target.value}),className:Qe,style:Ze})}),n.jsx(Ke,{label:"Portions",children:n.jsx("input",{type:"number",value:p.portions||1,onChange:R=>k({...p,portions:parseInt(R.target.value)||1}),className:Qe,style:Ze})}),n.jsx(Ke,{label:"Meals per Week",children:n.jsx("input",{type:"number",value:p.mealsPerWeek||0,onChange:R=>k({...p,mealsPerWeek:parseInt(R.target.value)||0}),className:Qe,style:Ze})}),n.jsx(Ke,{label:"Zone",children:n.jsxs("select",{value:p.zone||"",onChange:R=>k({...p,zone:R.target.value}),className:Qe,style:Ze,children:[n.jsx("option",{value:"",children:"Unassigned"}),wn.map(R=>n.jsxs("option",{value:R,children:["Zone ",R]},R))]})}),n.jsx(Ke,{label:"Delivery Day",children:n.jsxs("select",{value:p.deliveryDay||"",onChange:R=>k({...p,deliveryDay:R.target.value}),className:Qe,style:Ze,children:[n.jsx("option",{value:"",children:"Select day"}),Ou.map(R=>n.jsx("option",{value:R,children:R},R))]})}),n.jsx(Ke,{label:"Frequency",children:n.jsxs("select",{value:p.frequency||"weekly",onChange:R=>k({...p,frequency:R.target.value}),className:Qe,style:Ze,children:[n.jsx("option",{value:"weekly",children:"Weekly"}),n.jsx("option",{value:"biweekly",children:"Biweekly"})]})}),n.jsx(Ke,{label:"Status",children:n.jsxs("select",{value:p.status||"active",onChange:R=>k({...p,status:R.target.value}),className:Qe,style:Ze,children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"paused",children:"Paused"})]})}),n.jsx(Ke,{label:"Access Code",children:n.jsx("input",{type:"text",value:p.accessCode||"",onChange:R=>k({...p,accessCode:R.target.value}),className:Qe,style:Ze})}),n.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[n.jsx("input",{type:"checkbox",id:`pickup-edit-${_}`,checked:p.pickup||!1,onChange:R=>k({...p,pickup:R.target.checked,serviceFee:R.target.checked?0:p.serviceFee}),className:"w-5 h-5 rounded border-2",style:{accentColor:"#3d59ab"}}),n.jsx("label",{htmlFor:`pickup-edit-${_}`,className:"text-sm font-medium",style:{color:"#423d3c"},children:"Pickup"})]}),n.jsx(Ke,{label:"Menu Selection",children:n.jsxs("select",{value:p.chefChoice===!1?"client":"chef",onChange:R=>k({...p,chefChoice:R.target.value==="chef"}),className:Qe,style:Ze,children:[n.jsx("option",{value:"chef",children:"Chef Choice (Chef Paula picks)"}),n.jsx("option",{value:"client",children:"Client Picks (Client selects dishes)"})]})}),n.jsx(Ke,{label:"HoneyBook Invoice Link",children:n.jsx("input",{type:"url",value:p.honeyBookLink||"",onChange:R=>k({...p,honeyBookLink:R.target.value}),className:Qe,style:Ze,placeholder:"https://..."})})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t-2",style:{borderColor:"#ebb582"},children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h4",{className:"text-md font-bold flex items-center gap-2",style:{color:"#3d59ab"},children:[n.jsx(gs,{size:18}),"Contacts (",((P=p.contacts)==null?void 0:P.length)||1,")"]}),n.jsxs("button",{type:"button",onClick:w,className:"flex items-center gap-1 px-3 py-1 rounded-lg text-white text-sm",style:{backgroundColor:"#3d59ab"},children:[n.jsx(vn,{size:16}),"Add Contact"]})]}),n.jsx("div",{className:"space-y-4",children:(p.contacts||[]).map((R,H)=>n.jsx(Au,{contact:R,index:H,onChange:b,onRemove:()=>N(H),canRemove:p.contacts.length>1},H))})]}),n.jsxs("div",{className:"mt-4 pt-4 border-t-2",style:{borderColor:"#ebb582"},children:[n.jsx("h4",{className:"text-md font-bold mb-3",style:{color:"#3d59ab"},children:"Pricing"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Ke,{label:"Plan Price ($)",children:n.jsx("input",{type:"number",step:"0.01",value:p.planPrice||0,onChange:R=>k({...p,planPrice:parseFloat(R.target.value)||0}),className:Qe,style:Ze})}),n.jsx(Ke,{label:"Service Fee ($)",children:n.jsx("input",{type:"number",step:"0.01",value:p.pickup?0:p.serviceFee||0,onChange:R=>k({...p,serviceFee:parseFloat(R.target.value)||0}),className:Qe,style:Ze,disabled:p.pickup})}),n.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[n.jsx("input",{type:"checkbox",id:`prepayDiscount-edit-${_}`,checked:p.prepayDiscount||!1,onChange:R=>k({...p,prepayDiscount:R.target.checked}),className:"w-5 h-5 rounded border-2",style:{accentColor:"#3d59ab"}}),n.jsx("label",{htmlFor:`prepayDiscount-edit-${_}`,className:"text-sm font-medium",style:{color:"#423d3c"},children:"Pre-pay (10% off)"})]}),n.jsxs("div",{className:"flex items-center gap-2 pt-6",children:[n.jsx("input",{type:"checkbox",id:`newClientFeePaid-edit-${_}`,checked:p.newClientFeePaid||!1,onChange:R=>k({...p,newClientFeePaid:R.target.checked}),className:"w-5 h-5 rounded border-2",style:{accentColor:"#3d59ab"}}),n.jsx("label",{htmlFor:`newClientFeePaid-edit-${_}`,className:"text-sm font-medium",style:{color:"#423d3c"},children:"New Client Fee Paid"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",id:`paysOwnGroceries-edit-${_}`,checked:p.paysOwnGroceries||!1,onChange:R=>k({...p,paysOwnGroceries:R.target.checked}),className:"w-5 h-5 rounded border-2",style:{accentColor:"#3d59ab"}}),n.jsx("label",{htmlFor:`paysOwnGroceries-edit-${_}`,className:"text-sm font-medium",style:{color:"#423d3c"},children:"Pays Own Groceries"})]})]}),n.jsx("div",{className:"mt-4",children:n.jsx(Ke,{label:"Billing Notes",children:n.jsx("textarea",{value:p.billingNotes||"",onChange:R=>k({...p,billingNotes:R.target.value}),className:Qe+" w-full",style:Ze,rows:"2"})})})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsxs("button",{onClick:D,className:"flex items-center gap-1 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[n.jsx(Ue,{size:18}),"Save"]}),n.jsxs("button",{onClick:I,className:"flex items-center gap-1 px-4 py-2 rounded-lg bg-gray-200",children:[n.jsx(Qt,{size:18}),"Cancel"]})]})]}):n.jsx("div",{className:`border-2 rounded-lg p-4 ${j.status==="paused"?"opacity-60":""}`,style:{borderColor:j.status==="paused"?"#9ca3af":"#ebb582"},children:n.jsxs("div",{className:"flex justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("h3",{className:"font-bold text-lg",children:j.displayName||"Unnamed"}),j.status==="paused"&&n.jsx("span",{className:"text-xs px-2 py-1 rounded bg-gray-200 text-gray-600",children:"Paused"}),j.status==="active"&&n.jsx("span",{className:"text-xs px-2 py-1 rounded bg-green-100 text-green-700",children:"Active"}),j.pickup&&n.jsx("span",{className:"text-xs px-2 py-1 rounded bg-blue-100 text-blue-700",children:"Pickup"})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[j.portions," portions  ",j.mealsPerWeek," meals/week  ",j.frequency==="biweekly"?"Biweekly":"Weekly"]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[j.zone?`Zone ${j.zone}`:"No zone",j.deliveryDay&&`  ${j.deliveryDay}`]}),(()=>{const{count:R,uniqueAddresses:H,contacts:V}=W(j);return n.jsx("div",{className:"mt-2",children:n.jsxs("div",{className:"text-sm",children:[n.jsxs("span",{className:"text-purple-600 font-medium",children:[n.jsx(gs,{size:14,className:"inline mr-1"}),R," contact",R!==1?"s":"","  ",H," delivery stop",H!==1?"s":""]}),n.jsx("div",{className:"mt-1 space-y-1",children:V.map((B,G)=>n.jsxs("div",{className:"text-gray-500 pl-4 border-l-2",style:{borderColor:"#d9a87a"},children:[n.jsx("span",{className:"font-medium",children:B.fullName||B.displayName||`Contact ${G+1}`}),B.displayName&&B.displayName!==B.fullName&&n.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:['"',B.displayName,'"']}),B.address&&n.jsx("span",{className:"block text-xs",children:B.address})]},G))})]})})})(),j.billingNotes&&n.jsxs("p",{className:"text-sm text-amber-700 mt-2 bg-amber-50 px-2 py-1 rounded",children:["Billing: ",j.billingNotes]}),(()=>{const R=j.subscriptionId||j.displayName||_,H=j.displayName||j.name,V=g(H),B=L[R];return V.length===0?null:n.jsxs("div",{className:"mt-3",children:[n.jsxs("button",{onClick:G=>{G.stopPropagation(),F(R)},className:"flex items-center gap-1 text-sm text-gray-600 hover:text-gray-800",children:[n.jsx(cn,{size:14}),n.jsxs("span",{children:["Recent Deliveries (",V.length,")"]}),B?n.jsx(dd,{size:14}):n.jsx(cd,{size:14})]}),B&&n.jsx("div",{className:"mt-2 pl-4 border-l-2 space-y-2",style:{borderColor:"#3d59ab"},children:V.map((G,$)=>n.jsxs("div",{className:"text-sm p-2 rounded",style:{backgroundColor:"#f9f9ed"},children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:new Date(G.date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})}),G.status==="problem"&&n.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-red-100 text-red-700",children:G.problem}),G.status==="delivered"&&!G.problem&&n.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-green-100 text-green-700",children:"Delivered"}),G.bagsReturned===!1&&n.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-amber-100 text-amber-700",children:"No bags"})]}),G.dishes&&G.dishes.length>0&&n.jsx("p",{className:"text-xs text-gray-500 mt-1",children:G.dishes.join(", ")})]},$))})]})})()]}),n.jsxs("div",{className:"flex gap-2 self-start ml-4",children:[n.jsx("button",{onClick:()=>O(j),className:"text-purple-600",title:"Copy portal link",children:n.jsx(y0,{size:18})}),n.jsx("button",{onClick:()=>v(_),className:"text-blue-600",title:"Edit",children:n.jsx(Sl,{size:18})}),n.jsx("button",{onClick:()=>l(_),className:"text-red-600",title:"Delete",children:n.jsx(rn,{size:18})})]})]})})},j.subscriptionId||_)})})]})]})}const Q0=({activeView:e,setActiveView:t})=>n.jsx("div",{className:"flex rounded-lg overflow-hidden border-2 flex-wrap",style:{borderColor:"#ebb582"},children:[{id:"week",label:"Week View",icon:Wn},{id:"plan",label:"Plan Routes",icon:Ms},{id:"progress",label:"Live Progress",icon:i0},{id:"log",label:"Delivery Log",icon:oc},{id:"bags",label:"Bags Summary",icon:ls},{id:"drivers",label:"Drivers",icon:m0}].map(s=>n.jsxs("button",{onClick:()=>t(s.id),className:`flex items-center gap-2 px-4 py-2 font-medium transition-colors ${e===s.id?"text-white":"bg-white"}`,style:e===s.id?{backgroundColor:"#3d59ab"}:{color:"#423d3c"},children:[n.jsx(s.icon,{size:18}),s.label]},s.id))}),Kn=({label:e,children:t})=>n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-sm font-medium mb-1",style:{color:"#423d3c"},children:e}),t]}),Qn="p-2 border-2 rounded-lg",Zn={borderColor:"#ebb582"};function Z0({clients:e,drivers:t,setDrivers:s,newDriver:r,setNewDriver:l,deliveryLog:a=[],setDeliveryLog:o,bagReminders:i={},setBagReminders:c,readyForDelivery:d=[],setReadyForDelivery:h,orderHistory:f=[],setOrderHistory:p,selectedWeekId:k,weeks:L={},addDeliveryLogToWeek:C,removeReadyForDeliveryFromWeek:F,isReadOnly:g=!1,startingAddress:u=""}){const[v,I]=x.useState("week"),[D,A]=x.useState(new Date().toISOString().split("T")[0]),[z,y]=x.useState(null),[b,w]=x.useState(null),[N,S]=x.useState(null),[O,W]=x.useState(null),[le,E]=x.useState(r||{...dr}),[_,j]=x.useState(""),[P,R]=x.useState(""),[H,V]=x.useState(""),[B,G]=x.useState(!1),$=[];for(let M=9;M<=18;M++)for(let Z=0;Z<60&&!(M===18&&Z>0);Z+=30){const oe=M>12?M-12:M,J=M>=12?"PM":"AM",Ae=Z===30?M+1>12?M+1-12:M+1:M>12?M-12:M,xe=Z===30?"00":"30",Oe=Z===30&&M+1>=12?"PM":J,ye=`${oe}:${Z.toString().padStart(2,"0")} ${J} - ${Ae}:${xe} ${Oe}`;$.push({value:`${M}:${Z.toString().padStart(2,"0")}`,label:ye})}const Y=new Date(D+"T12:00:00").toLocaleDateString("en-US",{weekday:"long"}),Q=(M=>d.filter(Z=>Z.date===M))(D),pe=M=>M!=null&&M.contacts&&M.contacts.length>0?M.contacts:[{name:(M==null?void 0:M.name)||"",email:(M==null?void 0:M.email)||"",phone:(M==null?void 0:M.phone)||"",address:(M==null?void 0:M.address)||""}],be=(()=>{const M=[...new Set(Q.map(oe=>oe.clientName))],Z=[];return M.forEach(oe=>{const J=e.find(Be=>Be.name===oe);if(J!=null&&J.pickup)return;const Ae=Q.filter(Be=>Be.clientName===oe),xe=pe(J),Oe=xe.filter(Be=>Be.address),ye={};Oe.forEach((Be,Te)=>{const Ie=Be.address.toLowerCase().trim();ye[Ie]||(ye[Ie]={address:Be.address,contacts:[],originalIndex:Te}),ye[Ie].contacts.push(Be)});const $e=Object.values(ye);$e.length===0?Z.push({...J,name:oe,orders:Ae,zone:(J==null?void 0:J.zone)||"Unassigned",address:"",displayName:(J==null?void 0:J.displayName)||oe,pickup:!1,contactNames:xe.map(Be=>Be.name).filter(Boolean),contactPhones:xe.map(Be=>Be.phone).filter(Boolean),contactIndex:0,totalStops:1,stopKey:oe}):$e.forEach((Be,Te)=>{Z.push({...J,name:oe,orders:Ae,zone:(J==null?void 0:J.zone)||"Unassigned",address:Be.address,displayName:(J==null?void 0:J.displayName)||oe,pickup:!1,contactNames:Be.contacts.map(Ie=>Ie.name).filter(Boolean),contactPhones:Be.contacts.map(Ie=>Ie.phone).filter(Boolean),contactEmails:Be.contacts.map(Ie=>Ie.email).filter(Boolean),contactIndex:Te,totalStops:$e.length,stopKey:$e.length>1?`${oe}-${Te}`:oe})})}),Z})(),ke={};wn.forEach(M=>{ke[M]=be.filter(Z=>Z.zone===M)});const Pe=be.filter(M=>!M.zone||!wn.includes(M.zone));Pe.length>0&&(ke.Unassigned=Pe);const Ee=M=>t.find(Z=>Z.zone===M),Ce=(M,Z,oe=0)=>a.find(J=>J.date===M&&J.clientName===Z&&(J.contactIndex===oe||J.contactIndex===void 0&&oe===0)),fe=(M,Z,oe=0,J="",Ae=null,xe="",Oe=!1)=>{if(g)return;const ye=Ee(Z),$e={id:Date.now(),date:D,clientName:M,contactIndex:oe,contactName:J,zone:Z,driverName:(ye==null?void 0:ye.name)||"Unknown",completedAt:new Date().toISOString(),problem:Ae,problemNote:xe,bagsReturned:Oe};o([...a,$e]),k&&C&&C(k,$e);const Be=e.find(ae=>ae.name===M),K=pe(Be).filter(ae=>ae.address).length||1;if(a.filter(ae=>ae.date===D&&ae.clientName===M).length+1>=K){const ae=d.filter(ue=>ue.clientName===M&&ue.date===D);ae.length>0&&(p(ue=>[...ue,...ae]),h(ue=>ue.filter(Le=>!(Le.clientName===M&&Le.date===D))),k&&F&&ae.forEach(ue=>{F(k,ue.id)}))}},qe=M=>{o(a.map(Z=>Z.id===M?{...Z,bagsReturned:!Z.bagsReturned}:Z))},je=M=>{c({...i,[M]:!i[M]})},Se=()=>{const M={};return[...a].sort((oe,J)=>new Date(J.completedAt)-new Date(oe.completedAt)).forEach(oe=>{M[oe.clientName]||(M[oe.clientName]=oe)}),Object.values(M).filter(oe=>!oe.bagsReturned).sort((oe,J)=>new Date(oe.completedAt)-new Date(J.completedAt))},Me=M=>{const Z=a.find(oe=>oe.id===M);if(Z){const oe=f.filter(J=>J.clientName===Z.clientName&&J.date===Z.date);oe.length>0&&(h(J=>[...J,...oe]),p(J=>J.filter(Ae=>!(Ae.clientName===Z.clientName&&Ae.date===Z.date))))}o(a.filter(oe=>oe.id!==M))},Ct=()=>{const M=[...new Set(Q.map(J=>J.clientName))],Z=[...new Set(a.filter(J=>J.date===D).map(J=>J.clientName))];return[...new Set([...M,...Z])].map(J=>{const Ae=e.find(xe=>xe.name===J);return{name:J,zone:(Ae==null?void 0:Ae.zone)||"Unassigned",displayName:(Ae==null?void 0:Ae.displayName)||J,pickup:(Ae==null?void 0:Ae.pickup)||!1}}).filter(J=>!J.pickup)},lt=()=>{const M={},Z=Ct();return wn.forEach(oe=>{const J=Ee(oe);if(!J)return;const Ae=Z.filter(Te=>Te.zone===oe);if(Ae.length===0)return;const xe=Ae.filter(Te=>Ce(D,Te.name)),Oe=xe.filter(Te=>{const Ie=Ce(D,Te.name);return Ie==null?void 0:Ie.problem}),ye=a.filter(Te=>Te.date===D&&Te.zone===oe).sort((Te,Ie)=>new Date(Ie.completedAt)-new Date(Te.completedAt))[0],Be=be.filter(Te=>Te.zone===oe).find(Te=>!Ce(D,Te.name));M[J.name]={driver:J,zone:oe,total:Ae.length,completed:xe.length,problems:Oe.length,lastCompletedAt:ye==null?void 0:ye.completedAt,lastClientName:ye==null?void 0:ye.clientName,currentStop:Be}}),M},ht=()=>a.filter(M=>!(_&&M.date!==_||P&&M.driverName!==P||H&&M.zone!==H||B&&!M.problem)).sort((M,Z)=>new Date(Z.completedAt)-new Date(M.completedAt)),Je=Object.entries(ke).filter(([M,Z])=>Z.length>0),ct=(M,Z,oe)=>{y({zone:Z,clientName:oe}),M.dataTransfer.effectAllowed="move"},Ge=(M,Z,oe)=>{M.preventDefault(),z&&z.zone===Z&&z.clientName!==oe&&w({zone:Z,clientName:oe})},se=()=>w(null),ge=(M,Z,oe)=>{M.preventDefault(),y(null),w(null)},ze=()=>{y(null),w(null)},_e=M=>{const oe=(ke[M]||[]).filter(J=>J.address).map(J=>encodeURIComponent(J.address));if(oe.length===0){alert("No addresses found for this zone");return}window.open(`https://www.google.com/maps/dir/${oe.join("/")}`,"_blank")},De=M=>M?new Date(M).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"";return n.jsxs("div",{className:"space-y-6",children:[g&&n.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-lg p-4 flex items-center gap-3",children:[n.jsx(kt,{size:24,className:"text-amber-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-amber-800",children:"Viewing Past Week (Read-only)"}),n.jsx("p",{className:"text-sm text-amber-600",children:"This week is locked and cannot be modified."})]})]}),n.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(cn,{size:28,style:{color:"#3d59ab"}}),n.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Deliveries"})]}),n.jsx(Q0,{activeView:v,setActiveView:I})]})}),v==="plan"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:n.jsx("div",{className:"flex items-center justify-between flex-wrap gap-4",children:n.jsxs("div",{children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:"Delivery Date:"}),n.jsx("input",{type:"date",value:D,onChange:M=>A(M.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}})]}),n.jsxs("p",{className:"text-gray-600 mt-2",children:[Y,"  ",be.length," orders ready for delivery"]})]})})}),Je.length===0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[n.jsxs("p",{className:"text-gray-500 italic",children:["No orders ready for delivery on ",D]}),n.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Complete orders in KDS to see them here."})]}),Je.map(([M,Z])=>{const oe=M!=="Unassigned"?Ee(M):null;return n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ms,{size:24,style:{color:"#3d59ab"}}),n.jsxs("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:["Zone ",M," (",Z.length," stops)"]}),oe&&n.jsxs("span",{className:"text-sm text-gray-600 ml-2",children:["Driver: ",oe.name]})]}),n.jsxs("button",{onClick:()=>_e(M),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#27ae60"},children:[n.jsx(Hn,{size:18}),"Google Maps"]})]}),n.jsx("div",{className:"space-y-2",children:Z.map((J,Ae)=>{const xe=J.stopKey||J.name,Oe=Ce(D,J.name,J.contactIndex||0),ye=(z==null?void 0:z.zone)===M&&(z==null?void 0:z.clientName)===xe,$e=(b==null?void 0:b.zone)===M&&(b==null?void 0:b.clientName)===xe,Be=J.totalStops>1,Te=J.contactNames||[],Ie=J.contactPhones||[];return n.jsxs("div",{draggable:!0,onDragStart:K=>ct(K,M,xe),onDragOver:K=>Ge(K,M,xe),onDragLeave:se,onDrop:K=>ge(K),onDragEnd:ze,className:`border-2 rounded-lg p-3 flex items-center gap-3 cursor-move transition-all ${ye?"opacity-50":""} ${Oe?"bg-green-50":""}`,style:{borderColor:Oe?"#22c55e":$e?"#3d59ab":"#ebb582"},children:[n.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[n.jsx(f0,{size:20}),n.jsx("span",{className:"font-bold text-lg w-6 text-center",style:{color:"#3d59ab"},children:Ae+1})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("h4",{className:"font-bold",children:J.displayName||J.name}),Be&&n.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-purple-100 text-purple-700",children:["Stop ",J.contactIndex+1,"/",J.totalStops]}),Te.length>0&&Te.some(K=>K&&K!==J.name)&&n.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-blue-100 text-blue-700 flex items-center gap-1",children:[n.jsx(Ha,{size:12})," ",Te.filter(Boolean).join(", ")]}),Oe&&n.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-green-100 text-green-700 flex items-center gap-1",children:[n.jsx(Ue,{size:12})," ",De(Oe.completedAt)]}),Oe&&n.jsxs("span",{className:`text-xs px-2 py-1 rounded flex items-center gap-1 ${Oe.bagsReturned?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:[n.jsx(ls,{size:12})," ",Oe.bagsReturned?"Bags returned":"No bags"]}),(Oe==null?void 0:Oe.problem)&&n.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-red-100 text-red-700 flex items-center gap-1",children:[n.jsx(kt,{size:12})," ",Oe.problem]})]}),J.address&&n.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(J.address)}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline truncate flex items-center gap-1",onClick:K=>K.stopPropagation(),children:[n.jsx(Ms,{size:12}),J.address]}),Ie.length>0&&n.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-1",children:[n.jsx(_u,{size:12})," ",Ie.join(", ")]}),J.orders&&J.orders.length>0&&J.contactIndex===0&&n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:J.orders.map(K=>`${K.portions}p: ${K.dishes.join(", ")}`).join(" | ")})]}),!Oe&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:()=>fe(J.name,M,J.contactIndex||0,Te.join(", "),null,"",!0),className:"px-3 py-1 rounded text-sm text-white flex items-center gap-1",style:{backgroundColor:"#22c55e"},children:[n.jsx(ls,{size:14})," + Bags"]}),n.jsx("button",{onClick:()=>fe(J.name,M,J.contactIndex||0,Te.join(", "),null,"",!1),className:"px-3 py-1 rounded text-sm bg-gray-200",children:"No Bags"})]}),Oe&&!Oe.bagsReturned&&n.jsx("button",{onClick:()=>qe(Oe.id),className:"px-2 py-1 rounded text-xs bg-amber-100 text-amber-700",children:"Mark bags returned"})]},xe)})})]},M)})]}),v==="progress"&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("label",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:"Date:"}),n.jsx("input",{type:"date",value:D,onChange:M=>A(M.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}})]}),n.jsx("p",{className:"text-gray-600",children:Y})]})}),Object.entries(lt()).map(([M,Z])=>{const oe=Z.total>0?Math.round(Z.completed/Z.total*100):0;return n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ha,{size:24,style:{color:"#3d59ab"}}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:M}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Zone ",Z.zone]})]})]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-2xl font-bold",style:{color:oe===100?"#22c55e":"#3d59ab"},children:[Z.completed,"/",Z.total]}),n.jsx("p",{className:"text-sm text-gray-600",children:"stops completed"})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full transition-all duration-500",style:{width:`${oe}%`,backgroundColor:oe===100?"#22c55e":"#3d59ab"}})}),n.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[oe,"% complete"]})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Current Stop"}),n.jsx("p",{className:"font-bold",style:{color:"#3d59ab"},children:Z.currentStop?Z.currentStop.displayName||Z.currentStop.name:"Complete!"})]}),n.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Last Completion"}),n.jsx("p",{className:"font-bold",style:{color:"#3d59ab"},children:Z.lastCompletedAt?De(Z.lastCompletedAt):"N/A"})]}),n.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Last Client"}),n.jsx("p",{className:"font-bold",style:{color:"#3d59ab"},children:Z.lastClientName||"N/A"})]}),n.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:Z.problems>0?"#fef2f2":"#f9f9ed"},children:[n.jsx("p",{className:"text-sm text-gray-600",children:"Problems"}),n.jsxs("p",{className:"font-bold flex items-center gap-1",style:{color:Z.problems>0?"#dc2626":"#3d59ab"},children:[Z.problems>0&&n.jsx(kt,{size:16}),Z.problems]})]})]}),Z.problems>0&&n.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-red-50 border border-red-200",children:[n.jsx("p",{className:"font-medium text-red-700 mb-2",children:"Flagged Problems:"}),a.filter(J=>J.date===D&&J.zone===Z.zone&&J.problem).map(J=>n.jsxs("div",{className:"text-sm text-red-600 flex items-center gap-2",children:[n.jsx(kt,{size:14}),n.jsxs("span",{className:"font-medium",children:[J.clientName,":"]}),n.jsx("span",{children:J.problem}),J.problemNote&&n.jsxs("span",{className:"text-red-500",children:["- ",J.problemNote]})]},J.id))]})]},M)}),Object.keys(lt()).length===0&&n.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:n.jsx("p",{className:"text-gray-500",children:"No drivers assigned to zones with deliveries today."})})]}),v==="log"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsx("h3",{className:"font-bold mb-4",style:{color:"#3d59ab"},children:"Filters"}),n.jsxs("div",{className:"flex flex-wrap gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date"}),n.jsx("input",{type:"date",value:_,onChange:M=>j(M.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Driver"}),n.jsxs("select",{value:P,onChange:M=>R(M.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:[n.jsx("option",{value:"",children:"All Drivers"}),t.map(M=>n.jsx("option",{value:M.name,children:M.name},M.id||M.name))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Zone"}),n.jsxs("select",{value:H,onChange:M=>V(M.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:[n.jsx("option",{value:"",children:"All Zones"}),wn.map(M=>n.jsxs("option",{value:M,children:["Zone ",M]},M))]})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs("label",{className:"flex items-center gap-2 p-2",children:[n.jsx("input",{type:"checkbox",checked:B,onChange:M=>G(M.target.checked),className:"w-5 h-5",style:{accentColor:"#3d59ab"}}),n.jsx("span",{className:"font-medium",children:"Problems Only"})]})}),n.jsx("div",{className:"flex items-end",children:n.jsx("button",{onClick:()=>{j(""),R(""),V(""),G(!1)},className:"px-4 py-2 rounded-lg bg-gray-200",children:"Clear Filters"})})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h3",{className:"font-bold mb-4",style:{color:"#3d59ab"},children:["Delivery Log (",ht().length," entries)"]}),ht().length>0?n.jsx("div",{className:"space-y-2",children:ht().map(M=>n.jsxs("div",{className:`border-2 rounded-lg p-3 flex items-center justify-between ${M.problem?"bg-red-50":""}`,style:{borderColor:M.problem?"#fca5a5":"#ebb582"},children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"text-center min-w-[80px]",children:[n.jsx("p",{className:"text-sm text-gray-500",children:M.date}),n.jsx("p",{className:"font-bold",style:{color:"#3d59ab"},children:De(M.completedAt)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold",children:M.clientName}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Zone ",M.zone,"  ",M.driverName]})]}),M.problem&&n.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[n.jsx(kt,{size:16}),n.jsx("span",{className:"font-medium",children:M.problem}),M.problemNote&&n.jsxs("span",{className:"text-sm",children:["- ",M.problemNote]})]})]}),n.jsx("button",{onClick:()=>Me(M.id),className:"text-sm px-3 py-1 rounded bg-gray-100 text-gray-600 hover:bg-gray-200",children:"Undo"})]},M.id))}):n.jsx("p",{className:"text-gray-500 text-center py-8",children:"No delivery log entries match the filters."})]})]}),v==="bags"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(ls,{size:24,style:{color:"#3d59ab"}}),n.jsx("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:"Outstanding Bags"})]}),n.jsx("p",{className:"text-gray-600",children:"Clients who haven't returned bags on their last delivery"})]}),Se().length>0?n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsx("div",{className:"space-y-3",children:Se().map(M=>{const Z=e.find(J=>J.name===M.clientName),oe=i[M.clientName];return n.jsxs("div",{className:`border-2 rounded-lg p-4 flex items-center justify-between ${oe?"bg-green-50":"bg-amber-50"}`,style:{borderColor:oe?"#22c55e":"#f59e0b"},children:[n.jsx("div",{className:"flex items-center gap-4",children:n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-lg",children:(Z==null?void 0:Z.displayName)||M.clientName}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Last delivery: ",M.date,"  Zone ",M.zone]}),(Z==null?void 0:Z.phone)&&n.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[n.jsx(_u,{size:14})," ",Z.phone]})]})}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:oe||!1,onChange:()=>je(M.clientName),className:"w-5 h-5",style:{accentColor:"#3d59ab"}}),n.jsxs("span",{className:"text-sm font-medium flex items-center gap-1",children:[n.jsx(d0,{size:16}),"Reminder Sent"]})]}),n.jsx("button",{onClick:()=>qe(M.id),className:"px-4 py-2 rounded-lg text-white text-sm",style:{backgroundColor:"#22c55e"},children:"Mark Returned"})]})]},M.id)})}),n.jsx("div",{className:"mt-4 pt-4 border-t",children:n.jsxs("p",{className:"text-sm text-gray-600",children:["Total outstanding: ",n.jsx("span",{className:"font-bold",children:Se().length})," clients"," ",""," ","Reminders sent: ",n.jsx("span",{className:"font-bold",children:Se().filter(M=>i[M.clientName]).length})]})})]}):n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[n.jsx(ls,{size:48,className:"mx-auto mb-4 text-green-300"}),n.jsx("p",{className:"text-gray-500",children:"All bags have been returned!"}),n.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"No outstanding bags from recent deliveries."})]})]}),v==="week"&&(()=>{const Z=(()=>{const ye=new Date(D+"T12:00:00"),$e=ye.getDay(),Be=ye.getDate()-$e+($e===0?-6:1),Te=new Date(ye.setDate(Be));return{monday:Te.toISOString().split("T")[0],tuesday:new Date(new Date(Te).setDate(Te.getDate()+1)).toISOString().split("T")[0],thursday:new Date(new Date(Te).setDate(Te.getDate()+3)).toISOString().split("T")[0]}})(),oe=ye=>e.filter($e=>$e.status==="active"&&$e.deliveryDay===ye&&!$e.pickup),J=ye=>d.filter($e=>$e.date===ye),Ae=[{name:"Monday",date:Z.monday},{name:"Tuesday",date:Z.tuesday},{name:"Thursday",date:Z.thursday}],xe=Ae.reduce((ye,$e)=>ye+oe($e.name).length,0),Oe=Ae.reduce((ye,$e)=>ye+J($e.date).length,0);return n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:"Delivering This Week"}),n.jsxs("p",{className:"text-gray-600",children:[xe," clients scheduled  ",Oe," orders ready"]})]}),n.jsx("div",{children:n.jsx("input",{type:"date",value:D,onChange:ye=>A(ye.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}})})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Ae.map(ye=>{const $e=oe(ye.name),Be=J(ye.date),Te=[...new Set(Be.map(Ie=>Ie.clientName))];return n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-lg",style:{color:"#3d59ab"},children:ye.name}),n.jsx("p",{className:"text-sm text-gray-500",children:new Date(ye.date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),n.jsxs("div",{className:"text-right",children:[n.jsx("span",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:$e.length}),n.jsx("p",{className:"text-xs text-gray-500",children:"clients"})]})]}),n.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:$e.length===0?n.jsx("p",{className:"text-gray-400 text-sm italic",children:"No deliveries"}):$e.map((Ie,K)=>{const ee=Te.includes(Ie.name),ae=a.some(ue=>ue.date===ye.date&&ue.clientName===Ie.name);return n.jsxs("div",{className:`p-2 rounded text-sm flex items-center justify-between ${ae?"bg-green-50":ee?"bg-amber-50":""}`,style:{backgroundColor:ae||ee?void 0:"#f9f9ed"},children:[n.jsx("span",{className:ae?"line-through text-gray-400":"",children:Ie.displayName||Ie.name}),n.jsxs("div",{className:"flex items-center gap-1",children:[Ie.zone&&n.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded bg-purple-100 text-purple-700",children:Ie.zone}),ae&&n.jsx(Ue,{size:14,className:"text-green-600"}),ee&&!ae&&n.jsx(cn,{size:14,className:"text-amber-600"})]})]},K)})}),$e.length>0&&n.jsxs("button",{onClick:()=>{const Ie=$e.map(K=>{var ue;return((ue=(K.contacts||[]).find(Le=>Le.address))==null?void 0:ue.address)||K.address}).filter(Boolean).map(K=>encodeURIComponent(K));if(Ie.length===0){alert("No addresses found for this day");return}window.open(`https://www.google.com/maps/dir/${Ie.join("/")}`,"_blank")},className:"w-full mt-3 flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-white text-sm",style:{backgroundColor:"#27ae60"},children:[n.jsx(Hn,{size:16}),"Plan Route"]})]},ye.name)})})]})})(),v==="drivers"&&(()=>{const M=()=>{if(!le.name){alert("Please enter a driver name");return}s&&s([...t,{...le,id:Date.now()}]),E({...dr}),l&&l({...dr})},Z=xe=>{window.confirm("Delete this driver?")&&s&&s(t.filter((Oe,ye)=>ye!==xe))},oe=xe=>{S(xe),W({...t[xe]})},J=()=>{S(null),W(null)},Ae=()=>{if(s){const xe=[...t];xe[N]=O,s(xe)}S(null),W(null)};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:"Add Driver"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Kn,{label:"Driver Name",children:n.jsx("input",{type:"text",value:le.name,onChange:xe=>E({...le,name:xe.target.value}),placeholder:"Enter driver name",className:Qn,style:Zn})}),n.jsx(Kn,{label:"Phone",children:n.jsx("input",{type:"tel",value:le.phone||"",onChange:xe=>E({...le,phone:xe.target.value}),placeholder:"Phone number",className:Qn,style:Zn})}),n.jsx(Kn,{label:"Zone",children:n.jsxs("select",{value:le.zone||"",onChange:xe=>E({...le,zone:xe.target.value}),className:Qn,style:Zn,children:[n.jsx("option",{value:"",children:"Unassigned"}),wn.map(xe=>n.jsxs("option",{value:xe,children:["Zone ",xe]},xe))]})}),n.jsx(Kn,{label:"Access Code",children:n.jsx("input",{type:"text",value:le.accessCode||"",onChange:xe=>E({...le,accessCode:xe.target.value}),placeholder:"Access code",className:Qn,style:Zn})})]}),n.jsxs("button",{onClick:M,className:"mt-4 px-6 py-2 rounded-lg text-white flex items-center gap-2",style:{backgroundColor:"#3d59ab"},children:[n.jsx(vn,{size:20}),"Add Driver"]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:["Drivers (",t.length,")"]}),t.length>0?n.jsx("div",{className:"space-y-3",children:t.map((xe,Oe)=>n.jsx("div",{children:N===Oe?n.jsxs("div",{className:"border-2 rounded-lg p-4",style:{borderColor:"#3d59ab",backgroundColor:"#f9f9ed"},children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(Kn,{label:"Driver Name",children:n.jsx("input",{type:"text",value:O.name,onChange:ye=>W({...O,name:ye.target.value}),className:Qn,style:Zn})}),n.jsx(Kn,{label:"Phone",children:n.jsx("input",{type:"tel",value:O.phone||"",onChange:ye=>W({...O,phone:ye.target.value}),className:Qn,style:Zn})}),n.jsx(Kn,{label:"Zone",children:n.jsxs("select",{value:O.zone||"",onChange:ye=>W({...O,zone:ye.target.value}),className:Qn,style:Zn,children:[n.jsx("option",{value:"",children:"Unassigned"}),wn.map(ye=>n.jsxs("option",{value:ye,children:["Zone ",ye]},ye))]})}),n.jsx(Kn,{label:"Access Code",children:n.jsx("input",{type:"text",value:O.accessCode||"",onChange:ye=>W({...O,accessCode:ye.target.value}),className:Qn,style:Zn})})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsxs("button",{onClick:Ae,className:"flex items-center gap-1 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[n.jsx(Ue,{size:18}),"Save"]}),n.jsxs("button",{onClick:J,className:"flex items-center gap-1 px-4 py-2 rounded-lg bg-gray-200",children:[n.jsx(Qt,{size:18}),"Cancel"]})]})]}):n.jsxs("div",{className:"border-2 rounded-lg p-4 flex justify-between",style:{borderColor:"#ebb582"},children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("h4",{className:"font-bold text-lg",children:xe.name}),xe.zone&&n.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-purple-100 text-purple-700",children:["Zone ",xe.zone]})]}),n.jsxs("p",{className:"text-sm text-gray-600",children:[xe.phone&&`Phone: ${xe.phone}`,xe.phone&&xe.accessCode&&"  ",xe.accessCode&&`Code: ${xe.accessCode}`]})]}),n.jsxs("div",{className:"flex gap-2 self-start ml-4",children:[n.jsx("button",{onClick:()=>oe(Oe),className:"text-blue-600",children:n.jsx(Sl,{size:18})}),n.jsx("button",{onClick:()=>Z(Oe),className:"text-red-600",children:n.jsx(rn,{size:18})})]})]})},xe.id||Oe))}):n.jsx("p",{className:"text-gray-500",children:"No drivers yet. Add your first driver above."})]})]})})()]})}function Ah({masterIngredients:e,newIngredient:t,setNewIngredient:s,editingIngredientId:r,editingIngredientData:l,setEditingIngredientData:a,duplicateWarnings:o,setDuplicateWarnings:i,scanForDuplicates:c,mergeIngredients:d,addMasterIngredient:h,deleteMasterIngredient:f,startEditingMasterIngredient:p,saveEditingMasterIngredient:k,cancelEditingMasterIngredient:L,ingredientsFileRef:C,exportIngredientsCSV:F}){return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Ingredients"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 rounded-lg border-2 border-orange-400 text-orange-600",children:[n.jsx(bh,{size:18}),"Find Duplicates"]}),n.jsxs("button",{onClick:()=>C.current.click(),className:"flex items-center gap-2 px-4 py-2 rounded-lg border-2",style:{borderColor:"#3d59ab",color:"#3d59ab"},children:[n.jsx(pd,{size:18}),"Import"]}),n.jsxs("button",{onClick:F,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[n.jsx(go,{size:18}),"Export"]})]})]}),o.length>0&&n.jsxs("div",{className:"mb-4 p-4 bg-orange-50 border-2 border-orange-200 rounded-lg",children:[n.jsx("h3",{className:"font-bold text-orange-700 mb-2",children:"Duplicates:"}),o.map((g,u)=>n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-orange-200 last:border-0",children:[n.jsxs("span",{className:"text-sm",children:['"',g.ing1.name,'"  "',g.ing2.name,'"']}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>d(g.ing1.id,g.ing2.id),className:"text-xs px-2 py-1 rounded bg-blue-100 text-blue-700",children:['Keep "',g.ing1.name,'"']}),n.jsxs("button",{onClick:()=>d(g.ing2.id,g.ing1.id),className:"text-xs px-2 py-1 rounded bg-blue-100 text-blue-700",children:['Keep "',g.ing2.name,'"']}),n.jsx("button",{onClick:()=>i(v=>v.filter((I,D)=>D!==u)),className:"text-xs px-2 py-1 rounded bg-gray-100",children:"Ignore"})]})]},u))]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[n.jsx("input",{type:"text",value:t.name,onChange:g=>s({...t,name:g.target.value}),placeholder:"Name",className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}}),n.jsx("input",{type:"text",value:t.cost,onChange:g=>s({...t,cost:g.target.value}),placeholder:"Cost/unit",className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}}),n.jsx("select",{value:t.unit,onChange:g=>s({...t,unit:g.target.value}),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:Lu.map(g=>n.jsx("option",{value:g,children:g},g))}),n.jsx("input",{type:"text",value:t.source,onChange:g=>s({...t,source:g.target.value}),placeholder:"Source",className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}}),n.jsx("select",{value:t.section,onChange:g=>s({...t,section:g.target.value}),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:Va.map(g=>n.jsx("option",{value:g,children:g},g))})]}),n.jsxs("button",{onClick:h,className:"px-6 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[n.jsx(vn,{size:20,className:"inline mr-2"}),"Add"]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-4",style:{color:"#3d59ab"},children:["All Ingredients (",e.length,")"]}),e.length>0?n.jsx("div",{className:"space-y-2",children:e.map(g=>n.jsx("div",{children:r===g.id?n.jsxs("div",{className:"flex flex-wrap gap-2 p-3 rounded-lg border-2",style:{borderColor:"#3d59ab",backgroundColor:"#f9f9ed"},children:[n.jsx("input",{type:"text",value:l.name,onChange:u=>a({...l,name:u.target.value}),className:"flex-1 min-w-[120px] p-2 border rounded"}),n.jsx("input",{type:"text",value:l.cost,onChange:u=>a({...l,cost:u.target.value}),placeholder:"$",className:"w-16 p-2 border rounded"}),n.jsx("select",{value:l.unit,onChange:u=>a({...l,unit:u.target.value}),className:"w-16 p-2 border rounded",children:Lu.map(u=>n.jsx("option",{value:u,children:u},u))}),n.jsx("input",{type:"text",value:l.source,onChange:u=>a({...l,source:u.target.value}),placeholder:"Source",className:"w-20 p-2 border rounded"}),n.jsx("select",{value:l.section,onChange:u=>a({...l,section:u.target.value}),className:"w-28 p-2 border rounded",children:Va.map(u=>n.jsx("option",{value:u,children:u},u))}),n.jsx("button",{onClick:k,className:"px-3 py-2 rounded text-white",style:{backgroundColor:"#3d59ab"},children:n.jsx(Ue,{size:18})}),n.jsx("button",{onClick:L,className:"px-3 py-2 rounded bg-gray-200",children:n.jsx(Qt,{size:18})})]}):n.jsxs("div",{className:"flex justify-between items-center p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:g.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[g.cost&&`$${g.cost}/${g.unit}`," ",g.source&&` ${g.source}`,"  ",g.section]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>p(g),className:"text-blue-600",children:n.jsx(Sl,{size:18})}),n.jsx("button",{onClick:()=>f(g.id),className:"text-red-600",children:n.jsx(rn,{size:18})})]})]})},g.id))}):n.jsx("p",{className:"text-gray-500",children:"No ingredients yet."})]})]})}function J0(){ho();const[e,t]=x.useState("menu"),{recipes:s,setRecipes:r,menuItems:l,setMenuItems:a,selectedClients:o,setSelectedClients:i,menuDate:c,setMenuDate:d,clients:h,setClients:f,newClient:p,setNewClient:k,newRecipe:L,setNewRecipe:C,newMenuItem:F,setNewMenuItem:g,masterIngredients:u,setMasterIngredients:v,newIngredient:I,setNewIngredient:D,editingRecipe:A,setEditingRecipe:z,editingIngredientId:y,setEditingIngredientId:b,editingIngredientData:w,setEditingIngredientData:N,duplicateWarnings:S,setDuplicateWarnings:O,completedDishes:W,setCompletedDishes:le,orderHistory:E,setOrderHistory:_,weeklyTasks:j,setWeeklyTasks:P,drivers:R,setDrivers:H,newDriver:V,setNewDriver:B,deliveryLog:G,setDeliveryLog:$,bagReminders:Y,setBagReminders:q,readyForDelivery:Q,setReadyForDelivery:pe,clientPortalData:te,setClientPortalData:be,weeks:ke,setWeeks:Pe,selectedWeekId:Ee,setSelectedWeekId:Ce,findSimilarIngredients:fe,findExactMatch:qe,addToMasterIngredients:je,updateMasterIngredientCost:Se,syncRecipeIngredientsFromMaster:Me,getUniqueVendors:Ct,mergeIngredients:lt,scanForDuplicates:ht,getRecipeCost:Je,getRecipeCounts:ct,getOrCreateWeek:Ge,getCurrentWeek:se,lockWeekAndSnapshot:ge,unlockWeekById:ze,updateWeekData:_e,updateWeekKdsStatus:De,addReadyForDeliveryToWeek:M,addDeliveryLogToWeek:Z,removeReadyForDeliveryFromWeek:oe,isWeekReadOnly:J,getWeekIds:Ae}=q0(),xe=x.useRef(),Oe=x.useRef(),ye=x.useRef(),$e=re=>{const ie=re.target.files[0];if(ie){try{Oh(ie,de=>{if(console.log("Parsed clients:",de),de.length===0){alert(`No subscriptions found in CSV. Please check the file format.

Expected columns: Name, Display Name, Address, Email, Phone, Portions, Meals, etc.`);return}const we=de.reduce((Ye,nt)=>{var xt;return Ye+(((xt=nt.contacts)==null?void 0:xt.length)||0)},0);f(de),alert(`Import successful!

${de.length} subscription(s) imported
${we} contact(s) total`)},de=>{console.error("CSV parse error:",de),alert("Error parsing CSV: "+(de.message||de))})}catch(de){console.error("Import error:",de),alert("Error importing CSV: "+de.message)}re.target.value=""}},Be=re=>{const ie=re.target.files[0];ie&&(H0(ie,de=>{if(de.length===0){alert("No ingredients found in CSV. Please check the file format.");return}v(de),alert(`Import successful!

${de.length} ingredient(s) imported`)},de=>alert("Error parsing CSV: "+de.message)),re.target.value="")},Te=re=>{const ie=re.target.files[0];ie&&(V0(ie,(de,we)=>{const Ye=Object.values(de).flat().length;if(Ye===0){alert("No recipes found in CSV. Please check the file format.");return}r(de),we.forEach(nt=>je(nt)),alert(`Import successful!

${Ye} recipe(s) imported
${we.length} ingredient(s) added to master list`)},de=>alert("Error parsing CSV: "+de.message)),re.target.value="")},Ie=()=>{if(!L.name){alert("Please enter a recipe name");return}const re=L.ingredients.filter(ie=>ie.name&&ie.quantity);if(re.length===0){alert("Please add at least one ingredient with name and quantity");return}re.forEach(ie=>je(ie)),r({...s,[L.category]:[...s[L.category],{name:L.name,instructions:L.instructions,ingredients:re}]}),C(qa),alert("Recipe saved!")},K=(re,ie)=>{window.confirm("Delete this recipe?")&&r({...s,[re]:s[re].filter((de,we)=>we!==ie)})},ee=(re,ie)=>{const de=s[re][ie];z({category:re,index:ie,recipe:{...de,ingredients:de.ingredients.map(we=>({name:we.name||"",quantity:we.quantity||"",unit:we.unit||"oz",cost:we.cost||"",source:we.source||"",section:we.section||"Other"}))}})},ae=(re,ie,de)=>{const we=[...A.recipe.ingredients];we[re][ie]=de,z({...A,recipe:{...A.recipe,ingredients:we}})},ue=()=>{z({...A,recipe:{...A.recipe,ingredients:[...A.recipe.ingredients,{name:"",quantity:"",unit:"oz",cost:"",source:"",section:"Other"}]}})},Le=re=>{z({...A,recipe:{...A.recipe,ingredients:A.recipe.ingredients.filter((ie,de)=>de!==re)}})},at=()=>{const{category:re,index:ie,recipe:de}=A,we=de.ingredients.filter(nt=>nt.name&&nt.quantity);we.forEach(nt=>je(nt));const Ye={...s};Ye[re][ie]={...de,ingredients:we},r(Ye),z(null),alert("Recipe updated!")},ot=()=>{if(!F.protein&&!F.veg&&!F.starch&&F.extras.length===0){alert("Please select at least one dish");return}if(o.length===0){alert("Please select at least one client");return}const re=o.map(ie=>{const de=h.find(Ye=>Ye.name===ie),we=de&&(de.portions||de.persons)||1;return{...F,clientName:ie,date:c,portions:we,id:Date.now()+Math.random(),approved:!1}});a(ie=>[...ie,...re]),g(Ga)},et=re=>a(l.filter(ie=>ie.id!==re)),un=()=>{window.confirm("Clear all menu items?")&&(a([]),i([]),le({}))},Dl=()=>{const re={};return l.forEach(ie=>{re[ie.clientName]||(re[ie.clientName]=[]),re[ie.clientName].push(ie)}),re},El=()=>l.filter(re=>re.approved),kr=()=>{const re={};return El().forEach(de=>{["protein","veg","starch"].forEach(we=>{de[we]&&(re[de[we]]||(re[de[we]]={totalPortions:0,category:we,clients:[]}),re[de[we]].totalPortions+=de.portions,re[de[we]].clients.push({name:de.clientName,portions:de.portions}))}),de.extras&&de.extras.forEach(we=>{const Ye=s.sauces.find(nt=>nt.name===we)?"sauces":s.breakfast.find(nt=>nt.name===we)?"breakfast":"soups";re[we]||(re[we]={totalPortions:0,category:Ye,clients:[]}),re[we].totalPortions+=de.portions,re[we].clients.push({name:de.clientName,portions:de.portions})})}),re},vo=re=>{le(ie=>({...ie,[re]:!ie[re]}))},bo=()=>{const re=kr(),ie=Object.keys(re);return ie.length>0&&ie.every(de=>W[de])},jo=()=>{if(!window.confirm("Mark all orders complete and move to Ready for Delivery?"))return;const re=Dl(),ie=[];Object.entries(re).forEach(([we,Ye])=>{Ye.forEach(nt=>{const xt=[nt.protein,nt.veg,nt.starch,...nt.extras||[]].filter(Boolean);let $t=0;xt.forEach(qn=>{const _l=["protein","veg","starch","sauces","breakfast","soups"].find(Cr=>{var en;return(en=s[Cr])==null?void 0:en.find(ks=>ks.name===qn)}),wr=_l?s[_l].find(Cr=>Cr.name===qn):null;wr&&($t+=Je(wr)*nt.portions)}),ie.push({id:Date.now()+Math.random(),clientName:we,date:nt.date||c,dishes:xt,portions:nt.portions,cost:$t})})});const de={};ie.forEach(we=>{const Ye=as(we.date);de[Ye]||(de[Ye]=[]),de[Ye].push(we)}),Object.entries(de).forEach(([we,Ye])=>{M(we,Ye)}),pe(we=>[...we,...ie]),a([]),le({}),i([]),alert("Orders ready for delivery!")},Pl=()=>{const re={},ie=kr();return Object.entries(ie).forEach(([de,we])=>{var nt;const Ye=(nt=s[we.category])==null?void 0:nt.find(xt=>xt.name===de);Ye!=null&&Ye.ingredients&&Ye.ingredients.forEach(xt=>{const $t=qe(xt.name),qn=`${xt.name}-${xt.unit}`;re[qn]||(re[qn]={name:xt.name,quantity:0,unit:xt.unit||"oz",section:xt.section||($t==null?void 0:$t.section)||B0(xt.name),cost:($t==null?void 0:$t.cost)||xt.cost||"",source:($t==null?void 0:$t.source)||xt.source||""}),re[qn].quantity+=parseFloat(xt.quantity)*we.totalPortions})}),Object.values(re).sort((de,we)=>{const Ye=(de.source||"ZZZ").localeCompare(we.source||"ZZZ");return Ye!==0?Ye:de.section.localeCompare(we.section)})},No=()=>{const re=Pl();yo(Us.unparse(re.map(ie=>({Source:ie.source,Section:ie.section,Ingredient:ie.name,Quantity:ie.quantity.toFixed(2),Unit:ie.unit})),{columns:["Source","Section","Ingredient","Quantity","Unit"]}),"shopping-list.csv")},ko=()=>{if(!p.name){alert("Please enter a client name");return}f([...h,{...p}]),k(Eh),alert("Client added!")},wo=re=>{window.confirm("Delete this client?")&&f(h.filter((ie,de)=>de!==re))},Co=()=>{if(!I.name){alert("Please enter an ingredient name");return}const re=fe(I.name),ie=qe(I.name);if(ie){alert(`"${I.name}" already exists as "${ie.name}"`);return}re.length>0&&!window.confirm(`Similar ingredients found: ${re.map(de=>de.name).join(", ")}

Add "${I.name}" anyway?`)||(v([...u,{...I,id:Date.now()}]),D(Ya),alert("Ingredient added!"))},So=re=>{window.confirm("Delete this ingredient?")&&v(u.filter(ie=>ie.id!==re))},Do=re=>{b(re.id),N({...re})},Eo=()=>{v(re=>re.map(ie=>ie.id===y?{...w}:ie)),b(null),N(null)},Po=()=>{b(null),N(null)},Ro=Pl(),jt=ke[Ee]||null,zo=J(Ee),_o=()=>{var re;if((jt==null?void 0:jt.status)==="locked"&&((re=jt.snapshot)!=null&&re.menu)){const ie=[];return Object.entries(jt.snapshot.menu).forEach(([de,we])=>{we.forEach(Ye=>{ie.push({...Ye,clientName:de,approved:!0})})}),ie}return l.filter(ie=>as(ie.date)===Ee)},Rl=()=>{var re;return((re=jt==null?void 0:jt.readyForDelivery)==null?void 0:re.length)>0?jt.readyForDelivery:Q.filter(ie=>as(ie.date)===Ee)},zl=()=>{var re;return((re=jt==null?void 0:jt.deliveryLog)==null?void 0:re.length)>0?jt.deliveryLog:G.filter(ie=>as(ie.date)===Ee)},To=()=>(jt==null?void 0:jt.kdsStatus)||{};return n.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("input",{type:"file",ref:xe,onChange:$e,accept:".csv",className:"hidden"}),n.jsx("input",{type:"file",ref:Oe,onChange:Te,accept:".csv",className:"hidden"}),n.jsx("input",{type:"file",ref:ye,onChange:Be,accept:".csv",className:"hidden"}),n.jsx("header",{className:"text-white p-4",style:{backgroundColor:"#3d59ab"},children:n.jsxs("div",{className:"flex items-center justify-between max-w-6xl mx-auto",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(In,{size:32,style:{color:"#ffd700"}}),n.jsx("h1",{className:"text-2xl font-bold",children:"Goldfinch Chef"})]}),n.jsxs(Mn,{to:"/admin",className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition-colors",children:[n.jsx(ic,{size:20}),"Admin"]})]})}),n.jsx("nav",{className:"bg-white shadow-md sticky top-0 z-10",children:n.jsx("div",{className:"max-w-6xl mx-auto flex overflow-x-auto",children:n.jsx(L0,{activeTab:e,setActiveTab:t})})}),n.jsxs("div",{className:"max-w-6xl mx-auto p-4 space-y-6",children:[["kds","deliveries"].includes(e)&&n.jsx(zh,{selectedWeekId:Ee,setSelectedWeekId:Ce,weeks:ke,onLockWeek:ge,onUnlockWeek:ze}),["kds","deliveries"].includes(e)&&n.jsx(M0,{menuItems:_o(),completedDishes:To(),readyForDelivery:Rl(),deliveryLog:zl(),orderHistory:E,selectedDate:c,onNavigate:t}),e==="recipes"&&n.jsx(Ih,{recipes:s,newRecipe:L,setNewRecipe:C,editingRecipe:A,setEditingRecipe:z,masterIngredients:u,recipesFileRef:Oe,findExactMatch:qe,findSimilarIngredients:fe,getRecipeCost:Je,getRecipeCounts:ct,saveRecipe:Ie,deleteRecipe:K,startEditingRecipe:ee,saveEditingRecipe:at,updateEditingIngredient:ae,addEditingIngredient:ue,removeEditingIngredient:Le,exportRecipesCSV:()=>Lh(s),getUniqueVendors:Ct,updateMasterIngredientCost:Se,syncRecipeIngredientsFromMaster:Me}),e==="menu"&&n.jsx(Mh,{menuDate:c,setMenuDate:d,clients:h,allClients:h,selectedClients:o,setSelectedClients:i,recipes:s,newMenuItem:F,setNewMenuItem:g,menuItems:l,setMenuItems:a,addMenuItem:ot,clearMenu:un,deleteMenuItem:et,getOrdersByClient:Dl,clientPortalData:te,weeklyTasks:j,weeks:ke,selectedWeekId:Ee,setSelectedWeekId:Ce,lockWeekAndSnapshot:ge,unlockWeekById:ze}),e==="kds"&&n.jsx(Y0,{menuItems:El(),recipes:s,completedDishes:W,toggleDishComplete:vo,allDishesComplete:bo,completeAllOrders:jo,getKDSView:kr,pendingApprovalCount:l.filter(re=>!re.approved).length}),e==="prep"&&n.jsx(K0,{prepList:Ro,exportPrepList:No}),e==="ingredients"&&n.jsx(Ah,{masterIngredients:u,newIngredient:I,setNewIngredient:D,editingIngredientId:y,editingIngredientData:w,setEditingIngredientData:N,duplicateWarnings:S,setDuplicateWarnings:O,scanForDuplicates:ht,mergeIngredients:lt,addMasterIngredient:Co,deleteMasterIngredient:So,startEditingMasterIngredient:Do,saveEditingMasterIngredient:Eo,cancelEditingMasterIngredient:Po,ingredientsFileRef:ye,exportIngredientsCSV:()=>Th(u)}),e==="clients"&&n.jsx(Fh,{clients:h,setClients:f,newClient:p,setNewClient:k,addClient:ko,deleteClient:wo,clientsFileRef:xe,exportClientsCSV:()=>W0(h),deliveryLog:G,orderHistory:E}),e==="deliveries"&&n.jsx(Z0,{clients:h,drivers:R,setDrivers:H,newDriver:V,setNewDriver:B,deliveryLog:zl(),setDeliveryLog:$,bagReminders:Y,setBagReminders:q,readyForDelivery:Rl(),setReadyForDelivery:pe,orderHistory:E,setOrderHistory:_,selectedWeekId:Ee,weeks:ke,addDeliveryLogToWeek:Z,removeReadyForDeliveryFromWeek:oe,isReadOnly:zo})]})]})}const ea="goldfinchChefData";function X0(){const[e,t]=x.useState([]),[s,r]=x.useState([]),[l,a]=x.useState([]),[o,i]=x.useState([]),[c,d]=x.useState([]),[h,f]=x.useState(!1);x.useEffect(()=>{const u=()=>{const I=localStorage.getItem(ea);if(I)try{const D=JSON.parse(I);D.drivers&&t(D.drivers),D.clients&&r(D.clients),D.readyForDelivery&&a(D.readyForDelivery),D.deliveryLog&&i(D.deliveryLog),D.orderHistory&&d(D.orderHistory)}catch(D){console.error("Error loading saved data:",D)}f(!0)};u();const v=I=>{I.key===ea&&u()};return window.addEventListener("storage",v),()=>window.removeEventListener("storage",v)},[]);const p=x.useCallback(u=>{const v=localStorage.getItem(ea);let I={};if(v)try{I=JSON.parse(v)}catch(A){console.error("Error parsing saved data:",A)}const D={...I,...u,lastSaved:new Date().toISOString()};localStorage.setItem(ea,JSON.stringify(D))},[]),k=x.useCallback(u=>{i(u),p({deliveryLog:u})},[p]),L=x.useCallback(u=>{a(u),p({readyForDelivery:u})},[p]),C=x.useCallback(u=>{d(u),p({orderHistory:u})},[p]),F=x.useCallback(u=>e.find(v=>v.accessCode===u),[e]),g=x.useCallback(u=>e.find(v=>v.name===u),[e]);return{drivers:e,clients:s,readyForDelivery:l,deliveryLog:o,orderHistory:c,isLoaded:h,updateDeliveryLog:k,updateReadyForDelivery:L,updateOrderHistory:C,authenticateDriver:F,getDriverByName:g}}const Ut={HAND:"hand",PORCH:"porch"};function ev(){const[e]=vh(),{clients:t,readyForDelivery:s,deliveryLog:r,orderHistory:l,isLoaded:a,updateDeliveryLog:o,updateReadyForDelivery:i,updateOrderHistory:c,authenticateDriver:d,getDriverByName:h}=X0(),[f,p]=x.useState(""),[k,L]=x.useState(null),[C,F]=x.useState(""),[g,u]=x.useState(!1);x.useEffect(()=>{if(a&&!k){const se=e.get("admin_driver");if(se){const ge=h(se);ge&&(L(ge),u(!0))}}},[a,e,k,h]);const[v,I]=x.useState(0),[D,A]=x.useState(Ut.HAND),[z,y]=x.useState(null),[b,w]=x.useState(null),[N,S]=x.useState(!1),[O,W]=x.useState(!1),[le,E]=x.useState(""),[_,j]=x.useState(""),[P,R]=x.useState(!1),[H,V]=x.useState([]),[B,G]=x.useState(!1);x.useState(!1);const[$,Y]=x.useState(null),q=x.useRef(null),Q=new Date().toISOString().split("T")[0],pe=$||Q,te=pe!==Q;(()=>{if(!k)return[];const se=new Set;return s.forEach(ge=>{if(ge.date>=Q){const ze=t.find(_e=>_e.name===ge.clientName);ze&&ze.zone===k.zone&&!ze.pickup&&se.add(ge.date)}}),Array.from(se).sort()})();const ke=se=>{if(!k)return[];const ge=s.filter(_e=>_e.date===se);return[...new Set(ge.map(_e=>_e.clientName))].map(_e=>{const De=t.find(Z=>Z.name===_e);if(!De||De.zone!==k.zone||De.pickup)return null;const M=ge.filter(Z=>Z.clientName===_e);return{clientName:_e,displayName:De.displayName||_e,address:De.address||"",orders:M,zone:De.zone}}).filter(Boolean)},Pe=ke(pe),Ee=ke(Q),Ce=Pe.filter(se=>!H.includes(se.clientName)),fe=Ce[v],qe=se=>r.some(ge=>ge.date===Q&&ge.clientName===se);x.useEffect(()=>{if(k&&a&&!te){const se=Ee.filter(ge=>qe(ge.clientName)).map(ge=>ge.clientName);V(se)}},[k,a,Ee.length,te]),x.useEffect(()=>{k&&Pe.length>0&&Ce.length===0&&G(!0)},[k,Pe.length,Ce.length]);const je=se=>{se.preventDefault();const ge=d(f);ge?(L(ge),F("")):F("Invalid access code")},Se=()=>{L(null),p(""),I(0),V([]),G(!1),Me()},Me=()=>{A(Ut.HAND),y(null),w(null),S(!1),E(""),j(""),W(!1)},Ct=se=>{const ge=se.target.files[0];if(ge){y(ge);const ze=new FileReader;ze.onloadend=()=>{w(ze.result)},ze.readAsDataURL(ge)}},lt=(se=null,ge="")=>{if(!fe)return;if(D===Ut.PORCH&&!z&&!se){alert("Photo is required for porch drops");return}if(se==="Other"&&!ge.trim()){alert('Please provide details for "Other" problem');return}const ze={id:Date.now(),date:Q,clientName:fe.clientName,zone:k.zone,driverName:k.name,completedAt:new Date().toISOString(),handoffType:D,photoData:b,bagsReturned:N,problem:se,problemNote:ge},_e=[...r,ze];o(_e);const De=s.filter(M=>M.clientName===fe.clientName&&M.date===Q);De.length>0&&(c([...l,...De]),i(s.filter(M=>!(M.clientName===fe.clientName&&M.date===Q)))),V([...H,fe.clientName]),Me(),W(!1),Ce.length<=1&&G(!0)},ht=()=>{if(!le){alert("Please select a problem type");return}lt(le,_)},Je=()=>{if(v>0)I(v-1),Me();else if(H.length>0){const se=H[H.length-1],ge=r.filter(_e=>!(_e.date===Q&&_e.clientName===se));o(ge);const ze=l.filter(_e=>_e.clientName===se&&_e.date===Q);ze.length>0&&(i([...s,...ze]),c(l.filter(_e=>!(_e.clientName===se&&_e.date===Q)))),V(H.slice(0,-1)),G(!1),Me()}},ct=se=>{window.open(`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(se)}`,"_blank")},Ge=()=>{const se=r.filter(ge=>ge.date===Q&&ge.driverName===(k==null?void 0:k.name));return{completed:se.length,problems:se.filter(ge=>ge.problem).length,bagsReturned:se.filter(ge=>ge.bagsReturned).length,porchDrops:se.filter(ge=>ge.handoffType===Ut.PORCH).length,handoffs:se.filter(ge=>ge.handoffType===Ut.HAND).length}};if(!a)return n.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#f9f9ed"},children:n.jsxs("div",{className:"text-center",children:[n.jsx(cn,{size:48,className:"mx-auto mb-4 animate-pulse",style:{color:"#3d59ab"}}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(!k)return n.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:"#f9f9ed"},children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 w-full max-w-md",children:[n.jsxs("div",{className:"text-center mb-6",children:[n.jsx(cn,{size:48,className:"mx-auto mb-4",style:{color:"#3d59ab"}}),n.jsx("h1",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Driver Login"}),n.jsx("p",{className:"text-gray-600 mt-2",children:"Enter your access code to start deliveries"})]}),n.jsxs("form",{onSubmit:je,children:[n.jsx("input",{type:"text",value:f,onChange:se=>p(se.target.value),placeholder:"Access Code",className:"w-full p-4 text-center text-2xl border-2 rounded-lg mb-4 tracking-widest",style:{borderColor:"#ebb582"},autoFocus:!0}),C&&n.jsx("p",{className:"text-red-600 text-center mb-4",children:C}),n.jsx("button",{type:"submit",className:"w-full py-4 rounded-lg text-white font-bold text-lg",style:{backgroundColor:"#3d59ab"},children:"Start Deliveries"})]})]})});if(P)return n.jsx("div",{className:"min-h-screen p-4",style:{backgroundColor:"#f9f9ed"},children:n.jsxs("div",{className:"max-w-lg mx-auto",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-lg p-4 mb-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h2",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:"All Stops"}),n.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 rounded-lg bg-gray-200",children:"Back"})]})}),n.jsx("div",{className:"space-y-3",children:Pe.map((se,ge)=>{const ze=H.includes(se.clientName),_e=r.find(De=>De.date===Q&&De.clientName===se.clientName);return n.jsx("div",{className:`bg-white rounded-lg shadow p-4 border-l-4 ${ze?"opacity-60":""}`,style:{borderLeftColor:ze?"#22c55e":"#3d59ab"},children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"font-bold text-lg",style:{color:"#3d59ab"},children:[ge+1,"."]}),n.jsx("h3",{className:"font-bold",children:se.displayName}),ze&&n.jsx(Ue,{size:18,className:"text-green-600"})]}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:se.address}),(_e==null?void 0:_e.problem)&&n.jsxs("p",{className:"text-sm text-red-600 mt-1 flex items-center gap-1",children:[n.jsx(kt,{size:14}),_e.problem]})]}),!ze&&n.jsx("button",{onClick:()=>ct(se.address),className:"p-2 rounded-lg text-white",style:{backgroundColor:"#27ae60"},children:n.jsx(Ms,{size:20})})]})},se.clientName)})}),Pe.length===0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",children:[n.jsx(Is,{size:48,className:"mx-auto mb-4 text-gray-300"}),n.jsx("p",{className:"text-gray-500",children:"No deliveries for your zone today"})]})]})});if(B){const se=Ge();return n.jsx("div",{className:"min-h-screen p-4",style:{backgroundColor:"#f9f9ed"},children:n.jsx("div",{className:"max-w-lg mx-auto",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[n.jsx("div",{className:"w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"#22c55e"},children:n.jsx(Ue,{size:40,className:"text-white"})}),n.jsx("h1",{className:"text-2xl font-bold mb-2",style:{color:"#3d59ab"},children:"All Deliveries Complete!"}),n.jsxs("p",{className:"text-gray-600 mb-6",children:["Great job, ",k.name,"!"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("p",{className:"text-3xl font-bold",style:{color:"#3d59ab"},children:se.completed}),n.jsx("p",{className:"text-sm text-gray-600",children:"Deliveries"})]}),n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:se.problems>0?"#fef2f2":"#f9f9ed"},children:[n.jsx("p",{className:"text-3xl font-bold",style:{color:se.problems>0?"#dc2626":"#3d59ab"},children:se.problems}),n.jsx("p",{className:"text-sm text-gray-600",children:"Problems"})]}),n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("p",{className:"text-3xl font-bold",style:{color:"#3d59ab"},children:se.bagsReturned}),n.jsx("p",{className:"text-sm text-gray-600",children:"Bags Returned"})]}),n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("p",{className:"text-3xl font-bold",style:{color:"#3d59ab"},children:se.porchDrops}),n.jsx("p",{className:"text-sm text-gray-600",children:"Porch Drops"})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("button",{onClick:()=>R(!0),className:"w-full py-3 rounded-lg border-2 font-medium flex items-center justify-center gap-2",style:{borderColor:"#3d59ab",color:"#3d59ab"},children:[n.jsx(md,{size:20}),"View All Stops"]}),n.jsxs("button",{onClick:Se,className:"w-full py-3 rounded-lg bg-gray-200 font-medium flex items-center justify-center gap-2",children:[n.jsx(Ch,{size:20}),"Log Out"]})]})]})})})}return Ce.length===0&&!B?n.jsx("div",{className:"min-h-screen p-4",style:{backgroundColor:"#f9f9ed"},children:n.jsxs("div",{className:"max-w-lg mx-auto",children:[n.jsx($u,{driver:k,onLogout:Se,onViewAll:()=>R(!0)}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center",children:[n.jsx(Is,{size:48,className:"mx-auto mb-4 text-gray-300"}),n.jsx("h2",{className:"text-xl font-bold mb-2",style:{color:"#3d59ab"},children:"No Deliveries Available"}),n.jsxs("p",{className:"text-gray-600",children:["There are no deliveries for Zone ",k.zone," today."]})]})]})}):n.jsx("div",{className:"min-h-screen p-4",style:{backgroundColor:"#f9f9ed"},children:n.jsxs("div",{className:"max-w-lg mx-auto",children:[n.jsx($u,{driver:k,onLogout:Se,onViewAll:()=>R(!0)}),n.jsxs("div",{className:"bg-white rounded-lg shadow p-3 mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsxs("span",{className:"text-gray-600",children:["Stop ",H.length+1," of ",Pe.length]}),n.jsxs("span",{className:"font-medium",style:{color:"#3d59ab"},children:["Zone ",k.zone]})]}),n.jsx("div",{className:"h-2 bg-gray-200 rounded-full mt-2 overflow-hidden",children:n.jsx("div",{className:"h-full transition-all",style:{width:`${H.length/Pe.length*100}%`,backgroundColor:"#3d59ab"}})})]}),fe&&n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-4",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:fe.displayName}),n.jsx("p",{className:"text-gray-600 mt-1",children:fe.address}),fe.orders.length>0&&n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:fe.orders.map(se=>`${se.portions}p: ${se.dishes.join(", ")}`).join(" | ")})]}),n.jsxs("button",{onClick:()=>ct(fe.address),className:"w-full py-4 rounded-lg text-white font-bold text-lg flex items-center justify-center gap-2 mb-6",style:{backgroundColor:"#27ae60"},children:[n.jsx(Ms,{size:24}),"Navigate in Maps"]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Delivery Type"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("button",{onClick:()=>A(Ut.HAND),className:`p-4 rounded-lg border-2 flex flex-col items-center gap-2 transition-all ${D===Ut.HAND?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[n.jsx(Ha,{size:24,style:{color:D===Ut.HAND?"#3d59ab":"#9ca3af"}}),n.jsx("span",{className:D===Ut.HAND?"font-medium":"text-gray-500",children:"Hand-off"})]}),n.jsxs("button",{onClick:()=>A(Ut.PORCH),className:`p-4 rounded-lg border-2 flex flex-col items-center gap-2 transition-all ${D===Ut.PORCH?"border-blue-500 bg-blue-50":"border-gray-200"}`,children:[n.jsx(wh,{size:24,style:{color:D===Ut.PORCH?"#3d59ab":"#9ca3af"}}),n.jsx("span",{className:D===Ut.PORCH?"font-medium":"text-gray-500",children:"Porch Drop"})]})]})]}),D===Ut.PORCH&&n.jsxs("div",{className:"mb-6",children:[n.jsxs("label",{className:"block text-sm font-medium mb-2",children:["Photo ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"file",accept:"image/*",capture:"environment",onChange:Ct,ref:q,className:"hidden"}),b?n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:b,alt:"Delivery photo",className:"w-full h-48 object-cover rounded-lg"}),n.jsx("button",{onClick:()=>{var se;return(se=q.current)==null?void 0:se.click()},className:"absolute bottom-2 right-2 px-3 py-1 rounded bg-white shadow text-sm",children:"Retake"})]}):n.jsxs("button",{onClick:()=>{var se;return(se=q.current)==null?void 0:se.click()},className:"w-full h-32 border-2 border-dashed rounded-lg flex flex-col items-center justify-center gap-2",style:{borderColor:"#ebb582"},children:[n.jsx(jh,{size:32,className:"text-gray-400"}),n.jsx("span",{className:"text-gray-500",children:"Take Photo"})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bags Returned?"}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("button",{onClick:()=>S(!0),className:`p-3 rounded-lg border-2 flex items-center justify-center gap-2 ${N?"border-green-500 bg-green-50":"border-gray-200"}`,children:[n.jsx(ls,{size:20,style:{color:N?"#22c55e":"#9ca3af"}}),n.jsx("span",{className:N?"font-medium text-green-700":"text-gray-500",children:"Yes"})]}),n.jsxs("button",{onClick:()=>S(!1),className:`p-3 rounded-lg border-2 flex items-center justify-center gap-2 ${N?"border-gray-200":"border-amber-500 bg-amber-50"}`,children:[n.jsx(ls,{size:20,style:{color:N?"#9ca3af":"#f59e0b"}}),n.jsx("span",{className:N?"text-gray-500":"font-medium text-amber-700",children:"No"})]})]})]}),n.jsxs("button",{onClick:()=>W(!0),className:"w-full py-3 rounded-lg border-2 border-red-300 text-red-600 font-medium flex items-center justify-center gap-2 mb-4",children:[n.jsx(kt,{size:20}),"Problem with Delivery"]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("button",{onClick:Je,className:"flex-1 py-4 rounded-lg bg-gray-200 font-medium flex items-center justify-center gap-2",disabled:v===0&&H.length===0,children:[n.jsx(Ba,{size:20}),"Back"]}),n.jsxs("button",{onClick:()=>lt(),className:"flex-[2] py-4 rounded-lg text-white font-bold flex items-center justify-center gap-2",style:{backgroundColor:"#3d59ab"},children:["Complete Delivery",n.jsx(Wa,{size:20})]})]})]}),O&&n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[n.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:"Report Problem"}),n.jsx("div",{className:"space-y-3 mb-4",children:E0.map(se=>n.jsx("button",{onClick:()=>E(se),className:`w-full p-3 rounded-lg border-2 text-left ${le===se?"border-red-500 bg-red-50":"border-gray-200"}`,children:se},se))}),le==="Other"&&n.jsx("textarea",{value:_,onChange:se=>j(se.target.value),placeholder:"Please describe the problem...",className:"w-full p-3 border-2 rounded-lg mb-4",style:{borderColor:"#ebb582"},rows:3}),le&&le!=="Other"&&n.jsx("textarea",{value:_,onChange:se=>j(se.target.value),placeholder:"Additional notes (optional)",className:"w-full p-3 border-2 rounded-lg mb-4",style:{borderColor:"#ebb582"},rows:2}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("button",{onClick:()=>{W(!1),E(""),j("")},className:"flex-1 py-3 rounded-lg bg-gray-200 font-medium",children:"Cancel"}),n.jsx("button",{onClick:ht,className:"flex-1 py-3 rounded-lg text-white font-medium",style:{backgroundColor:"#dc2626"},children:"Submit Problem"})]})]})})]})})}function $u({driver:e,onLogout:t,onViewAll:s}){return n.jsx("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center",style:{backgroundColor:"#3d59ab"},children:n.jsx(cn,{size:20,className:"text-white"})}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold",style:{color:"#3d59ab"},children:e.name}),n.jsxs("p",{className:"text-sm text-gray-500",children:["Zone ",e.zone]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:s,className:"p-2 rounded-lg bg-gray-100",title:"View All Stops",children:n.jsx(md,{size:20,className:"text-gray-600"})}),n.jsx("button",{onClick:t,className:"p-2 rounded-lg bg-gray-100",title:"Log Out",children:n.jsx(Ch,{size:20,className:"text-gray-600"})})]})]})})}const ta="goldfinchChefData";function tv(){const[e,t]=x.useState([]),[s,r]=x.useState([]),[l,a]=x.useState([]),[o,i]=x.useState([]),[c,d]=x.useState([]),[h,f]=x.useState({}),[p,k]=x.useState({}),[L,C]=x.useState([]),[F,g]=x.useState(!1);x.useEffect(()=>{const w=()=>{const S=localStorage.getItem(ta);if(S)try{const O=JSON.parse(S);O.clients&&t(O.clients),O.menuItems&&r(O.menuItems),O.readyForDelivery&&a(O.readyForDelivery),O.deliveryLog&&i(O.deliveryLog),O.orderHistory&&d(O.orderHistory),O.recipes&&f(O.recipes),O.clientPortalData&&k(O.clientPortalData),O.blockedDates&&C(O.blockedDates)}catch(O){console.error("Error loading saved data:",O)}g(!0)};w();const N=S=>{S.key===ta&&w()};return window.addEventListener("storage",N),()=>window.removeEventListener("storage",N)},[]);const u=x.useCallback(w=>{const N=localStorage.getItem(ta);let S={};if(N)try{S=JSON.parse(N)}catch(W){console.error("Error parsing saved data:",W)}const O={...S,...w,lastSaved:new Date().toISOString()};localStorage.setItem(ta,JSON.stringify(O))},[]),v=x.useCallback((w,N)=>{const S={...p,[w]:{...p[w],...N}};k(S),u({clientPortalData:S})},[p,u]),I=x.useCallback(w=>e.find(N=>N.id===w||N.name.toLowerCase().replace(/\s+/g,"-")===w.toLowerCase()),[e]),D=x.useCallback((w,N)=>s.filter(S=>S.clientName===w&&S.approved===!0&&(!N||S.date===N)),[s]),A=x.useCallback((w,N)=>l.filter(S=>S.clientName===w&&(!N||S.date===N)),[l]),z=x.useCallback((w,N)=>o.find(S=>S.clientName===w&&S.date===N),[o]),y=x.useCallback(w=>c.filter(S=>S.clientName===w).map(S=>{const O=o.find(W=>W.clientName===w&&W.date===S.date);return{...S,completedAt:(O==null?void 0:O.completedAt)||S.completedAt,handoffType:(O==null?void 0:O.handoffType)||S.handoffType,photoData:(O==null?void 0:O.photoData)||S.photoData}}).sort((S,O)=>new Date(O.date)-new Date(S.date)),[c,o]),b=x.useCallback(w=>{var N;for(const S of Object.keys(h)){const O=(N=h[S])==null?void 0:N.find(W=>W.name===w);if(O)return O}return null},[h]);return{clients:e,menuItems:s,readyForDelivery:l,deliveryLog:o,orderHistory:c,recipes:h,clientPortalData:p,blockedDates:L,isLoaded:F,getClientById:I,getClientMenuItems:D,getClientReadyOrders:A,getClientDeliveryStatus:z,getClientHistory:y,getRecipeName:b,updateClientPortalData:v}}const Ve={PICK_DATES:"pick_dates",PICK_INGREDIENTS:"pick_ingredients",NEEDS_PAYMENT:"needs_payment",MENU_READY:"menu_ready",DELIVERY_DAY:"delivery_day",DELIVERED:"delivered",OVERDUE:"overdue",PAUSED:"paused",NO_UPCOMING:"no_upcoming"};function hd(){const e=new Date,s=(6-e.getDay()+7)%7,r=new Date(e);return r.setDate(e.getDate()+s),r.setHours(23,59,59,999),r}function cc(e){if(!e)return!1;const t=new Date,s=new Date(e+"T12:00:00"),r=s.getDay(),l=r===0?1:r===6?0:r+1,a=new Date(s);return a.setDate(s.getDate()-l),a.setHours(23,59,59,999),t<a}function nv(){var I;const{id:e}=iy(),{isLoaded:t,getClientById:s,getClientMenuItems:r,getClientReadyOrders:l,getClientDeliveryStatus:a,getClientHistory:o,clientPortalData:i,blockedDates:c,recipes:d,updateClientPortalData:h}=tv(),[f,p]=x.useState([]),[k,L]=x.useState(!1),C=x.useMemo(()=>s(e),[e,s]),F=new Date().toISOString().split("T")[0],u=(()=>{var w,N;if(!C)return null;if(C.status==="paused")return Ve.PAUSED;const D=i[C.name]||{};if(D.paymentOverdue)return Ve.OVERDUE;if(D.pendingPayment&&C.honeyBookLink)return Ve.NEEDS_PAYMENT;if(a(C.name,F))return Ve.DELIVERED;if(l(C.name,F).length>0)return Ve.DELIVERY_DAY;const y=r(C.name).filter(S=>S.date>=F),b=l(C.name).filter(S=>S.date>=F);return y.length>0||b.length>0?Ve.MENU_READY:D.needsDateSelection?Ve.PICK_DATES:(C.chefChoice===!1||C.chefChoice==="false")&&(((w=C.deliveryDates)==null?void 0:w.length)>0||((N=D.selectedDates)==null?void 0:N.length)>0)?Ve.MENU_READY:Ve.NO_UPCOMING})();if(!t)return n.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#f9f9ed"},children:n.jsxs("div",{className:"text-center",children:[n.jsx(In,{size:48,className:"mx-auto mb-4 animate-pulse",style:{color:"#ffd700"}}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});if(!C)return n.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",style:{backgroundColor:"#f9f9ed"},children:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 text-center max-w-md",children:[n.jsx(kt,{size:48,className:"mx-auto mb-4 text-amber-500"}),n.jsx("h1",{className:"text-xl font-bold mb-2",style:{color:"#3d59ab"},children:"Page Not Found"}),n.jsx("p",{className:"text-gray-600",children:"We couldn't find your client portal. Please check the link and try again."})]})});const v=C.displayName||C.name;return n.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("header",{className:"text-white p-4",style:{backgroundColor:"#3d59ab"},children:n.jsxs("div",{className:"max-w-lg mx-auto flex items-center gap-3",children:[n.jsx(In,{size:32,style:{color:"#ffd700"}}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-xl font-bold",children:"Goldfinch Chef"}),n.jsx("p",{className:"text-sm opacity-80",children:"Client Portal"})]})]})}),n.jsxs("div",{className:"max-w-lg mx-auto p-4",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-4",children:[n.jsxs("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:["Hello, ",v.split(" ")[0],"!"]}),n.jsx("p",{className:"text-gray-600 mt-1",children:sv(u,C)}),C.honeyBookLink&&!((I=i[C.name])!=null&&I.invoicePaid)&&n.jsxs("a",{href:C.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 mt-4 px-5 py-2 rounded-lg text-white font-medium text-sm",style:{backgroundColor:"#d9a87a"},children:[n.jsx(gn,{size:18}),"View & Pay Invoice",n.jsx(Hn,{size:14})]})]}),u===Ve.DELIVERY_DAY&&n.jsx(yv,{client:C,getClientReadyOrders:l,getClientDeliveryStatus:a,today:F}),u===Ve.OVERDUE&&n.jsx(cv,{client:C}),u===Ve.NEEDS_PAYMENT&&n.jsx(dv,{client:C}),u===Ve.PICK_DATES&&n.jsx(uv,{client:C,selectedDates:f,setSelectedDates:p,blockedDates:c,onSubmit:D=>{h(C.name,{selectedDates:f,dateSelectionNotes:D,needsDateSelection:!1,dateSelectionSubmittedAt:new Date().toISOString()})}}),u===Ve.PICK_INGREDIENTS&&n.jsx(mv,{client:C,recipes:d,clientPortalData:i,onSubmit:D=>{h(C.name,{ingredientPicks:{...D,submittedAt:new Date().toISOString()}})}}),u===Ve.PAUSED&&n.jsx(iv,{client:C}),(u===Ve.MENU_READY||u===Ve.DELIVERED||u===Ve.NO_UPCOMING)&&n.jsxs(n.Fragment,{children:[n.jsx(rv,{client:C,clientPortalData:i,onEditDates:()=>L(!0),recipes:d,updateClientPortalData:h}),k&&n.jsx(ov,{client:C,blockedDates:c,clientPortalData:i,onSave:D=>{h(C.name,{selectedDates:D,dateSelectionSubmittedAt:new Date().toISOString()}),L(!1)},onClose:()=>L(!1)})]}),u===Ve.MENU_READY&&n.jsx(hv,{client:C,getClientMenuItems:r,getClientReadyOrders:l,today:F,clientPortalData:i,updateClientPortalData:h}),u===Ve.DELIVERED&&n.jsx(vv,{client:C,getClientDeliveryStatus:a,getClientReadyOrders:l,getClientHistory:o,today:F}),u===Ve.NO_UPCOMING&&n.jsx(bv,{client:C,getClientHistory:o}),(u===Ve.MENU_READY||u===Ve.DELIVERED||u===Ve.NO_UPCOMING)&&n.jsx("div",{className:"mt-6",children:n.jsx(av,{client:C,getClientHistory:o})})]}),n.jsx("footer",{className:"text-center p-4 text-gray-500 text-sm",children:n.jsx("p",{children:"Questions? Contact us at hello@goldfinchchef.com"})})]})}function sv(e,t){switch(e){case Ve.PAUSED:return"Your account is currently paused.";case Ve.OVERDUE:return"Your account needs attention.";case Ve.NEEDS_PAYMENT:return"Please complete your payment to continue.";case Ve.PICK_DATES:return"Let's schedule your upcoming deliveries.";case Ve.PICK_INGREDIENTS:return"Pick your protein, veggie, and starch dishes for this week!";case Ve.MENU_READY:return(t==null?void 0:t.chefChoice)===!1||(t==null?void 0:t.chefChoice)==="false"?"Pick your dishes for each delivery below!":"Your menu is ready! Here's what's coming.";case Ve.DELIVERY_DAY:return"Your delivery is on the way!";case Ve.DELIVERED:return"Your delivery has arrived!";default:return"Welcome to your client portal."}}function rv({client:e,onEditDates:t,clientPortalData:s={},recipes:r,updateClientPortalData:l}){var I;const[a,o]=x.useState(null),i=e.portions||e.persons||1,c=e.mealsPerWeek||0,d=e.frequency||"weekly",h=((I=s[e.name])==null?void 0:I.selectedDates)||[],f=h.length>0?h:e.deliveryDates||[],p=D=>D?new Date(D+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",k=hd(),L=f.some(D=>cc(D)),C=e.chefChoice===!1||e.chefChoice==="false",F=D=>{var A,z;return(z=(A=s[e.name])==null?void 0:A.dateIngredientPicks)==null?void 0:z[D]},g=D=>{const A=new Date(D+"T12:00:00"),z=A.getDay(),y=z===0?1:z===6?0:z+1,b=new Date(A);return b.setDate(A.getDate()-y),b.setHours(23,59,59,999),b},u=D=>new Date>g(D),v=(D,A)=>{var y;const z=((y=s[e.name])==null?void 0:y.dateIngredientPicks)||{};l(e.name,{dateIngredientPicks:{...z,[D]:{...A,submittedAt:new Date().toISOString()}}}),o(null)};return n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("h3",{className:"font-bold flex items-center gap-2",style:{color:"#3d59ab"},children:[n.jsx($s,{size:20}),"Your Subscription"]}),L&&t&&n.jsxs("button",{onClick:t,className:"flex items-center gap-1 px-3 py-1 text-sm rounded-lg bg-blue-50 text-blue-700 hover:bg-blue-100",children:[n.jsx(Sh,{size:14}),"Edit Dates"]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[n.jsxs("div",{className:"text-center p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("p",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:i}),n.jsx("p",{className:"text-xs text-gray-500",children:"Portions"})]}),n.jsxs("div",{className:"text-center p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("p",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:c}),n.jsx("p",{className:"text-xs text-gray-500",children:"Meals/Week"})]}),n.jsxs("div",{className:"text-center p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("p",{className:"text-lg font-bold capitalize",style:{color:"#3d59ab"},children:d}),n.jsx("p",{className:"text-xs text-gray-500",children:"Frequency"})]})]}),f.length>0?n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium text-gray-600 mb-2 flex items-center gap-2",children:[n.jsx(Wn,{size:14}),"Upcoming Deliveries"]}),n.jsx("div",{className:"space-y-2",children:f.slice(0,4).map((D,A)=>{const z=cc(D),y=new Date(D+"T12:00:00")<new Date,b=F(D),w=b==null?void 0:b.submittedAt,N=u(D),S=g(D);return n.jsxs("div",{className:`p-3 rounded-lg ${y?"opacity-50":""}`,style:{backgroundColor:"#fff",border:"1px solid #ebb582"},children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-xs text-gray-400",children:["#",A+1]}),n.jsx("span",{className:y?"text-gray-400":"",children:p(D)})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[!z&&!y&&!C&&n.jsxs("span",{className:"text-xs text-amber-600 flex items-center gap-1",children:[n.jsx(fs,{size:12}),"Locked"]}),y&&n.jsx(Ue,{size:16,className:"text-green-500"})]})]}),C&&!y&&n.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:w?n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-xs text-green-600 flex items-center gap-1",children:[n.jsx(Ue,{size:14}),"Picks submitted"]}),!N&&n.jsx("button",{onClick:()=>o(D),className:"text-xs text-blue-600 hover:text-blue-800",children:"Edit"})]}):N?n.jsxs("span",{className:"text-xs text-amber-600 flex items-center gap-1",children:[n.jsx(fs,{size:12}),"Deadline passed - Chef will pick"]}):n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("button",{onClick:()=>o(D),className:"text-xs px-3 py-1 rounded-lg text-white font-medium",style:{backgroundColor:"#3d59ab"},children:"Pick Dishes"}),n.jsxs("span",{className:"text-xs text-gray-500",children:["by ",S.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})]})]})})]},D)})}),L&&!C&&n.jsxs("p",{className:"text-xs text-gray-500 mt-2 flex items-center gap-1",children:[n.jsx(fs,{size:12}),"Edit dates by Saturday ",k.toLocaleDateString("en-US",{month:"short",day:"numeric"})," at 11:59 PM"]})]}):C?n.jsx("div",{className:"p-4 rounded-lg bg-amber-50 border border-amber-200",children:n.jsx("p",{className:"text-sm text-amber-700",children:"No delivery dates scheduled yet. Contact us to set up your deliveries, then you can pick your dishes!"})}):null,a&&n.jsx(lv,{client:e,dateStr:a,recipes:r,existingPicks:F(a),onSave:D=>v(a,D),onClose:()=>o(null)})]})}function lv({client:e,dateStr:t,recipes:s,existingPicks:r,onSave:l,onClose:a}){var A,z,y;const o=e.mealsPerWeek||3,[i,c]=x.useState((r==null?void 0:r.proteins)||Array(o).fill("")),[d,h]=x.useState((r==null?void 0:r.veggies)||Array(o).fill("")),[f,p]=x.useState((r==null?void 0:r.starches)||Array(o).fill("")),[k,L]=x.useState((r==null?void 0:r.notes)||""),C=((A=s==null?void 0:s.protein)==null?void 0:A.map(b=>b.name))||[],F=((z=s==null?void 0:s.veg)==null?void 0:z.map(b=>b.name))||[],g=((y=s==null?void 0:s.starch)==null?void 0:y.map(b=>b.name))||[],u=b=>new Date(b+"T12:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"}),v=(b,w,N)=>{const S=w.filter((O,W)=>W!==N);return b.filter(O=>!S.includes(O))},I=()=>i.every(b=>b!=="")&&d.every(b=>b!=="")&&f.every(b=>b!==""),D=()=>{if(!I()){alert(`Please select ${o} of each: proteins, veggies, and starches.`);return}l({proteins:i,veggies:d,starches:f,notes:k,mealsPerWeek:o})};return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-4 border-b flex items-center justify-between",style:{backgroundColor:"#f9f9ed"},children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold",style:{color:"#3d59ab"},children:"Pick Your Dishes"}),n.jsx("p",{className:"text-sm text-gray-600",children:u(t)})]}),n.jsx("button",{onClick:a,className:"p-1 hover:bg-gray-200 rounded",children:n.jsx("span",{className:"text-2xl",children:""})})]}),n.jsxs("div",{className:"p-4",children:[n.jsxs("p",{className:"text-gray-600 mb-4",children:["Select ",o," protein, veggie, and starch dishes. Chef Paula will pair them into delicious meals!"]}),C.length===0&&F.length===0&&g.length===0&&n.jsx("div",{className:"p-4 rounded-lg bg-amber-50 border border-amber-200 mb-4",children:n.jsx("p",{className:"text-sm text-amber-700",children:"Dish options are not available yet. Please contact us or check back later."})}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("h4",{className:"font-bold mb-2 flex items-center gap-2 text-sm",style:{color:"#3d59ab"},children:[n.jsx("span",{className:"w-5 h-5 rounded-full bg-red-100 flex items-center justify-center text-red-600 text-xs",children:"P"}),"Proteins (",i.filter(b=>b).length,"/",o,")"]}),n.jsx("div",{className:"space-y-2",children:i.map((b,w)=>n.jsxs("select",{value:b,onChange:N=>{const S=[...i];S[w]=N.target.value,c(S)},className:"w-full p-2 border-2 rounded-lg text-sm",style:{borderColor:b?"#22c55e":"#ebb582"},children:[n.jsxs("option",{value:"",children:["Select protein #",w+1]}),v(C,i,w).map(N=>n.jsx("option",{value:N,children:N},N))]},w))})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("h4",{className:"font-bold mb-2 flex items-center gap-2 text-sm",style:{color:"#3d59ab"},children:[n.jsx("span",{className:"w-5 h-5 rounded-full bg-green-100 flex items-center justify-center text-green-600 text-xs",children:"V"}),"Veggies (",d.filter(b=>b).length,"/",o,")"]}),n.jsx("div",{className:"space-y-2",children:d.map((b,w)=>n.jsxs("select",{value:b,onChange:N=>{const S=[...d];S[w]=N.target.value,h(S)},className:"w-full p-2 border-2 rounded-lg text-sm",style:{borderColor:b?"#22c55e":"#ebb582"},children:[n.jsxs("option",{value:"",children:["Select veggie #",w+1]}),v(F,d,w).map(N=>n.jsx("option",{value:N,children:N},N))]},w))})]}),n.jsxs("div",{className:"mb-4",children:[n.jsxs("h4",{className:"font-bold mb-2 flex items-center gap-2 text-sm",style:{color:"#3d59ab"},children:[n.jsx("span",{className:"w-5 h-5 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 text-xs",children:"S"}),"Starches (",f.filter(b=>b).length,"/",o,")"]}),n.jsx("div",{className:"space-y-2",children:f.map((b,w)=>n.jsxs("select",{value:b,onChange:N=>{const S=[...f];S[w]=N.target.value,p(S)},className:"w-full p-2 border-2 rounded-lg text-sm",style:{borderColor:b?"#22c55e":"#ebb582"},children:[n.jsxs("option",{value:"",children:["Select starch #",w+1]}),v(g,f,w).map(N=>n.jsx("option",{value:N,children:N},N))]},w))})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-1",children:"Special requests (optional)"}),n.jsx("textarea",{value:k,onChange:b=>L(b.target.value),placeholder:"E.g., 'Keep chicken mild' or 'Extra sauce'",className:"w-full p-2 border-2 rounded-lg text-sm",style:{borderColor:"#ebb582"},rows:2})]}),n.jsx("div",{className:"mb-4 p-2 rounded-lg text-sm",style:{backgroundColor:"#f9f9ed"},children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-gray-600",children:I()?"All selections complete!":"Complete all to submit"}),n.jsxs("span",{className:"font-bold",style:{color:I()?"#22c55e":"#3d59ab"},children:[i.filter(b=>b).length+d.filter(b=>b).length+f.filter(b=>b).length," / ",o*3]})]})})]}),n.jsxs("div",{className:"p-4 border-t flex justify-end gap-3",children:[n.jsx("button",{onClick:a,className:"px-4 py-2 rounded-lg border-2 hover:bg-gray-50",style:{borderColor:"#ebb582"},children:"Cancel"}),n.jsx("button",{onClick:D,disabled:!I(),className:"px-4 py-2 rounded-lg text-white disabled:opacity-50",style:{backgroundColor:"#3d59ab"},children:"Save Picks"})]})]})})}function av({client:e,getClientHistory:t}){const[s,r]=x.useState(!1),l=t(e.name),a=s?l:l.slice(0,3),o=c=>c?new Date(c+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",i=c=>c?new Date(c).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"";return l.length===0?null:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(g0,{size:24,style:{color:"#3d59ab"}}),n.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Delivery History"})]}),n.jsx("div",{className:"space-y-4",children:a.map((c,d)=>{var h;return n.jsxs("div",{className:"border rounded-lg overflow-hidden",style:{borderColor:"#ebb582"},children:[n.jsxs("div",{className:"p-3 flex items-center justify-between",style:{backgroundColor:"#f9f9ed"},children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:o(c.date)}),c.completedAt&&n.jsxs("p",{className:"text-xs text-gray-500",children:["Delivered at ",i(c.completedAt),c.handoffType==="porch"&&" (Porch drop)",c.handoffType==="hand"&&" (Hand delivery)"]})]}),n.jsx(Ue,{size:20,className:"text-green-500"})]}),n.jsx("div",{className:"p-3",children:n.jsx("div",{className:"flex flex-wrap gap-2",children:(h=c.dishes)==null?void 0:h.map((f,p)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded text-sm",style:{backgroundColor:"#fff4e0"},children:[n.jsx($s,{size:12,style:{color:"#3d59ab"}}),f]},p))})}),c.handoffType==="porch"&&c.photoData&&n.jsxs("div",{className:"p-3 border-t",style:{borderColor:"#ebb582"},children:[n.jsxs("p",{className:"text-xs text-gray-500 mb-2 flex items-center gap-1",children:[n.jsx(jh,{size:12}),"Delivery Photo"]}),n.jsx("img",{src:c.photoData,alt:"Delivery confirmation",className:"w-full max-h-48 object-cover rounded-lg"})]})]},d)})}),l.length>3&&n.jsx("button",{onClick:()=>r(!s),className:"mt-4 w-full py-2 text-sm font-medium rounded-lg border-2 hover:bg-gray-50",style:{borderColor:"#ebb582",color:"#3d59ab"},children:s?"Show Less":`Show All (${l.length})`})]})}function ov({client:e,blockedDates:t=[],onSave:s,onClose:r,clientPortalData:l={}}){var A;const a=((A=l[e.name])==null?void 0:A.selectedDates)||[],o=a.length>0?a:e.deliveryDates||[],[i,c]=x.useState(o),[d,h]=x.useState(""),f=new Date,p=e.frequency==="biweekly",k=4,C={Monday:1,Tuesday:2,Thursday:4}[e.deliveryDay],g=(()=>{const z=[];let y=0;const b=120;for(;z.length<8&&y<b;){y++;const w=new Date(f);w.setDate(w.getDate()+y);const N=w.toISOString().split("T")[0];w.getDay()===C&&(t.includes(N)||z.push({date:N,display:w.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),canEdit:cc(N)}))}return z})(),u=z=>{if(!p||z.length<2)return!0;const y=[...z].sort();for(let b=1;b<y.length;b++){const w=new Date(y[b-1]+"T12:00:00");if((new Date(y[b]+"T12:00:00")-w)/(1e3*60*60*24)<14)return!1}return!0},v=z=>{if(h(""),i.includes(z))c(i.filter(y=>y!==z));else{if(i.length>=k){h(`Maximum ${k} delivery dates allowed`);return}const y=[...i,z];if(p&&!u(y)){h("Biweekly deliveries must be at least 2 weeks apart");return}c(y)}},I=()=>{if(i.length===0){h("Please select at least one delivery date");return}if(p&&!u(i)){h("Biweekly deliveries must be at least 2 weeks apart");return}s(i.sort())},D=hd();return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-4 border-b flex items-center justify-between",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("h3",{className:"text-lg font-bold",style:{color:"#3d59ab"},children:"Edit Delivery Dates"}),n.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-200 rounded",children:n.jsx("span",{className:"text-2xl",children:""})})]}),n.jsxs("div",{className:"p-4",children:[n.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Your deliveries are on ",n.jsxs("strong",{children:[e.deliveryDay,"s"]}),". Select up to ",k," dates."]}),n.jsx("div",{className:"p-3 rounded-lg bg-amber-50 border border-amber-200 mb-4",children:n.jsxs("div",{className:"flex items-center gap-2 text-amber-700",children:[n.jsx(fs,{size:16}),n.jsxs("span",{className:"text-sm",children:["Changes must be made by Saturday ",D.toLocaleDateString("en-US",{month:"short",day:"numeric"})," at 11:59 PM"]})]})}),d&&n.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm",children:d}),n.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Selected: ",i.length," / ",k]}),n.jsx("div",{className:"space-y-2 mb-4",children:g.map(({date:z,display:y,canEdit:b})=>{const w=i.includes(z),N=!b&&!w;return n.jsx("button",{onClick:()=>b&&v(z),disabled:N,className:`w-full p-3 rounded-lg border-2 text-left transition-all ${w?"border-blue-500 bg-blue-50":N?"border-gray-100 bg-gray-50 text-gray-300 cursor-not-allowed":"border-gray-200 hover:border-gray-300"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:w?"text-blue-700 font-medium":"",children:y}),N&&n.jsxs("span",{className:"text-xs text-gray-400 flex items-center gap-1",children:[n.jsx(fs,{size:12}),"Locked"]}),w&&n.jsx(Ue,{size:16,className:"text-blue-600"})]})},z)})})]}),n.jsxs("div",{className:"p-4 border-t flex justify-end gap-3",children:[n.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg border-2 hover:bg-gray-50",style:{borderColor:"#ebb582"},children:"Cancel"}),n.jsx("button",{onClick:I,className:"px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:"Save Changes"})]})]})})}function iv({client:e}){return n.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center bg-gray-100",children:n.jsx(k0,{size:32,className:"text-gray-400 ml-1"})}),n.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"#3d59ab"},children:"Account Paused"}),n.jsx("p",{className:"text-gray-600 mb-4",children:e.pausedDate?`Paused since ${new Date(e.pausedDate).toLocaleDateString()}`:"Your meal deliveries are currently on hold."}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Ready to start enjoying delicious meals again? Contact us to reactivate your account."}),n.jsx("a",{href:"mailto:hello@goldfinchchef.com?subject=Reactivate%20My%20Account",className:"inline-block px-6 py-3 rounded-lg text-white font-medium",style:{backgroundColor:"#3d59ab"},children:"Request Reactivation"})]})})}function cv({client:e}){return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(kt,{size:32,className:"text-red-500 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-red-700 mb-2",children:"Payment Overdue"}),n.jsx("p",{className:"text-red-600 mb-4",children:"Your account has an outstanding balance. Please make a payment to continue receiving deliveries."}),e.honeyBookLink&&n.jsxs("a",{href:e.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg text-white font-medium",style:{backgroundColor:"#dc2626"},children:[n.jsx(gn,{size:20}),"Pay Now",n.jsx(Hn,{size:16})]})]})]})}),n.jsx("div",{className:"bg-white rounded-lg shadow p-4 text-center text-gray-600",children:n.jsxs("p",{children:["Questions about your invoice?"," ",n.jsx("a",{href:"mailto:hello@goldfinchchef.com",className:"text-blue-600 underline",children:"Contact us"})]})})]})}function dv({client:e}){return n.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"#fef3c7"},children:n.jsx(gn,{size:32,style:{color:"#f59e0b"}})}),n.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"#3d59ab"},children:"Payment Required"}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Please complete your payment to confirm your upcoming deliveries."}),e.honeyBookLink&&n.jsxs("a",{href:e.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg text-white font-medium",style:{backgroundColor:"#3d59ab"},children:[n.jsx(gn,{size:20}),"View Invoice",n.jsx(Hn,{size:16})]})]})})}function uv({client:e,selectedDates:t,setSelectedDates:s,blockedDates:r=[],onSubmit:l}){const[a,o]=x.useState(""),[i,c]=x.useState(""),d=new Date,h=e.frequency==="biweekly",f=4,k={Monday:1,Tuesday:2,Thursday:4}[e.deliveryDay],L=[];let C=0;const F=120;for(;L.length<f&&C<F;){C++;const D=new Date(d);D.setDate(D.getDate()+C);const A=D.toISOString().split("T")[0];D.getDay()===k&&(r.includes(A)||L.push({date:A,display:D.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}))}const g=D=>{if(!h||D.length<2)return!0;const A=[...D].sort();for(let z=1;z<A.length;z++){const y=new Date(A[z-1]+"T12:00:00");if((new Date(A[z]+"T12:00:00")-y)/(1e3*60*60*24)<14)return!1}return!0},u=D=>{if(c(""),t.includes(D))s(t.filter(A=>A!==D));else{if(t.length>=f){c(`You can only select ${f} delivery dates`);return}const A=[...t,D];if(h&&!g(A)){c("Biweekly deliveries must be at least 2 weeks apart");return}s(A)}},v=()=>{if(t.length===0){c("Please select at least one delivery date");return}if(t.length>f){c(`Please select no more than ${f} dates`);return}if(h&&!g(t)){c("Biweekly deliveries must be at least 2 weeks apart");return}l(a)},I=D=>{if(t.includes(D))return!1;if(t.length>=f)return!0;if(h&&t.length>0){const A=[...t,D];return!g(A)}return!1};return e.deliveryDay?n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Wn,{size:24,style:{color:"#3d59ab"}}),n.jsxs("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:["Select Your Next ",f," Delivery Dates"]})]}),n.jsxs("p",{className:"text-gray-600 mb-2",children:["Your deliveries are on ",n.jsxs("strong",{children:[e.deliveryDay,"s"]}),". Choose ",f," upcoming dates."]}),h&&n.jsxs("p",{className:"text-sm text-amber-600 mb-4 flex items-center gap-2",children:[n.jsx(kt,{size:16}),"Biweekly schedule: dates must be at least 2 weeks apart"]}),i&&n.jsx("div",{className:"mb-4 p-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm",children:i}),n.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:["Selected: ",t.length," / ",f]}),n.jsx("div",{className:"space-y-2 mb-6",children:L.map(({date:D,display:A})=>{const z=t.includes(D),y=I(D);return n.jsx("button",{onClick:()=>u(D),disabled:y&&!z,className:`w-full p-3 rounded-lg border-2 text-left transition-all ${z?"border-blue-500 bg-blue-50":y?"border-gray-100 bg-gray-50 text-gray-300 cursor-not-allowed":"border-gray-200 hover:border-gray-300"}`,children:n.jsx("p",{className:`font-medium ${z?"text-blue-700":""}`,children:A})},D)})}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Special requests or notes (optional)"}),n.jsx("textarea",{value:a,onChange:D=>o(D.target.value),placeholder:"E.g., 'No deliveries the week of the 15th' or 'Prefer morning deliveries'",className:"w-full p-3 border-2 rounded-lg",style:{borderColor:"#ebb582"},rows:3})]}),n.jsxs("button",{onClick:v,disabled:t.length===0,className:"w-full py-3 rounded-lg text-white font-medium disabled:opacity-50",style:{backgroundColor:"#3d59ab"},children:["Confirm ",t.length," Date",t.length!==1?"s":""]})]}):n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[n.jsx(Wn,{size:32,className:"mx-auto mb-4 text-gray-400"}),n.jsx("h3",{className:"text-lg font-bold mb-2",style:{color:"#3d59ab"},children:"Delivery Day Not Set"}),n.jsx("p",{className:"text-gray-600",children:"Please contact us to set your preferred delivery day before selecting dates."})]})}function mv({client:e,recipes:t,clientPortalData:s,onSubmit:r}){var b,w,N;const a=e.mealsPerWeek||3,[o,i]=x.useState(Array(a).fill("")),[c,d]=x.useState(Array(a).fill("")),[h,f]=x.useState(Array(a).fill("")),[p,k]=x.useState(""),L=((b=t==null?void 0:t.protein)==null?void 0:b.map(S=>S.name))||[],C=((w=t==null?void 0:t.veg)==null?void 0:w.map(S=>S.name))||[],F=((N=t==null?void 0:t.starch)==null?void 0:N.map(S=>S.name))||[],g=hd(),u=(S,O)=>{const W=[...o];W[S]=O,i(W)},v=(S,O)=>{const W=[...c];W[S]=O,d(W)},I=(S,O)=>{const W=[...h];W[S]=O,f(W)},D=()=>o.every(S=>S!=="")&&c.every(S=>S!=="")&&h.every(S=>S!==""),A=()=>{if(!D()){alert(`Please select ${a} of each: proteins, veggies, and starches.`);return}r({proteins:o,veggies:c,starches:h,notes:p,mealsPerWeek:a})},z=S=>S.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})+" at 11:59 PM",y=(S,O,W)=>{const le=O.filter((E,_)=>_!==W);return S.filter(E=>!le.includes(E))};return n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx($s,{size:24,style:{color:"#3d59ab"}}),n.jsx("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:"Pick Your Dishes"})]}),n.jsxs("p",{className:"text-gray-600 mb-4",children:["Select ",a," protein dishes, ",a," veggie dishes, and ",a," starch dishes for your meals this week. Chef Paula will pair them into delicious meals!"]}),n.jsx("div",{className:"mb-6 p-3 rounded-lg bg-amber-50 border border-amber-200",children:n.jsxs("div",{className:"flex items-start gap-2 text-amber-700",children:[n.jsx(kt,{size:18,className:"flex-shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-sm font-medium",children:["Deadline: ",z(g)]}),n.jsx("p",{className:"text-xs mt-1",children:"If not submitted by Saturday, Chef Paula will pick for you."})]})]})}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",style:{color:"#3d59ab"},children:[n.jsx("span",{className:"w-6 h-6 rounded-full bg-red-100 flex items-center justify-center text-red-600 text-sm",children:"P"}),"Proteins (",o.filter(S=>S).length,"/",a,")"]}),n.jsx("div",{className:"space-y-2",children:o.map((S,O)=>n.jsxs("select",{value:S,onChange:W=>u(O,W.target.value),className:"w-full p-3 border-2 rounded-lg",style:{borderColor:S?"#22c55e":"#ebb582"},children:[n.jsxs("option",{value:"",children:["Select protein #",O+1]}),y(L,o,O).map(W=>n.jsx("option",{value:W,children:W},W))]},O))})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",style:{color:"#3d59ab"},children:[n.jsx("span",{className:"w-6 h-6 rounded-full bg-green-100 flex items-center justify-center text-green-600 text-sm",children:"V"}),"Veggies (",c.filter(S=>S).length,"/",a,")"]}),n.jsx("div",{className:"space-y-2",children:c.map((S,O)=>n.jsxs("select",{value:S,onChange:W=>v(O,W.target.value),className:"w-full p-3 border-2 rounded-lg",style:{borderColor:S?"#22c55e":"#ebb582"},children:[n.jsxs("option",{value:"",children:["Select veggie #",O+1]}),y(C,c,O).map(W=>n.jsx("option",{value:W,children:W},W))]},O))})]}),n.jsxs("div",{className:"mb-6",children:[n.jsxs("h4",{className:"font-bold mb-3 flex items-center gap-2",style:{color:"#3d59ab"},children:[n.jsx("span",{className:"w-6 h-6 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 text-sm",children:"S"}),"Starches (",h.filter(S=>S).length,"/",a,")"]}),n.jsx("div",{className:"space-y-2",children:h.map((S,O)=>n.jsxs("select",{value:S,onChange:W=>I(O,W.target.value),className:"w-full p-3 border-2 rounded-lg",style:{borderColor:S?"#22c55e":"#ebb582"},children:[n.jsxs("option",{value:"",children:["Select starch #",O+1]}),y(F,h,O).map(W=>n.jsx("option",{value:W,children:W},W))]},O))})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"Special requests (optional)"}),n.jsx("textarea",{value:p,onChange:S=>k(S.target.value),placeholder:"E.g., 'Keep chicken mild' or 'Extra sauce on the side'",className:"w-full p-3 border-2 rounded-lg",style:{borderColor:"#ebb582"},rows:2})]}),n.jsx("div",{className:"mb-4 p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:n.jsxs("div",{className:"flex items-center justify-between text-sm",children:[n.jsx("span",{className:"text-gray-600",children:D()?"All selections complete!":"Complete all selections to submit"}),n.jsxs("span",{className:"font-bold",style:{color:D()?"#22c55e":"#3d59ab"},children:[o.filter(S=>S).length+c.filter(S=>S).length+h.filter(S=>S).length," / ",a*3]})]})}),n.jsx("button",{onClick:A,disabled:!D(),className:"w-full py-3 rounded-lg text-white font-medium disabled:opacity-50",style:{backgroundColor:"#3d59ab"},children:"Submit My Picks"})]})}function pv({client:e,date:t,menuItems:s,readyOrders:r}){const l=new Date(t+"T12:00:00").toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}).toUpperCase(),o=(()=>{const c=[];return s.forEach(d=>{const h={protein:d.protein,sides:[d.veg,d.starch].filter(Boolean)};(h.protein||h.sides.length>0)&&c.push(h),d.extras&&d.extras.forEach(f=>{c.push({protein:f,sides:[],isExtra:!0})})}),r.forEach(d=>{d.dishes&&d.dishes.forEach((h,f)=>{(f===0||d.dishes.length===1)&&c.push({protein:h,sides:d.dishes.slice(1),isExtra:!1})})}),c})(),i=e.displayName||e.name;return n.jsxs("div",{className:"overflow-hidden shadow-lg",style:{backgroundColor:"#fff"},children:[n.jsxs("div",{className:"relative px-4 pt-6 pb-8",style:{backgroundColor:"#f9f9ed",backgroundImage:"url(/pattern4.png)",backgroundSize:"cover",backgroundPosition:"center"},children:[n.jsx("p",{className:"text-center mb-2",style:{fontFamily:'"Glacial Indifference", sans-serif',fontSize:"12px",letterSpacing:"0.3em",color:"#5a5a5a"},children:"GOLDFINCH CHEF SERVICES"}),n.jsxs("h2",{className:"text-center mb-3",style:{color:"#3d59ab",fontFamily:'"Poller One", cursive',fontSize:"18px",textTransform:"uppercase",letterSpacing:"0.05em",textDecoration:"underline",textDecorationColor:"#3d59ab",textUnderlineOffset:"4px"},children:[i,"'s Menu"]}),n.jsx("p",{className:"text-center mb-4",style:{color:"#5a5a5a",fontFamily:'"Beth Ellen", cursive',fontSize:"12px"},children:"here's what to expect on your plate!"}),n.jsxs("div",{className:"flex items-center justify-center gap-3",children:[n.jsx("img",{src:"/goldfinch5.png",alt:"Goldfinch",className:"w-12 h-12 object-contain"}),n.jsx("p",{style:{fontFamily:'"Glacial Indifference", sans-serif',fontSize:"14px",letterSpacing:"0.2em",color:"#5a5a5a"},children:l})]})]}),n.jsx("div",{className:"px-6 py-8",style:{backgroundColor:"#d9a87a"},children:n.jsx("div",{className:"space-y-8",children:o.map((c,d)=>n.jsxs("div",{className:"text-center",children:[c.protein&&n.jsx("h3",{style:{color:"#ffffff",fontFamily:'"Glacial Indifference", sans-serif',fontSize:"1.1rem",fontWeight:"bold",letterSpacing:"0.15em",textTransform:"uppercase",marginBottom:c.sides.length>0?"0.5rem":0},children:c.protein}),c.sides.length>0&&n.jsx("p",{style:{color:"#f5e6d3",fontFamily:'"Glacial Indifference", sans-serif',fontSize:"0.85rem",letterSpacing:"0.1em",textTransform:"uppercase"},children:c.sides.join(", ")})]},d))})}),n.jsxs("div",{className:"relative px-6 py-6",style:{backgroundColor:"#f9f9ed",fontFamily:'"Glacial Indifference", sans-serif'},children:[n.jsx("h4",{className:"mb-3",style:{color:"#3d59ab",fontFamily:'"Poller One", cursive',fontSize:"1.1rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Get Ready!"}),n.jsx("p",{className:"mb-4 pr-20",style:{color:"#5a5a5a",fontSize:"0.9rem",lineHeight:"1.5"},children:"Remember to put out bags, containers, and ice packs. And get excited  great food is on the way!"}),n.jsx("img",{src:"/stemflower.png",alt:"",className:"absolute right-4 bottom-4 h-20 object-contain"})]})]})}function hv({client:e,getClientMenuItems:t,getClientReadyOrders:s,today:r,clientPortalData:l,updateClientPortalData:a}){const o=t(e.name).filter(f=>f.date>=r),i=s(e.name).filter(f=>f.date>=r),c={};o.forEach(f=>{c[f.date]||(c[f.date]={menuItems:[],readyOrders:[]}),c[f.date].menuItems.push(f)}),i.forEach(f=>{c[f.date]||(c[f.date]={menuItems:[],readyOrders:[]}),c[f.date].readyOrders.push(f)});const d=Object.keys(c).sort(),h=d.length>0;return n.jsxs("div",{className:"space-y-6",children:[d.map(f=>{const{menuItems:p,readyOrders:k}=c[f];return n.jsx(pv,{client:e,date:f,menuItems:p,readyOrders:k},f)}),h&&n.jsx(xv,{clientName:e.name,clientPortalData:l,updateClientPortalData:a,deliveryDate:d[0]}),e.honeyBookLink&&n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx(gn,{size:24,style:{color:"#d9a87a"}}),n.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Billing"})]}),n.jsx("p",{className:"text-gray-600 mb-4",children:"View your invoice and manage payments through our secure billing portal."}),n.jsxs("a",{href:e.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-6 py-3 rounded-lg text-white font-medium",style:{backgroundColor:"#d9a87a"},children:[n.jsx(gn,{size:20}),"View & Pay Invoice",n.jsx(Hn,{size:16})]})]})]})}function fv({order:e}){return n.jsxs("div",{className:"mb-3 last:mb-0",children:[n.jsxs("p",{className:"text-sm text-gray-500 mb-2",children:[e.portions," portion",e.portions!==1?"s":""]}),n.jsx("div",{className:"space-y-2",children:e.dishes.map((t,s)=>n.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[n.jsx($s,{size:16,style:{color:"#3d59ab"}}),n.jsx("span",{className:"font-medium",children:t})]},s))})]})}function $h(e){if(!e){const a=new Date,i=(6-a.getDay()+7)%7||7,c=new Date(a);return c.setDate(a.getDate()+i),c.setHours(23,59,59,999),c}const t=new Date(e+"T12:00:00"),s=t.getDay(),r=s===0?1:s===6?0:s+1,l=new Date(t);return l.setDate(t.getDate()-r),l.setHours(23,59,59,999),l}function gv(e){return new Date<$h(e)}function xv({clientName:e,clientPortalData:t,updateClientPortalData:s,deliveryDate:r}){var C,F;const[l,a]=x.useState(""),[o,i]=x.useState(!1),c=$h(r),d=gv(r),h=((C=t[e])==null?void 0:C.substitutionRequests)||[],f=(F=t[e])==null?void 0:F.substitutionRequest,p=f?[...h,f]:h,k=g=>g.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})+" at 11:59 PM",L=g=>{if(g.preventDefault(),!l.trim()){alert("Please enter your substitution request");return}const u={clientId:e,date:r||new Date().toISOString().split("T")[0],requestText:l.trim(),submittedAt:new Date().toISOString()},v=[...h,u];s(e,{substitutionRequests:v,substitutionRequest:u}),i(!0),a("")};return n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(gl,{size:24,style:{color:"#3d59ab"}}),n.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Request a Substitution"})]}),p.length>0&&n.jsxs("div",{className:"mb-6 space-y-3",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Your submitted requests:"}),p.map((g,u)=>n.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#dcfce7"},children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Ue,{size:16,className:"text-green-600"}),n.jsx("span",{className:"text-sm font-medium text-green-700",children:"Request received"})]}),n.jsx("p",{className:"text-sm text-gray-700",children:g.requestText||(g.originalDish?`Instead of ${g.originalDish}: ${g.requestedSubstitution}`:g.requestedSubstitution)})]},u))]}),o&&n.jsxs("div",{className:"mb-6 p-4 rounded-lg border-2 border-green-200",style:{backgroundColor:"#f0fdf4"},children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Ue,{size:20,className:"text-green-600"}),n.jsx("span",{className:"font-bold text-green-700",children:"Request submitted!"})]}),n.jsx("p",{className:"text-sm text-gray-600",children:"We'll review it before your next delivery."})]}),d?n.jsxs("form",{onSubmit:L,children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium mb-2",children:"What would you like to change or substitute?"}),n.jsx("textarea",{value:l,onChange:g=>a(g.target.value),placeholder:"E.g., 'Chicken instead of beef for Tuesday' or 'No onions in any dishes please' or 'Can I have extra vegetables instead of the starch?'",className:"w-full p-3 border-2 rounded-lg",style:{borderColor:"#ebb582"},rows:4})]}),n.jsx("div",{className:"mb-4 p-3 rounded-lg bg-amber-50 border border-amber-200",children:n.jsxs("div",{className:"flex items-center gap-2 text-amber-700",children:[n.jsx(fs,{size:16}),n.jsxs("span",{className:"text-sm font-medium",children:["Deadline: ",k(c)]})]})}),n.jsx("button",{type:"submit",disabled:!l.trim(),className:"w-full py-3 rounded-lg text-white font-medium disabled:opacity-50",style:{backgroundColor:"#3d59ab"},children:"Submit Request"})]}):n.jsxs("div",{className:"text-center py-4",children:[n.jsx(kt,{size:32,className:"mx-auto mb-2 text-amber-500"}),n.jsx("p",{className:"text-gray-600",children:"The substitution deadline has passed for this delivery."}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Requests must be submitted by Saturday at 11:59 PM."})]})]})}function yv({client:e,getClientReadyOrders:t,today:s}){const r=t(e.name,s);return n.jsxs("div",{className:"space-y-4",children:[n.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center animate-pulse",style:{backgroundColor:"#dbeafe"},children:n.jsx(cn,{size:40,style:{color:"#3d59ab"}})}),n.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"#3d59ab"},children:"Out for Delivery"}),n.jsx("p",{className:"text-gray-600",children:"Your meals are on their way to you today!"})]})}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx(fs,{size:24,style:{color:"#3d59ab"}}),n.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Estimated Arrival"})]}),n.jsx("p",{className:"text-2xl font-bold text-gray-800",children:e.deliveryWindow||"2:00 PM - 6:00 PM"}),n.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"We'll leave your meals at the door if you're not home."})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Is,{size:24,style:{color:"#3d59ab"}}),n.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Today's Order"})]}),r.map((l,a)=>n.jsx(fv,{order:l},a))]}),e.address&&n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx(Ms,{size:24,style:{color:"#3d59ab"}}),n.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Delivery Address"})]}),n.jsx("p",{className:"text-gray-700",children:e.address}),n.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Wrong address?"," ",n.jsx("a",{href:"mailto:hello@goldfinchchef.com",className:"text-blue-600 underline",children:"Let us know ASAP"})]})]})]})}function vv({client:e,getClientDeliveryStatus:t,getClientHistory:s,today:r}){var c;const l=t(e.name,r),o=s(e.name).slice(0,3),i=d=>new Date(d).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"});return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"text-center",children:[n.jsx("div",{className:"w-20 h-20 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"#dcfce7"},children:n.jsx(Ue,{size:40,className:"text-green-600"})}),n.jsx("h3",{className:"text-xl font-bold mb-2 text-green-700",children:"Delivered!"}),l&&n.jsxs("p",{className:"text-gray-600",children:[l.handoffType==="porch"?"Left at your door":"Handed off"," at ",i(l.completedAt)]})]}),(l==null?void 0:l.handoffType)==="porch"&&(l==null?void 0:l.photoData)&&n.jsxs("div",{className:"mt-6",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:"Delivery Photo:"}),n.jsx("img",{src:l.photoData,alt:"Delivery confirmation",className:"w-full rounded-lg shadow"})]}),(l==null?void 0:l.handoffType)==="hand"&&n.jsx("div",{className:"mt-6 p-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Ha,{size:24,style:{color:"#3d59ab"}}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:"Hand Delivery"}),n.jsxs("p",{className:"text-sm text-gray-600",children:["Received at ",i(l.completedAt)]})]})]})})]}),o.length>0&&o[0].date===r&&n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Is,{size:24,style:{color:"#3d59ab"}}),n.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"What's in Your Delivery"})]}),(c=o[0].dishes)==null?void 0:c.map((d,h)=>n.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg mb-2",style:{backgroundColor:"#f9f9ed"},children:[n.jsx($s,{size:16,style:{color:"#3d59ab"}}),n.jsx("span",{className:"font-medium",children:d})]},h))]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[n.jsx(In,{size:24,style:{color:"#ffd700"}}),n.jsx("h4",{className:"font-bold",style:{color:"#3d59ab"},children:"Heating Instructions"})]}),n.jsxs("div",{className:"text-gray-600 space-y-2 text-sm",children:[n.jsxs("p",{children:[n.jsx("strong",{children:"Refrigerate"})," meals within 2 hours of delivery."]}),n.jsxs("p",{children:[n.jsx("strong",{children:"To reheat:"})," Remove lid, cover with damp paper towel, microwave 2-3 minutes or until heated through."]}),n.jsxs("p",{children:[n.jsx("strong",{children:"Best enjoyed"})," within 4 days."]})]})]})]})}function bv({client:e,getClientHistory:t}){const r=t(e.name).slice(0,5);return n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full mx-auto mb-4 flex items-center justify-center",style:{backgroundColor:"#f9f9ed"},children:n.jsx(Wn,{size:32,className:"text-gray-400"})}),n.jsx("h3",{className:"text-xl font-bold mb-2",style:{color:"#3d59ab"},children:"No Upcoming Deliveries"}),n.jsx("p",{className:"text-gray-600 mb-4",children:"You don't have any meals scheduled yet."}),n.jsx("a",{href:"mailto:hello@goldfinchchef.com?subject=Schedule%20Deliveries",className:"inline-block px-6 py-3 rounded-lg text-white font-medium",style:{backgroundColor:"#3d59ab"},children:"Schedule Deliveries"})]}),r.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsx("h4",{className:"font-bold mb-4",style:{color:"#3d59ab"},children:"Recent Deliveries"}),n.jsx("div",{className:"space-y-3",children:r.map((l,a)=>{var o,i;return n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:new Date(l.date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})}),n.jsxs("p",{className:"text-sm text-gray-500",children:[(o=l.dishes)==null?void 0:o.slice(0,2).join(", "),((i=l.dishes)==null?void 0:i.length)>2&&` +${l.dishes.length-2} more`]})]}),n.jsx(Ue,{size:20,className:"text-green-600"})]},a)})})]})]})}function jv({clients:e,weeklyTasks:t={},setWeeklyTasks:s,clientPortalData:r={}}){const l=new Date,a=l.toLocaleDateString("en-US",{weekday:"long"}),i=(()=>{const N=new Date(l),S=N.getDay(),O=N.getDate()-S+(S===0?-6:1);return N.setDate(O),N.toISOString().split("T")[0]})(),c=new Date(new Date(i).getTime()+6*24*60*60*1e3).toLocaleDateString("en-US",{month:"short",day:"numeric"}),d=new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric"}),[h,f]=x.useState({}),p=t[i]||h,k=(N,S,O)=>{const W={...p,[N]:{...p[N]||{},[S]:O}};s?s({...t,[i]:W}):f(W)},L=(N,S)=>{k(N,"honeybookLink",S)},C=N=>{const S=N.startDate?new Date(N.startDate):new Date(2024,0,1);return Math.floor((l-S)/(7*24*60*60*1e3))%4+1},F=[],g=[],u=[];e.forEach(N=>{if(N.status==="paused")u.push(N);else if(N.status==="active"){const S=C(N);S===4&&F.push({...N,weekNumber:S}),(N.frequency==="weekly"||N.frequency==="biweekly"&&Math.floor(l.getTime()/6048e5)%2===0)&&g.push(N)}});const v=[];Object.entries(r).forEach(([N,S])=>{if(S.substitutionRequest){const O=e.find(W=>W.name===N);v.push({clientName:N,displayName:(O==null?void 0:O.displayName)||N,...S.substitutionRequest})}});const I=()=>{let N=0,S=F.length*5;return F.forEach(O=>{var W,le,E,_,j;(W=p[O.name])!=null&&W.invoicePrepared&&N++,(le=p[O.name])!=null&&le.honeybookLink&&N++,(E=p[O.name])!=null&&E.reminderSent&&N++,(_=p[O.name])!=null&&_.invoicePaid&&N++,(j=p[O.name])!=null&&j.datesSelected&&N++}),{completed:N,total:S}},D=()=>{let N=0,S=g.length*2;return g.forEach(O=>{var W,le;(W=p[O.name])!=null&&W.menusPlanned&&N++,(le=p[O.name])!=null&&le.menusSent&&N++}),{completed:N,total:S}},A=I(),z=D(),y={completed:A.completed+z.completed+v.filter(N=>{var S;return(S=p[N.clientName])==null?void 0:S.substitutionHandled}).length,total:A.total+z.total+v.length},b=[{key:"deliveringThisWeek",title:"Delivering This Week",icon:cn,color:"#27ae60",clients:g},{key:"paused",title:"Paused",icon:N0,color:"#9b59b6",clients:u}],w=({client:N})=>n.jsx("div",{className:"border-2 rounded-lg p-3 bg-white",style:{borderColor:"#ebb582"},children:n.jsx("div",{className:"flex justify-between items-start",children:n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold",children:N.displayName||N.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[N.persons," persons  ",N.mealsPerWeek," meals/week  ",N.frequency]}),N.deliveryDay&&n.jsxs("p",{className:"text-sm text-gray-500",children:["Delivery: ",N.deliveryDay]}),N.zone&&n.jsxs("span",{className:"inline-block mt-1 px-2 py-0.5 text-xs rounded bg-blue-100 text-blue-800",children:["Zone ",N.zone]})]})})});return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsx("h2",{className:"text-2xl font-bold mb-2",style:{color:"#3d59ab"},children:"Weekly Tasks"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("p",{className:"text-gray-600",children:["Today is ",a]}),n.jsxs("div",{className:"text-right",children:[n.jsxs("p",{className:"text-sm text-gray-500",children:["Week of ",d," - ",c]}),n.jsxs("p",{className:"text-lg font-bold",style:{color:y.completed===y.total&&y.total>0?"#27ae60":"#3d59ab"},children:[y.completed," / ",y.total," complete"]})]})]}),n.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mt-4",children:n.jsx("div",{className:"h-3 rounded-full transition-all duration-300",style:{width:`${y.total>0?y.completed/y.total*100:0}%`,backgroundColor:y.completed===y.total&&y.total>0?"#27ae60":"#3d59ab"}})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ud,{size:24,style:{color:"#e74c3c"}}),n.jsx("h3",{className:"text-xl font-bold",style:{color:"#e74c3c"},children:"Billing & Renewals"})]}),n.jsxs("span",{className:"px-3 py-1 rounded text-sm font-medium",style:{backgroundColor:A.completed===A.total&&A.total>0?"#e8f8f0":"#fde8e8",color:A.completed===A.total&&A.total>0?"#27ae60":"#e74c3c"},children:[A.completed,"/",A.total]})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Week 4 clients due for renewal"}),F.length===0?n.jsx("p",{className:"text-gray-500 italic",children:"No clients in Week 4 this week"}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left py-2 pr-4",children:"Client"}),n.jsx("th",{className:"text-center py-2 px-2",children:"Invoice Prepared"}),n.jsx("th",{className:"text-center py-2 px-2",children:"Honeybook Link"}),n.jsx("th",{className:"text-center py-2 px-2",children:"Reminder Sent"}),n.jsx("th",{className:"text-center py-2 px-2",children:"Invoice Paid"}),n.jsx("th",{className:"text-center py-2 px-2",children:"Dates Selected"})]})}),n.jsx("tbody",{children:F.map(N=>{var S,O,W,le,E,_,j;return n.jsxs("tr",{className:"border-b border-gray-100",children:[n.jsxs("td",{className:"py-3 pr-4",children:[n.jsx("p",{className:"font-medium",children:N.displayName||N.name}),n.jsx("p",{className:"text-xs text-gray-500",children:N.frequency})]}),n.jsx("td",{className:"text-center py-3 px-2",children:n.jsx("input",{type:"checkbox",checked:((S=p[N.name])==null?void 0:S.invoicePrepared)||!1,onChange:P=>k(N.name,"invoicePrepared",P.target.checked),className:"w-5 h-5 rounded cursor-pointer",style:{accentColor:"#e74c3c"}})}),n.jsx("td",{className:"text-center py-3 px-2",children:n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("input",{type:"text",value:((O=p[N.name])==null?void 0:O.honeybookLink)||N.honeyBookLink||"",onChange:P=>L(N.name,P.target.value),placeholder:"Paste link...",className:"w-24 p-1 text-xs border rounded"}),(((W=p[N.name])==null?void 0:W.honeybookLink)||N.honeyBookLink)&&n.jsx("a",{href:((le=p[N.name])==null?void 0:le.honeybookLink)||N.honeyBookLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600",children:n.jsx(Hn,{size:14})})]})}),n.jsx("td",{className:"text-center py-3 px-2",children:n.jsx("input",{type:"checkbox",checked:((E=p[N.name])==null?void 0:E.reminderSent)||!1,onChange:P=>k(N.name,"reminderSent",P.target.checked),className:"w-5 h-5 rounded cursor-pointer",style:{accentColor:"#e74c3c"}})}),n.jsx("td",{className:"text-center py-3 px-2",children:n.jsx("input",{type:"checkbox",checked:((_=p[N.name])==null?void 0:_.invoicePaid)||!1,onChange:P=>k(N.name,"invoicePaid",P.target.checked),className:"w-5 h-5 rounded cursor-pointer",style:{accentColor:"#27ae60"}})}),n.jsx("td",{className:"text-center py-3 px-2",children:n.jsx("input",{type:"checkbox",checked:((j=p[N.name])==null?void 0:j.datesSelected)||!1,onChange:P=>k(N.name,"datesSelected",P.target.checked),className:"w-5 h-5 rounded cursor-pointer",style:{accentColor:"#3d59ab"}})})]},N.name)})})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(In,{size:24,style:{color:"#27ae60"}}),n.jsx("h3",{className:"text-xl font-bold",style:{color:"#27ae60"},children:"Menu Planning"})]}),n.jsxs("span",{className:"px-3 py-1 rounded text-sm font-medium",style:{backgroundColor:(z.completed===z.total&&z.total>0,"#e8f8f0"),color:(z.completed===z.total&&z.total>0,"#27ae60")},children:[z.completed,"/",z.total]})]}),n.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Clients with deliveries this week"}),g.length===0?n.jsx("p",{className:"text-gray-500 italic",children:"No deliveries scheduled this week"}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b",children:[n.jsx("th",{className:"text-left py-2 pr-4",children:"Client"}),n.jsx("th",{className:"text-center py-2 px-2",children:"Menus Planned"}),n.jsx("th",{className:"text-center py-2 px-2",children:"Menus Sent"})]})}),n.jsx("tbody",{children:g.map(N=>{var S,O;return n.jsxs("tr",{className:"border-b border-gray-100",children:[n.jsxs("td",{className:"py-3 pr-4",children:[n.jsx("p",{className:"font-medium",children:N.displayName||N.name}),n.jsxs("p",{className:"text-xs text-gray-500",children:[N.persons,"p  ",N.mealsPerWeek," meals  ",N.deliveryDay||"No day set"]})]}),n.jsx("td",{className:"text-center py-3 px-2",children:n.jsx("input",{type:"checkbox",checked:((S=p[N.name])==null?void 0:S.menusPlanned)||!1,onChange:W=>k(N.name,"menusPlanned",W.target.checked),className:"w-5 h-5 rounded cursor-pointer",style:{accentColor:"#27ae60"}})}),n.jsx("td",{className:"text-center py-3 px-2",children:n.jsx("input",{type:"checkbox",checked:((O=p[N.name])==null?void 0:O.menusSent)||!1,onChange:W=>k(N.name,"menusSent",W.target.checked),className:"w-5 h-5 rounded cursor-pointer",style:{accentColor:"#27ae60"}})})]},N.name)})})]})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Tu,{size:24,style:{color:"#f39c12"}}),n.jsx("h3",{className:"text-xl font-bold",style:{color:"#f39c12"},children:"Substitution Requests"})]}),v.length>0&&n.jsxs("span",{className:"px-3 py-1 rounded text-sm font-medium",style:{backgroundColor:"#fef3c7",color:"#f39c12"},children:[v.filter(N=>{var S;return(S=p[N.clientName])==null?void 0:S.substitutionHandled}).length,"/",v.length]})]}),v.length===0?n.jsxs("div",{className:"text-center py-6",children:[n.jsx(Tu,{size:32,className:"mx-auto mb-2 text-gray-300"}),n.jsx("p",{className:"text-gray-500 italic",children:"No substitution requests this week"})]}):n.jsx("div",{className:"space-y-3",children:v.map((N,S)=>{var O,W,le;return n.jsx("div",{className:`border-2 rounded-lg p-4 ${(O=p[N.clientName])!=null&&O.substitutionHandled?"bg-green-50 border-green-200":"border-amber-200 bg-amber-50"}`,children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h4",{className:"font-bold",children:N.displayName}),((W=p[N.clientName])==null?void 0:W.substitutionHandled)&&n.jsx("span",{className:"text-xs px-2 py-1 rounded bg-green-100 text-green-700",children:"Handled"})]}),n.jsxs("div",{className:"text-sm space-y-1",children:[n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:"Instead of:"})," ",n.jsx("span",{className:"font-medium",children:N.originalDish})]}),n.jsxs("p",{children:[n.jsx("span",{className:"text-gray-500",children:"Requested:"})," ",n.jsx("span",{className:"font-medium",children:N.requestedSubstitution})]}),N.submittedAt&&n.jsxs("p",{className:"text-xs text-gray-400",children:["Submitted: ",new Date(N.submittedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})]})]})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:((le=p[N.clientName])==null?void 0:le.substitutionHandled)||!1,onChange:E=>k(N.clientName,"substitutionHandled",E.target.checked),className:"w-5 h-5 rounded",style:{accentColor:"#27ae60"}}),n.jsx("span",{className:"text-sm",children:"Handled"})]})]})},S)})})]}),b.map(({key:N,title:S,icon:O,color:W,clients:le})=>n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsx(O,{size:24,style:{color:W}}),n.jsxs("h3",{className:"text-xl font-bold",style:{color:W},children:[S," (",le.length,")"]})]}),le.length===0?n.jsx("p",{className:"text-gray-500 italic",children:"No clients in this category"}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:le.map((E,_)=>n.jsx(w,{client:E},_))})]},N))]})}function Nv({client:e,clientPortalData:t={},onSave:s,onClose:r}){var u;const[l,a]=x.useState((e==null?void 0:e.deliveryDates)||[]),[o,i]=x.useState((e==null?void 0:e.billDueDate)||""),[c,d]=x.useState(""),h=((u=t[e==null?void 0:e.name])==null?void 0:u.selectedDates)||[],f=h.length>0;x.useEffect(()=>{var v;((v=e==null?void 0:e.deliveryDates)==null?void 0:v.length)>0?a(e.deliveryDates):f&&a(h),i((e==null?void 0:e.billDueDate)||"")},[e]);const p=()=>{if(!c)return;if(l.includes(c)){alert("This date is already added");return}if(l.length>=4){alert("Maximum 4 delivery dates allowed");return}const v=[...l,c].sort();a(v),d("")},k=v=>{a(l.filter(I=>I!==v))},L=()=>{h.length>0&&a([...h].sort())},C=()=>{s({...e,deliveryDates:l.sort(),billDueDate:o}),r()},F=v=>v?new Date(v+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}):"",g=(e==null?void 0:e.displayName)||(e==null?void 0:e.name)||"Unknown";return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-4 border-b flex items-center justify-between",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("h2",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:g}),n.jsx("button",{onClick:r,className:"p-1 hover:bg-gray-200 rounded",children:n.jsx(Qt,{size:24})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"font-bold flex items-center gap-2",style:{color:"#3d59ab"},children:[n.jsx(Wn,{size:20}),"Next Delivery Dates"]}),f&&n.jsxs("button",{onClick:L,className:"text-sm flex items-center gap-1 px-2 py-1 rounded bg-purple-100 text-purple-700 hover:bg-purple-200",children:[n.jsx(gl,{size:14}),"Sync from Portal"]})]}),f&&n.jsxs("p",{className:"text-xs text-purple-600 mb-2",children:["Client selected dates in portal: ",h.map(v=>F(v)).join(", ")]}),n.jsx("div",{className:"space-y-2 mb-3",children:l.length===0?n.jsx("p",{className:"text-gray-400 text-sm italic",children:"No delivery dates set"}):l.map((v,I)=>n.jsxs("div",{className:"flex items-center justify-between p-2 rounded border",style:{borderColor:"#ebb582",backgroundColor:"#fff"},children:[n.jsxs("span",{children:[n.jsxs("span",{className:"text-gray-400 text-sm mr-2",children:["#",I+1]}),F(v)]}),n.jsx("button",{onClick:()=>k(v),className:"text-red-500 hover:text-red-700 p-1",children:n.jsx(rn,{size:16})})]},v))}),l.length<4&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"date",value:c,onChange:v=>d(v.target.value),min:new Date().toISOString().split("T")[0],className:"flex-1 p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}}),n.jsx("button",{onClick:p,disabled:!c,className:"px-4 py-2 rounded-lg text-white disabled:opacity-50",style:{backgroundColor:"#3d59ab"},children:n.jsx(vn,{size:20})})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-bold flex items-center gap-2 mb-3",style:{color:"#3d59ab"},children:[n.jsx(ud,{size:20}),"Bill Due Date"]}),n.jsx("input",{type:"date",value:o,onChange:v=>i(v.target.value),className:"w-full p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}}),o&&n.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Due: ",F(o),new Date(o+"T12:00:00")<new Date&&n.jsx("span",{className:"text-red-600 ml-2 font-medium",children:"OVERDUE"})]})]}),n.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[n.jsx("h4",{className:"font-medium text-gray-700 mb-2",children:"Subscription Summary"}),n.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Plan:"})," ",n.jsxs("span",{className:"font-medium",children:["$",(e==null?void 0:e.planPrice)||0]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Service Fee:"})," ",n.jsxs("span",{className:"font-medium",children:["$",(e==null?void 0:e.serviceFee)||0]})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Frequency:"})," ",n.jsx("span",{className:"font-medium capitalize",children:(e==null?void 0:e.frequency)||"weekly"})]}),n.jsxs("div",{children:[n.jsx("span",{className:"text-gray-500",children:"Meals/Week:"})," ",n.jsx("span",{className:"font-medium",children:(e==null?void 0:e.mealsPerWeek)||0})]})]})]})]}),n.jsxs("div",{className:"p-4 border-t flex justify-end gap-3",children:[n.jsx("button",{onClick:r,className:"px-4 py-2 rounded-lg border-2 hover:bg-gray-50",style:{borderColor:"#ebb582"},children:"Cancel"}),n.jsx("button",{onClick:C,className:"px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:"Save Changes"})]})]})})}const na="goldfinchChefData";function kv(){const[e,t]=x.useState([]),[s,r]=x.useState([]),[l,a]=x.useState([]),[o,i]=x.useState([]),[c,d]=x.useState([]),[h,f]=x.useState({}),[p,k]=x.useState([]),[L,C]=x.useState({routeStartAddress:""}),[F,g]=x.useState([]),[u,v]=x.useState({}),[I,D]=x.useState({protein:[],veg:[],starch:[],sauces:[],breakfast:[],soups:[]}),[A,z]=x.useState([]),[y,b]=x.useState([]),[w,N]=x.useState({}),[S,O]=x.useState(!1);x.useEffect(()=>{const q=()=>{const pe=localStorage.getItem(na);if(pe)try{const te=JSON.parse(pe);te.clients&&t(te.clients),te.drivers&&r(te.drivers),te.menuItems&&a(te.menuItems),te.deliveryLog&&i(te.deliveryLog),te.readyForDelivery&&d(te.readyForDelivery),te.clientPortalData&&f(te.clientPortalData),te.blockedDates&&k(te.blockedDates),te.adminSettings&&C(te.adminSettings),te.customTasks&&g(te.customTasks),te.weeklyTasks&&v(te.weeklyTasks),te.recipes&&D(te.recipes),te.masterIngredients&&z(te.masterIngredients),te.groceryBills&&b(te.groceryBills),te.weeks&&N(te.weeks)}catch(te){console.error("Error loading saved data:",te)}O(!0)};q();const Q=pe=>{pe.key===na&&q()};return window.addEventListener("storage",Q),()=>window.removeEventListener("storage",Q)},[]);const W=x.useCallback(q=>{const Q=localStorage.getItem(na);let pe={};if(Q)try{pe=JSON.parse(Q)}catch(be){console.error("Error parsing saved data:",be)}const te={...pe,...q,lastSaved:new Date().toISOString()};localStorage.setItem(na,JSON.stringify(te))},[]),le=x.useCallback(q=>{r(q),W({drivers:q})},[W]),E=x.useCallback(q=>{k(q),W({blockedDates:q})},[W]),_=x.useCallback(q=>{C(q),W({adminSettings:q})},[W]),j=x.useCallback(q=>{g(q),W({customTasks:q})},[W]),P=x.useCallback(q=>{a(q),W({menuItems:q})},[W]),R=x.useCallback(q=>{v(q),W({weeklyTasks:q})},[W]),H=x.useCallback(q=>{D(q),W({recipes:q})},[W]),V=x.useCallback(q=>{z(q),W({masterIngredients:q})},[W]),B=x.useCallback(q=>{t(q),W({clients:q})},[W]),G=x.useCallback(q=>{b(q),W({groceryBills:q})},[W]),$=x.useCallback(q=>{N(q),W({weeks:q})},[W]),Y=x.useCallback(q=>{const Q=w[q]||Jn(q);if(Q.status==="locked")return Q;const pe=Rh(Q,l,e),te={...w,[q]:pe};return N(te),W({weeks:te}),pe},[w,l,e,W]);return{clients:e,drivers:s,menuItems:l,deliveryLog:o,readyForDelivery:c,clientPortalData:h,blockedDates:p,adminSettings:L,customTasks:F,weeklyTasks:u,recipes:I,masterIngredients:A,groceryBills:y,isLoaded:S,updateDrivers:le,updateBlockedDates:E,updateAdminSettings:_,updateMenuItems:P,updateWeeklyTasks:R,updateRecipes:H,updateMasterIngredients:V,updateCustomTasks:j,updateClients:B,updateGroceryBills:G,weeks:w,updateWeeks:$,lockWeekWithSnapshot:Y}}const zt=({label:e,children:t})=>n.jsxs("div",{className:"flex flex-col",children:[n.jsx("label",{className:"text-sm font-medium mb-1",style:{color:"#423d3c"},children:e}),t]}),_t="p-2 border-2 rounded-lg",Tt={borderColor:"#ebb582"};function wv(e=new Date){const t=new Date(e);t.setDate(t.getDate()-t.getDay()),t.setHours(0,0,0,0);const s=new Date(t);return s.setDate(s.getDate()+6),s.setHours(23,59,59,999),{start:t,end:s}}function Hs(e){return new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"})}function Cv({client:e,date:t,menuItems:s}){const r=new Date(t+"T12:00:00").toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}).toUpperCase(),l=[];s.forEach(o=>{const i={protein:o.protein,sides:[o.veg,o.starch].filter(Boolean)};(i.protein||i.sides.length>0)&&l.push(i),o.extras&&o.extras.forEach(c=>{l.push({protein:c,sides:[],isExtra:!0})})});const a=e.displayName||e.name;return n.jsxs("div",{className:"overflow-hidden shadow-lg",style:{backgroundColor:"#fff"},children:[n.jsxs("div",{className:"relative px-4 pt-6 pb-8",style:{backgroundColor:"#f9f9ed",backgroundImage:"url(/pattern4.png)",backgroundSize:"cover",backgroundPosition:"center"},children:[n.jsx("p",{className:"text-center mb-2",style:{fontFamily:'"Glacial Indifference", sans-serif',fontSize:"12px",letterSpacing:"0.3em",color:"#5a5a5a"},children:"GOLDFINCH CHEF SERVICES"}),n.jsxs("h2",{className:"text-center mb-3",style:{color:"#3d59ab",fontFamily:'"Poller One", cursive',fontSize:"18px",textTransform:"uppercase",letterSpacing:"0.05em",textDecoration:"underline",textDecorationColor:"#3d59ab",textUnderlineOffset:"4px"},children:[a,"'s Menu"]}),n.jsx("p",{className:"text-center mb-4",style:{color:"#5a5a5a",fontFamily:'"Beth Ellen", cursive',fontSize:"12px"},children:"here's what to expect on your plate!"}),n.jsxs("div",{className:"flex items-center justify-center gap-3",children:[n.jsx("img",{src:"/goldfinch5.png",alt:"Goldfinch",className:"w-12 h-12 object-contain"}),n.jsx("p",{style:{fontFamily:'"Glacial Indifference", sans-serif',fontSize:"14px",letterSpacing:"0.2em",color:"#5a5a5a"},children:r})]})]}),n.jsx("div",{className:"px-6 py-8",style:{backgroundColor:"#d9a87a"},children:n.jsx("div",{className:"space-y-8",children:l.map((o,i)=>n.jsxs("div",{className:"text-center",children:[o.protein&&n.jsx("h3",{style:{color:"#ffffff",fontFamily:'"Glacial Indifference", sans-serif',fontSize:"1.1rem",fontWeight:"bold",letterSpacing:"0.15em",textTransform:"uppercase",marginBottom:o.sides.length>0?"0.5rem":0},children:o.protein}),o.sides.length>0&&n.jsx("p",{style:{color:"#f5e6d3",fontFamily:'"Glacial Indifference", sans-serif',fontSize:"0.85rem",letterSpacing:"0.1em",textTransform:"uppercase"},children:o.sides.join(", ")})]},i))})}),n.jsxs("div",{className:"relative px-6 py-6",style:{backgroundColor:"#f9f9ed",fontFamily:'"Glacial Indifference", sans-serif'},children:[n.jsx("h4",{className:"mb-3",style:{color:"#3d59ab",fontFamily:'"Poller One", cursive',fontSize:"1.1rem",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Get Ready!"}),n.jsx("p",{className:"mb-4 pr-20",style:{color:"#5a5a5a",fontSize:"0.9rem",lineHeight:"1.5"},children:"Remember to put out bags, containers, and ice packs. And get excited  great food is on the way!"}),n.jsx("img",{src:"/stemflower.png",alt:"",className:"absolute right-4 bottom-4 h-20 object-contain"})]})]})}function Sv({clients:e,menuItems:t,updateMenuItems:s,lockWeekWithSnapshot:r,weeklyTasks:l={},clientPortalData:a={},recipes:o={}}){const i=ho(),c=new Date().toISOString().split("T")[0],[d,h]=x.useState({}),p=(()=>{const E=new Date,_=E.getDay(),j=E.getDate()-_+(_===0?-6:1);return E.setDate(j),E.toISOString().split("T")[0]})(),k=l[p]||{},L=E=>{const _=k[E]||{};return _.menusPlanned&&_.menusSent},C=E=>{const _=k[E]||{};return{menusPlanned:!!_.menusPlanned,menusSent:!!_.menusSent,complete:_.menusPlanned&&_.menusSent}},F=E=>{const _=e.find(R=>R.name===E);if(!_)return{status:"unknown",daysOverdue:0,hasDates:!1,canApprove:!1,warning:null,blocked:!0};const j=_.deliveryDates&&_.deliveryDates.length>0;if(_.status==="paused")return{status:"paused",daysOverdue:0,hasDates:j,canApprove:!1,warning:null,blocked:!0,message:"Subscription paused  cannot send menu"};let P=0;if(_.billDueDate){const R=new Date(_.billDueDate+"T12:00:00"),V=new Date-R;P=Math.floor(V/(1e3*60*60*24))}return P>=8?{status:"paused",daysOverdue:P,hasDates:j,canApprove:!1,warning:null,blocked:!0,message:"Subscription paused  cannot send menu"}:P>=1?{status:"grace",daysOverdue:P,hasDates:j,canApprove:!0,warning:`Invoice overdue (${P} day${P>1?"s":""})`,blocked:!1}:j?{status:"active",daysOverdue:0,hasDates:!0,canApprove:!0,warning:null,blocked:!1}:{status:"active",daysOverdue:0,hasDates:!1,canApprove:!0,warning:"Delivery dates not set",blocked:!1}},g=()=>e.filter(E=>{var j;if(E.status!=="active"||E.chefChoice!==!1)return!1;const _=a[E.name];return(j=_==null?void 0:_.ingredientPicks)==null?void 0:j.submittedAt}).map(E=>{var j;const _=((j=a[E.name])==null?void 0:j.ingredientPicks)||{};return{client:E,picks:_,mealsPerWeek:_.mealsPerWeek||E.mealsPerWeek||3}}),u=(E,_)=>{if(d[E])return;const j=Array(_).fill(null).map(()=>({protein:"",veg:"",starch:""}));h(P=>({...P,[E]:j}))},v=(E,_,j,P)=>{h(R=>{const H=[...R[E]||[]];return H[_]={...H[_],[j]:P},{...R,[E]:H}})},I=E=>{const _=d[E];return _?_.every(j=>j.protein&&j.veg&&j.starch):!1},D=(E,_,j,P)=>{const R=d[E]||[],V=_[{protein:"proteins",veg:"veggies",veggie:"veggies",starch:"starches"}[j]]||[],B=R.filter((G,$)=>$!==P).map(G=>G[j==="veggie"?"veg":j]).filter(Boolean);return V.filter(G=>!B.includes(G))},A=(E,_,j)=>{const P=E.portions||E.persons||1;return _.map((R,H)=>({id:`${E.name}-${j}-${H}-${Date.now()}`,clientName:E.name,date:j,portions:P,protein:R.protein,veg:R.veg,starch:R.starch,extras:[],approved:!1,fromClientPicks:!0}))},z=E=>{var V;const _=d[E.name];if(!_||!I(E.name)){alert("Please pair all meals before approving.");return}const j=((V=a[E.name])==null?void 0:V.selectedDates)||[],R=(j.length>0?j:E.deliveryDates||[]).find(B=>B>=c);if(!R){alert("No upcoming delivery date found for this client.");return}const H=A(E,_,R);s([...t,...H]),h(B=>{const G={...B};return delete G[E.name],G}),alert(`Menu created for ${E.displayName||E.name}! It will appear in the approval queue below.`)},y=g(),b=()=>{const E=t.filter(j=>!j.approved&&j.date>=c),_={};return E.forEach(j=>{_[j.date]||(_[j.date]={}),_[j.date][j.clientName]||(_[j.date][j.clientName]=[]),_[j.date][j.clientName].push(j)}),Object.entries(_).sort(([j],[P])=>j.localeCompare(P)).map(([j,P])=>({date:j,weekId:as(j),menus:Object.entries(P).sort(([R],[H])=>R.localeCompare(H)).map(([R,H])=>({clientName:R,items:H}))}))},w=(E,_)=>{const j=as(_),P=t.map(R=>R.clientName===E&&R.date===_&&!R.approved?{...R,approved:!0}:R);s(P),r(j)},N=()=>{const E=[],_=[],j=[],P=[];if(O.forEach(({menus:B})=>{B.forEach(({clientName:G})=>{const $=F(G),Y=L(G);$.blocked?j.push(G):Y?(E.push(G),$.warning&&P.push({clientName:G,warning:$.warning})):_.push(G)})}),E.length===0){let B="No menus ready to approve.";j.length>0&&(B+=`

${j.length} client(s) have paused subscriptions.`),_.length>0&&(B+=`

${_.length} client(s) have incomplete tasks.`),alert(B);return}let R=`Approve ${E.length} menu(s) and push to client portals?

This will lock the week and menus will appear in KDS for cooking.`;if(P.length>0&&(R+=`

 Warnings for ${P.length} client(s):`,P.slice(0,3).forEach(({clientName:B,warning:G})=>{R+=`
 ${B}: ${G}`}),P.length>3&&(R+=`
 ...and ${P.length-3} more`)),(_.length>0||j.length>0)&&(R+=`

Will NOT be approved:`,_.length>0&&(R+=`
 ${_.length} with incomplete tasks`),j.length>0&&(R+=`
 ${j.length} with paused subscriptions`)),!window.confirm(R))return;const H=new Set,V=t.map(B=>{if(!B.approved&&B.date>=c){const G=F(B.clientName);if(L(B.clientName)&&G.canApprove)return H.add(as(B.date)),{...B,approved:!0}}return B});s(V),H.forEach(B=>{r(B)}),alert(`${E.length} menu(s) approved and pushed to client portals!`)},S=(E,_)=>{if(!window.confirm(`Send ${E}'s menu back for editing?

This will remove it from the approval queue. You can recreate it in Menu Planner.`))return;const j=t.filter(P=>!(P.clientName===E&&P.date===_&&!P.approved));s(j),i("/?tab=menu")},O=b(),W=O.reduce((E,_)=>E+_.menus.length,0),le=O.reduce((E,_)=>E+_.menus.filter(j=>{const P=F(j.clientName);return L(j.clientName)&&P.canApprove}).length,0);return O.reduce((E,_)=>E+_.menus.filter(j=>F(j.clientName).blocked).length,0),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold mb-2",style:{color:"#3d59ab"},children:"Menu Approval"}),n.jsx("p",{className:"text-gray-600",children:"Review all menus before pushing to client portals. Approving will lock the week and send menus to KDS."})]}),W>0&&n.jsxs("button",{onClick:N,disabled:le===0,className:`flex items-center gap-2 px-6 py-3 rounded-lg text-white font-medium transition-opacity ${le>0?"hover:opacity-90":"opacity-50 cursor-not-allowed"}`,style:{backgroundColor:"#10b981"},title:le===0?"Complete weekly tasks to enable approval":"",children:[n.jsx(Ue,{size:20}),"Approve & Push Ready (",le,"/",W,")"]})]}),O.length===0&&y.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Ue,{size:48,className:"mx-auto mb-4 text-green-500"}),n.jsx("p",{className:"text-gray-600",children:"All menus have been approved!"}),n.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Create new menus in the Menu tab, then come back here to approve them."}),n.jsxs(Mn,{to:"/?tab=menu",className:"inline-flex items-center gap-2 mt-4 px-4 py-2 rounded-lg border-2 hover:bg-gray-50",style:{borderColor:"#ebb582"},children:[n.jsx($s,{size:18}),"Go to Menu Planner"]})]}):n.jsxs("p",{className:"text-sm text-gray-500",children:[W>0&&`${W} menu${W>1?"s":""} pending approval`,W>0&&y.length>0&&"  ",y.length>0&&`${y.length} client${y.length>1?"s":""} with ingredient picks to pair`]})]}),y.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",style:{color:"#3d59ab"},children:[n.jsx(Dh,{size:24}),"Client Ingredient Picks"]}),n.jsx("p",{className:"text-gray-600 mb-6",children:"These clients picked their ingredients. Pair them into meals, then create their menu."}),n.jsx("div",{className:"space-y-6",children:y.map(({client:E,picks:_,mealsPerWeek:j})=>{var H,V,B;d[E.name]||u(E.name,j);const P=d[E.name]||[],R=I(E.name);return n.jsxs("div",{className:"border-2 rounded-lg overflow-hidden",style:{borderColor:"#ebb582"},children:[n.jsxs("div",{className:"p-4",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("h4",{className:"font-bold text-lg",style:{color:"#3d59ab"},children:E.displayName||E.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:[j," meals  ",E.portions||E.persons||1," portions"]}),_.notes&&n.jsxs("p",{className:"text-sm text-amber-700 mt-2 bg-amber-50 p-2 rounded",children:["Note: ",_.notes]})]}),n.jsxs("div",{className:"p-4 border-t grid grid-cols-3 gap-4 text-sm",style:{borderColor:"#ebb582"},children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-red-600 mb-1",children:"Proteins"}),(H=_.proteins)==null?void 0:H.map((G,$)=>n.jsx("p",{className:"text-gray-700",children:G},$))]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-green-600 mb-1",children:"Veggies"}),(V=_.veggies)==null?void 0:V.map((G,$)=>n.jsx("p",{className:"text-gray-700",children:G},$))]}),n.jsxs("div",{children:[n.jsx("p",{className:"font-medium text-amber-600 mb-1",children:"Starches"}),(B=_.starches)==null?void 0:B.map((G,$)=>n.jsx("p",{className:"text-gray-700",children:G},$))]})]}),n.jsxs("div",{className:"p-4 border-t",style:{borderColor:"#ebb582"},children:[n.jsx("p",{className:"font-medium mb-3",style:{color:"#3d59ab"},children:"Pair into Meals:"}),n.jsx("div",{className:"space-y-3",children:P.map((G,$)=>n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs("span",{className:"text-sm font-medium text-gray-500 w-16",children:["Meal ",$+1,":"]}),n.jsxs("select",{value:G.protein,onChange:Y=>v(E.name,$,"protein",Y.target.value),className:"flex-1 min-w-[120px] p-2 border rounded text-sm",style:{borderColor:G.protein?"#22c55e":"#ebb582"},children:[n.jsx("option",{value:"",children:"Protein"}),D(E.name,_,"protein",$).map(Y=>n.jsx("option",{value:Y,children:Y},Y))]}),n.jsxs("select",{value:G.veg,onChange:Y=>v(E.name,$,"veg",Y.target.value),className:"flex-1 min-w-[120px] p-2 border rounded text-sm",style:{borderColor:G.veg?"#22c55e":"#ebb582"},children:[n.jsx("option",{value:"",children:"Veggie"}),D(E.name,_,"veggie",$).map(Y=>n.jsx("option",{value:Y,children:Y},Y))]}),n.jsxs("select",{value:G.starch,onChange:Y=>v(E.name,$,"starch",Y.target.value),className:"flex-1 min-w-[120px] p-2 border rounded text-sm",style:{borderColor:G.starch?"#22c55e":"#ebb582"},children:[n.jsx("option",{value:"",children:"Starch"}),D(E.name,_,"starch",$).map(Y=>n.jsx("option",{value:Y,children:Y},Y))]})]},$))})]}),n.jsx("div",{className:"p-4 border-t flex justify-end",style:{borderColor:"#ebb582"},children:n.jsxs("button",{onClick:()=>z(E),disabled:!R,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-colors ${R?"bg-blue-500 text-white hover:bg-blue-600":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:[n.jsx(vn,{size:16}),"Create Menu"]})})]},E.name)})})]}),O.map(({date:E,weekId:_,menus:j})=>n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h3",{className:"text-lg font-bold",style:{color:"#3d59ab"},children:new Date(E+"T12:00:00").toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric"})}),n.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-gray-100 text-gray-600",children:["Week ",_]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.map(({clientName:P,items:R})=>{const H=e.find(Y=>Y.name===P)||{name:P},V=C(P),B=F(P),G=V.complete&&B.canApprove,$=B.blocked;return n.jsxs("div",{className:`bg-white rounded-lg shadow-lg overflow-hidden ${$?"opacity-60":""}`,children:[n.jsx(Cv,{client:H,date:E,menuItems:R}),(B.warning||B.blocked)&&n.jsx("div",{className:"px-3 py-2 border-t",style:{borderColor:"#ebb582",backgroundColor:$?"#fef2f2":B.status==="grace"?"#fef3c7":"#fffbeb"},children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(kt,{size:14,className:$?"text-red-600":"text-amber-600"}),n.jsx("span",{className:`text-xs font-medium ${$?"text-red-700":"text-amber-700"}`,children:B.message||B.warning})]})}),n.jsxs("div",{className:"px-3 py-2 border-t",style:{borderColor:"#ebb582",backgroundColor:V.complete?"#f0fdf4":"#fef3c7"},children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-xs font-medium",style:{color:V.complete?"#15803d":"#92400e"},children:"Weekly Tasks"}),!V.complete&&n.jsxs(Mn,{to:"/admin?section=subscriptions",className:"text-xs text-blue-600 hover:underline flex items-center gap-1",children:["Complete Tasks",n.jsx(Hn,{size:10})]})]}),n.jsxs("div",{className:"flex gap-3 mt-1",children:[n.jsxs("span",{className:`text-xs flex items-center gap-1 ${V.menusPlanned?"text-green-600":"text-gray-400"}`,children:[V.menusPlanned?n.jsx(Ue,{size:12}):n.jsx(Qt,{size:12}),"Menu Planned"]}),n.jsxs("span",{className:`text-xs flex items-center gap-1 ${V.menusSent?"text-green-600":"text-gray-400"}`,children:[V.menusSent?n.jsx(Ue,{size:12}):n.jsx(Qt,{size:12}),"Menu Sent"]})]})]}),n.jsxs("div",{className:"p-3 border-t flex justify-between gap-2",style:{borderColor:"#ebb582"},children:[n.jsxs("button",{onClick:()=>S(P,E),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium border-2 hover:bg-red-50 transition-colors",style:{borderColor:"#dc2626",color:"#dc2626"},children:[n.jsx(Sh,{size:16}),"Edit"]}),$?n.jsxs("span",{className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium bg-gray-100 text-gray-500",children:[n.jsx(Qt,{size:16}),"Blocked"]}):n.jsxs("button",{onClick:()=>G&&w(P,E),disabled:!G,className:`flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${G?"bg-green-500 text-white hover:bg-green-600":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,title:$?"Subscription paused":V.complete?"Approve and push to client portal":"Complete weekly tasks first",children:[n.jsx(Ue,{size:16}),"Approve"]})]})]},`${P}-${E}`)})})]},E)),W>0&&le>0&&n.jsx("div",{className:"sticky bottom-4 flex justify-center",children:n.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-8 py-4 rounded-lg text-white font-medium shadow-lg hover:opacity-90 transition-opacity",style:{backgroundColor:"#10b981"},children:[n.jsx(Ue,{size:24}),"Approve & Push Ready Menus (",le,"/",W,")"]})})]})}function Dv(){const{clients:e,drivers:t,menuItems:s,deliveryLog:r,readyForDelivery:l,clientPortalData:a,blockedDates:o,adminSettings:i,customTasks:c,weeklyTasks:d,recipes:h,masterIngredients:f,groceryBills:p,isLoaded:k,updateDrivers:L,updateBlockedDates:C,updateAdminSettings:F,updateCustomTasks:g,updateMenuItems:u,updateWeeklyTasks:v,updateRecipes:I,updateMasterIngredients:D,updateClients:A,updateGroceryBills:z,weeks:y,updateWeeks:b,lockWeekWithSnapshot:w}=kv(),[N]=vh(),[S,O]=x.useState("overview"),[W,le]=x.useState(dr);x.useEffect(()=>{const m=N.get("section");m==="menu-approval"||m==="approvals"||m==="dashboard"||m==="tasks"?O("overview"):m&&O(m)},[N]);const[E,_]=x.useState(null),[j,P]=x.useState(null),[R,H]=x.useState(new Date),[V,B]=x.useState({title:"",notes:"",dueDate:""}),[G,$]=x.useState(new Date().toISOString().split("T")[0]),[Y,q]=x.useState([]),[Q,pe]=x.useState(Ga),[te,be]=x.useState(qa),[ke,Pe]=x.useState(null),Ee=Br.useRef(),[Ce,fe]=x.useState(Ya),[qe,je]=x.useState(null),[Se,Me]=x.useState(null),[Ct,lt]=x.useState([]),ht=Br.useRef(),Je=Br.useRef(),[ct,Ge]=x.useState(null),[se,ge]=x.useState({name:"",displayName:"",persons:1,contacts:[{name:"",email:"",phone:"",address:""}],notes:"",mealsPerWeek:0,frequency:"weekly",status:"active",pausedDate:"",honeyBookLink:"",billingNotes:"",deliveryDay:"",zone:"",pickup:!1,planPrice:0,serviceFee:0,prepayDiscount:!1,newClientFeePaid:!1,paysOwnGroceries:!1}),[ze,_e]=x.useState({date:new Date().toISOString().split("T")[0],amount:"",store:"",notes:""}),De=new Date,{start:M,end:Z}=wv(De),oe=()=>l.filter(m=>{const T=new Date(m.date+"T12:00:00");return T>=M&&T<=Z}),J=()=>r.filter(m=>{const T=new Date(m.date+"T12:00:00");return T>=M&&T<=Z}),Ae=()=>r.filter(m=>{const T=new Date(m.date+"T12:00:00");return T>=M&&T<=Z&&m.problem}),xe=()=>{const m=new Date,T=new Date(m);return T.setDate(T.getDate()+7),e.filter(U=>U.status!=="active"||!U.billDueDate?!1:new Date(U.billDueDate+"T12:00:00")<=T).sort((U,X)=>new Date(U.billDueDate)-new Date(X.billDueDate))},Oe=()=>Object.entries(a).filter(([m,T])=>T.substitutionRequest).map(([m,T])=>({clientName:m,...T.substitutionRequest})),ye=()=>(De.toISOString().split("T")[0],e.filter(m=>{if(m.status!=="active"||!m.deliveryDay)return!1;const T={Monday:1,Tuesday:2,Thursday:4}[m.deliveryDay];if(!T)return!1;for(let U=new Date(M);U<=Z;U.setDate(U.getDate()+1))if(U.getDay()===T&&U>=De){const X=U.toISOString().split("T")[0];if(!l.some(ce=>ce.clientName===m.name&&ce.date===X))return!0}return!1})),$e=()=>{const m=De.toISOString().split("T")[0],T=s.filter(X=>!X.approved&&X.date>=m);return new Set(T.map(X=>`${X.clientName}-${X.date}`)).size},Be=()=>r.filter(m=>{const T=new Date(m.date+"T12:00:00"),U=(De-T)/(1e3*60*60*24);return U>=3&&U<=10&&!m.bagsReturned}),Te=()=>{const m=[],T=xe(),U=ye(),X=Oe(),he=Be(),ce=oe();T.length>0&&m.push({id:"renewals",category:"Billing & Renewals",title:`${T.length} client${T.length>1?"s":""} due for renewal`,details:T.map(He=>He.displayName||He.name),icon:gn,color:"#f59e0b"}),U.length>0&&m.push({id:"menus",category:"Menu Planning",title:`Plan menus for ${U.length} client${U.length>1?"s":""}`,details:U.map(He=>He.displayName||He.name),icon:oc,color:"#3d59ab"}),X.length>0&&m.push({id:"substitutions",category:"Substitution Requests",title:`${X.length} substitution request${X.length>1?"s":""} to review`,details:X.map(He=>`${He.clientName}: ${He.originalDish}  ${He.requestedSubstitution}`),icon:gl,color:"#8b5cf6"}),ce.length>0&&m.push({id:"delivery-prep",category:"Delivery Prep",title:`${ce.length} order${ce.length>1?"s":""} ready for delivery`,details:ce.map(He=>`${He.clientName} - ${Hs(He.date)}`),icon:Is,color:"#10b981"}),he.length>0&&m.push({id:"bags",category:"Bags Follow-up",title:`Follow up on ${he.length} bag return${he.length>1?"s":""}`,details:he.map(He=>He.clientName),icon:ls,color:"#ec4899"});const Re=e.filter(He=>He.paysOwnGroceries&&He.status==="active").filter(He=>ce.some(Dr=>Dr.clientName===He.name));return Re.length>0&&m.push({id:"own-groceries",category:"Grocery Costs",title:`Add grocery costs for ${Re.length} client${Re.length>1?"s":""}`,details:Re.map(He=>He.displayName||He.name),icon:ud,color:"#059669",action:"groceries"}),m},Ie=()=>{if(!W.name){alert("Please enter a driver name");return}L([...t,{...W,id:Date.now()}]),le(dr)},K=m=>{window.confirm("Delete this driver?")&&L(t.filter((T,U)=>U!==m))},ee=m=>{_(m),P({...t[m]})},ae=()=>{const m=[...t];m[E]=j,L(m),_(null),P(null)},ue=m=>!m||m.length<2?[]:f.filter(T=>{const U=Ka(m,T.name);return U>.7&&U<1}),Le=m=>f.find(T=>Sn(T.name)===Sn(m)),at=()=>{const m=new Set;return f.forEach(T=>{T.source&&T.source.trim()&&m.add(T.source.trim())}),Array.from(m).sort()},ot=(m,T)=>{const U=Le(m);return U&&T?(D(f.map(X=>X.id===U.id?{...X,cost:T}:X)),!0):!1},et=()=>{let m=0,T=0;const U={...h};return Object.keys(U).forEach(X=>{U[X]=U[X].map(he=>{const ce=he.ingredients.map(Ne=>{const Re=Le(Ne.name);if(Re){const He={...Ne};return Re.cost&&Re.cost!==Ne.cost&&(He.cost=Re.cost,T++),Re.source&&Re.source!==Ne.source&&(He.source=Re.source),Re.section&&Re.section!=="Other"&&Re.section!==Ne.section&&(He.section=Re.section),Re.unit&&Re.unit!==Ne.unit&&(He.unit=Re.unit),He}else if(Ne.name)return m++,Ne;return Ne});return{...he,ingredients:ce}})}),Object.values(U).forEach(X=>{X.forEach(he=>{he.ingredients.forEach(ce=>{ce.name&&!Le(ce.name)&&un(ce)})})}),I(U),{ingredientsAdded:m,costsUpdated:T}},un=m=>{if(!m.name)return;const T=Le(m.name);if(T){(m.cost||m.source||m.section!=="Other")&&D(f.map(U=>U.id===T.id?{...U,cost:m.cost||U.cost,source:m.source||U.source,section:m.section!=="Other"?m.section:U.section}:U));return}D([...f,{id:Date.now()+Math.random(),name:m.name,cost:m.cost||"",unit:m.unit||"oz",source:m.source||"",section:m.section||"Other"}])},Dl=m=>m!=null&&m.ingredients?m.ingredients.reduce((T,U)=>{const X=Le(U.name),he=parseFloat((X==null?void 0:X.cost)||U.cost||0),ce=parseFloat(U.quantity||0);return T+he*ce},0):0,El=()=>{const m={};let T=0;return Object.entries(h).forEach(([U,X])=>{m[U]=X.length,T+=X.length}),m.total=T,m},kr=()=>{if(!Q.protein&&!Q.veg&&!Q.starch&&Q.extras.length===0){alert("Please select at least one dish");return}if(Y.length===0){alert("Please select at least one client");return}const m=Y.map(T=>{const U=e.find(he=>he.name===T),X=U&&(U.portions||U.persons)||1;return{...Q,clientName:T,date:G,portions:X,id:Date.now()+Math.random(),approved:!1}});u([...s,...m]),pe(Ga)},vo=m=>u(s.filter(T=>T.id!==m)),bo=()=>{window.confirm("Clear all menu items?")&&(u([]),q([]))},jo=()=>{const m={};return s.forEach(T=>{m[T.clientName]||(m[T.clientName]=[]),m[T.clientName].push(T)}),m},Pl=()=>{if(!te.name){alert("Please enter a recipe name");return}const m=te.ingredients.filter(T=>T.name&&T.quantity);if(m.length===0){alert("Please add at least one ingredient with name and quantity");return}m.forEach(T=>un(T)),I({...h,[te.category]:[...h[te.category],{name:te.name,instructions:te.instructions,ingredients:m}]}),be(qa),alert("Recipe saved!")},No=(m,T)=>{window.confirm("Delete this recipe?")&&I({...h,[m]:h[m].filter((U,X)=>X!==T)})},ko=(m,T)=>{const U=h[m][T];Pe({category:m,index:T,recipe:{...U,ingredients:U.ingredients.map(X=>({name:X.name||"",quantity:X.quantity||"",unit:X.unit||"oz",cost:X.cost||"",source:X.source||"",section:X.section||"Other"}))}})},wo=(m,T,U)=>{const X=[...ke.recipe.ingredients];X[m][T]=U,Pe({...ke,recipe:{...ke.recipe,ingredients:X}})},Co=()=>{Pe({...ke,recipe:{...ke.recipe,ingredients:[...ke.recipe.ingredients,{name:"",quantity:"",unit:"oz",cost:"",source:"",section:"Other"}]}})},So=m=>{Pe({...ke,recipe:{...ke.recipe,ingredients:ke.recipe.ingredients.filter((T,U)=>U!==m)}})},Do=()=>{const{category:m,index:T,recipe:U}=ke,X=U.ingredients.filter(ce=>ce.name&&ce.quantity);X.forEach(ce=>un(ce));const he={...h};he[m][T]={...U,ingredients:X},I(he),Pe(null),alert("Recipe updated!")},Eo=()=>{if(!Ce.name){alert("Please enter an ingredient name");return}const m=ue(Ce.name),T=Le(Ce.name);if(T){alert(`"${Ce.name}" already exists as "${T.name}"`);return}m.length>0&&!window.confirm(`Similar ingredients found: ${m.map(U=>U.name).join(", ")}

Add "${Ce.name}" anyway?`)||(D([...f,{...Ce,id:Date.now()}]),fe(Ya),alert("Ingredient added!"))},Po=m=>{window.confirm("Delete this ingredient?")&&D(f.filter(T=>T.id!==m))},Ro=m=>{je(m.id),Me({...m})},jt=()=>{D(f.map(m=>m.id===qe?{...Se}:m)),je(null),Me(null)},zo=()=>{je(null),Me(null)},_o=()=>{const m=[],T=new Set;f.forEach((U,X)=>{f.forEach((he,ce)=>{if(X>=ce)return;const Ne=[U.id,he.id].sort().join("-");if(T.has(Ne))return;T.add(Ne);const Re=Ka(U.name,he.name);Re>.7&&Re<1&&m.push({ing1:U,ing2:he,similarity:Re})})}),lt(m),m.length===0&&alert("No duplicate ingredients found!")},Rl=(m,T)=>{const U=f.find(ce=>ce.id===m),X=f.find(ce=>ce.id===T);if(!U||!X)return;const he={...h};Object.keys(he).forEach(ce=>{he[ce]=he[ce].map(Ne=>({...Ne,ingredients:Ne.ingredients.map(Re=>Sn(Re.name)===Sn(X.name)?{...Re,name:U.name}:Re)}))}),I(he),D(f.filter(ce=>ce.id!==T)),lt(Ct.filter(ce=>ce.ing1.id!==T&&ce.ing2.id!==T)),alert(`Merged "${X.name}" into "${U.name}"`)},zl=m=>{const T=m.getFullYear(),U=m.getMonth(),X=new Date(T,U,1),he=new Date(T,U+1,0),ce=[];for(let Ne=0;Ne<X.getDay();Ne++)ce.push(null);for(let Ne=1;Ne<=he.getDate();Ne++)ce.push(new Date(T,U,Ne));return ce},To=m=>{const T=m.toISOString().split("T")[0];o.includes(T)?C(o.filter(U=>U!==T)):C([...o,T])},re=()=>{H(new Date(R.getFullYear(),R.getMonth()-1,1))},ie=()=>{H(new Date(R.getFullYear(),R.getMonth()+1,1))},de=()=>{if(!V.title){alert("Please enter a task title");return}g([...c,{...V,id:Date.now(),completed:!1}]),B({title:"",notes:"",dueDate:""})},we=m=>{g(c.map(T=>T.id===m?{...T,completed:!T.completed}:T))},Ye=m=>{g(c.filter(T=>T.id!==m))},nt=()=>{if(!se.name){alert("Please enter a client name");return}A([...e,{...se,id:Date.now()}]),ge({name:"",displayName:"",persons:1,contacts:[{name:"",email:"",phone:"",address:""}],notes:"",mealsPerWeek:0,frequency:"weekly",status:"active",pausedDate:"",honeyBookLink:"",billingNotes:"",deliveryDay:"",zone:"",pickup:!1,planPrice:0,serviceFee:0,prepayDiscount:!1,newClientFeePaid:!1,paysOwnGroceries:!1})},xt=m=>{window.confirm("Delete this client?")&&A(e.filter((T,U)=>U!==m))},$t=()=>{const m=["name","displayName","persons","address","email","phone","mealsPerWeek","frequency","status","zone","deliveryDay","pickup","planPrice","serviceFee","prepayDiscount","newClientFeePaid","paysOwnGroceries","billingNotes"],T=[m.join(","),...e.map(ce=>m.map(Ne=>`"${(ce[Ne]||"").toString().replace(/"/g,'""')}"`).join(","))].join(`
`),U=new Blob([T],{type:"text/csv"}),X=URL.createObjectURL(U),he=document.createElement("a");he.href=X,he.download="clients.csv",he.click()},qn=()=>{if(!ze.amount){alert("Please enter an amount");return}z([...p,{...ze,id:Date.now(),amount:parseFloat(ze.amount)}]),_e({date:new Date().toISOString().split("T")[0],amount:"",store:"",notes:""})},_l=m=>{window.confirm("Delete this bill?")&&z(p.filter(T=>T.id!==m))},wr=.11,Cr=m=>{const T=new Date(m);return`${T.getFullYear()}-${String(T.getMonth()+1).padStart(2,"0")}`},en=m=>{const T=parseFloat(m.planPrice)||0,U=m.pickup?0:parseFloat(m.serviceFee)||0,X=T+U,he=m.prepayDiscount?X*.1:0,ce=X-he,Ne=ce*wr;return{basePlan:T,serviceFee:U,discount:he,tax:Ne,total:ce+Ne}},ks=(m,T)=>p.filter(U=>U.date>=m&&U.date<=T).reduce((U,X)=>U+(parseFloat(X.amount)||0),0),Uh=(m,T,U)=>r.filter(X=>X.clientName===m&&X.date>=T&&X.date<=U).reduce((X,he)=>{const ce=e.find(Ne=>Ne.name===m);return X+((ce==null?void 0:ce.persons)||1)},0),Bh=(m,T)=>e.filter(X=>!X.paysOwnGroceries&&X.status==="active").reduce((X,he)=>{const ce=r.filter(Ne=>Ne.clientName===he.name&&Ne.date>=m&&Ne.date<=T);return X+ce.length*(he.portions||he.persons||1)},0),Wh=(m,T,U)=>{const X=e.find(Re=>Re.name===m);if(!X||X.paysOwnGroceries)return 0;const he=ks(T,U),ce=Bh(T,U);if(ce===0)return 0;const Ne=Uh(m,T,U);return he/ce*Ne};if(!k)return n.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{backgroundColor:"#f9f9ed"},children:n.jsxs("div",{className:"text-center",children:[n.jsx(In,{size:48,className:"mx-auto mb-4 animate-pulse",style:{color:"#ffd700"}}),n.jsx("p",{className:"text-gray-600",children:"Loading..."})]})});const Tl=Te(),Hh=oe(),Vh=J(),Bs=Ae(),qh=xe(),Sr=$e();return n.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("header",{className:"text-white p-4",style:{backgroundColor:"#3d59ab"},children:n.jsxs("div",{className:"max-w-6xl mx-auto flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(In,{size:32,style:{color:"#ffd700"}}),n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Admin Dashboard"}),n.jsx("p",{className:"text-sm opacity-80",children:"Goldfinch Chef"})]})]}),n.jsxs(Mn,{to:"/",className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition-colors",children:[n.jsx(wh,{size:20}),"Back to App"]})]})}),n.jsxs("div",{className:"max-w-6xl mx-auto p-4",children:[n.jsx("div",{className:"flex gap-2 mb-6 overflow-x-auto",children:[{id:"overview",label:"Overview",icon:x0},{id:"billing",label:"Billing & Dates",icon:gn},{id:"recipes",label:"Recipes",icon:oc},{id:"ingredients",label:"Ingredients",icon:Is},{id:"clients",label:"Clients",icon:gs},{id:"settings",label:"Settings",icon:ic}].map(m=>n.jsxs("button",{onClick:()=>O(m.id),className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium whitespace-nowrap ${S===m.id?"text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,style:S===m.id?{backgroundColor:"#3d59ab"}:{},children:[n.jsx(m.icon,{size:20}),m.label]},m.id))}),S==="overview"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",style:{color:"#3d59ab"},children:"This Week at a Glance"}),n.jsxs("p",{className:"text-gray-500 mb-6",children:[Hs(M)," - ",Hs(Z)]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#dbeafe"},children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(cn,{size:24,style:{color:"#3d59ab"}}),n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Pending"})]}),n.jsx("p",{className:"text-3xl font-bold",style:{color:"#3d59ab"},children:Hh.length}),n.jsx("p",{className:"text-sm text-gray-500",children:"deliveries"})]}),n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#dcfce7"},children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Ue,{size:24,className:"text-green-600"}),n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Completed"})]}),n.jsx("p",{className:"text-3xl font-bold text-green-600",children:Vh.length}),n.jsx("p",{className:"text-sm text-gray-500",children:"deliveries"})]}),n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#fef3c7"},children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(gl,{size:24,className:"text-amber-600"}),n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Renewals"})]}),n.jsx("p",{className:"text-3xl font-bold text-amber-600",children:qh.length}),n.jsx("p",{className:"text-sm text-gray-500",children:"due"})]}),n.jsxs("div",{className:"p-4 rounded-lg cursor-pointer hover:opacity-90 transition-opacity",style:{backgroundColor:Sr>0?"#ede9fe":"#f3f4f6"},onClick:()=>Sr>0&&O("approvals"),children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(kh,{size:24,className:Sr>0?"text-purple-600":"text-gray-400"}),n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Approvals"})]}),n.jsx("p",{className:`text-3xl font-bold ${Sr>0?"text-purple-600":"text-gray-400"}`,children:Sr}),n.jsx("p",{className:"text-sm text-gray-500",children:"pending"})]}),n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:Bs.length>0?"#fee2e2":"#f3f4f6"},children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(kt,{size:24,className:Bs.length>0?"text-red-600":"text-gray-400"}),n.jsx("span",{className:"text-sm font-medium text-gray-600",children:"Problems"})]}),n.jsx("p",{className:`text-3xl font-bold ${Bs.length>0?"text-red-600":"text-gray-400"}`,children:Bs.length}),n.jsx("p",{className:"text-sm text-gray-500",children:"flagged"})]})]})]}),Bs.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h3",{className:"text-lg font-bold mb-4 text-red-600 flex items-center gap-2",children:[n.jsx(kt,{size:20}),"Flagged Problems"]}),n.jsx("div",{className:"space-y-2",children:Bs.map((m,T)=>n.jsxs("div",{className:"p-3 rounded-lg bg-red-50 border border-red-200",children:[n.jsx("p",{className:"font-medium",children:m.clientName}),n.jsxs("p",{className:"text-sm text-gray-600",children:[Hs(m.date)," - ",m.problem]}),m.problemNotes&&n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:m.problemNotes})]},T))})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-4",style:{color:"#3d59ab"},children:[n.jsx(Nh,{size:28,className:"inline mr-2"}),"To Do This Week"]}),n.jsx("div",{className:"space-y-4",children:Tl.length===0?n.jsx("p",{className:"text-gray-500 text-center py-4",children:"All caught up! No tasks for this week."}):Tl.map((m,T)=>n.jsx("div",{className:"p-4 rounded-lg border-2",style:{borderColor:m.color,backgroundColor:`${m.color}10`},children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(m.icon,{size:24,style:{color:m.color}}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold",children:m.title}),n.jsx("p",{className:"text-sm text-gray-500",children:m.category}),m.details&&m.details.length>0&&n.jsxs("ul",{className:"mt-2 text-sm text-gray-600",children:[m.details.slice(0,3).map((U,X)=>n.jsxs("li",{children:[" ",U]},X)),m.details.length>3&&n.jsxs("li",{className:"text-gray-400",children:["...and ",m.details.length-3," more"]})]})]})]})},T))})]}),c.length>0&&n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:"Custom Tasks"}),n.jsx("div",{className:"space-y-2",children:c.map((m,T)=>n.jsxs("div",{className:"p-3 rounded-lg flex items-center justify-between",style:{backgroundColor:"#f9f9ed"},children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-medium",children:m.title}),m.notes&&n.jsx("p",{className:"text-sm text-gray-500",children:m.notes})]}),n.jsx("button",{onClick:()=>g(c.filter((U,X)=>X!==T)),className:"text-red-500 hover:text-red-700",children:n.jsx(rn,{size:18})})]},T))})]}),n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs(Mn,{to:"/",className:"p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow text-center",children:[n.jsx(In,{size:32,className:"mx-auto mb-2",style:{color:"#3d59ab"}}),n.jsx("p",{className:"font-medium",children:"Menu Planning"})]}),n.jsxs(Mn,{to:"/driver",className:"p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow text-center",children:[n.jsx(cn,{size:32,className:"mx-auto mb-2",style:{color:"#3d59ab"}}),n.jsx("p",{className:"font-medium",children:"Driver View"})]}),n.jsxs("button",{onClick:()=>O("billing"),className:"p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow text-center",children:[n.jsx(gn,{size:32,className:"mx-auto mb-2",style:{color:"#3d59ab"}}),n.jsx("p",{className:"font-medium",children:"Billing & Dates"})]}),n.jsxs("button",{onClick:()=>O("settings"),className:"p-4 bg-white rounded-lg shadow hover:shadow-md transition-shadow text-center",children:[n.jsx(ic,{size:32,className:"mx-auto mb-2",style:{color:"#3d59ab"}}),n.jsx("p",{className:"font-medium",children:"Settings"})]})]})]}),S==="menu"&&n.jsx(Mh,{menuDate:G,setMenuDate:$,clients:e.filter(m=>m.status==="active"),selectedClients:Y,setSelectedClients:q,recipes:h,newMenuItem:Q,setNewMenuItem:pe,menuItems:s,addMenuItem:kr,clearMenu:bo,deleteMenuItem:vo,getOrdersByClient:jo,onFinishReview:()=>O("approvals")}),S==="approvals"&&n.jsx(Sv,{clients:e,menuItems:s,updateMenuItems:u,lockWeekWithSnapshot:w,weeklyTasks:d,clientPortalData:a,recipes:h}),S==="recipes"&&n.jsx(Ih,{recipes:h,newRecipe:te,setNewRecipe:be,editingRecipe:ke,setEditingRecipe:Pe,masterIngredients:f,recipesFileRef:Ee,findExactMatch:Le,findSimilarIngredients:ue,getRecipeCost:Dl,getRecipeCounts:El,saveRecipe:Pl,deleteRecipe:No,startEditingRecipe:ko,saveEditingRecipe:Do,updateEditingIngredient:wo,addEditingIngredient:Co,removeEditingIngredient:So,exportRecipesCSV:()=>Lh(h),getUniqueVendors:at,updateMasterIngredientCost:ot,syncRecipeIngredientsFromMaster:et}),S==="ingredients"&&n.jsx(Ah,{masterIngredients:f,newIngredient:Ce,setNewIngredient:fe,editingIngredientId:qe,editingIngredientData:Se,setEditingIngredientData:Me,duplicateWarnings:Ct,setDuplicateWarnings:lt,scanForDuplicates:_o,mergeIngredients:Rl,addMasterIngredient:Eo,deleteMasterIngredient:Po,startEditingMasterIngredient:Ro,saveEditingMasterIngredient:jt,cancelEditingMasterIngredient:zo,ingredientsFileRef:ht,exportIngredientsCSV:()=>Th(f)}),S==="clients"&&n.jsx(Fh,{clients:e,newClient:se,setNewClient:ge,addClient:nt,deleteClient:xt,clientsFileRef:Je,exportClientsCSV:$t,setClients:A}),S==="billing"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-2",style:{color:"#3d59ab"},children:[n.jsx(gn,{className:"inline mr-2",size:28}),"Bills Due (Next 7 Days)"]}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Clients with payment due within the next week"}),xe().length===0?n.jsxs("div",{className:"text-center py-8 text-gray-400",children:[n.jsx(gn,{size:48,className:"mx-auto mb-3 opacity-50"}),n.jsx("p",{children:"No bills due in the next 7 days"})]}):n.jsx("div",{className:"space-y-3",children:xe().map((m,T)=>{var he;const U=m.billDueDate?new Date(m.billDueDate+"T12:00:00"):null,X=U&&U<new Date;return n.jsx("div",{className:`p-4 rounded-lg border-2 ${X?"bg-red-50 border-red-300":"border-amber-200 bg-amber-50"}`,children:n.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-2",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold",children:m.displayName||m.name}),n.jsxs("p",{className:"text-sm text-gray-600",children:["$",m.planPrice||0," + $",m.serviceFee||0," service fee"]}),U&&n.jsxs("p",{className:`text-sm font-medium ${X?"text-red-600":"text-amber-700"}`,children:["Due: ",U.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}),X&&" (OVERDUE)"]}),((he=m.deliveryDates)==null?void 0:he.length)>0&&n.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Deliveries: ",m.deliveryDates.slice(0,2).map(ce=>new Date(ce+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})).join(", "),m.deliveryDates.length>2&&` +${m.deliveryDates.length-2} more`]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>Ge(m),className:"px-3 py-2 rounded-lg border-2 text-sm font-medium hover:bg-white",style:{borderColor:"#3d59ab",color:"#3d59ab"},children:"Set Dates"}),n.jsx("button",{onClick:()=>Ge(m),className:"px-3 py-2 rounded-lg text-white text-sm font-medium",style:{backgroundColor:"#3d59ab"},children:"Set Due Date"})]})]})},T)})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-2",style:{color:"#3d59ab"},children:[n.jsx(Wn,{className:"inline mr-2",size:28}),"All Client Dates"]}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Set delivery dates and bill due dates for each client"}),n.jsx("div",{className:"space-y-3",children:e.filter(m=>m.status==="active").map((m,T)=>{var Ne,Re;const U=((Ne=a[m.name])==null?void 0:Ne.selectedDates)||[],X=U.length>0,he=((Re=m.deliveryDates)==null?void 0:Re.length)>0,ce=!!m.billDueDate;return n.jsxs("div",{className:"p-4 rounded-lg border-2 flex items-center justify-between flex-wrap gap-3",style:{borderColor:"#ebb582"},children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-bold",children:m.displayName||m.name}),n.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[he?n.jsxs("p",{children:[n.jsx("span",{className:"text-green-600",children:"Delivery dates:"})," ",m.deliveryDates.slice(0,2).map(He=>new Date(He+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})).join(", "),m.deliveryDates.length>2&&` +${m.deliveryDates.length-2} more`]}):X?n.jsxs("p",{className:"text-purple-600",children:["Portal dates pending sync (",U.length," selected)"]}):n.jsx("p",{className:"text-gray-400",children:"No delivery dates set"}),ce?n.jsxs("p",{children:[n.jsx("span",{className:"text-amber-600",children:"Bill due:"})," ",new Date(m.billDueDate+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})]}):n.jsx("p",{className:"text-gray-400",children:"No bill due date set"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>Ge(m),className:"px-3 py-2 rounded-lg border-2 text-sm font-medium hover:bg-gray-50",style:{borderColor:"#3d59ab",color:"#3d59ab"},children:"Set Dates"}),n.jsx("button",{onClick:()=>Ge(m),className:"px-3 py-2 rounded-lg text-sm font-medium text-white",style:{backgroundColor:"#f59e0b"},children:"Set Due Date"})]})]},T)})})]}),(()=>{const m=e.filter(T=>T.status==="paused");return m.length===0?null:n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-2",style:{color:"#3d59ab"},children:["Paused Clients (",m.length,")"]}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Clients with paused subscriptions"}),n.jsx("div",{className:"space-y-2",children:m.map((T,U)=>n.jsxs("div",{className:"p-3 rounded-lg flex items-center justify-between bg-gray-50 border border-gray-200",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"font-medium",children:T.displayName||T.name}),T.pausedDate&&n.jsxs("p",{className:"text-sm text-gray-500",children:["Paused: ",new Date(T.pausedDate+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),T.billingNotes&&n.jsx("p",{className:"text-sm text-gray-500",children:T.billingNotes})]}),n.jsx("span",{className:"text-xs px-2 py-1 rounded bg-gray-200 text-gray-600",children:"Paused"})]},U))})]})})()]}),S==="subscriptions"&&n.jsx(jv,{clients:e,weeklyTasks:d,setWeeklyTasks:v,clientPortalData:a}),S==="groceries"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-2",style:{color:"#3d59ab"},children:[n.jsx(w0,{size:24,className:"inline mr-2"}),"Grocery Tracking"]}),n.jsx("p",{className:"text-gray-600 mb-6",children:"Track weekly grocery expenses for cost analysis."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 p-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[n.jsx(zt,{label:"Date",children:n.jsx("input",{type:"date",value:ze.date,onChange:m=>_e({...ze,date:m.target.value}),className:_t,style:Tt})}),n.jsx(zt,{label:"Amount ($)",children:n.jsx("input",{type:"number",step:"0.01",value:ze.amount,onChange:m=>_e({...ze,amount:m.target.value}),placeholder:"0.00",className:_t,style:Tt})}),n.jsx(zt,{label:"Store",children:n.jsx("input",{type:"text",value:ze.store,onChange:m=>_e({...ze,store:m.target.value}),placeholder:"Store name",className:_t,style:Tt})}),n.jsx(zt,{label:"Notes",children:n.jsx("input",{type:"text",value:ze.notes,onChange:m=>_e({...ze,notes:m.target.value}),placeholder:"Optional notes",className:_t,style:Tt})})]}),n.jsxs("button",{onClick:qn,className:"px-6 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[n.jsx(vn,{size:20,className:"inline mr-2"}),"Add Bill"]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:["Recent Bills (",p.length,")"]}),p.length>0?n.jsx("div",{className:"space-y-2",children:p.sort((m,T)=>new Date(T.date)-new Date(m.date)).map(m=>n.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border-2",style:{borderColor:"#ebb582"},children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("span",{className:"font-bold text-lg",style:{color:"#3d59ab"},children:["$",parseFloat(m.amount).toFixed(2)]}),n.jsx("span",{className:"text-gray-600",children:new Date(m.date+"T12:00:00").toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})}),m.store&&n.jsx("span",{className:"text-sm px-2 py-1 rounded bg-gray-100",children:m.store})]}),m.notes&&n.jsx("p",{className:"text-sm text-gray-500 mt-1",children:m.notes})]}),n.jsx("button",{onClick:()=>_l(m.id),className:"text-red-600 hover:text-red-800",children:n.jsx(rn,{size:18})})]},m.id))}):n.jsx("p",{className:"text-gray-500 text-center py-8",children:"No grocery bills recorded. Add your first bill above."}),p.length>0&&n.jsxs("div",{className:"mt-6 pt-6 border-t-2",style:{borderColor:"#ebb582"},children:[n.jsx("h4",{className:"font-bold mb-3",children:"Monthly Totals"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{const m={};return p.forEach(T=>{const U=Cr(T.date);m[U]=(m[U]||0)+parseFloat(T.amount)}),Object.entries(m).sort((T,U)=>U[0].localeCompare(T[0])).slice(0,4).map(([T,U])=>n.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("p",{className:"text-sm text-gray-500",children:new Date(T+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"})}),n.jsxs("p",{className:"font-bold text-lg",style:{color:"#3d59ab"},children:["$",U.toFixed(2)]})]},T))})()})]})]})]}),S==="analytics"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-2",style:{color:"#3d59ab"},children:[n.jsx(S0,{size:24,className:"inline mr-2"}),"Analytics Dashboard"]}),n.jsxs("p",{className:"text-gray-600 mb-6",children:["Revenue, costs, and margins at a glance. Tax rate: ",(wr*100).toFixed(0),"%"]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:"This Week"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{const m=M.toISOString().split("T")[0],T=Z.toISOString().split("T")[0],U=ks(m,T),X=e.filter(Ne=>Ne.status==="active"),he=X.reduce((Ne,Re)=>Ne+en(Re).total,0),ce=he-U;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#dbeafe"},children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Active Clients"}),n.jsx("p",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:X.length})]}),n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#dcfce7"},children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Weekly Revenue"}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",he.toFixed(2)]})]}),n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#fef3c7"},children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Weekly Groceries"}),n.jsxs("p",{className:"text-2xl font-bold text-amber-600",children:["$",U.toFixed(2)]})]}),n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:ce>=0?"#dcfce7":"#fee2e2"},children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Weekly Margin"}),n.jsxs("p",{className:`text-2xl font-bold ${ce>=0?"text-green-600":"text-red-600"}`,children:["$",ce.toFixed(2)]})]})]})})()})]}),n.jsxs("div",{className:"mb-8",children:[n.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:"This Month"}),n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:(()=>{const m=new Date(De.getFullYear(),De.getMonth(),1),T=new Date(De.getFullYear(),De.getMonth()+1,0),U=m.toISOString().split("T")[0],X=T.toISOString().split("T")[0],he=ks(U,X),Ne=e.filter(Dr=>Dr.status==="active").reduce((Dr,fd)=>{const Gh=en(fd).total,Yh=fd.frequency==="biweekly"?2:4;return Dr+Gh*Yh},0),Re=Ne-he,He=Ne>0?Re/Ne*100:0;return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#dcfce7"},children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Monthly Revenue (Est.)"}),n.jsxs("p",{className:"text-2xl font-bold text-green-600",children:["$",Ne.toFixed(2)]})]}),n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#fef3c7"},children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Monthly Groceries"}),n.jsxs("p",{className:"text-2xl font-bold text-amber-600",children:["$",he.toFixed(2)]})]}),n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:Re>=0?"#dcfce7":"#fee2e2"},children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Monthly Profit"}),n.jsxs("p",{className:`text-2xl font-bold ${Re>=0?"text-green-600":"text-red-600"}`,children:["$",Re.toFixed(2)]})]}),n.jsxs("div",{className:"p-4 rounded-lg",style:{backgroundColor:"#ede9fe"},children:[n.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Profit Margin"}),n.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[He.toFixed(1),"%"]})]})]})})()})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:[n.jsx(gs,{size:20,className:"inline mr-2"}),"Per-Client Analysis"]}),n.jsx("p",{className:"text-sm text-gray-500 mb-4",children:"Revenue breakdown and food cost allocation per client."}),n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b-2",style:{borderColor:"#ebb582"},children:[n.jsx("th",{className:"text-left py-2 px-3",children:"Client"}),n.jsx("th",{className:"text-right py-2 px-3",children:"Plan"}),n.jsx("th",{className:"text-right py-2 px-3",children:"Service"}),n.jsx("th",{className:"text-right py-2 px-3",children:"Discount"}),n.jsx("th",{className:"text-right py-2 px-3",children:"Tax"}),n.jsx("th",{className:"text-right py-2 px-3",children:"Total"}),n.jsx("th",{className:"text-right py-2 px-3",children:"Food Cost"}),n.jsx("th",{className:"text-right py-2 px-3",children:"Margin"})]})}),n.jsx("tbody",{children:e.filter(m=>m.status==="active").sort((m,T)=>(T.planPrice||0)-(m.planPrice||0)).map((m,T)=>{const U=en(m),X=new Date(De.getFullYear(),De.getMonth(),1).toISOString().split("T")[0],he=new Date(De.getFullYear(),De.getMonth()+1,0).toISOString().split("T")[0],ce=Wh(m.name,X,he),Ne=U.total-ce,Re=U.total>0?Ne/U.total*100:0;return n.jsxs("tr",{className:"border-b hover:bg-gray-50",style:{borderColor:"#f0f0f0"},children:[n.jsxs("td",{className:"py-2 px-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"font-medium",children:m.displayName||m.name}),m.paysOwnGroceries&&n.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-blue-100 text-blue-700",children:"Own Groceries"}),m.prepayDiscount&&n.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-green-100 text-green-700",children:"Prepay"})]}),n.jsxs("div",{className:"text-xs text-gray-500",children:[m.portions||m.persons||1," portions  ",m.frequency]})]}),n.jsxs("td",{className:"py-2 px-3 text-right",children:["$",U.basePlan.toFixed(2)]}),n.jsxs("td",{className:"py-2 px-3 text-right",children:["$",U.serviceFee.toFixed(2)]}),n.jsx("td",{className:"py-2 px-3 text-right text-green-600",children:U.discount>0?`-$${U.discount.toFixed(2)}`:"-"}),n.jsxs("td",{className:"py-2 px-3 text-right text-gray-500",children:["$",U.tax.toFixed(2)]}),n.jsxs("td",{className:"py-2 px-3 text-right font-bold",children:["$",U.total.toFixed(2)]}),n.jsx("td",{className:"py-2 px-3 text-right text-amber-600",children:m.paysOwnGroceries?"-":`$${ce.toFixed(2)}`}),n.jsxs("td",{className:"py-2 px-3 text-right",children:[n.jsxs("span",{className:`font-bold ${Ne>=0?"text-green-600":"text-red-600"}`,children:["$",Ne.toFixed(2)]}),n.jsxs("span",{className:"text-xs text-gray-400 ml-1",children:["(",Re.toFixed(0),"%)"]})]})]},m.id||T)})}),n.jsx("tfoot",{children:n.jsxs("tr",{className:"border-t-2 font-bold",style:{borderColor:"#ebb582"},children:[n.jsxs("td",{className:"py-2 px-3",children:["Total (",e.filter(m=>m.status==="active").length," active)"]}),n.jsxs("td",{className:"py-2 px-3 text-right",children:["$",e.filter(m=>m.status==="active").reduce((m,T)=>m+en(T).basePlan,0).toFixed(2)]}),n.jsxs("td",{className:"py-2 px-3 text-right",children:["$",e.filter(m=>m.status==="active").reduce((m,T)=>m+en(T).serviceFee,0).toFixed(2)]}),n.jsxs("td",{className:"py-2 px-3 text-right text-green-600",children:["-$",e.filter(m=>m.status==="active").reduce((m,T)=>m+en(T).discount,0).toFixed(2)]}),n.jsxs("td",{className:"py-2 px-3 text-right text-gray-500",children:["$",e.filter(m=>m.status==="active").reduce((m,T)=>m+en(T).tax,0).toFixed(2)]}),n.jsxs("td",{className:"py-2 px-3 text-right",style:{color:"#3d59ab"},children:["$",e.filter(m=>m.status==="active").reduce((m,T)=>m+en(T).total,0).toFixed(2)]}),n.jsx("td",{className:"py-2 px-3 text-right text-amber-600",children:(()=>{const m=new Date(De.getFullYear(),De.getMonth(),1).toISOString().split("T")[0],T=new Date(De.getFullYear(),De.getMonth()+1,0).toISOString().split("T")[0];return`$${ks(m,T).toFixed(2)}`})()}),n.jsx("td",{className:"py-2 px-3 text-right",children:(()=>{const m=new Date(De.getFullYear(),De.getMonth(),1).toISOString().split("T")[0],T=new Date(De.getFullYear(),De.getMonth()+1,0).toISOString().split("T")[0],U=e.filter(ce=>ce.status==="active").reduce((ce,Ne)=>ce+en(Ne).total,0),X=ks(m,T),he=U-X;return n.jsxs("span",{className:he>=0?"text-green-600":"text-red-600",children:["$",he.toFixed(2)]})})()})]})})]})})]})]}),S==="tasks"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsx("h2",{className:"text-2xl font-bold mb-4",style:{color:"#3d59ab"},children:"Weekly Tasks"}),Tl.length>0?n.jsx("div",{className:"space-y-4",children:Tl.map(m=>n.jsxs("div",{className:`border-l-4 p-4 rounded-r-lg ${m.action?"cursor-pointer hover:shadow-md transition-shadow":""}`,style:{borderColor:m.color,backgroundColor:"#f9f9ed"},onClick:()=>m.action&&O(m.action),children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(m.icon,{size:20,style:{color:m.color}}),n.jsx("span",{className:"text-xs font-medium px-2 py-1 rounded",style:{backgroundColor:m.color+"20",color:m.color},children:m.category})]}),m.action&&n.jsx("span",{className:"text-xs px-2 py-1 rounded bg-gray-200 text-gray-600",children:"Click to add "})]}),n.jsx("h4",{className:"font-bold mb-2",children:m.title}),n.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[m.details.slice(0,5).map((T,U)=>n.jsxs("li",{children:[" ",T]},U)),m.details.length>5&&n.jsxs("li",{className:"text-gray-400",children:["...and ",m.details.length-5," more"]})]})]},m.id))}):n.jsxs("div",{className:"text-center py-8 text-gray-500",children:[n.jsx(Ue,{size:48,className:"mx-auto mb-4 text-green-500"}),n.jsx("p",{children:"All caught up! No pending tasks this week."})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:"Custom Tasks"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 p-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[n.jsx(zt,{label:"Task Title",children:n.jsx("input",{type:"text",value:V.title,onChange:m=>B({...V,title:m.target.value}),placeholder:"Enter task title",className:_t,style:Tt})}),n.jsx(zt,{label:"Notes (optional)",children:n.jsx("input",{type:"text",value:V.notes,onChange:m=>B({...V,notes:m.target.value}),placeholder:"Additional notes",className:_t,style:Tt})}),n.jsx(zt,{label:"Due Date (optional)",children:n.jsx("input",{type:"date",value:V.dueDate,onChange:m=>B({...V,dueDate:m.target.value}),className:_t,style:Tt})})]}),n.jsxs("button",{onClick:de,className:"px-6 py-2 rounded-lg text-white mb-6",style:{backgroundColor:"#3d59ab"},children:[n.jsx(vn,{size:20,className:"inline mr-2"}),"Add Task"]}),c.length>0?n.jsx("div",{className:"space-y-2",children:c.map(m=>n.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border-2 ${m.completed?"bg-gray-50 border-gray-200":"border-gray-200"}`,children:[n.jsx("button",{onClick:()=>we(m.id),className:`w-6 h-6 rounded-full border-2 flex items-center justify-center flex-shrink-0 ${m.completed?"bg-green-500 border-green-500":"border-gray-300"}`,children:m.completed&&n.jsx(Ue,{size:14,className:"text-white"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:`font-medium ${m.completed?"line-through text-gray-400":""}`,children:m.title}),m.notes&&n.jsx("p",{className:"text-sm text-gray-500",children:m.notes}),m.dueDate&&n.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Due: ",Hs(m.dueDate)]})]}),n.jsx("button",{onClick:()=>Ye(m.id),className:"text-red-500 hover:text-red-700",children:n.jsx(rn,{size:18})})]},m.id))}):n.jsx("p",{className:"text-gray-500 text-center py-4",children:"No custom tasks. Add one above."})]})]}),S==="settings"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-4",style:{color:"#3d59ab"},children:[n.jsx(Wn,{size:24,className:"inline mr-2"}),"Availability Calendar"]}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Click dates to block them from client date selection."}),n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("button",{onClick:re,className:"p-2 hover:bg-gray-100 rounded",children:n.jsx(Ba,{size:24})}),n.jsx("h3",{className:"text-lg font-bold",children:R.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),n.jsx("button",{onClick:ie,className:"p-2 hover:bg-gray-100 rounded",children:n.jsx(Wa,{size:24})})]}),n.jsxs("div",{className:"grid grid-cols-7 gap-1 mb-4",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(m=>n.jsx("div",{className:"text-center text-sm font-medium text-gray-500 py-2",children:m},m)),zl(R).map((m,T)=>{if(!m)return n.jsx("div",{},`empty-${T}`);const U=m.toISOString().split("T")[0],X=o.includes(U),he=m<new Date(De.toISOString().split("T")[0]),ce=U===De.toISOString().split("T")[0];return n.jsx("button",{onClick:()=>!he&&To(m),disabled:he,className:`p-2 rounded-lg text-center transition-colors ${he?"text-gray-300 cursor-not-allowed":X?"bg-red-500 text-white hover:bg-red-600":ce?"bg-blue-100 hover:bg-blue-200":"hover:bg-gray-100"}`,children:m.getDate()},U)})]}),o.length>0&&n.jsxs("div",{className:"p-3 rounded-lg bg-red-50 border border-red-200",children:[n.jsxs("p",{className:"text-sm font-medium text-red-700 mb-2",children:[o.length," date",o.length>1?"s":""," blocked:"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:o.sort().map(m=>n.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-red-100 text-red-700 flex items-center gap-1",children:[Hs(m),n.jsx("button",{onClick:()=>C(o.filter(T=>T!==m)),children:n.jsx(Qt,{size:12})})]},m))})]})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-4",style:{color:"#3d59ab"},children:[n.jsx(Ms,{size:24,className:"inline mr-2"}),"Route Starting Address"]}),n.jsx("p",{className:"text-gray-600 mb-4",children:"Set the starting address for delivery route optimization."}),n.jsx(zt,{label:"Starting Address",children:n.jsx("input",{type:"text",value:i.routeStartAddress,onChange:m=>F({...i,routeStartAddress:m.target.value}),placeholder:"Enter your starting address",className:`${_t} w-full`,style:Tt})})]}),n.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[n.jsxs("h2",{className:"text-2xl font-bold mb-4",style:{color:"#3d59ab"},children:[n.jsx(gs,{size:24,className:"inline mr-2"}),"Drivers"]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4 p-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[n.jsx(zt,{label:"Driver Name",children:n.jsx("input",{type:"text",value:W.name,onChange:m=>le({...W,name:m.target.value}),placeholder:"Enter driver name",className:_t,style:Tt})}),n.jsx(zt,{label:"Phone",children:n.jsx("input",{type:"tel",value:W.phone,onChange:m=>le({...W,phone:m.target.value}),placeholder:"Phone number",className:_t,style:Tt})}),n.jsx(zt,{label:"Zone",children:n.jsxs("select",{value:W.zone,onChange:m=>le({...W,zone:m.target.value}),className:_t,style:Tt,children:[n.jsx("option",{value:"",children:"Unassigned"}),wn.map(m=>n.jsxs("option",{value:m,children:["Zone ",m]},m))]})}),n.jsx(zt,{label:"Access Code",children:n.jsx("input",{type:"text",value:W.accessCode,onChange:m=>le({...W,accessCode:m.target.value}),placeholder:"Access code",className:_t,style:Tt})})]}),n.jsxs("button",{onClick:Ie,className:"px-6 py-2 rounded-lg text-white mb-6",style:{backgroundColor:"#3d59ab"},children:[n.jsx(vn,{size:20,className:"inline mr-2"}),"Add Driver"]}),t.length>0?n.jsx("div",{className:"space-y-3",children:t.map((m,T)=>n.jsx("div",{children:E===T?n.jsxs("div",{className:"border-2 rounded-lg p-4",style:{borderColor:"#3d59ab",backgroundColor:"#f9f9ed"},children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsx(zt,{label:"Driver Name",children:n.jsx("input",{type:"text",value:j.name,onChange:U=>P({...j,name:U.target.value}),className:_t,style:Tt})}),n.jsx(zt,{label:"Phone",children:n.jsx("input",{type:"tel",value:j.phone||"",onChange:U=>P({...j,phone:U.target.value}),className:_t,style:Tt})}),n.jsx(zt,{label:"Zone",children:n.jsxs("select",{value:j.zone||"",onChange:U=>P({...j,zone:U.target.value}),className:_t,style:Tt,children:[n.jsx("option",{value:"",children:"Unassigned"}),wn.map(U=>n.jsxs("option",{value:U,children:["Zone ",U]},U))]})}),n.jsx(zt,{label:"Access Code",children:n.jsx("input",{type:"text",value:j.accessCode||"",onChange:U=>P({...j,accessCode:U.target.value}),className:_t,style:Tt})})]}),n.jsxs("div",{className:"flex gap-2 mt-4",children:[n.jsxs("button",{onClick:ae,className:"flex items-center gap-1 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[n.jsx(Ue,{size:18}),"Save"]}),n.jsxs("button",{onClick:()=>{_(null),P(null)},className:"flex items-center gap-1 px-4 py-2 rounded-lg bg-gray-200",children:[n.jsx(Qt,{size:18}),"Cancel"]})]})]}):n.jsxs("div",{className:"border-2 rounded-lg p-4",style:{borderColor:"#ebb582"},children:[n.jsxs("div",{className:"flex justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("h3",{className:"font-bold text-lg",children:m.name}),m.zone&&n.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-purple-100 text-purple-700",children:["Zone ",m.zone]})]}),m.phone&&n.jsxs("p",{className:"text-sm text-gray-600",children:["Phone: ",m.phone]})]}),n.jsxs("div",{className:"flex gap-2 self-start ml-4",children:[n.jsx("button",{onClick:()=>ee(T),className:"text-blue-600",children:n.jsx(Sl,{size:18})}),n.jsx("button",{onClick:()=>K(T),className:"text-red-600",children:n.jsx(rn,{size:18})})]})]}),m.accessCode&&n.jsxs("div",{className:"mb-3 p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[n.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Access Code"}),n.jsx("p",{className:"font-mono font-bold text-lg",style:{color:"#3d59ab"},children:m.accessCode})]}),n.jsxs("div",{className:"flex flex-wrap gap-2",children:[n.jsxs("button",{onClick:()=>window.open(`/driver?admin_driver=${encodeURIComponent(m.name)}`,"_blank"),className:"flex items-center gap-2 px-3 py-2 rounded-lg text-white text-sm",style:{backgroundColor:"#3d59ab"},children:[n.jsx(Hn,{size:16}),"Preview Driver View"]}),n.jsxs("button",{onClick:()=>{const U=`${window.location.origin}/driver`;navigator.clipboard.writeText(U),alert("Driver login link copied to clipboard!")},className:"flex items-center gap-2 px-3 py-2 rounded-lg border-2 text-sm",style:{borderColor:"#ebb582"},children:[n.jsx(h0,{size:16}),"Copy Login Link"]})]})]})},m.id||T))}):n.jsx("p",{className:"text-gray-500",children:"No drivers yet. Add your first driver above."})]})]})]}),ct&&n.jsx(Nv,{client:ct,clientPortalData:a,onSave:m=>{const T=e.findIndex(U=>U.subscriptionId===m.subscriptionId||U.name===m.name||U.displayName===m.displayName);if(T>=0){const U=[...e];U[T]={...U[T],...m},A(U)}},onClose:()=>Ge(null)}),n.jsx("input",{type:"file",ref:Je,accept:".csv",style:{display:"none"},onChange:m=>{var U;const T=(U=m.target.files)==null?void 0:U[0];T&&(Oh(T,X=>{if(X.length===0){alert(`No subscriptions found in CSV. Please check the file format.

Expected columns: Name, Display Name, Address, Email, Phone, Portions, Meals, etc.`);return}const he=X.reduce((ce,Ne)=>{var Re;return ce+(((Re=Ne.contacts)==null?void 0:Re.length)||0)},0);A(X),alert(`Import successful!

${X.length} subscription(s) imported
${he} contact(s) total`)},X=>alert("Error parsing CSV: "+(X.message||X))),m.target.value="")}})]})}ui.createRoot(document.getElementById("root")).render(n.jsx(Br.StrictMode,{children:n.jsx(Ky,{children:n.jsxs(ky,{children:[n.jsx(Ur,{path:"/",element:n.jsx(J0,{})}),n.jsx(Ur,{path:"/driver",element:n.jsx(ev,{})}),n.jsx(Ur,{path:"/client/:id",element:n.jsx(nv,{})}),n.jsx(Ur,{path:"/admin",element:n.jsx(Dv,{})})]})})}));
