import{j as e,R as qs,r as u,u as Hs,L as Gs}from"./index-4baa199c.js";import{C as Js,g as Es,c as ss,l as Ys,u as Qs,s as Ts,n as Cs,a as Xs,b as et,D as st,T as Bs,X as Vs,P as Ks,S as tt,d as nt,W as at,R as rt,e as ot,p as lt,f as ct,h as it,i as ks,j as dt,k as ut,m as mt}from"./RecipesTab-efc7fa84.js";import{T as xt,D as ht,a as gt,b as pt,c as _s,d as ft,e as bt,f as ws,Z as Ve,S as js,F as yt}from"./index-93416efa.js";import{c as Pe,C as Zs,P as jt,T as Ds,a as Ke,A as ys,M as Is}from"./truck-139681aa.js";import{U as vt,R as Os,E as Nt,C as Ct}from"./utensils-0f69ef6f.js";import{U as Rs}from"./user-33c7d36d.js";const kt=Pe("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),St=Pe("Archive",[["rect",{width:"20",height:"5",x:"2",y:"4",rx:"2",key:"uhwcea"}],["path",{d:"M4 9v9a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9",key:"shkvi4"}],["path",{d:"M10 13h4",key:"ytezjc"}]]),wt=Pe("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Dt=Pe("Car",[["path",{d:"M14 16H9m10 0h3v-3.15a1 1 0 0 0-.84-.99L16 11l-2.7-3.6a1 1 0 0 0-.8-.4H5.24a2 2 0 0 0-1.8 1.1l-.8 1.63A6 6 0 0 0 2 12.42V16h2",key:"l5np60"}],["circle",{cx:"6.5",cy:"16.5",r:"2.5",key:"ae40ju"}],["circle",{cx:"16.5",cy:"16.5",r:"2.5",key:"1smtlt"}]]),It=Pe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Ss=Pe("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]),Et=Pe("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),As=Pe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Tt=Pe("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function Ot({activeTab:I,setActiveTab:S}){return e.jsx(e.Fragment,{children:xt.map(g=>e.jsxs("button",{onClick:()=>S(g.id),className:`flex items-center gap-2 px-4 py-3 font-medium transition-colors ${I===g.id?"border-b-2 text-blue-700":"text-gray-600 hover:text-gray-900"}`,style:I===g.id?{borderColor:"#3d59ab",color:"#3d59ab"}:{},children:[e.jsx(g.icon,{size:18}),g.label]},g.id))})}const Fs=[{id:"menu",label:"Menu Planned",icon:Js},{id:"cooking",label:"Cooking",icon:Zs},{id:"ready",label:"Ready for Delivery",icon:jt},{id:"delivering",label:"Out for Delivery",icon:Ds},{id:"delivered",label:"Delivered",icon:It},{id:"history",label:"History",icon:St}],Rt={menu:"menu",cooking:"kds",ready:"deliveries",delivering:"deliveries",delivered:"history",history:"history"};function At({menuItems:I=[],completedDishes:S={},readyForDelivery:g=[],deliveryLog:z=[],orderHistory:G=[],selectedDate:L,onNavigate:te}){const q=I.filter(E=>!E.approved),X=I.filter(E=>E.approved),ne=(()=>{const E=new Set;X.forEach(O=>{["protein","veg","starch"].forEach(re=>{O[re]&&E.add(O[re])}),(O.extras||[]).forEach(re=>E.add(re))});const ae=E.size,Ne=[...E].filter(O=>S[O]).length;return{total:ae,completed:Ne}})(),pe=q.length,fe=X.length,U=g.length,V=z.filter(E=>E.date===L),P=V.length>0&&U>0?V.length:0,ce=G.filter(E=>{const ae=z.find(Ne=>Ne.clientName===E.clientName&&Ne.date===E.date);return ae&&ae.date===L}).length,me=G.length,je={menu:pe,cooking:fe,ready:U,delivering:P,delivered:ce,history:me},ve={menu:pe>0,cooking:fe>0,ready:U>0,delivering:P>0&&U>0,delivered:ce>0,history:me>0},se=(()=>P>0&&U>0?"delivering":U>0?"ready":fe>0&&ne.completed<ne.total?"cooking":pe>0?"menu":null)();return e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-4 mb-6",children:e.jsx("div",{className:"flex items-center justify-between overflow-x-auto",children:Fs.map((E,ae)=>{const Ne=E.icon,O=je[E.id],re=ve[E.id],w=se===E.id;return e.jsxs(qs.Fragment,{children:[ae>0&&e.jsx("div",{className:"flex-shrink-0 h-1 w-8 mx-1",style:{backgroundColor:ve[Fs[ae-1].id]?"#3d59ab":"#e5e7eb"}}),e.jsxs("div",{className:"flex flex-col items-center flex-shrink-0 px-2",children:[e.jsxs("div",{className:"relative w-12 h-12 rounded-full flex items-center justify-center transition-all cursor-pointer",style:{backgroundColor:re?"#3d59ab":"#e5e7eb",color:re?"white":"#9ca3af",boxShadow:w?"0 0 0 3px white, 0 0 0 6px #ffd700":"none"},onClick:()=>te&&te(Rt[E.id]),children:[e.jsx(Ne,{size:24}),O>0&&e.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full text-xs font-bold flex items-center justify-center",style:{backgroundColor:w?"#ffd700":"#22c55e",color:w?"#423d3c":"white"},children:O>99?"99+":O})]}),e.jsx("span",{className:`text-xs mt-2 text-center whitespace-nowrap font-medium ${re?"":"text-gray-400"}`,style:{color:re?"#3d59ab":void 0},children:E.label})]})]},E.id)})})})}function Ft(){const[I,S]=u.useState(ht),[g,z]=u.useState([]),[G,L]=u.useState([]),[te,q]=u.useState(new Date().toISOString().split("T")[0]),[X,ee]=u.useState(gt),[ne,pe]=u.useState(pt),[fe,U]=u.useState(_s),[V,P]=u.useState(ft),[B,ce]=u.useState([]),[me,je]=u.useState(bt),[ve,De]=u.useState(null),[se,E]=u.useState(null),[ae,Ne]=u.useState(null),[O,re]=u.useState([]),[w,ye]=u.useState({}),[J,oe]=u.useState([]),[xe,c]=u.useState({}),[h,k]=u.useState([]),[p,f]=u.useState(ws),[j,R]=u.useState([]),[Ce,W]=u.useState({}),[K,Me]=u.useState([]),[We,Te]=u.useState({}),[ze,ts]=u.useState([]),[Ee,Oe]=u.useState({routeStartAddress:""}),[ke,ns]=u.useState([]),[_e,$e]=u.useState([]),[le,de]=u.useState({}),[Le,vs]=u.useState(Es());u.useEffect(()=>{const s=()=>{const l=localStorage.getItem("goldfinchChefData");if(l)try{const r=JSON.parse(l);r.recipes&&S(r.recipes),r.clients&&ee(r.clients),r.menuItems&&z(r.menuItems),r.masterIngredients&&ce(r.masterIngredients),r.orderHistory&&oe(r.orderHistory),r.weeklyTasks&&c(r.weeklyTasks),r.drivers&&k(r.drivers),r.deliveryLog&&R(r.deliveryLog),r.bagReminders&&W(r.bagReminders),r.readyForDelivery&&Me(r.readyForDelivery),r.clientPortalData&&Te(r.clientPortalData),r.blockedDates&&ts(r.blockedDates),r.adminSettings&&Oe(r.adminSettings),r.customTasks&&ns(r.customTasks),r.groceryBills&&$e(r.groceryBills),r.weeks&&de(r.weeks)}catch(r){console.error("Error loading saved data:",r)}};s();const t=l=>{l.key==="goldfinchChefData"&&s()},a=()=>{s()},n=()=>{document.visibilityState==="visible"&&s()};return window.addEventListener("storage",t),window.addEventListener("goldfinchDataUpdated",a),document.addEventListener("visibilitychange",n),()=>{window.removeEventListener("storage",t),window.removeEventListener("goldfinchDataUpdated",a),document.removeEventListener("visibilitychange",n)}},[]),u.useEffect(()=>{const s={recipes:I,clients:X,menuItems:g,masterIngredients:B,orderHistory:J,weeklyTasks:xe,drivers:h,deliveryLog:j,bagReminders:Ce,readyForDelivery:K,clientPortalData:We,blockedDates:ze,adminSettings:Ee,customTasks:ke,groceryBills:_e,weeks:le,lastSaved:new Date().toISOString()};localStorage.setItem("goldfinchChefData",JSON.stringify(s))},[I,X,g,B,J,xe,h,j,Ce,K,We,ze,Ee,ke,_e,le]);const Ze=s=>!s||s.length<2?[]:B.filter(t=>{const a=Ts(s,t.name);return a>.7&&a<1}),Se=s=>B.find(t=>Cs(t.name)===Cs(s)),qe=()=>{const s=new Set;return B.forEach(t=>{t.source&&t.source.trim()&&s.add(t.source.trim())}),Array.from(s).sort()},Ue=s=>{if(!s.name)return;const t=Se(s.name);if(t){(s.cost||s.source||s.section!=="Other")&&ce(a=>a.map(n=>n.id===t.id?{...n,cost:s.cost||n.cost,source:s.source||n.source,section:s.section!=="Other"?s.section:n.section}:n));return}ce(a=>[...a,{id:Date.now()+Math.random(),name:s.name,cost:s.cost||"",unit:s.unit||"oz",source:s.source||"",section:s.section||"Other"}])},He=(s,t)=>{const a=Se(s);return a&&t?(ce(n=>n.map(l=>l.id===a.id?{...l,cost:t}:l)),!0):!1},xs=()=>{let s=0,t=0;const a={...I};return Object.keys(a).forEach(n=>{a[n]=a[n].map(l=>{const r=l.ingredients.map(C=>{const i=Se(C.name);if(i){const H={...C};return i.cost&&i.cost!==C.cost&&(H.cost=i.cost,t++),i.source&&i.source!==C.source&&(H.source=i.source),i.section&&i.section!=="Other"&&i.section!==C.section&&(H.section=i.section),i.unit&&i.unit!==C.unit&&(H.unit=i.unit),H}else if(C.name)return s++,C;return C});return{...l,ingredients:r}})}),Object.values(a).forEach(n=>{n.forEach(l=>{l.ingredients.forEach(r=>{r.name&&!Se(r.name)&&Ue(r)})})}),S(a),{ingredientsAdded:s,costsUpdated:t}},as=(s,t)=>{const a=B.find(r=>r.id===s),n=B.find(r=>r.id===t);if(!a||!n)return;const l={...I};Object.keys(l).forEach(r=>{l[r]=l[r].map(C=>({...C,ingredients:C.ingredients.map(i=>Cs(i.name)===Cs(n.name)?{...i,name:a.name}:i)}))}),S(l),ce(r=>r.filter(C=>C.id!==t)),re(r=>r.filter(C=>C.ing1.id!==t&&C.ing2.id!==t)),alert(`Merged "${n.name}" into "${a.name}"`)},hs=()=>{const s=[],t=new Set;B.forEach((a,n)=>{B.forEach((l,r)=>{if(n>=r)return;const C=[a.id,l.id].sort().join("-");if(t.has(C))return;t.add(C);const i=Ts(a.name,l.name);i>.7&&i<1&&s.push({ing1:a,ing2:l,similarity:i})})}),re(s),s.length===0&&alert("No duplicate ingredients found!")},Ge=s=>s!=null&&s.ingredients?s.ingredients.reduce((t,a)=>{const n=Se(a.name),l=parseFloat((n==null?void 0:n.cost)||a.cost||0),r=parseFloat(a.quantity||0);return t+l*r},0):0,Ns=()=>{const s={};let t=0;return Object.entries(I).forEach(([a,n])=>{s[a]=n.length,t+=n.length}),s.total=t,s},Je=u.useCallback(s=>{if(le[s])return le[s];const t=ss(s);return de(a=>({...a,[s]:t})),t},[le]),rs=u.useCallback(()=>Je(Le),[Le,Je]),Ye=u.useCallback(s=>{const t=le[s]||ss(s);if(t.status==="locked")return t;const a=Ys(t,g,X);return de(n=>({...n,[s]:a})),a},[le,g,X]),os=u.useCallback(s=>{const t=le[s];if(!t||t.status!=="locked")return null;const a=Qs(t);return de(n=>({...n,[s]:a})),a},[le]),ls=u.useCallback((s,t)=>{de(a=>{const n=a[s]||ss(s);return{...a,[s]:{...n,...t}}})},[]),gs=u.useCallback((s,t,a)=>{de(n=>{const l=n[s]||ss(s);return{...n,[s]:{...l,kdsStatus:{...l.kdsStatus,[t]:{status:a,completedAt:a==="complete"?new Date().toISOString():null}}}}})},[]),cs=u.useCallback((s,t)=>{de(a=>{const n=a[s]||ss(s);return{...a,[s]:{...n,readyForDelivery:[...n.readyForDelivery,...t]}}})},[]),is=u.useCallback((s,t)=>{de(a=>{const n=a[s]||ss(s);return{...a,[s]:{...n,deliveryLog:[...n.deliveryLog,t]}}})},[]),ps=u.useCallback((s,t)=>{de(a=>{const n=a[s];return n?{...a,[s]:{...n,readyForDelivery:n.readyForDelivery.filter(l=>l.id!==t)}}:a})},[]),ds=u.useCallback((s,t)=>{de(a=>{const n=a[s]||ss(s);return{...a,[s]:{...n,groceryBills:[...n.groceryBills,t]}}})},[]),fs=u.useCallback(s=>{const t=le[s];if(!t||t.status!=="locked")return!1;const a=Es();return s<a},[le]),Qe=u.useCallback(()=>Object.keys(le).sort().reverse(),[le]);return{recipes:I,setRecipes:S,menuItems:g,setMenuItems:z,selectedClients:G,setSelectedClients:L,menuDate:te,setMenuDate:q,clients:X,setClients:ee,newClient:ne,setNewClient:pe,newRecipe:fe,setNewRecipe:U,newMenuItem:V,setNewMenuItem:P,masterIngredients:B,setMasterIngredients:ce,newIngredient:me,setNewIngredient:je,editingRecipe:ve,setEditingRecipe:De,editingIngredientId:se,setEditingIngredientId:E,editingIngredientData:ae,setEditingIngredientData:Ne,duplicateWarnings:O,setDuplicateWarnings:re,completedDishes:w,setCompletedDishes:ye,orderHistory:J,setOrderHistory:oe,weeklyTasks:xe,setWeeklyTasks:c,drivers:h,setDrivers:k,newDriver:p,setNewDriver:f,deliveryLog:j,setDeliveryLog:R,bagReminders:Ce,setBagReminders:W,readyForDelivery:K,setReadyForDelivery:Me,clientPortalData:We,setClientPortalData:Te,blockedDates:ze,setBlockedDates:ts,adminSettings:Ee,setAdminSettings:Oe,customTasks:ke,setCustomTasks:ns,groceryBills:_e,setGroceryBills:$e,weeks:le,setWeeks:de,selectedWeekId:Le,setSelectedWeekId:vs,findSimilarIngredients:Ze,findExactMatch:Se,addToMasterIngredients:Ue,updateMasterIngredientCost:He,syncRecipeIngredientsFromMaster:xs,getUniqueVendors:qe,mergeIngredients:as,scanForDuplicates:hs,getRecipeCost:Ge,getRecipeCounts:Ns,getOrCreateWeek:Je,getCurrentWeek:rs,lockWeekAndSnapshot:Ye,unlockWeekById:os,updateWeekData:ls,updateWeekKdsStatus:gs,addReadyForDeliveryToWeek:cs,addDeliveryLogToWeek:is,removeReadyForDeliveryFromWeek:ps,addGroceryBillToWeek:ds,isWeekReadOnly:fs,getWeekIds:Qe}}const Pt={protein:{label:"Proteins",color:"#dc2626"},veg:{label:"Veggies",color:"#16a34a"},starch:{label:"Starch",color:"#ca8a04"},extras:{label:"Extras",color:"#7c3aed"}},Ps={monTue:{label:"Monday/Tuesday Production",deliveries:"For Mon & Tue deliveries",icon:"ðŸ³"},thursday:{label:"Thursday Production",deliveries:"For Thu deliveries",icon:"ðŸ³"}};function Mt({dishName:I,data:S,recipe:g,isComplete:z,isExpanded:G,onToggleExpand:L,onToggleComplete:te}){return e.jsxs("div",{className:`border-2 rounded-lg overflow-hidden transition-all ${z?"opacity-60":""}`,style:{borderColor:z?"#22c55e":"#ebb582"},children:[e.jsx("div",{className:"p-3 cursor-pointer select-none",style:{backgroundColor:z?"#dcfce7":"#f9f9ed"},onClick:L,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-bold truncate",style:{color:"#3d59ab"},children:I}),e.jsxs("p",{className:"text-xl font-bold",style:{color:z?"#22c55e":"#3d59ab"},children:[S.totalPortions," ",e.jsx("span",{className:"text-xs font-normal text-gray-500",children:"portions"})]})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[z&&e.jsx(Ke,{size:18,className:"text-green-600"}),G?e.jsx(Xs,{size:18,className:"text-gray-400"}):e.jsx(et,{size:18,className:"text-gray-400"})]})]})}),G&&e.jsxs("div",{className:"p-3 border-t text-sm",style:{borderColor:"#ebb582"},children:[e.jsx("p",{className:"text-xs text-gray-500 mb-3",children:S.clients.map(q=>`${q.name} (${q.portions})`).join(", ")}),e.jsxs("button",{onClick:q=>{q.stopPropagation(),te()},className:`w-full mb-3 px-3 py-2 rounded-lg flex items-center justify-center gap-2 font-medium text-sm ${z?"bg-green-500 text-white":"bg-gray-100 hover:bg-gray-200"}`,children:[e.jsx(Ke,{size:16}),z?"Completed":"Mark Complete"]}),(g==null?void 0:g.ingredients)&&g.ingredients.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Ingredients:"}),e.jsx("div",{className:"space-y-1",children:g.ingredients.map((q,X)=>e.jsxs("div",{className:"flex justify-between text-xs p-1.5 rounded",style:{backgroundColor:"#f9f9ed"},children:[e.jsx("span",{children:q.name}),e.jsxs("span",{className:"font-bold",children:[(parseFloat(q.quantity)*S.totalPortions).toFixed(1)," ",q.unit||"oz"]})]},X))})]}),(g==null?void 0:g.instructions)&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Instructions:"}),e.jsx("p",{className:"text-xs p-2 rounded",style:{backgroundColor:"#fff4e0"},children:g.instructions})]})]})]})}function Ms({productionDay:I,config:S,data:g,recipes:z,completedDishes:G,expandedTiles:L,onToggleExpand:te,onToggleComplete:q,onCompleteAll:X}){const ee=[];["protein","veg","starch","extras"].forEach(U=>{Object.entries(g[U]||{}).forEach(([V,P])=>{ee.push({dishName:V,...P,categoryType:U})})});const ne=ee.filter(U=>G[U.dishName]).length,pe=ee.length>0&&ne===ee.length;return ee.length>0?e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 pb-3 border-b-2",style:{borderColor:"#ebb582"},children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-bold flex items-center gap-2",style:{color:"#3d59ab"},children:[e.jsx("span",{children:S.icon}),S.label]}),e.jsx("p",{className:"text-sm text-gray-500",children:S.deliveries})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-sm text-gray-600",children:[ne,"/",ee.length," done"]}),pe&&e.jsxs("button",{onClick:X,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white text-sm",style:{backgroundColor:"#22c55e"},children:[e.jsx(Ke,{size:16}),"Ready for Delivery"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:["protein","veg","starch","extras"].map(U=>{const V=Object.entries(g[U]||{}),P=Pt[U];return V.length===0?null:e.jsxs("div",{children:[e.jsx("div",{className:"text-center py-2 px-3 rounded-t-lg mb-2 font-bold text-white text-sm",style:{backgroundColor:P.color},children:P.label}),e.jsx("div",{className:"space-y-3",children:V.map(([B,ce])=>{var ve;let me=null;const je=ce.category;if(je&&z[je]&&(me=z[je].find(De=>De.name===B)),!me)for(const De of["protein","veg","starch","sauces","breakfast","soups"]){const se=(ve=z[De])==null?void 0:ve.find(E=>E.name===B);if(se){me=se;break}}return e.jsx(Mt,{dishName:B,data:ce,recipe:me,isComplete:G[B],isExpanded:L[B],onToggleExpand:()=>te(B),onToggleComplete:()=>q(B)},B)})})]},U)})})]}):null}function Wt({menuItems:I,recipes:S,completedDishes:g,toggleDishComplete:z,allDishesComplete:G,completeAllOrders:L,getKDSView:te}){const[q,X]=u.useState({}),ee=te(),ne=V=>{X(P=>({...P,[V]:!P[V]}))},pe=["protein","veg","starch","extras"].some(V=>{var P;return Object.keys(((P=ee.monTue)==null?void 0:P[V])||{}).length>0}),fe=["protein","veg","starch","extras"].some(V=>{var P;return Object.keys(((P=ee.thursday)==null?void 0:P[V])||{}).length>0}),U=pe||fe;return e.jsxs("div",{children:[e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Kitchen Display"}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Dishes grouped by production day and category"})]}),I.length>0&&G()&&e.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#22c55e"},children:[e.jsx(Ke,{size:18}),"Complete All & Ready for Delivery"]})]})}),U?e.jsxs(e.Fragment,{children:[pe&&e.jsx(Ms,{productionDay:"monTue",config:Ps.monTue,data:ee.monTue,recipes:S,completedDishes:g,expandedTiles:q,onToggleExpand:ne,onToggleComplete:z,onCompleteAll:L}),fe&&e.jsx(Ms,{productionDay:"thursday",config:Ps.thursday,data:ee.thursday,recipes:S,completedDishes:g,expandedTiles:q,onToggleExpand:ne,onToggleComplete:z,onCompleteAll:L})]}):e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(vt,{size:48,className:"mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No dishes to cook yet"}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Approved menus for this week will appear here when ready for cooking."})]})})]})}const Ws="goldfinchShopData",zs="goldfinchShopChecked",$s="goldfinchShopOverrides",ms=["Sunday","Tuesday","Thursday"],zt=["Produce","Meat & Seafood","Dairy & Eggs","Pantry","Frozen","Bakery","Beverages","Spices & Seasonings","Oils & Vinegars","Canned Goods","Grains & Pasta","Other"],$t=["Grocery Store","Costco","Restaurant Depot","Farmers Market","Specialty Store","Online","Other"];function Lt({prepList:I,shoppingListsByDay:S={},exportPrepList:g}){const[z,G]=u.useState(()=>{try{const c=localStorage.getItem(zs);return c?JSON.parse(c):{}}catch{return{}}}),[L,te]=u.useState(()=>{try{const c=localStorage.getItem(Ws);if(c){const h=JSON.parse(c),k={};return ms.forEach(p=>{k[p]=(h[p]||[]).filter(f=>f.manual)}),k}}catch{}return{Sunday:[],Tuesday:[],Thursday:[]}}),[q,X]=u.useState(""),[ee,ne]=u.useState(null),[pe,fe]=u.useState(null),[U,V]=u.useState(()=>{try{const c=localStorage.getItem($s);return c?JSON.parse(c):{}}catch{return{}}});u.useEffect(()=>{localStorage.setItem($s,JSON.stringify(U))},[U]),u.useEffect(()=>{localStorage.setItem(zs,JSON.stringify(z))},[z]),u.useEffect(()=>{const c={};ms.forEach(h=>{const k=(S[h]||[]).map(p=>({...p,id:`auto-${p.name}-${p.unit}`,manual:!1}));c[h]=[...k,...L[h]||[]]}),localStorage.setItem(Ws,JSON.stringify(c))},[L,S]);const P=(c,h)=>`${c}-${h}`,B=c=>{const h=(S[c]||[]).map(p=>{const f=`auto-${p.name}-${p.unit}`,j=P(c,f),R=U[j]||{};return{...p,id:f,dayItemId:j,manual:!1,checked:z[j]||!1,section:R.section||p.section,source:R.source||p.source,originalSection:p.section,originalSource:p.source,hasOverride:!!(R.section||R.source)}}),k=(L[c]||[]).map(p=>{const f=P(c,p.id),j=U[f]||{};return{...p,dayItemId:f,checked:z[f]||!1,section:j.section||p.section,source:j.source||p.source,originalSection:p.section,originalSource:p.source,hasOverride:!!(j.section||j.source)}});return[...h,...k]},ce=(c,h,k)=>{const p=P(c,h.id);V(f=>({...f,[p]:{...f[p],section:k}}))},me=(c,h,k)=>{const p=P(c,h.id);V(f=>({...f,[p]:{...f[p],source:k}}))},je=(c,h)=>{const k=P(c,h.id);V(p=>{const f={...p};return delete f[k],f})},ve=c=>{const h=B(c),k=new Set(h.map(f=>f.section).filter(Boolean)),p=new Set([...zt,...k]);return Array.from(p).sort()},De=c=>{const h=B(c),k=new Set(h.map(f=>f.source).filter(Boolean)),p=new Set([...$t,...k]);return Array.from(p).sort()},se=c=>{G(h=>({...h,[c]:!h[c]}))},E=c=>{if(!q.trim())return;const h={id:`manual-${Date.now()}-${Math.random()}`,name:q.trim(),quantity:null,unit:"",section:"Manual Items",source:"",manual:!0};te(k=>({...k,[c]:[...k[c]||[],h]})),X(""),ne(null)},ae=(c,h)=>{te(p=>({...p,[c]:(p[c]||[]).filter(f=>f.id!==h)}));const k=P(c,h);G(p=>{const f={...p};return delete f[k],f})},Ne=(c,h,k)=>{if(c!==k){if(h.manual){te(j=>({...j,[c]:(j[c]||[]).filter(R=>R.id!==h.id),[k]:[...j[k]||[],h]}));const p=P(c,h.id),f=P(k,h.id);G(j=>{const R={...j};return R[p]&&(R[f]=!0,delete R[p]),R})}else{const p={id:`manual-moved-${Date.now()}-${Math.random()}`,name:h.name,quantity:h.quantity,unit:h.unit,section:h.section,source:h.source||"Moved",manual:!0};te(j=>({...j,[k]:[...j[k]||[],p]}));const f=P(c,h.id);G(j=>({...j,[f]:!0}))}fe(null)}},O=c=>{const h=B(c),k=h.filter(f=>f.checked).map(f=>f.dayItemId),p=h.filter(f=>f.checked).map(f=>f.id);te(f=>({...f,[c]:(f[c]||[]).filter(j=>!p.includes(j.id))})),G(f=>{const j={...f};return k.forEach(R=>delete j[R]),j})},re=()=>{window.confirm("Clear all checked items?")&&G({})},w=c=>{const h=B(c),k=h.filter(p=>p.checked).length;return{total:h.length,checked:k}},ye=c=>{const h=B(c),k={};return h.forEach((p,f)=>{const j=p.source||"Other",R=p.section||"Other";k[j]||(k[j]={}),k[j][R]||(k[j][R]=[]),k[j][R].push({...p,originalIndex:f})}),k},J=c=>c==="Sunday"?"For Monday deliveries":c==="Tuesday"?"For Tuesday deliveries":c==="Thursday"?"For Thursday deliveries":"",oe=ms.reduce((c,h)=>c+w(h).total,0),xe=ms.reduce((c,h)=>c+w(h).checked,0);return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Shopping Lists"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Auto-generated from approved menus â€¢ ",xe,"/",oe," items checked"]})]}),e.jsxs("div",{className:"flex gap-2",children:[xe>0&&e.jsxs("button",{onClick:re,className:"px-4 py-2 rounded-lg border-2 flex items-center gap-2",style:{borderColor:"#ebb582",color:"#423d3c"},children:[e.jsx(Os,{size:18}),"Reset Checks"]}),e.jsxs("button",{onClick:g,className:"px-4 py-2 rounded-lg text-white flex items-center gap-2",style:{backgroundColor:"#3d59ab"},children:[e.jsx(st,{size:18}),"Export All"]})]})]}),oe===0&&e.jsxs("div",{className:"text-center py-8 mb-4 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[e.jsx("p",{className:"text-gray-500",children:"No shopping items yet"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Approve menus in Menu Planner to auto-generate shopping lists"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:ms.map(c=>{const h=w(c),k=ye(c),p=Object.keys(k).sort(),f=ms.filter(j=>j!==c);return e.jsxs("div",{className:"border-2 rounded-lg overflow-hidden",style:{borderColor:"#ebb582"},children:[e.jsxs("div",{className:"p-4 flex justify-between items-center",style:{backgroundColor:"#3d59ab"},children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-white",children:c}),e.jsx("p",{className:"text-xs text-white/70",children:J(c)}),e.jsxs("p",{className:"text-sm text-white/80 mt-1",children:[h.checked,"/",h.total," done"]})]}),e.jsx("div",{className:"flex gap-2",children:h.checked>0&&e.jsx("button",{onClick:()=>O(c),className:"p-2 rounded bg-white/20 hover:bg-white/30 text-white",title:"Remove checked items",children:e.jsx(Bs,{size:16})})})]}),e.jsx("div",{className:"p-4 max-h-[500px] overflow-y-auto",style:{backgroundColor:"#f9f9ed"},children:h.total===0?e.jsx("p",{className:"text-gray-500 text-center py-4",children:"No items for this day"}):p.map(j=>e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-bold text-sm mb-2",style:{color:"#3d59ab"},children:j}),Object.entries(k[j]).map(([R,Ce])=>e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:R}),Ce.map(W=>e.jsxs("div",{className:`flex items-center gap-2 p-2 rounded mb-1 group ${W.checked?"opacity-50":""}`,style:{backgroundColor:"white"},children:[e.jsx("button",{onClick:()=>se(W.dayItemId),className:`w-5 h-5 rounded border-2 flex items-center justify-center flex-shrink-0 ${W.checked?"bg-green-500 border-green-500":"border-gray-300 bg-white hover:border-green-400"}`,children:W.checked&&e.jsx(Ke,{size:12,className:"text-white"})}),e.jsxs("span",{className:`flex-1 text-sm ${W.checked?"line-through text-gray-400":""}`,children:[W.name,W.hasOverride&&e.jsx("span",{className:"ml-1 text-xs text-purple-500",title:"Reorganized",children:"â€¢"})]}),W.quantity!=null&&e.jsxs("span",{className:`text-xs font-medium ${W.checked?"text-gray-400":"text-gray-600"}`,children:[typeof W.quantity=="number"?W.quantity.toFixed(1):W.quantity," ",W.unit]}),!W.checked&&e.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100",children:[e.jsxs("select",{className:"text-xs p-1 rounded border border-gray-300 bg-white cursor-pointer",style:{maxWidth:"80px"},value:W.section||"",onChange:K=>{K.target.value&&ce(c,W,K.target.value)},title:"Change section",children:[e.jsx("option",{value:"",disabled:!0,children:"Section..."}),ve(c).map(K=>e.jsx("option",{value:K,children:K},K))]}),e.jsxs("select",{className:"text-xs p-1 rounded border border-gray-300 bg-white cursor-pointer",style:{maxWidth:"80px"},value:W.source||"",onChange:K=>{K.target.value&&me(c,W,K.target.value)},title:"Change store/vendor",children:[e.jsx("option",{value:"",disabled:!0,children:"Store..."}),De(c).map(K=>e.jsx("option",{value:K,children:K},K))]}),e.jsxs("select",{className:"text-xs p-1 rounded border border-gray-300 bg-white cursor-pointer",style:{maxWidth:"70px"},value:"",onChange:K=>{K.target.value&&Ne(c,W,K.target.value)},title:"Move to another day",children:[e.jsx("option",{value:"",children:"Day..."}),f.map(K=>e.jsx("option",{value:K,children:K},K))]}),W.hasOverride&&e.jsx("button",{onClick:()=>je(c,W),className:"p-1 rounded hover:bg-gray-100",title:"Reset to original section/store",children:e.jsx(Os,{size:12,className:"text-gray-400"})})]}),W.manual&&e.jsx("button",{onClick:()=>ae(c,W.id),className:"opacity-0 group-hover:opacity-100 p-1 rounded hover:bg-red-100",title:"Remove item",children:e.jsx(Vs,{size:14,className:"text-red-400"})})]},W.dayItemId))]},R))]},j))}),e.jsx("div",{className:"p-3 border-t",style:{borderColor:"#ebb582"},children:ee===c?e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:q,onChange:j=>X(j.target.value),onKeyPress:j=>j.key==="Enter"&&E(c),placeholder:"Item name...",className:"flex-1 px-3 py-2 border rounded text-sm",autoFocus:!0}),e.jsx("button",{onClick:()=>E(c),className:"px-3 py-2 rounded text-white text-sm",style:{backgroundColor:"#3d59ab"},children:"Add"}),e.jsx("button",{onClick:()=>{ne(null),X("")},className:"px-3 py-2 rounded border text-sm",children:"Cancel"})]}):e.jsxs("button",{onClick:()=>ne(c),className:"w-full flex items-center justify-center gap-2 py-2 rounded text-sm hover:bg-gray-100",style:{color:"#3d59ab"},children:[e.jsx(Ks,{size:16}),"Add Item"]})})]},c)})})]})})}const Ut=({activeView:I,setActiveView:S})=>e.jsx("div",{className:"flex rounded-lg overflow-hidden border-2 flex-wrap",style:{borderColor:"#ebb582"},children:[{id:"week",label:"Week View",icon:Ct},{id:"plan",label:"Plan Routes",icon:Is},{id:"progress",label:"Live Progress",icon:kt},{id:"log",label:"Delivery Log",icon:yt},{id:"bags",label:"Bags Summary",icon:js},{id:"drivers",label:"Drivers",icon:Dt}].map(g=>e.jsxs("button",{onClick:()=>S(g.id),className:`flex items-center gap-2 px-4 py-2 font-medium transition-colors ${I===g.id?"text-white":"bg-white"}`,style:I===g.id?{backgroundColor:"#3d59ab"}:{color:"#423d3c"},children:[e.jsx(g.icon,{size:18}),g.label]},g.id))}),Re=({label:I,children:S})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium mb-1",style:{color:"#423d3c"},children:I}),S]}),Ae="p-2 border-2 rounded-lg",Fe={borderColor:"#ebb582"},Ls="goldfinchRouteOrder",Us="goldfinchSavedRoutes";function Bt({clients:I,drivers:S,setDrivers:g,newDriver:z,setNewDriver:G,deliveryLog:L=[],setDeliveryLog:te,bagReminders:q={},setBagReminders:X,readyForDelivery:ee=[],setReadyForDelivery:ne,orderHistory:pe=[],setOrderHistory:fe,selectedWeekId:U,weeks:V={},addDeliveryLogToWeek:P,removeReadyForDeliveryFromWeek:B,isReadOnly:ce=!1,menuItems:me=[],clientPortalData:je={},saveDriverRoutes:ve}){const[De,se]=u.useState(()=>{try{const s=localStorage.getItem(Us);return s?JSON.parse(s):{}}catch{return{}}}),E=s=>{se(s),localStorage.setItem(Us,JSON.stringify(s))},[ae,Ne]=u.useState("week"),[O,re]=u.useState(new Date().toISOString().split("T")[0]),[w,ye]=u.useState(null),[J,oe]=u.useState(null),[xe,c]=u.useState(()=>{try{const s=localStorage.getItem(Ls);return s?JSON.parse(s):{}}catch{return{}}}),h=s=>{c(s),localStorage.setItem(Ls,JSON.stringify(s))},[k,p]=u.useState(null),[f,j]=u.useState(null),[R,Ce]=u.useState(z||{...ws}),[W,K]=u.useState(""),[Me,We]=u.useState(""),[Te,ze]=u.useState(""),[ts,Ee]=u.useState(!1),[Oe,ke]=u.useState(()=>{try{return localStorage.getItem("goldfinchStartingAddress")||""}catch{return""}}),ns=s=>{ke(s),localStorage.setItem("goldfinchStartingAddress",s)},_e=[];for(let s=9;s<=18;s++)for(let t=0;t<60&&!(s===18&&t>0);t+=30){const a=s>12?s-12:s,n=s>=12?"PM":"AM",l=t===30?s+1>12?s+1-12:s+1:s>12?s-12:s,r=t===30?"00":"30",C=t===30&&s+1>=12?"PM":n,i=`${a}:${t.toString().padStart(2,"0")} ${n} - ${l}:${r} ${C}`;_e.push({value:`${s}:${t.toString().padStart(2,"0")}`,label:i})}const $e=new Date(O+"T12:00:00").toLocaleDateString("en-US",{weekday:"long"}),de=(s=>ee.filter(t=>t.date===s))(O),Le=s=>s!=null&&s.contacts&&s.contacts.length>0?s.contacts:[{name:(s==null?void 0:s.name)||"",email:(s==null?void 0:s.email)||"",phone:(s==null?void 0:s.phone)||"",address:(s==null?void 0:s.address)||""}],Ze=(()=>{const s=[...new Set(de.map(a=>a.clientName))],t=[];return s.forEach(a=>{const n=I.find(M=>M.name===a);if(n!=null&&n.pickup)return;const l=de.filter(M=>M.clientName===a),r=Le(n),C=r.filter(M=>M.address),i={};C.forEach((M,A)=>{const _=M.address.toLowerCase().trim();i[_]||(i[_]={address:M.address,contacts:[],originalIndex:A}),i[_].contacts.push(M)});const H=Object.values(i);H.length===0?t.push({...n,name:a,orders:l,zone:(n==null?void 0:n.zone)||"Unassigned",address:"",displayName:(n==null?void 0:n.displayName)||a,pickup:!1,contactNames:r.map(M=>M.name).filter(Boolean),contactPhones:r.map(M=>M.phone).filter(Boolean),contactIndex:0,totalStops:1,stopKey:a}):H.forEach((M,A)=>{t.push({...n,name:a,orders:l,zone:(n==null?void 0:n.zone)||"Unassigned",address:M.address,displayName:(n==null?void 0:n.displayName)||a,pickup:!1,contactNames:M.contacts.map(_=>_.name).filter(Boolean),contactPhones:M.contacts.map(_=>_.phone).filter(Boolean),contactEmails:M.contacts.map(_=>_.email).filter(Boolean),contactIndex:A,totalStops:H.length,stopKey:H.length>1?`${a}-${A}`:a})})}),t})(),Se={};Ve.forEach(s=>{Se[s]=Ze.filter(t=>t.zone===s)});const qe=Ze.filter(s=>!s.zone||!Ve.includes(s.zone));qe.length>0&&(Se.Unassigned=qe);const Ue=s=>S.find(t=>t.zone===s),He=(s,t,a=0)=>L.find(n=>n.date===s&&n.clientName===t&&(n.contactIndex===a||n.contactIndex===void 0&&a===0)),xs=(s,t,a=0,n="",l=null,r="",C=!1)=>{if(ce)return;const i=Ue(t),H={id:Date.now(),date:O,clientName:s,contactIndex:a,contactName:n,zone:t,driverName:(i==null?void 0:i.name)||"Unknown",completedAt:new Date().toISOString(),problem:l,problemNote:r,bagsReturned:C};te([...L,H]),U&&P&&P(U,H);const M=I.find(y=>y.name===s),Be=Le(M).filter(y=>y.address).length||1;if(L.filter(y=>y.date===O&&y.clientName===s).length+1>=Be){const y=ee.filter(v=>v.clientName===s&&v.date===O);y.length>0&&(fe(v=>[...v,...y]),ne(v=>v.filter(F=>!(F.clientName===s&&F.date===O))),U&&B&&y.forEach(v=>{B(U,v.id)}))}},as=s=>{te(L.map(t=>t.id===s?{...t,bagsReturned:!t.bagsReturned}:t))},hs=s=>{X({...q,[s]:!q[s]})},Ge=()=>{const s={};return[...L].sort((a,n)=>new Date(n.completedAt)-new Date(a.completedAt)).forEach(a=>{s[a.clientName]||(s[a.clientName]=a)}),Object.values(s).filter(a=>!a.bagsReturned).sort((a,n)=>new Date(a.completedAt)-new Date(n.completedAt))},Ns=s=>{const t=L.find(a=>a.id===s);if(t){const a=pe.filter(n=>n.clientName===t.clientName&&n.date===t.date);a.length>0&&(ne(n=>[...n,...a]),fe(n=>n.filter(l=>!(l.clientName===t.clientName&&l.date===t.date))))}te(L.filter(a=>a.id!==s))},Je=()=>{const s=[...new Set(de.map(n=>n.clientName))],t=[...new Set(L.filter(n=>n.date===O).map(n=>n.clientName))];return[...new Set([...s,...t])].map(n=>{const l=I.find(r=>r.name===n);return{name:n,zone:(l==null?void 0:l.zone)||"Unassigned",displayName:(l==null?void 0:l.displayName)||n,pickup:(l==null?void 0:l.pickup)||!1}}).filter(n=>!n.pickup)},rs=()=>{const s={},t=Je();return Ve.forEach(a=>{const n=Ue(a);if(!n)return;const l=t.filter(A=>A.zone===a);if(l.length===0)return;const r=l.filter(A=>He(O,A.name)),C=r.filter(A=>{const _=He(O,A.name);return _==null?void 0:_.problem}),i=L.filter(A=>A.date===O&&A.zone===a).sort((A,_)=>new Date(_.completedAt)-new Date(A.completedAt))[0],M=Ze.filter(A=>A.zone===a).find(A=>!He(O,A.name));s[n.name]={driver:n,zone:a,total:l.length,completed:r.length,problems:C.length,lastCompletedAt:i==null?void 0:i.completedAt,lastClientName:i==null?void 0:i.clientName,currentStop:M}}),s},Ye=()=>L.filter(s=>!(W&&s.date!==W||Me&&s.driverName!==Me||Te&&s.zone!==Te||ts&&!s.problem)).sort((s,t)=>new Date(t.completedAt)-new Date(s.completedAt)),os=Object.entries(Se).filter(([s,t])=>t.length>0),ls=(s,t)=>{var l;const a=(l=xe[O])==null?void 0:l[s];return!a||a.length===0?t:[...t].sort((r,C)=>{const i=r.stopKey||r.name,H=C.stopKey||C.name,M=a.indexOf(i),A=a.indexOf(H);return M!==-1&&A!==-1?M-A:M===-1&&A!==-1?1:M!==-1&&A===-1?-1:0})},gs=(s,t,a)=>{ye({zone:t,clientName:a}),s.dataTransfer.effectAllowed="move"},cs=(s,t,a)=>{s.preventDefault(),w&&w.zone===t&&w.clientName!==a&&oe({zone:t,clientName:a})},is=()=>oe(null),ps=(s,t,a)=>{if(s.preventDefault(),!w||w.zone!==t||w.clientName===a){ye(null),oe(null);return}const n=Se[t]||[],r=ls(t,n).map(_=>_.stopKey||_.name),C=r.indexOf(w.clientName),i=r.indexOf(a);if(C===-1||i===-1){ye(null),oe(null);return}const H=[...r],[M]=H.splice(C,1);H.splice(i,0,M);const A={...xe,[O]:{...xe[O]||{},[t]:H}};h(A),ye(null),oe(null)},ds=()=>{ye(null),oe(null)},fs=s=>{const t=Se[s]||[],n=ls(s,t).filter(l=>l.address).map(l=>encodeURIComponent(l.address));if(Oe&&n.unshift(encodeURIComponent(Oe)),n.length===0){alert("No addresses found for this zone");return}window.open(`https://www.google.com/maps/dir/${n.join("/")}`,"_blank")},Qe=s=>s?new Date(s).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"}):"";return e.jsxs("div",{className:"space-y-6",children:[ce&&e.jsxs("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-lg p-4 flex items-center gap-3",children:[e.jsx(ys,{size:24,className:"text-amber-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-amber-800",children:"Viewing Past Week (Read-only)"}),e.jsx("p",{className:"text-sm text-amber-600",children:"This week is locked and cannot be modified."})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ds,{size:28,style:{color:"#3d59ab"}}),e.jsx("h2",{className:"text-2xl font-bold",style:{color:"#3d59ab"},children:"Deliveries"})]}),e.jsx(Ut,{activeView:ae,setActiveView:Ne})]})}),ae==="plan"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsx("div",{className:"flex items-center justify-between flex-wrap gap-4",children:e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Delivery Date:"}),e.jsx("input",{type:"date",value:O,onChange:s=>re(s.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}})]}),e.jsxs("p",{className:"text-gray-600 mt-2",children:[$e," â€¢ ",Ze.length," orders ready for delivery"]})]})})}),os.length===0&&e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[e.jsxs("p",{className:"text-gray-500 italic",children:["No orders ready for delivery on ",O]}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:"Complete orders in KDS to see them here."})]}),os.map(([s,t])=>{const a=s!=="Unassigned"?Ue(s):null,n=ls(s,t);return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Is,{size:24,style:{color:"#3d59ab"}}),e.jsxs("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:["Zone ",s," (",t.length," stops)"]}),a&&e.jsx("span",{className:"text-sm px-3 py-1 rounded-full text-white ml-2",style:{backgroundColor:"#3d59ab"},children:a.name})]}),e.jsxs("button",{onClick:()=>fs(s),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#27ae60"},children:[e.jsx(Nt,{size:18}),"Google Maps"]})]}),e.jsxs("p",{className:"text-sm text-gray-500 mb-3 flex items-center gap-2",children:[e.jsx(Ss,{size:16})," Drag to reorder stops"]}),e.jsx("div",{className:"space-y-2",children:n.map((l,r)=>{const C=l.stopKey||l.name,i=He(O,l.name,l.contactIndex||0),H=(w==null?void 0:w.zone)===s&&(w==null?void 0:w.clientName)===C,M=(J==null?void 0:J.zone)===s&&(J==null?void 0:J.clientName)===C,A=l.totalStops>1,_=l.contactNames||[],Be=l.contactPhones||[];return e.jsxs("div",{draggable:!0,onDragStart:x=>gs(x,s,C),onDragOver:x=>cs(x,s,C),onDragLeave:is,onDrop:x=>ps(x,s,C),onDragEnd:ds,className:`border-2 rounded-lg p-3 flex items-center gap-3 cursor-move transition-all ${H?"opacity-50":""} ${i?"bg-green-50":""}`,style:{borderColor:i?"#22c55e":M?"#3d59ab":"#ebb582"},children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400",children:[e.jsx(Ss,{size:20}),e.jsx("span",{className:"font-bold text-lg w-6 text-center",style:{color:"#3d59ab"},children:r+1})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h4",{className:"font-bold",children:l.displayName||l.name}),A&&e.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-purple-100 text-purple-700",children:["Stop ",l.contactIndex+1,"/",l.totalStops]}),_.length>0&&_.some(x=>x&&x!==l.name)&&e.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-blue-100 text-blue-700 flex items-center gap-1",children:[e.jsx(Rs,{size:12})," ",_.filter(Boolean).join(", ")]}),i&&e.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-green-100 text-green-700 flex items-center gap-1",children:[e.jsx(Ke,{size:12})," ",Qe(i.completedAt)]}),i&&e.jsxs("span",{className:`text-xs px-2 py-1 rounded flex items-center gap-1 ${i.bagsReturned?"bg-green-100 text-green-700":"bg-amber-100 text-amber-700"}`,children:[e.jsx(js,{size:12})," ",i.bagsReturned?"Bags returned":"No bags"]}),(i==null?void 0:i.problem)&&e.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-red-100 text-red-700 flex items-center gap-1",children:[e.jsx(ys,{size:12})," ",i.problem]})]}),l.address&&e.jsxs("a",{href:`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent(l.address)}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 hover:underline truncate flex items-center gap-1",onClick:x=>x.stopPropagation(),children:[e.jsx(Is,{size:12}),l.address]}),Be.length>0&&e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1 mt-1",children:[e.jsx(As,{size:12})," ",Be.join(", ")]}),l.orders&&l.orders.length>0&&l.contactIndex===0&&e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:l.orders.map(x=>`${x.portions}p: ${x.dishes.join(", ")}`).join(" | ")})]}),!i&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>xs(l.name,s,l.contactIndex||0,_.join(", "),null,"",!0),className:"px-3 py-1 rounded text-sm text-white flex items-center gap-1",style:{backgroundColor:"#22c55e"},children:[e.jsx(js,{size:14})," + Bags"]}),e.jsx("button",{onClick:()=>xs(l.name,s,l.contactIndex||0,_.join(", "),null,"",!1),className:"px-3 py-1 rounded text-sm bg-gray-200",children:"No Bags"})]}),i&&!i.bagsReturned&&e.jsx("button",{onClick:()=>as(i.id),className:"px-2 py-1 rounded text-xs bg-amber-100 text-amber-700",children:"Mark bags returned"})]},C)})})]},s)})]}),ae==="progress"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:"Date:"}),e.jsx("input",{type:"date",value:O,onChange:s=>re(s.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}})]}),e.jsx("p",{className:"text-gray-600",children:$e})]})}),Object.entries(rs()).map(([s,t])=>{const a=t.total>0?Math.round(t.completed/t.total*100):0;return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Rs,{size:24,style:{color:"#3d59ab"}}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:s}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Zone ",t.zone]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-2xl font-bold",style:{color:a===100?"#22c55e":"#3d59ab"},children:[t.completed,"/",t.total]}),e.jsx("p",{className:"text-sm text-gray-600",children:"stops completed"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-500",style:{width:`${a}%`,backgroundColor:a===100?"#22c55e":"#3d59ab"}})}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[a,"% complete"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Stop"}),e.jsx("p",{className:"font-bold",style:{color:"#3d59ab"},children:t.currentStop?t.currentStop.displayName||t.currentStop.name:"Complete!"})]}),e.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Last Completion"}),e.jsx("p",{className:"font-bold",style:{color:"#3d59ab"},children:t.lastCompletedAt?Qe(t.lastCompletedAt):"N/A"})]}),e.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:"#f9f9ed"},children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Last Client"}),e.jsx("p",{className:"font-bold",style:{color:"#3d59ab"},children:t.lastClientName||"N/A"})]}),e.jsxs("div",{className:"p-3 rounded-lg",style:{backgroundColor:t.problems>0?"#fef2f2":"#f9f9ed"},children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Problems"}),e.jsxs("p",{className:"font-bold flex items-center gap-1",style:{color:t.problems>0?"#dc2626":"#3d59ab"},children:[t.problems>0&&e.jsx(ys,{size:16}),t.problems]})]})]}),t.problems>0&&e.jsxs("div",{className:"mt-4 p-3 rounded-lg bg-red-50 border border-red-200",children:[e.jsx("p",{className:"font-medium text-red-700 mb-2",children:"Flagged Problems:"}),L.filter(n=>n.date===O&&n.zone===t.zone&&n.problem).map(n=>e.jsxs("div",{className:"text-sm text-red-600 flex items-center gap-2",children:[e.jsx(ys,{size:14}),e.jsxs("span",{className:"font-medium",children:[n.clientName,":"]}),e.jsx("span",{children:n.problem}),n.problemNote&&e.jsxs("span",{className:"text-red-500",children:["- ",n.problemNote]})]},n.id))]})]},s)}),Object.keys(rs()).length===0&&e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:e.jsx("p",{className:"text-gray-500",children:"No drivers assigned to zones with deliveries today."})})]}),ae==="log"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h3",{className:"font-bold mb-4",style:{color:"#3d59ab"},children:"Filters"}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date"}),e.jsx("input",{type:"date",value:W,onChange:s=>K(s.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Driver"}),e.jsxs("select",{value:Me,onChange:s=>We(s.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:[e.jsx("option",{value:"",children:"All Drivers"}),S.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id||s.name))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Zone"}),e.jsxs("select",{value:Te,onChange:s=>ze(s.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"},children:[e.jsx("option",{value:"",children:"All Zones"}),Ve.map(s=>e.jsxs("option",{value:s,children:["Zone ",s]},s))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("label",{className:"flex items-center gap-2 p-2",children:[e.jsx("input",{type:"checkbox",checked:ts,onChange:s=>Ee(s.target.checked),className:"w-5 h-5",style:{accentColor:"#3d59ab"}}),e.jsx("span",{className:"font-medium",children:"Problems Only"})]})}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:()=>{K(""),We(""),ze(""),Ee(!1)},className:"px-4 py-2 rounded-lg bg-gray-200",children:"Clear Filters"})})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("h3",{className:"font-bold mb-4",style:{color:"#3d59ab"},children:["Delivery Log (",Ye().length," entries)"]}),Ye().length>0?e.jsx("div",{className:"space-y-2",children:Ye().map(s=>e.jsxs("div",{className:`border-2 rounded-lg p-3 flex items-center justify-between ${s.problem?"bg-red-50":""}`,style:{borderColor:s.problem?"#fca5a5":"#ebb582"},children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center min-w-[80px]",children:[e.jsx("p",{className:"text-sm text-gray-500",children:s.date}),e.jsx("p",{className:"font-bold",style:{color:"#3d59ab"},children:Qe(s.completedAt)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:s.clientName}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Zone ",s.zone," â€¢ ",s.driverName]})]}),s.problem&&e.jsxs("div",{className:"flex items-center gap-2 text-red-600",children:[e.jsx(ys,{size:16}),e.jsx("span",{className:"font-medium",children:s.problem}),s.problemNote&&e.jsxs("span",{className:"text-sm",children:["- ",s.problemNote]})]})]}),e.jsx("button",{onClick:()=>Ns(s.id),className:"text-sm px-3 py-1 rounded bg-gray-100 text-gray-600 hover:bg-gray-200",children:"Undo"})]},s.id))}):e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No delivery log entries match the filters."})]})]}),ae==="bags"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(js,{size:24,style:{color:"#3d59ab"}}),e.jsx("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:"Outstanding Bags"})]}),e.jsx("p",{className:"text-gray-600",children:"Clients who haven't returned bags on their last delivery"})]}),Ge().length>0?e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("div",{className:"space-y-3",children:Ge().map(s=>{const t=I.find(n=>n.name===s.clientName),a=q[s.clientName];return e.jsxs("div",{className:`border-2 rounded-lg p-4 flex items-center justify-between ${a?"bg-green-50":"bg-amber-50"}`,style:{borderColor:a?"#22c55e":"#f59e0b"},children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg",children:(t==null?void 0:t.displayName)||s.clientName}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Last delivery: ",s.date," â€¢ Zone ",s.zone]}),(t==null?void 0:t.phone)&&e.jsxs("p",{className:"text-sm text-gray-500 flex items-center gap-1",children:[e.jsx(As,{size:14})," ",t.phone]})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a||!1,onChange:()=>hs(s.clientName),className:"w-5 h-5",style:{accentColor:"#3d59ab"}}),e.jsxs("span",{className:"text-sm font-medium flex items-center gap-1",children:[e.jsx(wt,{size:16}),"Reminder Sent"]})]}),e.jsx("button",{onClick:()=>as(s.id),className:"px-4 py-2 rounded-lg text-white text-sm",style:{backgroundColor:"#22c55e"},children:"Mark Returned"})]})]},s.id)})}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Total outstanding: ",e.jsx("span",{className:"font-bold",children:Ge().length})," clients"," ","â€¢"," ","Reminders sent: ",e.jsx("span",{className:"font-bold",children:Ge().filter(s=>q[s.clientName]).length})]})})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 text-center",children:[e.jsx(js,{size:48,className:"mx-auto mb-4 text-green-300"}),e.jsx("p",{className:"text-gray-500",children:"All bags have been returned!"}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"No outstanding bags from recent deliveries."})]})]}),ae==="week"&&(()=>{const t=(()=>{const x=new Date(O+"T12:00:00"),y=x.getDay(),v=x.getDate()-y+(y===0?-6:1),F=new Date(x.setDate(v));return{monday:F.toISOString().split("T")[0],tuesday:new Date(new Date(F).setDate(F.getDate()+1)).toISOString().split("T")[0],thursday:new Date(new Date(F).setDate(F.getDate()+3)).toISOString().split("T")[0]}})(),a=(x,y)=>L.some(v=>v.clientName===x&&v.date===y)?{status:"delivered",label:"Delivered",color:"#22c55e",bgColor:"#dcfce7"}:ee.some(v=>v.clientName===x&&v.date===y)?{status:"ready",label:"Ready",color:"#f59e0b",bgColor:"#fef3c7"}:me.some(v=>v.clientName===x&&v.approved&&v.date===y)?{status:"kds",label:"In KDS",color:"#3b82f6",bgColor:"#dbeafe"}:me.some(v=>v.clientName===x&&!v.approved&&v.date===y)?{status:"pending",label:"Menu Pending",color:"#6b7280",bgColor:"#f3f4f6"}:{status:"none",label:"No Menu",color:"#9ca3af",bgColor:"#f9fafb"},n=(x,y)=>{const v=[],F=new Set;return I.forEach($=>{var Y,Z,we,he;if($.status!=="active"||$.pickup||F.has($.name))return;let T=!1;$.deliveryDay===x&&(T=!0),!T&&((Y=$.deliveryDates)==null?void 0:Y.length)>0&&$.deliveryDates.includes(y)&&(T=!0);const D=je[$.name];if(!T&&((Z=D==null?void 0:D.selectedDates)==null?void 0:Z.length)>0&&D.selectedDates.includes(y)&&(T=!0),T){F.add($.name);const ge=$.contacts||[],o=((we=ge.find(b=>b.address))==null?void 0:we.address)||$.address||"",m=a($.name,y),d=ee.filter(b=>b.clientName===$.name&&b.date===y);v.push({clientName:$.name,displayName:$.displayName||$.name,zone:$.zone||"Unassigned",address:o,phone:((he=ge[0])==null?void 0:he.phone)||$.phone||"",orders:d,stopKey:$.name,...m})}}),v},l=(x,y,v)=>{var $;const F=($=xe[x])==null?void 0:$[y];return!F||F.length===0?v:[...v].sort((T,D)=>{const Y=F.indexOf(T.stopKey),Z=F.indexOf(D.stopKey);return Y!==-1&&Z!==-1?Y-Z:Y===-1&&Z!==-1?1:Y!==-1&&Z===-1?-1:0})},r=(x,y,v,F)=>{ye({date:y,zone:v,clientName:F}),x.dataTransfer.effectAllowed="move"},C=(x,y,v,F)=>{x.preventDefault(),w&&w.date===y&&w.zone===v&&w.clientName!==F&&oe({date:y,zone:v,clientName:F})},i=(x,y,v,F,$)=>{if(x.preventDefault(),!w||w.date!==y||w.zone!==v||w.clientName===F){ye(null),oe(null);return}const T=n($,y).filter(m=>m.zone===v),Y=l(y,v,T).map(m=>m.stopKey),Z=Y.indexOf(w.clientName),we=Y.indexOf(F);if(Z===-1||we===-1){ye(null),oe(null);return}const he=[...Y],[ge]=he.splice(Z,1);he.splice(we,0,ge);const o={...xe,[y]:{...xe[y]||{},[v]:he}};h(o),ye(null),oe(null)},H=(x,y,v)=>{const F=S.find(Z=>Z.zone===y);if(!F){alert("No driver assigned to this zone");return}const $=v.filter(Z=>Z.status==="ready");if($.length===0){alert("No clients are ready for delivery in this zone yet.");return}const T=l(x,y,$),D={date:x,zone:y,driverName:F.name,driverId:F.id,stops:T.map((Z,we)=>({order:we+1,clientName:Z.clientName,displayName:Z.displayName,address:Z.address,phone:Z.phone,dishes:Z.orders.flatMap(he=>he.dishes||[]),portions:Z.orders.reduce((he,ge)=>he+(ge.portions||0),0)})),savedAt:new Date().toISOString()},Y={...De,[`${x}-${y}`]:D};E(Y),ve&&ve(Y),alert(`Route saved for ${F.name} on ${x}!
${$.length} stop(s) ready for delivery.
The driver can now view this route in the Driver Portal.`)},M=(x,y,v)=>{const F=n(v,x).filter(D=>D.zone===y),T=l(x,y,F).filter(D=>D.address).map(D=>encodeURIComponent(D.address));if(Oe&&T.unshift(encodeURIComponent(Oe)),T.length===0){alert("No addresses found for this zone");return}window.open(`https://www.google.com/maps/dir/${T.join("/")}`,"_blank")},A=[{name:"Monday",date:t.monday},{name:"Tuesday",date:t.tuesday},{name:"Thursday",date:t.thursday}],_=A.reduce((x,y)=>x+n(y.name,y.date).length,0),Be=A.reduce((x,y)=>x+n(y.name,y.date).filter(v=>v.status==="ready").length,0);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",style:{color:"#3d59ab"},children:"Week Deliveries"}),e.jsxs("p",{className:"text-gray-600",children:[_," scheduled â€¢ ",Be," ready for delivery"]})]}),e.jsx("div",{children:e.jsx("input",{type:"date",value:O,onChange:x=>re(x.target.value),className:"p-2 border-2 rounded-lg",style:{borderColor:"#ebb582"}})})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#22c55e"}}),"Delivered"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#f59e0b"}}),"Ready"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#3b82f6"}}),"In KDS"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#6b7280"}}),"Menu Pending"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:"#9ca3af"}}),"No Menu"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:A.map(x=>{const y=n(x.name,x.date),v={};Ve.forEach(D=>{const Y=y.filter(Z=>Z.zone===D);Y.length>0&&(v[D]=Y)});const F=y.filter(D=>!D.zone||!Ve.includes(D.zone));F.length>0&&(v.Unassigned=F);const $=Object.keys(v),T=y.filter(D=>D.status==="ready").length;return e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg",style:{color:"#3d59ab"},children:x.name}),e.jsx("p",{className:"text-sm text-gray-500",children:new Date(x.date+"T12:00:00").toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-2xl font-bold",style:{color:T>0?"#22c55e":"#3d59ab"},children:y.length}),e.jsx("p",{className:"text-xs text-gray-500",children:T>0?`${T} ready`:"scheduled"})]})]}),e.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:y.length===0?e.jsxs("div",{className:"text-center py-4",children:[e.jsx(Ds,{size:32,className:"mx-auto mb-2 text-gray-300"}),e.jsx("p",{className:"text-gray-400 text-sm italic",children:"No deliveries scheduled"})]}):$.map(D=>{const Y=v[D],Z=l(x.date,D,Y),we=D!=="Unassigned"?S.find(o=>o.zone===D):null,he=De[`${x.date}-${D}`],ge=Y.filter(o=>o.status==="ready").length;return e.jsxs("div",{className:"border-2 rounded-lg p-3",style:{borderColor:he?"#22c55e":"#ebb582"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"font-bold text-sm",style:{color:"#3d59ab"},children:["Zone ",D]}),we&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-purple-100 text-purple-700",children:we.name}),he&&e.jsxs("span",{className:"text-xs px-2 py-0.5 rounded-full bg-green-100 text-green-700 flex items-center gap-1",children:[e.jsx(Ke,{size:10})," Saved"]})]}),e.jsxs("span",{className:"text-xs text-gray-500",children:[Y.length," stops ",ge>0&&`(${ge} ready)`]})]}),e.jsxs("p",{className:"text-xs text-gray-400 mb-2 flex items-center gap-1",children:[e.jsx(Ss,{size:12})," Drag to reorder route"]}),e.jsx("div",{className:"space-y-1 mb-3",children:Z.map((o,m)=>{const d=(w==null?void 0:w.date)===x.date&&(w==null?void 0:w.zone)===D&&(w==null?void 0:w.clientName)===o.stopKey,b=(J==null?void 0:J.date)===x.date&&(J==null?void 0:J.zone)===D&&(J==null?void 0:J.clientName)===o.stopKey;return e.jsxs("div",{draggable:o.status!=="delivered",onDragStart:N=>r(N,x.date,D,o.stopKey),onDragOver:N=>C(N,x.date,D,o.stopKey),onDragLeave:is,onDrop:N=>i(N,x.date,D,o.stopKey,x.name),onDragEnd:ds,className:`p-2 rounded text-sm flex items-center gap-2 ${o.status==="delivered"?"opacity-60":d?"opacity-50":"cursor-move"}`,style:{backgroundColor:o.bgColor,borderLeft:b?"3px solid #3d59ab":"3px solid transparent"},children:[e.jsx("span",{className:"font-bold text-xs w-5 text-center",style:{color:"#3d59ab"},children:m+1}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("span",{className:o.status==="delivered"?"line-through text-gray-400":"",children:o.displayName})}),e.jsx("span",{className:"text-xs px-1.5 py-0.5 rounded",style:{backgroundColor:o.color+"20",color:o.color},children:o.label}),o.status!=="delivered"&&e.jsx(Ss,{size:14,className:"text-gray-300"})]},o.stopKey)})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>H(x.date,D,Y),disabled:ge===0,className:`flex-1 flex items-center justify-center gap-1 px-2 py-1.5 rounded text-white text-xs ${ge===0?"opacity-50 cursor-not-allowed":""}`,style:{backgroundColor:"#3d59ab"},title:ge===0?"No clients ready for delivery":"Save route to driver portal",children:[e.jsx(tt,{size:12}),"Save Route ",ge>0&&`(${ge})`]}),e.jsx("button",{onClick:()=>M(x.date,D,x.name),className:"flex items-center justify-center gap-1 px-2 py-1.5 rounded text-white text-xs",style:{backgroundColor:"#27ae60"},title:"Open in Google Maps",children:e.jsx(Et,{size:12})})]})]},D)})})]},x.name)})})]})})(),ae==="drivers"&&(()=>{const s=()=>{if(!R.name){alert("Please enter a driver name");return}g&&g([...S,{...R,id:Date.now()}]),Ce({...ws}),G&&G({...ws})},t=r=>{window.confirm("Delete this driver?")&&g&&g(S.filter((C,i)=>i!==r))},a=r=>{p(r),j({...S[r]})},n=()=>{p(null),j(null)},l=()=>{if(g){const r=[...S];r[k]=f,g(r)}p(null),j(null)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:"Route Settings"}),e.jsx(Re,{label:"Starting Address (for all routes)",children:e.jsx("input",{type:"text",value:Oe,onChange:r=>ns(r.target.value),placeholder:"e.g., 123 Kitchen St, City, State",className:Ae+" w-full md:w-1/2",style:Fe})}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This address will be used as the starting point when generating Google Maps routes."})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:"Add Driver"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Re,{label:"Driver Name",children:e.jsx("input",{type:"text",value:R.name,onChange:r=>Ce({...R,name:r.target.value}),placeholder:"Enter driver name",className:Ae,style:Fe})}),e.jsx(Re,{label:"Phone",children:e.jsx("input",{type:"tel",value:R.phone||"",onChange:r=>Ce({...R,phone:r.target.value}),placeholder:"Phone number",className:Ae,style:Fe})}),e.jsx(Re,{label:"Zone",children:e.jsxs("select",{value:R.zone||"",onChange:r=>Ce({...R,zone:r.target.value}),className:Ae,style:Fe,children:[e.jsx("option",{value:"",children:"Unassigned"}),Ve.map(r=>e.jsxs("option",{value:r,children:["Zone ",r]},r))]})}),e.jsx(Re,{label:"Access Code",children:e.jsx("input",{type:"text",value:R.accessCode||"",onChange:r=>Ce({...R,accessCode:r.target.value}),placeholder:"Access code",className:Ae,style:Fe})})]}),e.jsxs("button",{onClick:s,className:"mt-4 px-6 py-2 rounded-lg text-white flex items-center gap-2",style:{backgroundColor:"#3d59ab"},children:[e.jsx(Ks,{size:20}),"Add Driver"]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("h3",{className:"text-xl font-bold mb-4",style:{color:"#3d59ab"},children:["Drivers (",S.length,")"]}),S.length>0?e.jsx("div",{className:"space-y-3",children:S.map((r,C)=>e.jsx("div",{children:k===C?e.jsxs("div",{className:"border-2 rounded-lg p-4",style:{borderColor:"#3d59ab",backgroundColor:"#f9f9ed"},children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(Re,{label:"Driver Name",children:e.jsx("input",{type:"text",value:f.name,onChange:i=>j({...f,name:i.target.value}),className:Ae,style:Fe})}),e.jsx(Re,{label:"Phone",children:e.jsx("input",{type:"tel",value:f.phone||"",onChange:i=>j({...f,phone:i.target.value}),className:Ae,style:Fe})}),e.jsx(Re,{label:"Zone",children:e.jsxs("select",{value:f.zone||"",onChange:i=>j({...f,zone:i.target.value}),className:Ae,style:Fe,children:[e.jsx("option",{value:"",children:"Unassigned"}),Ve.map(i=>e.jsxs("option",{value:i,children:["Zone ",i]},i))]})}),e.jsx(Re,{label:"Access Code",children:e.jsx("input",{type:"text",value:f.accessCode||"",onChange:i=>j({...f,accessCode:i.target.value}),className:Ae,style:Fe})})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs("button",{onClick:l,className:"flex items-center gap-1 px-4 py-2 rounded-lg text-white",style:{backgroundColor:"#3d59ab"},children:[e.jsx(Ke,{size:18}),"Save"]}),e.jsxs("button",{onClick:n,className:"flex items-center gap-1 px-4 py-2 rounded-lg bg-gray-200",children:[e.jsx(Vs,{size:18}),"Cancel"]})]})]}):e.jsxs("div",{className:"border-2 rounded-lg p-4 flex justify-between",style:{borderColor:"#ebb582"},children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h4",{className:"font-bold text-lg",children:r.name}),r.zone&&e.jsxs("span",{className:"text-xs px-2 py-1 rounded bg-purple-100 text-purple-700",children:["Zone ",r.zone]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[r.phone&&`Phone: ${r.phone}`,r.phone&&r.accessCode&&" â€¢ ",r.accessCode&&`Code: ${r.accessCode}`]})]}),e.jsxs("div",{className:"flex gap-2 self-start ml-4",children:[e.jsx("button",{onClick:()=>a(C),className:"text-blue-600",children:e.jsx(nt,{size:18})}),e.jsx("button",{onClick:()=>t(C),className:"text-red-600",children:e.jsx(Bs,{size:18})})]})]})},r.id||C))}):e.jsx("p",{className:"text-gray-500",children:"No drivers yet. Add your first driver above."})]})]})})()]})}function Gt(){Hs();const[I,S]=u.useState("kds"),{recipes:g,setRecipes:z,menuItems:G,setMenuItems:L,selectedClients:te,setSelectedClients:q,menuDate:X,setMenuDate:ee,clients:ne,setClients:pe,newClient:fe,setNewClient:U,newRecipe:V,setNewRecipe:P,newMenuItem:B,setNewMenuItem:ce,masterIngredients:me,setMasterIngredients:je,newIngredient:ve,setNewIngredient:De,editingRecipe:se,setEditingRecipe:E,editingIngredientId:ae,setEditingIngredientId:Ne,editingIngredientData:O,setEditingIngredientData:re,duplicateWarnings:w,setDuplicateWarnings:ye,completedDishes:J,setCompletedDishes:oe,orderHistory:xe,setOrderHistory:c,weeklyTasks:h,setWeeklyTasks:k,drivers:p,setDrivers:f,newDriver:j,setNewDriver:R,deliveryLog:Ce,setDeliveryLog:W,bagReminders:K,setBagReminders:Me,readyForDelivery:We,setReadyForDelivery:Te,clientPortalData:ze,setClientPortalData:ts,weeks:Ee,setWeeks:Oe,selectedWeekId:ke,setSelectedWeekId:ns,findSimilarIngredients:_e,findExactMatch:$e,addToMasterIngredients:le,updateMasterIngredientCost:de,syncRecipeIngredientsFromMaster:Le,getUniqueVendors:vs,mergeIngredients:Ze,scanForDuplicates:Se,getRecipeCost:qe,getRecipeCounts:Ue,getOrCreateWeek:He,getCurrentWeek:xs,lockWeekAndSnapshot:as,unlockWeekById:hs,updateWeekData:Ge,updateWeekKdsStatus:Ns,addReadyForDeliveryToWeek:Je,addDeliveryLogToWeek:rs,removeReadyForDeliveryFromWeek:Ye,isWeekReadOnly:os,getWeekIds:ls}=Ft(),gs=u.useRef(),cs=u.useRef(),is=u.useRef(),ps=o=>{const m=o.target.files[0];if(m){try{lt(m,d=>{if(console.log("Parsed clients:",d),d.length===0){alert(`No subscriptions found in CSV. Please check the file format.

Expected columns: Name, Display Name, Address, Email, Phone, Portions, Meals, etc.`);return}const b=d.reduce((N,Q)=>{var ue;return N+(((ue=Q.contacts)==null?void 0:ue.length)||0)},0);pe(d),alert(`Import successful!

${d.length} subscription(s) imported
${b} contact(s) total`)},d=>{console.error("CSV parse error:",d),alert("Error parsing CSV: "+(d.message||d))})}catch(d){console.error("Import error:",d),alert("Error importing CSV: "+d.message)}o.target.value=""}},ds=o=>{const m=o.target.files[0];m&&(ct(m,d=>{if(d.length===0){alert("No ingredients found in CSV. Please check the file format.");return}je(d),alert(`Import successful!

${d.length} ingredient(s) imported`)},d=>alert("Error parsing CSV: "+d.message)),o.target.value="")},fs=o=>{const m=o.target.files[0];m&&(it(m,(d,b)=>{const N=Object.values(d).flat().length;if(N===0){alert("No recipes found in CSV. Please check the file format.");return}z(d),b.forEach(Q=>le(Q)),alert(`Import successful!

${N} recipe(s) imported
${b.length} ingredient(s) added to master list`)},d=>alert("Error parsing CSV: "+d.message)),o.target.value="")},Qe=()=>{if(!V.name){alert("Please enter a recipe name");return}const o=V.ingredients.filter(m=>m.name&&m.quantity);if(o.length===0){alert("Please add at least one ingredient with name and quantity");return}o.forEach(m=>le(m)),z({...g,[V.category]:[...g[V.category],{name:V.name,instructions:V.instructions,ingredients:o}]}),P(_s),alert("Recipe saved!")},s=(o,m)=>{window.confirm("Delete this recipe?")&&z({...g,[o]:g[o].filter((d,b)=>b!==m)})},t=(o,m)=>{const d=g[o][m];E({category:o,index:m,recipe:{...d,ingredients:d.ingredients.map(b=>({name:b.name||"",quantity:b.quantity||"",unit:b.unit||"oz",cost:b.cost||"",source:b.source||"",section:b.section||"Other"}))}})},a=(o,m,d)=>{const b=[...se.recipe.ingredients];b[o][m]=d,E({...se,recipe:{...se.recipe,ingredients:b}})},n=()=>{E({...se,recipe:{...se.recipe,ingredients:[...se.recipe.ingredients,{name:"",quantity:"",unit:"oz",cost:"",source:"",section:"Other"}]}})},l=o=>{E({...se,recipe:{...se.recipe,ingredients:se.recipe.ingredients.filter((m,d)=>d!==o)}})},r=()=>{const{category:o,index:m,recipe:d}=se,b=d.ingredients.filter(Q=>Q.name&&Q.quantity);b.forEach(Q=>le(Q));const N={...g};N[o][m]={...d,ingredients:b},z(N),E(null),alert("Recipe updated!")},C=()=>{const o={};return G.forEach(m=>{o[m.clientName]||(o[m.clientName]=[]),o[m.clientName].push(m)}),o},i=()=>G.filter(o=>o.approved),H=()=>Z().filter(m=>m.approved),M=o=>o&&new Date(o+"T12:00:00").getDay()===4?"thursday":"monTue",A=()=>{const o={monTue:{protein:{},veg:{},starch:{},extras:{}},thursday:{protein:{},veg:{},starch:{},extras:{}}};return H().forEach(d=>{const b=M(d.date);["protein","veg","starch"].forEach(N=>{d[N]&&(o[b][N][d[N]]||(o[b][N][d[N]]={totalPortions:0,category:N,clients:[]}),o[b][N][d[N]].totalPortions+=d.portions,o[b][N][d[N]].clients.push({name:d.clientName,portions:d.portions,date:d.date}))}),d.extras&&d.extras.forEach(N=>{var ue,us;const Q=(ue=g.sauces)!=null&&ue.find(Ie=>Ie.name===N)?"sauces":(us=g.breakfast)!=null&&us.find(Ie=>Ie.name===N)?"breakfast":"soups";o[b].extras[N]||(o[b].extras[N]={totalPortions:0,category:Q,clients:[]}),o[b].extras[N].totalPortions+=d.portions,o[b].extras[N].clients.push({name:d.clientName,portions:d.portions,date:d.date})})}),o},_=o=>{oe(m=>({...m,[o]:!m[o]}))},Be=()=>{const o=A(),m=[];return["monTue","thursday"].forEach(d=>{["protein","veg","starch","extras"].forEach(b=>{Object.keys(o[d][b]).forEach(N=>{m.push(N)})})}),m.length>0&&m.every(d=>J[d])},x=()=>{if(!window.confirm("Mark all orders complete and move to Ready for Delivery?"))return;const o=C(),m=[];Object.entries(o).forEach(([b,N])=>{N.forEach(Q=>{const ue=[Q.protein,Q.veg,Q.starch,...Q.extras||[]].filter(Boolean);let us=0;ue.forEach(Ie=>{const bs=["protein","veg","starch","sauces","breakfast","soups"].find(ie=>{var be;return(be=g[ie])==null?void 0:be.find(es=>es.name===Ie)}),Xe=bs?g[bs].find(ie=>ie.name===Ie):null;Xe&&(us+=qe(Xe)*Q.portions)}),m.push({id:Date.now()+Math.random(),clientName:b,date:Q.date||X,dishes:ue,portions:Q.portions,cost:us})})});const d={};m.forEach(b=>{const N=ks(b.date);d[N]||(d[N]=[]),d[N].push(b)}),Object.entries(d).forEach(([b,N])=>{Je(b,N)}),Te(b=>[...b,...m]),L([]),oe({}),q([]),alert("Orders ready for delivery!")},y=()=>{const o={Sunday:{},Tuesday:{},Thursday:{}};H().forEach(b=>{const N=ne.find(Ie=>Ie.name===b.clientName||Ie.displayName===b.clientName),Q=(N==null?void 0:N.deliveryDay)||"";let ue="Sunday";Q==="Tuesday"?ue="Tuesday":Q==="Thursday"&&(ue="Thursday"),[b.protein,b.veg,b.starch,...b.extras||[]].filter(Boolean).forEach(Ie=>{const bs=["protein","veg","starch","sauces","breakfast","soups"].find(ie=>{var be;return(be=g[ie])==null?void 0:be.find(es=>es.name===Ie)}),Xe=bs?g[bs].find(ie=>ie.name===Ie):null;Xe!=null&&Xe.ingredients&&Xe.ingredients.forEach(ie=>{const be=$e(ie.name),es=`${ie.name}-${ie.unit||"oz"}`;o[ue][es]||(o[ue][es]={name:ie.name,quantity:0,unit:ie.unit||"oz",section:ie.section||(be==null?void 0:be.section)||dt(ie.name),cost:(be==null?void 0:be.cost)||ie.cost||"",source:(be==null?void 0:be.source)||ie.source||""}),o[ue][es].quantity+=parseFloat(ie.quantity||0)*(b.portions||1)})})});const d=b=>Object.values(b).sort((N,Q)=>{const ue=(N.source||"ZZZ").localeCompare(Q.source||"ZZZ");return ue!==0?ue:N.section.localeCompare(Q.section)});return{Sunday:d(o.Sunday),Tuesday:d(o.Tuesday),Thursday:d(o.Thursday)}},v=()=>{const o=y();return[...o.Sunday,...o.Tuesday,...o.Thursday]},F=()=>{const o=v();ut(mt.unparse(o.map(m=>({Source:m.source,Section:m.section,Ingredient:m.name,Quantity:m.quantity.toFixed(2),Unit:m.unit})),{columns:["Source","Section","Ingredient","Quantity","Unit"]}),"shopping-list.csv")},$=v(),T=Ee[ke]||null,D=os(ke),Y=o=>{const m=localStorage.getItem("goldfinchChefData");let d={};if(m)try{d=JSON.parse(m)}catch(N){console.error("Error parsing saved data:",N)}const b={...d,savedRoutes:o,lastSaved:new Date().toISOString()};localStorage.setItem("goldfinchChefData",JSON.stringify(b))},Z=()=>{var o;if((T==null?void 0:T.status)==="locked"&&((o=T.snapshot)!=null&&o.menu)){const m=[];return Object.entries(T.snapshot.menu).forEach(([d,b])=>{b.forEach(N=>{m.push({...N,clientName:d,approved:!0})})}),m}return G.filter(m=>ks(m.date)===ke)},we=()=>{var o;return((o=T==null?void 0:T.readyForDelivery)==null?void 0:o.length)>0?T.readyForDelivery:We.filter(m=>ks(m.date)===ke)},he=()=>{var o;return((o=T==null?void 0:T.deliveryLog)==null?void 0:o.length)>0?T.deliveryLog:Ce.filter(m=>ks(m.date)===ke)},ge=()=>(T==null?void 0:T.kdsStatus)||{};return e.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"#f9f9ed"},children:[e.jsx("input",{type:"file",ref:gs,onChange:ps,accept:".csv",className:"hidden"}),e.jsx("input",{type:"file",ref:cs,onChange:fs,accept:".csv",className:"hidden"}),e.jsx("input",{type:"file",ref:is,onChange:ds,accept:".csv",className:"hidden"}),e.jsx("header",{className:"text-white p-4",style:{backgroundColor:"#3d59ab"},children:e.jsxs("div",{className:"flex items-center justify-between max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Zs,{size:32,style:{color:"#ffd700"}}),e.jsx("h1",{className:"text-2xl font-bold",children:"Goldfinch Chef"})]}),e.jsxs(Gs,{to:"/admin",className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-white/20 hover:bg-white/30 transition-colors",children:[e.jsx(Tt,{size:20}),"Admin"]})]})}),e.jsx("nav",{className:"bg-white shadow-md sticky top-0 z-10",children:e.jsx("div",{className:"max-w-6xl mx-auto flex overflow-x-auto",children:e.jsx(Ot,{activeTab:I,setActiveTab:S})})}),e.jsxs("div",{className:"max-w-6xl mx-auto p-4 space-y-6",children:[["kds","deliveries"].includes(I)&&e.jsx(at,{selectedWeekId:ke,setSelectedWeekId:ns,weeks:Ee,onLockWeek:as,onUnlockWeek:hs}),["kds","deliveries"].includes(I)&&e.jsx(At,{menuItems:Z(),completedDishes:ge(),readyForDelivery:we(),deliveryLog:he(),orderHistory:xe,selectedDate:X,onNavigate:S}),I==="recipes"&&e.jsx(rt,{recipes:g,newRecipe:V,setNewRecipe:P,editingRecipe:se,setEditingRecipe:E,masterIngredients:me,recipesFileRef:cs,findExactMatch:$e,findSimilarIngredients:_e,getRecipeCost:qe,getRecipeCounts:Ue,saveRecipe:Qe,deleteRecipe:s,startEditingRecipe:t,saveEditingRecipe:r,updateEditingIngredient:a,addEditingIngredient:n,removeEditingIngredient:l,exportRecipesCSV:()=>ot(g),getUniqueVendors:vs,updateMasterIngredientCost:de,syncRecipeIngredientsFromMaster:Le}),I==="kds"&&e.jsx(Wt,{menuItems:i(),recipes:g,completedDishes:J,toggleDishComplete:_,allDishesComplete:Be,completeAllOrders:x,getKDSView:A}),I==="prep"&&e.jsx(Lt,{prepList:$,shoppingListsByDay:y(),exportPrepList:F}),I==="deliveries"&&e.jsx(Bt,{clients:ne,drivers:p,setDrivers:f,newDriver:j,setNewDriver:R,deliveryLog:he(),setDeliveryLog:W,bagReminders:K,setBagReminders:Me,readyForDelivery:we(),setReadyForDelivery:Te,orderHistory:xe,setOrderHistory:c,selectedWeekId:ke,weeks:Ee,addDeliveryLogToWeek:rs,removeReadyForDeliveryFromWeek:Ye,isReadOnly:D,menuItems:Z(),clientPortalData:ze,saveDriverRoutes:Y})]})]})}export{Gt as default};
